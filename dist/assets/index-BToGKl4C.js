const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-CLANYJEr.js","assets/mockData-meiYRdoj.js","assets/card-D3FJTV3E.js","assets/input-D88w0eFp.js","assets/label-4GA2Mnnj.js","assets/index-CpMpevxU.js","assets/Dashboard-DDEBP220.js","assets/db-nqeXl3hD.js","assets/log-out-DFYYjqEx.js","assets/createLucideIcon-DePTzsAY.js","assets/calendar-BPRpVTBD.js","assets/star-Cx72lV3h.js","assets/dollar-sign-CEozzTHh.js","assets/LecturerDetails-D4ilSt-H.js","assets/badge-93OQ6PlQ.js","assets/arrow-left-BUPTS_F6.js","assets/clock-izyGzFpI.js","assets/BookClass-CRh0FGPY.js","assets/index-C2-HvyGl.js","assets/index-Bym7oP2B.js","assets/index-BqcXzDUE.js","assets/index-DkKjMSK8.js","assets/credit-card-zELxOLdy.js","assets/MyBookings-WZtaDLdS.js","assets/tabs-DHqpCJ_0.js","assets/file-text-2p1esPSl.js","assets/Dashboard-CxOSyLIW.js","assets/users-CI1jHPHp.js","assets/settings-DrNu1FeT.js","assets/Availability-DKsTf_-q.js","assets/Dashboard-Xmbi_Dkn.js","assets/Dashboard-OKy4QlvB.js","assets/Dashboard-CTLDXwL4.js","assets/NotFound-Bt6lg0Av.js"])))=>i.map(i=>d[i]);
function N1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(n,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function VT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cm={exports:{}},Pu={},dm={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vw;function O1(){if(vw)return et;vw=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),g=Symbol.iterator;function E(D){return D===null||typeof D!="object"?null:(D=g&&D[g]||D["@@iterator"],typeof D=="function"?D:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,U={};function O(D,K,he){this.props=D,this.context=K,this.refs=U,this.updater=he||R}O.prototype.isReactComponent={},O.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},O.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function J(){}J.prototype=O.prototype;function G(D,K,he){this.props=D,this.context=K,this.refs=U,this.updater=he||R}var Z=G.prototype=new J;Z.constructor=G,V(Z,O.prototype),Z.isPureReactComponent=!0;var ae=Array.isArray,se=Object.prototype.hasOwnProperty,fe={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(D,K,he){var ve,Ee={},we=null,Ke=null;if(K!=null)for(ve in K.ref!==void 0&&(Ke=K.ref),K.key!==void 0&&(we=""+K.key),K)se.call(K,ve)&&!T.hasOwnProperty(ve)&&(Ee[ve]=K[ve]);var je=arguments.length-2;if(je===1)Ee.children=he;else if(1<je){for(var st=Array(je),Mt=0;Mt<je;Mt++)st[Mt]=arguments[Mt+2];Ee.children=st}if(D&&D.defaultProps)for(ve in je=D.defaultProps,je)Ee[ve]===void 0&&(Ee[ve]=je[ve]);return{$$typeof:n,type:D,key:we,ref:Ke,props:Ee,_owner:fe.current}}function P(D,K){return{$$typeof:n,type:D.type,key:K,ref:D.ref,props:D.props,_owner:D._owner}}function N(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function x(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(he){return K[he]})}var M=/\/+/g;function C(D,K){return typeof D=="object"&&D!==null&&D.key!=null?x(""+D.key):K.toString(36)}function Me(D,K,he,ve,Ee){var we=typeof D;(we==="undefined"||we==="boolean")&&(D=null);var Ke=!1;if(D===null)Ke=!0;else switch(we){case"string":case"number":Ke=!0;break;case"object":switch(D.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=D,Ee=Ee(Ke),D=ve===""?"."+C(Ke,0):ve,ae(Ee)?(he="",D!=null&&(he=D.replace(M,"$&/")+"/"),Me(Ee,K,he,"",function(Mt){return Mt})):Ee!=null&&(N(Ee)&&(Ee=P(Ee,he+(!Ee.key||Ke&&Ke.key===Ee.key?"":(""+Ee.key).replace(M,"$&/")+"/")+D)),K.push(Ee)),1;if(Ke=0,ve=ve===""?".":ve+":",ae(D))for(var je=0;je<D.length;je++){we=D[je];var st=ve+C(we,je);Ke+=Me(we,K,he,st,Ee)}else if(st=E(D),typeof st=="function")for(D=st.call(D),je=0;!(we=D.next()).done;)we=we.value,st=ve+C(we,je++),Ke+=Me(we,K,he,st,Ee);else if(we==="object")throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ke}function He(D,K,he){if(D==null)return D;var ve=[],Ee=0;return Me(D,ve,"","",function(we){return K.call(he,we,Ee++)}),ve}function ye(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(he){(D._status===0||D._status===-1)&&(D._status=1,D._result=he)},function(he){(D._status===0||D._status===-1)&&(D._status=2,D._result=he)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var Ne={current:null},ee={transition:null},pe={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:ee,ReactCurrentOwner:fe};function ne(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:He,forEach:function(D,K,he){He(D,function(){K.apply(this,arguments)},he)},count:function(D){var K=0;return He(D,function(){K++}),K},toArray:function(D){return He(D,function(K){return K})||[]},only:function(D){if(!N(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},et.Component=O,et.Fragment=t,et.Profiler=s,et.PureComponent=G,et.StrictMode=r,et.Suspense=f,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,et.act=ne,et.cloneElement=function(D,K,he){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ve=V({},D.props),Ee=D.key,we=D.ref,Ke=D._owner;if(K!=null){if(K.ref!==void 0&&(we=K.ref,Ke=fe.current),K.key!==void 0&&(Ee=""+K.key),D.type&&D.type.defaultProps)var je=D.type.defaultProps;for(st in K)se.call(K,st)&&!T.hasOwnProperty(st)&&(ve[st]=K[st]===void 0&&je!==void 0?je[st]:K[st])}var st=arguments.length-2;if(st===1)ve.children=he;else if(1<st){je=Array(st);for(var Mt=0;Mt<st;Mt++)je[Mt]=arguments[Mt+2];ve.children=je}return{$$typeof:n,type:D.type,key:Ee,ref:we,props:ve,_owner:Ke}},et.createContext=function(D){return D={$$typeof:l,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:a,_context:D},D.Consumer=D},et.createElement=S,et.createFactory=function(D){var K=S.bind(null,D);return K.type=D,K},et.createRef=function(){return{current:null}},et.forwardRef=function(D){return{$$typeof:c,render:D}},et.isValidElement=N,et.lazy=function(D){return{$$typeof:v,_payload:{_status:-1,_result:D},_init:ye}},et.memo=function(D,K){return{$$typeof:p,type:D,compare:K===void 0?null:K}},et.startTransition=function(D){var K=ee.transition;ee.transition={};try{D()}finally{ee.transition=K}},et.unstable_act=ne,et.useCallback=function(D,K){return Ne.current.useCallback(D,K)},et.useContext=function(D){return Ne.current.useContext(D)},et.useDebugValue=function(){},et.useDeferredValue=function(D){return Ne.current.useDeferredValue(D)},et.useEffect=function(D,K){return Ne.current.useEffect(D,K)},et.useId=function(){return Ne.current.useId()},et.useImperativeHandle=function(D,K,he){return Ne.current.useImperativeHandle(D,K,he)},et.useInsertionEffect=function(D,K){return Ne.current.useInsertionEffect(D,K)},et.useLayoutEffect=function(D,K){return Ne.current.useLayoutEffect(D,K)},et.useMemo=function(D,K){return Ne.current.useMemo(D,K)},et.useReducer=function(D,K,he){return Ne.current.useReducer(D,K,he)},et.useRef=function(D){return Ne.current.useRef(D)},et.useState=function(D){return Ne.current.useState(D)},et.useSyncExternalStore=function(D,K,he){return Ne.current.useSyncExternalStore(D,K,he)},et.useTransition=function(){return Ne.current.useTransition()},et.version="18.3.1",et}var ww;function xg(){return ww||(ww=1,dm.exports=O1()),dm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ew;function V1(){if(Ew)return Pu;Ew=1;var n=xg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,f,p){var v,g={},E=null,R=null;p!==void 0&&(E=""+p),f.key!==void 0&&(E=""+f.key),f.ref!==void 0&&(R=f.ref);for(v in f)r.call(f,v)&&!a.hasOwnProperty(v)&&(g[v]=f[v]);if(c&&c.defaultProps)for(v in f=c.defaultProps,f)g[v]===void 0&&(g[v]=f[v]);return{$$typeof:e,type:c,key:E,ref:R,props:g,_owner:s.current}}return Pu.Fragment=t,Pu.jsx=l,Pu.jsxs=l,Pu}var Iw;function L1(){return Iw||(Iw=1,cm.exports=V1()),cm.exports}var mi=L1(),Zd={},hm={exports:{}},mr={},fm={exports:{}},pm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw;function M1(){return Tw||(Tw=1,(function(n){function e(ee,pe){var ne=ee.length;ee.push(pe);e:for(;0<ne;){var D=ne-1>>>1,K=ee[D];if(0<s(K,pe))ee[D]=pe,ee[ne]=K,ne=D;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var pe=ee[0],ne=ee.pop();if(ne!==pe){ee[0]=ne;e:for(var D=0,K=ee.length,he=K>>>1;D<he;){var ve=2*(D+1)-1,Ee=ee[ve],we=ve+1,Ke=ee[we];if(0>s(Ee,ne))we<K&&0>s(Ke,Ee)?(ee[D]=Ke,ee[we]=ne,D=we):(ee[D]=Ee,ee[ve]=ne,D=ve);else if(we<K&&0>s(Ke,ne))ee[D]=Ke,ee[we]=ne,D=we;else break e}}return pe}function s(ee,pe){var ne=ee.sortIndex-pe.sortIndex;return ne!==0?ne:ee.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],p=[],v=1,g=null,E=3,R=!1,V=!1,U=!1,O=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ee){for(var pe=t(p);pe!==null;){if(pe.callback===null)r(p);else if(pe.startTime<=ee)r(p),pe.sortIndex=pe.expirationTime,e(f,pe);else break;pe=t(p)}}function ae(ee){if(U=!1,Z(ee),!V)if(t(f)!==null)V=!0,ye(se);else{var pe=t(p);pe!==null&&Ne(ae,pe.startTime-ee)}}function se(ee,pe){V=!1,U&&(U=!1,J(S),S=-1),R=!0;var ne=E;try{for(Z(pe),g=t(f);g!==null&&(!(g.expirationTime>pe)||ee&&!x());){var D=g.callback;if(typeof D=="function"){g.callback=null,E=g.priorityLevel;var K=D(g.expirationTime<=pe);pe=n.unstable_now(),typeof K=="function"?g.callback=K:g===t(f)&&r(f),Z(pe)}else r(f);g=t(f)}if(g!==null)var he=!0;else{var ve=t(p);ve!==null&&Ne(ae,ve.startTime-pe),he=!1}return he}finally{g=null,E=ne,R=!1}}var fe=!1,T=null,S=-1,P=5,N=-1;function x(){return!(n.unstable_now()-N<P)}function M(){if(T!==null){var ee=n.unstable_now();N=ee;var pe=!0;try{pe=T(!0,ee)}finally{pe?C():(fe=!1,T=null)}}else fe=!1}var C;if(typeof G=="function")C=function(){G(M)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,He=Me.port2;Me.port1.onmessage=M,C=function(){He.postMessage(null)}}else C=function(){O(M,0)};function ye(ee){T=ee,fe||(fe=!0,C())}function Ne(ee,pe){S=O(function(){ee(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){V||R||(V=!0,ye(se))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(ee){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var ne=E;E=pe;try{return ee()}finally{E=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,pe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ne=E;E=ee;try{return pe()}finally{E=ne}},n.unstable_scheduleCallback=function(ee,pe,ne){var D=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?D+ne:D):ne=D,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,ee={id:v++,callback:pe,priorityLevel:ee,startTime:ne,expirationTime:K,sortIndex:-1},ne>D?(ee.sortIndex=ne,e(p,ee),t(f)===null&&ee===t(p)&&(U?(J(S),S=-1):U=!0,Ne(ae,ne-D))):(ee.sortIndex=K,e(f,ee),V||R||(V=!0,ye(se))),ee},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(ee){var pe=E;return function(){var ne=E;E=pe;try{return ee.apply(this,arguments)}finally{E=ne}}}})(pm)),pm}var Sw;function F1(){return Sw||(Sw=1,fm.exports=M1()),fm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw;function U1(){if(Rw)return mr;Rw=1;var n=xg(),e=F1();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function a(i,o){l(i,o),l(i+"Capture",o)}function l(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},g={};function E(i){return f.call(g,i)?!0:f.call(v,i)?!1:p.test(i)?g[i]=!0:(v[i]=!0,!1)}function R(i,o,u,h){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return h?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function V(i,o,u,h){if(o===null||typeof o>"u"||R(i,o,u,h))return!0;if(h)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function U(i,o,u,h,m,y,I){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=h,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=I}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new U(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];O[o]=new U(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new U(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new U(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new U(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new U(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new U(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new U(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new U(i,5,!1,i.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function G(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(J,G);O[o]=new U(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(J,G);O[o]=new U(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(J,G);O[o]=new U(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new U(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new U(i,1,!1,i.toLowerCase(),null,!0,!0)});function Z(i,o,u,h){var m=O.hasOwnProperty(o)?O[o]:null;(m!==null?m.type!==0:h||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(V(o,u,m,h)&&(u=null),h||m===null?E(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):m.mustUseProperty?i[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,h=m.attributeNamespace,u===null?i.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,h?i.setAttributeNS(h,o,u):i.setAttribute(o,u))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),fe=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),x=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),ee=Symbol.iterator;function pe(i){return i===null||typeof i!="object"?null:(i=ee&&i[ee]||i["@@iterator"],typeof i=="function"?i:null)}var ne=Object.assign,D;function K(i){if(D===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);D=o&&o[1]||""}return`
`+D+i}var he=!1;function ve(i,o){if(!i||he)return"";he=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var h=Q}Reflect.construct(i,[],o)}else{try{o.call()}catch(Q){h=Q}i.call(o.prototype)}else{try{throw Error()}catch(Q){h=Q}i()}}catch(Q){if(Q&&h&&typeof Q.stack=="string"){for(var m=Q.stack.split(`
`),y=h.stack.split(`
`),I=m.length-1,b=y.length-1;1<=I&&0<=b&&m[I]!==y[b];)b--;for(;1<=I&&0<=b;I--,b--)if(m[I]!==y[b]){if(I!==1||b!==1)do if(I--,b--,0>b||m[I]!==y[b]){var L=`
`+m[I].replace(" at new "," at ");return i.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",i.displayName)),L}while(1<=I&&0<=b);break}}}finally{he=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?K(i):""}function Ee(i){switch(i.tag){case 5:return K(i.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return i=ve(i.type,!1),i;case 11:return i=ve(i.type.render,!1),i;case 1:return i=ve(i.type,!0),i;default:return""}}function we(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case T:return"Fragment";case fe:return"Portal";case P:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case Me:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case x:return(i.displayName||"Context")+".Consumer";case N:return(i._context.displayName||"Context")+".Provider";case M:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case He:return o=i.displayName||null,o!==null?o:we(i.type)||"Memo";case ye:o=i._payload,i=i._init;try{return we(i(o))}catch{}}return null}function Ke(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function je(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function st(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Mt(i){var o=st(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),h=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return m.call(this)},set:function(I){h=""+I,y.call(this,I)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ii(i){i._valueTracker||(i._valueTracker=Mt(i))}function Rt(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),h="";return i&&(h=st(i)?i.checked?"true":"false":i.value),i=h,i!==u?(o.setValue(i),!0):!1}function In(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function wr(i,o){var u=o.checked;return ne({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function As(i,o){var u=o.defaultValue==null?"":o.defaultValue,h=o.checked!=null?o.checked:o.defaultChecked;u=je(o.value!=null?o.value:u),i._wrapperState={initialChecked:h,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Tn(i,o){o=o.checked,o!=null&&Z(i,"checked",o,!1)}function Gn(i,o){Tn(i,o);var u=je(o.value),h=o.type;if(u!=null)h==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(h==="submit"||h==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?lt(i,o.type,u):o.hasOwnProperty("defaultValue")&&lt(i,o.type,je(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ti(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var h=o.type;if(!(h!=="submit"&&h!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function lt(i,o,u){(o!=="number"||In(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var At=Array.isArray;function Qn(i,o,u,h){if(i=i.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<i.length;u++)m=o.hasOwnProperty("$"+i[u].value),i[u].selected!==m&&(i[u].selected=m),m&&h&&(i[u].defaultSelected=!0)}else{for(u=""+je(u),o=null,m=0;m<i.length;m++){if(i[m].value===u){i[m].selected=!0,h&&(i[m].defaultSelected=!0);return}o!==null||i[m].disabled||(o=i[m])}o!==null&&(o.selected=!0)}}function Qt(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function sr(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(At(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:je(u)}}function or(i,o){var u=je(o.value),h=je(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),h!=null&&(i.defaultValue=""+h)}function Vn(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Er(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ur(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Er(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Yt,fn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,h,m){MSApp.execUnsafeLocalFunction(function(){return i(o,u,h,m)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Yt=Yt||document.createElement("div"),Yt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Yt.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Sn(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yn=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(i){Yn.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),Ir[o]=Ir[i]})});function Br(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ir.hasOwnProperty(i)&&Ir[i]?(""+o).trim():o+"px"}function pn(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var h=u.indexOf("--")===0,m=Br(u,o[u],h);u==="float"&&(u="cssFloat"),h?i.setProperty(u,m):i[u]=m}}var ni=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rn(i,o){if(o){if(ni[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function ri(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function mn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ln=null,lr=null,gt=null;function Si(i){if(i=hu(i)){if(typeof Ln!="function")throw Error(t(280));var o=i.stateNode;o&&(o=pd(o),Ln(i.stateNode,i.type,o))}}function Fe(i){lr?gt?gt.push(i):gt=[i]:lr=i}function yt(){if(lr){var i=lr,o=gt;if(gt=lr=null,Si(i),o)for(i=0;i<o.length;i++)Si(o[i])}}function xt(i,o){return i(o)}function Ft(){}var Zt=!1;function Pt(i,o,u){if(Zt)return i(o,u);Zt=!0;try{return xt(i,o,u)}finally{Zt=!1,(lr!==null||gt!==null)&&(Ft(),yt())}}function jt(i,o){var u=i.stateNode;if(u===null)return null;var h=pd(u);if(h===null)return null;u=h[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Jn=!1;if(c)try{var k={};Object.defineProperty(k,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",k,k),window.removeEventListener("test",k,k)}catch{Jn=!1}function F(i,o,u,h,m,y,I,b,L){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(u,Q)}catch(ie){this.onError(ie)}}var H=!1,te=null,ue=!1,Se=null,Ve={onError:function(i){H=!0,te=i}};function Ie(i,o,u,h,m,y,I,b,L){H=!1,te=null,F.apply(Ve,arguments)}function Re(i,o,u,h,m,y,I,b,L){if(Ie.apply(this,arguments),H){if(H){var Q=te;H=!1,te=null}else throw Error(t(198));ue||(ue=!0,Se=Q)}}function Pe(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function $e(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function De(i){if(Pe(i)!==i)throw Error(t(188))}function Ge(i){var o=i.alternate;if(!o){if(o=Pe(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,h=o;;){var m=u.return;if(m===null)break;var y=m.alternate;if(y===null){if(h=m.return,h!==null){u=h;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===u)return De(m),i;if(y===h)return De(m),o;y=y.sibling}throw Error(t(188))}if(u.return!==h.return)u=m,h=y;else{for(var I=!1,b=m.child;b;){if(b===u){I=!0,u=m,h=y;break}if(b===h){I=!0,h=m,u=y;break}b=b.sibling}if(!I){for(b=y.child;b;){if(b===u){I=!0,u=y,h=m;break}if(b===h){I=!0,h=y,u=m;break}b=b.sibling}if(!I)throw Error(t(189))}}if(u.alternate!==h)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Je(i){return i=Ge(i),i!==null?Ct(i):null}function Ct(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ct(i);if(o!==null)return o;i=i.sibling}return null}var Dt=e.unstable_scheduleCallback,$t=e.unstable_cancelCallback,nt=e.unstable_shouldYield,Ht=e.unstable_requestPaint,ut=e.unstable_now,Yi=e.unstable_getCurrentPriorityLevel,Xn=e.unstable_ImmediatePriority,Mn=e.unstable_UserBlockingPriority,ii=e.unstable_NormalPriority,si=e.unstable_LowPriority,ur=e.unstable_IdlePriority,zr=null,gn=null;function Ze(i){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(zr,i,void 0,(i.current.flags&128)===128)}catch{}}var pt=Math.clz32?Math.clz32:mt,An=Math.log,en=Math.LN2;function mt(i){return i>>>=0,i===0?32:31-(An(i)/en|0)|0}var Zn=64,oi=4194304;function ct(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Ji(i,o){var u=i.pendingLanes;if(u===0)return 0;var h=0,m=i.suspendedLanes,y=i.pingedLanes,I=u&268435455;if(I!==0){var b=I&~m;b!==0?h=ct(b):(y&=I,y!==0&&(h=ct(y)))}else I=u&~m,I!==0?h=ct(I):y!==0&&(h=ct(y));if(h===0)return 0;if(o!==0&&o!==h&&(o&m)===0&&(m=h&-h,y=o&-o,m>=y||m===16&&(y&4194240)!==0))return o;if((h&4)!==0&&(h|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=h;0<o;)u=31-pt(o),m=1<<u,h|=i[u],o&=~m;return h}function Ao(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Po(i,o){for(var u=i.suspendedLanes,h=i.pingedLanes,m=i.expirationTimes,y=i.pendingLanes;0<y;){var I=31-pt(y),b=1<<I,L=m[I];L===-1?((b&u)===0||(b&h)!==0)&&(m[I]=Ao(b,o)):L<=o&&(i.expiredLanes|=b),y&=~b}}function ql(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Wl(){var i=Zn;return Zn<<=1,(Zn&4194240)===0&&(Zn=64),i}function Kl(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Co(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-pt(o),i[o]=u}function jf(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var h=i.eventTimes;for(i=i.expirationTimes;0<u;){var m=31-pt(u),y=1<<m;o[m]=0,h[m]=-1,i[m]=-1,u&=~y}}function Gl(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var h=31-pt(u),m=1<<h;m&o|i[h]&o&&(i[h]|=o),u&=~m}}var ot=0;function Ri(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ql,Ra,Yl,Jl,Xl,Ai=!1,Aa=[],Pi=null,Ci=null,Pn=null,bo=new Map,Xi=new Map,Tr=[],Xc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ps(i,o){switch(i){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":Pn=null;break;case"pointerover":case"pointerout":bo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(o.pointerId)}}function ai(i,o,u,h,m,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:h,nativeEvent:y,targetContainers:[m]},o!==null&&(o=hu(o),o!==null&&Ra(o)),i):(i.eventSystemFlags|=h,o=i.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),i)}function Zc(i,o,u,h,m){switch(o){case"focusin":return Pi=ai(Pi,i,o,u,h,m),!0;case"dragenter":return Ci=ai(Ci,i,o,u,h,m),!0;case"mouseover":return Pn=ai(Pn,i,o,u,h,m),!0;case"pointerover":var y=m.pointerId;return bo.set(y,ai(bo.get(y)||null,i,o,u,h,m)),!0;case"gotpointercapture":return y=m.pointerId,Xi.set(y,ai(Xi.get(y)||null,i,o,u,h,m)),!0}return!1}function Pa(i){var o=No(i.target);if(o!==null){var u=Pe(o);if(u!==null){if(o=u.tag,o===13){if(o=$e(u),o!==null){i.blockedOn=o,Xl(i.priority,function(){Yl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Tt(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Ca(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var h=new u.constructor(u.type,u);ar=h,u.target.dispatchEvent(h),ar=null}else return o=hu(u),o!==null&&Ra(o),i.blockedOn=u,!1;o.shift()}return!0}function ed(i,o,u){Tt(i)&&u.delete(o)}function $f(){Ai=!1,Pi!==null&&Tt(Pi)&&(Pi=null),Ci!==null&&Tt(Ci)&&(Ci=null),Pn!==null&&Tt(Pn)&&(Pn=null),bo.forEach(ed),Xi.forEach(ed)}function Cs(i,o){i.blockedOn===o&&(i.blockedOn=null,Ai||(Ai=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$f)))}function bs(i){function o(m){return Cs(m,i)}if(0<Aa.length){Cs(Aa[0],i);for(var u=1;u<Aa.length;u++){var h=Aa[u];h.blockedOn===i&&(h.blockedOn=null)}}for(Pi!==null&&Cs(Pi,i),Ci!==null&&Cs(Ci,i),Pn!==null&&Cs(Pn,i),bo.forEach(o),Xi.forEach(o),u=0;u<Tr.length;u++)h=Tr[u],h.blockedOn===i&&(h.blockedOn=null);for(;0<Tr.length&&(u=Tr[0],u.blockedOn===null);)Pa(u),u.blockedOn===null&&Tr.shift()}var Zi=ae.ReactCurrentBatchConfig,es=!0;function bi(i,o,u,h){var m=ot,y=Zi.transition;Zi.transition=null;try{ot=1,Zl(i,o,u,h)}finally{ot=m,Zi.transition=y}}function td(i,o,u,h){var m=ot,y=Zi.transition;Zi.transition=null;try{ot=4,Zl(i,o,u,h)}finally{ot=m,Zi.transition=y}}function Zl(i,o,u,h){if(es){var m=Ca(i,o,u,h);if(m===null)ep(i,o,h,ki,u),Ps(i,h);else if(Zc(m,i,o,u,h))h.stopPropagation();else if(Ps(i,h),o&4&&-1<Xc.indexOf(i)){for(;m!==null;){var y=hu(m);if(y!==null&&Ql(y),y=Ca(i,o,u,h),y===null&&ep(i,o,h,ki,u),y===m)break;m=y}m!==null&&h.stopPropagation()}else ep(i,o,h,null,u)}}var ki=null;function Ca(i,o,u,h){if(ki=null,i=mn(h),i=No(i),i!==null)if(o=Pe(i),o===null)i=null;else if(u=o.tag,u===13){if(i=$e(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return ki=i,null}function ba(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yi()){case Xn:return 1;case Mn:return 4;case ii:case si:return 16;case ur:return 536870912;default:return 16}default:return 16}}var Sr=null,ka=null,ts=null;function nd(){if(ts)return ts;var i,o=ka,u=o.length,h,m="value"in Sr?Sr.value:Sr.textContent,y=m.length;for(i=0;i<u&&o[i]===m[i];i++);var I=u-i;for(h=1;h<=I&&o[u-h]===m[y-h];h++);return ts=m.slice(i,1<h?1-h:void 0)}function ko(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function xi(){return!0}function eu(){return!1}function Fn(i){function o(u,h,m,y,I){this._reactName=u,this._targetInst=m,this.type=h,this.nativeEvent=y,this.target=I,this.currentTarget=null;for(var b in i)i.hasOwnProperty(b)&&(u=i[b],this[b]=u?u(y):y[b]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?xi:eu,this.isPropagationStopped=eu,this}return ne(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=xi)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=xi)},persist:function(){},isPersistent:xi}),o}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xo=Fn(Di),ks=ne({},Di,{view:0,detail:0}),xa=Fn(ks),Da,Na,Rr,Do=ne({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ye,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Rr&&(Rr&&i.type==="mousemove"?(Da=i.screenX-Rr.screenX,Na=i.screenY-Rr.screenY):Na=Da=0,Rr=i),Da)},movementY:function(i){return"movementY"in i?i.movementY:Na}}),tu=Fn(Do),rd=ne({},Do,{dataTransfer:0}),id=Fn(rd),Oa=ne({},ks,{relatedTarget:0}),Cn=Fn(Oa),sd=ne({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),od=Fn(sd),xs=ne({},Di,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),d=Fn(xs),_=ne({},Di,{data:0}),w=Fn(_),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Y[i])?!!o[i]:!1}function Ye(){return me}var Jt=ne({},ks,{key:function(i){if(i.key){var o=A[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=ko(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?$[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ye,charCode:function(i){return i.type==="keypress"?ko(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ko(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),_t=Fn(Jt),tn=ne({},Do,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=Fn(tn),ns=ne({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ye}),Ni=Fn(ns),Oi=ne({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Va=Fn(Oi),nu=ne({},Do,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),PP=Fn(nu),CP=[9,13,27,32],Hf=c&&"CompositionEvent"in window,ru=null;c&&"documentMode"in document&&(ru=document.documentMode);var bP=c&&"TextEvent"in window&&!ru,d_=c&&(!Hf||ru&&8<ru&&11>=ru),h_=" ",f_=!1;function p_(i,o){switch(i){case"keyup":return CP.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m_(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var La=!1;function kP(i,o){switch(i){case"compositionend":return m_(o);case"keypress":return o.which!==32?null:(f_=!0,h_);case"textInput":return i=o.data,i===h_&&f_?null:i;default:return null}}function xP(i,o){if(La)return i==="compositionend"||!Hf&&p_(i,o)?(i=nd(),ts=ka=Sr=null,La=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return d_&&o.locale!=="ko"?null:o.data;default:return null}}var DP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g_(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!DP[i.type]:o==="textarea"}function y_(i,o,u,h){Fe(h),o=dd(o,"onChange"),0<o.length&&(u=new xo("onChange","change",null,u,h),i.push({event:u,listeners:o}))}var iu=null,su=null;function NP(i){V_(i,0)}function ad(i){var o=za(i);if(Rt(o))return i}function OP(i,o){if(i==="change")return o}var __=!1;if(c){var qf;if(c){var Wf="oninput"in document;if(!Wf){var v_=document.createElement("div");v_.setAttribute("oninput","return;"),Wf=typeof v_.oninput=="function"}qf=Wf}else qf=!1;__=qf&&(!document.documentMode||9<document.documentMode)}function w_(){iu&&(iu.detachEvent("onpropertychange",E_),su=iu=null)}function E_(i){if(i.propertyName==="value"&&ad(su)){var o=[];y_(o,su,i,mn(i)),Pt(NP,o)}}function VP(i,o,u){i==="focusin"?(w_(),iu=o,su=u,iu.attachEvent("onpropertychange",E_)):i==="focusout"&&w_()}function LP(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ad(su)}function MP(i,o){if(i==="click")return ad(o)}function FP(i,o){if(i==="input"||i==="change")return ad(o)}function UP(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var li=typeof Object.is=="function"?Object.is:UP;function ou(i,o){if(li(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),h=Object.keys(o);if(u.length!==h.length)return!1;for(h=0;h<u.length;h++){var m=u[h];if(!f.call(o,m)||!li(i[m],o[m]))return!1}return!0}function I_(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function T_(i,o){var u=I_(i);i=0;for(var h;u;){if(u.nodeType===3){if(h=i+u.textContent.length,i<=o&&h>=o)return{node:u,offset:o-i};i=h}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=I_(u)}}function S_(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?S_(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function R_(){for(var i=window,o=In();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=In(i.document)}return o}function Kf(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function BP(i){var o=R_(),u=i.focusedElem,h=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&S_(u.ownerDocument.documentElement,u)){if(h!==null&&Kf(u)){if(o=h.start,i=h.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var m=u.textContent.length,y=Math.min(h.start,m);h=h.end===void 0?y:Math.min(h.end,m),!i.extend&&y>h&&(m=h,h=y,y=m),m=T_(u,y);var I=T_(u,h);m&&I&&(i.rangeCount!==1||i.anchorNode!==m.node||i.anchorOffset!==m.offset||i.focusNode!==I.node||i.focusOffset!==I.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),i.removeAllRanges(),y>h?(i.addRange(o),i.extend(I.node,I.offset)):(o.setEnd(I.node,I.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var zP=c&&"documentMode"in document&&11>=document.documentMode,Ma=null,Gf=null,au=null,Qf=!1;function A_(i,o,u){var h=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Qf||Ma==null||Ma!==In(h)||(h=Ma,"selectionStart"in h&&Kf(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),au&&ou(au,h)||(au=h,h=dd(Gf,"onSelect"),0<h.length&&(o=new xo("onSelect","select",null,o,u),i.push({event:o,listeners:h}),o.target=Ma)))}function ld(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Fa={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},Yf={},P_={};c&&(P_=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function ud(i){if(Yf[i])return Yf[i];if(!Fa[i])return i;var o=Fa[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in P_)return Yf[i]=o[u];return i}var C_=ud("animationend"),b_=ud("animationiteration"),k_=ud("animationstart"),x_=ud("transitionend"),D_=new Map,N_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(i,o){D_.set(i,o),a(o,[i])}for(var Jf=0;Jf<N_.length;Jf++){var Xf=N_[Jf],jP=Xf.toLowerCase(),$P=Xf[0].toUpperCase()+Xf.slice(1);Ds(jP,"on"+$P)}Ds(C_,"onAnimationEnd"),Ds(b_,"onAnimationIteration"),Ds(k_,"onAnimationStart"),Ds("dblclick","onDoubleClick"),Ds("focusin","onFocus"),Ds("focusout","onBlur"),Ds(x_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HP=new Set("cancel close invalid load scroll toggle".split(" ").concat(lu));function O_(i,o,u){var h=i.type||"unknown-event";i.currentTarget=u,Re(h,o,void 0,i),i.currentTarget=null}function V_(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var h=i[u],m=h.event;h=h.listeners;e:{var y=void 0;if(o)for(var I=h.length-1;0<=I;I--){var b=h[I],L=b.instance,Q=b.currentTarget;if(b=b.listener,L!==y&&m.isPropagationStopped())break e;O_(m,b,Q),y=L}else for(I=0;I<h.length;I++){if(b=h[I],L=b.instance,Q=b.currentTarget,b=b.listener,L!==y&&m.isPropagationStopped())break e;O_(m,b,Q),y=L}}}if(ue)throw i=Se,ue=!1,Se=null,i}function bt(i,o){var u=o[op];u===void 0&&(u=o[op]=new Set);var h=i+"__bubble";u.has(h)||(L_(o,i,2,!1),u.add(h))}function Zf(i,o,u){var h=0;o&&(h|=4),L_(u,i,h,o)}var cd="_reactListening"+Math.random().toString(36).slice(2);function uu(i){if(!i[cd]){i[cd]=!0,r.forEach(function(u){u!=="selectionchange"&&(HP.has(u)||Zf(u,!1,i),Zf(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[cd]||(o[cd]=!0,Zf("selectionchange",!1,o))}}function L_(i,o,u,h){switch(ba(o)){case 1:var m=bi;break;case 4:m=td;break;default:m=Zl}u=m.bind(null,o,u,i),m=void 0,!Jn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),h?m!==void 0?i.addEventListener(o,u,{capture:!0,passive:m}):i.addEventListener(o,u,!0):m!==void 0?i.addEventListener(o,u,{passive:m}):i.addEventListener(o,u,!1)}function ep(i,o,u,h,m){var y=h;if((o&1)===0&&(o&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var b=h.stateNode.containerInfo;if(b===m||b.nodeType===8&&b.parentNode===m)break;if(I===4)for(I=h.return;I!==null;){var L=I.tag;if((L===3||L===4)&&(L=I.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;I=I.return}for(;b!==null;){if(I=No(b),I===null)return;if(L=I.tag,L===5||L===6){h=y=I;continue e}b=b.parentNode}}h=h.return}Pt(function(){var Q=y,ie=mn(u),oe=[];e:{var re=D_.get(i);if(re!==void 0){var Te=xo,be=i;switch(i){case"keypress":if(ko(u)===0)break e;case"keydown":case"keyup":Te=_t;break;case"focusin":be="focus",Te=Cn;break;case"focusout":be="blur",Te=Cn;break;case"beforeblur":case"afterblur":Te=Cn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=Ni;break;case C_:case b_:case k_:Te=od;break;case x_:Te=Va;break;case"scroll":Te=xa;break;case"wheel":Te=PP;break;case"copy":case"cut":case"paste":Te=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Ar}var ke=(o&4)!==0,Xt=!ke&&i==="scroll",j=ke?re!==null?re+"Capture":null:re;ke=[];for(var B=Q,W;B!==null;){W=B;var ce=W.stateNode;if(W.tag===5&&ce!==null&&(W=ce,j!==null&&(ce=jt(B,j),ce!=null&&ke.push(cu(B,ce,W)))),Xt)break;B=B.return}0<ke.length&&(re=new Te(re,be,null,u,ie),oe.push({event:re,listeners:ke}))}}if((o&7)===0){e:{if(re=i==="mouseover"||i==="pointerover",Te=i==="mouseout"||i==="pointerout",re&&u!==ar&&(be=u.relatedTarget||u.fromElement)&&(No(be)||be[rs]))break e;if((Te||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,Te?(be=u.relatedTarget||u.toElement,Te=Q,be=be?No(be):null,be!==null&&(Xt=Pe(be),be!==Xt||be.tag!==5&&be.tag!==6)&&(be=null)):(Te=null,be=Q),Te!==be)){if(ke=tu,ce="onMouseLeave",j="onMouseEnter",B="mouse",(i==="pointerout"||i==="pointerover")&&(ke=Ar,ce="onPointerLeave",j="onPointerEnter",B="pointer"),Xt=Te==null?re:za(Te),W=be==null?re:za(be),re=new ke(ce,B+"leave",Te,u,ie),re.target=Xt,re.relatedTarget=W,ce=null,No(ie)===Q&&(ke=new ke(j,B+"enter",be,u,ie),ke.target=W,ke.relatedTarget=Xt,ce=ke),Xt=ce,Te&&be)t:{for(ke=Te,j=be,B=0,W=ke;W;W=Ua(W))B++;for(W=0,ce=j;ce;ce=Ua(ce))W++;for(;0<B-W;)ke=Ua(ke),B--;for(;0<W-B;)j=Ua(j),W--;for(;B--;){if(ke===j||j!==null&&ke===j.alternate)break t;ke=Ua(ke),j=Ua(j)}ke=null}else ke=null;Te!==null&&M_(oe,re,Te,ke,!1),be!==null&&Xt!==null&&M_(oe,Xt,be,ke,!0)}}e:{if(re=Q?za(Q):window,Te=re.nodeName&&re.nodeName.toLowerCase(),Te==="select"||Te==="input"&&re.type==="file")var Oe=OP;else if(g_(re))if(__)Oe=FP;else{Oe=LP;var Ue=VP}else(Te=re.nodeName)&&Te.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Oe=MP);if(Oe&&(Oe=Oe(i,Q))){y_(oe,Oe,u,ie);break e}Ue&&Ue(i,re,Q),i==="focusout"&&(Ue=re._wrapperState)&&Ue.controlled&&re.type==="number"&&lt(re,"number",re.value)}switch(Ue=Q?za(Q):window,i){case"focusin":(g_(Ue)||Ue.contentEditable==="true")&&(Ma=Ue,Gf=Q,au=null);break;case"focusout":au=Gf=Ma=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,A_(oe,u,ie);break;case"selectionchange":if(zP)break;case"keydown":case"keyup":A_(oe,u,ie)}var Be;if(Hf)e:{switch(i){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else La?p_(i,u)&&(qe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(qe="onCompositionStart");qe&&(d_&&u.locale!=="ko"&&(La||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&La&&(Be=nd()):(Sr=ie,ka="value"in Sr?Sr.value:Sr.textContent,La=!0)),Ue=dd(Q,qe),0<Ue.length&&(qe=new w(qe,i,null,u,ie),oe.push({event:qe,listeners:Ue}),Be?qe.data=Be:(Be=m_(u),Be!==null&&(qe.data=Be)))),(Be=bP?kP(i,u):xP(i,u))&&(Q=dd(Q,"onBeforeInput"),0<Q.length&&(ie=new w("onBeforeInput","beforeinput",null,u,ie),oe.push({event:ie,listeners:Q}),ie.data=Be))}V_(oe,o)})}function cu(i,o,u){return{instance:i,listener:o,currentTarget:u}}function dd(i,o){for(var u=o+"Capture",h=[];i!==null;){var m=i,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=jt(i,u),y!=null&&h.unshift(cu(i,y,m)),y=jt(i,o),y!=null&&h.push(cu(i,y,m))),i=i.return}return h}function Ua(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function M_(i,o,u,h,m){for(var y=o._reactName,I=[];u!==null&&u!==h;){var b=u,L=b.alternate,Q=b.stateNode;if(L!==null&&L===h)break;b.tag===5&&Q!==null&&(b=Q,m?(L=jt(u,y),L!=null&&I.unshift(cu(u,L,b))):m||(L=jt(u,y),L!=null&&I.push(cu(u,L,b)))),u=u.return}I.length!==0&&i.push({event:o,listeners:I})}var qP=/\r\n?/g,WP=/\u0000|\uFFFD/g;function F_(i){return(typeof i=="string"?i:""+i).replace(qP,`
`).replace(WP,"")}function hd(i,o,u){if(o=F_(o),F_(i)!==o&&u)throw Error(t(425))}function fd(){}var tp=null,np=null;function rp(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ip=typeof setTimeout=="function"?setTimeout:void 0,KP=typeof clearTimeout=="function"?clearTimeout:void 0,U_=typeof Promise=="function"?Promise:void 0,GP=typeof queueMicrotask=="function"?queueMicrotask:typeof U_<"u"?function(i){return U_.resolve(null).then(i).catch(QP)}:ip;function QP(i){setTimeout(function(){throw i})}function sp(i,o){var u=o,h=0;do{var m=u.nextSibling;if(i.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(h===0){i.removeChild(m),bs(o);return}h--}else u!=="$"&&u!=="$?"&&u!=="$!"||h++;u=m}while(u);bs(o)}function Ns(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function B_(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Ba=Math.random().toString(36).slice(2),Vi="__reactFiber$"+Ba,du="__reactProps$"+Ba,rs="__reactContainer$"+Ba,op="__reactEvents$"+Ba,YP="__reactListeners$"+Ba,JP="__reactHandles$"+Ba;function No(i){var o=i[Vi];if(o)return o;for(var u=i.parentNode;u;){if(o=u[rs]||u[Vi]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=B_(i);i!==null;){if(u=i[Vi])return u;i=B_(i)}return o}i=u,u=i.parentNode}return null}function hu(i){return i=i[Vi]||i[rs],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function za(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function pd(i){return i[du]||null}var ap=[],ja=-1;function Os(i){return{current:i}}function kt(i){0>ja||(i.current=ap[ja],ap[ja]=null,ja--)}function St(i,o){ja++,ap[ja]=i.current,i.current=o}var Vs={},Un=Os(Vs),cr=Os(!1),Oo=Vs;function $a(i,o){var u=i.type.contextTypes;if(!u)return Vs;var h=i.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===o)return h.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in u)m[y]=o[y];return h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=m),m}function dr(i){return i=i.childContextTypes,i!=null}function md(){kt(cr),kt(Un)}function z_(i,o,u){if(Un.current!==Vs)throw Error(t(168));St(Un,o),St(cr,u)}function j_(i,o,u){var h=i.stateNode;if(o=o.childContextTypes,typeof h.getChildContext!="function")return u;h=h.getChildContext();for(var m in h)if(!(m in o))throw Error(t(108,Ke(i)||"Unknown",m));return ne({},u,h)}function gd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vs,Oo=Un.current,St(Un,i),St(cr,cr.current),!0}function $_(i,o,u){var h=i.stateNode;if(!h)throw Error(t(169));u?(i=j_(i,o,Oo),h.__reactInternalMemoizedMergedChildContext=i,kt(cr),kt(Un),St(Un,i)):kt(cr),St(cr,u)}var is=null,yd=!1,lp=!1;function H_(i){is===null?is=[i]:is.push(i)}function XP(i){yd=!0,H_(i)}function Ls(){if(!lp&&is!==null){lp=!0;var i=0,o=ot;try{var u=is;for(ot=1;i<u.length;i++){var h=u[i];do h=h(!0);while(h!==null)}is=null,yd=!1}catch(m){throw is!==null&&(is=is.slice(i+1)),Dt(Xn,Ls),m}finally{ot=o,lp=!1}}return null}var Ha=[],qa=0,_d=null,vd=0,jr=[],$r=0,Vo=null,ss=1,os="";function Lo(i,o){Ha[qa++]=vd,Ha[qa++]=_d,_d=i,vd=o}function q_(i,o,u){jr[$r++]=ss,jr[$r++]=os,jr[$r++]=Vo,Vo=i;var h=ss;i=os;var m=32-pt(h)-1;h&=~(1<<m),u+=1;var y=32-pt(o)+m;if(30<y){var I=m-m%5;y=(h&(1<<I)-1).toString(32),h>>=I,m-=I,ss=1<<32-pt(o)+m|u<<m|h,os=y+i}else ss=1<<y|u<<m|h,os=i}function up(i){i.return!==null&&(Lo(i,1),q_(i,1,0))}function cp(i){for(;i===_d;)_d=Ha[--qa],Ha[qa]=null,vd=Ha[--qa],Ha[qa]=null;for(;i===Vo;)Vo=jr[--$r],jr[$r]=null,os=jr[--$r],jr[$r]=null,ss=jr[--$r],jr[$r]=null}var Pr=null,Cr=null,Nt=!1,ui=null;function W_(i,o){var u=Kr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function K_(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Pr=i,Cr=Ns(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Pr=i,Cr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Vo!==null?{id:ss,overflow:os}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Kr(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Pr=i,Cr=null,!0):!1;default:return!1}}function dp(i){return(i.mode&1)!==0&&(i.flags&128)===0}function hp(i){if(Nt){var o=Cr;if(o){var u=o;if(!K_(i,o)){if(dp(i))throw Error(t(418));o=Ns(u.nextSibling);var h=Pr;o&&K_(i,o)?W_(h,u):(i.flags=i.flags&-4097|2,Nt=!1,Pr=i)}}else{if(dp(i))throw Error(t(418));i.flags=i.flags&-4097|2,Nt=!1,Pr=i}}}function G_(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Pr=i}function wd(i){if(i!==Pr)return!1;if(!Nt)return G_(i),Nt=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!rp(i.type,i.memoizedProps)),o&&(o=Cr)){if(dp(i))throw Q_(),Error(t(418));for(;o;)W_(i,o),o=Ns(o.nextSibling)}if(G_(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Cr=Ns(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Cr=null}}else Cr=Pr?Ns(i.stateNode.nextSibling):null;return!0}function Q_(){for(var i=Cr;i;)i=Ns(i.nextSibling)}function Wa(){Cr=Pr=null,Nt=!1}function fp(i){ui===null?ui=[i]:ui.push(i)}var ZP=ae.ReactCurrentBatchConfig;function fu(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var h=u.stateNode}if(!h)throw Error(t(147,i));var m=h,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(I){var b=m.refs;I===null?delete b[y]:b[y]=I},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ed(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Y_(i){var o=i._init;return o(i._payload)}function J_(i){function o(j,B){if(i){var W=j.deletions;W===null?(j.deletions=[B],j.flags|=16):W.push(B)}}function u(j,B){if(!i)return null;for(;B!==null;)o(j,B),B=B.sibling;return null}function h(j,B){for(j=new Map;B!==null;)B.key!==null?j.set(B.key,B):j.set(B.index,B),B=B.sibling;return j}function m(j,B){return j=Hs(j,B),j.index=0,j.sibling=null,j}function y(j,B,W){return j.index=W,i?(W=j.alternate,W!==null?(W=W.index,W<B?(j.flags|=2,B):W):(j.flags|=2,B)):(j.flags|=1048576,B)}function I(j){return i&&j.alternate===null&&(j.flags|=2),j}function b(j,B,W,ce){return B===null||B.tag!==6?(B=im(W,j.mode,ce),B.return=j,B):(B=m(B,W),B.return=j,B)}function L(j,B,W,ce){var Oe=W.type;return Oe===T?ie(j,B,W.props.children,ce,W.key):B!==null&&(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ye&&Y_(Oe)===B.type)?(ce=m(B,W.props),ce.ref=fu(j,B,W),ce.return=j,ce):(ce=qd(W.type,W.key,W.props,null,j.mode,ce),ce.ref=fu(j,B,W),ce.return=j,ce)}function Q(j,B,W,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=sm(W,j.mode,ce),B.return=j,B):(B=m(B,W.children||[]),B.return=j,B)}function ie(j,B,W,ce,Oe){return B===null||B.tag!==7?(B=Ho(W,j.mode,ce,Oe),B.return=j,B):(B=m(B,W),B.return=j,B)}function oe(j,B,W){if(typeof B=="string"&&B!==""||typeof B=="number")return B=im(""+B,j.mode,W),B.return=j,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case se:return W=qd(B.type,B.key,B.props,null,j.mode,W),W.ref=fu(j,null,B),W.return=j,W;case fe:return B=sm(B,j.mode,W),B.return=j,B;case ye:var ce=B._init;return oe(j,ce(B._payload),W)}if(At(B)||pe(B))return B=Ho(B,j.mode,W,null),B.return=j,B;Ed(j,B)}return null}function re(j,B,W,ce){var Oe=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Oe!==null?null:b(j,B,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case se:return W.key===Oe?L(j,B,W,ce):null;case fe:return W.key===Oe?Q(j,B,W,ce):null;case ye:return Oe=W._init,re(j,B,Oe(W._payload),ce)}if(At(W)||pe(W))return Oe!==null?null:ie(j,B,W,ce,null);Ed(j,W)}return null}function Te(j,B,W,ce,Oe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return j=j.get(W)||null,b(B,j,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case se:return j=j.get(ce.key===null?W:ce.key)||null,L(B,j,ce,Oe);case fe:return j=j.get(ce.key===null?W:ce.key)||null,Q(B,j,ce,Oe);case ye:var Ue=ce._init;return Te(j,B,W,Ue(ce._payload),Oe)}if(At(ce)||pe(ce))return j=j.get(W)||null,ie(B,j,ce,Oe,null);Ed(B,ce)}return null}function be(j,B,W,ce){for(var Oe=null,Ue=null,Be=B,qe=B=0,vn=null;Be!==null&&qe<W.length;qe++){Be.index>qe?(vn=Be,Be=null):vn=Be.sibling;var ft=re(j,Be,W[qe],ce);if(ft===null){Be===null&&(Be=vn);break}i&&Be&&ft.alternate===null&&o(j,Be),B=y(ft,B,qe),Ue===null?Oe=ft:Ue.sibling=ft,Ue=ft,Be=vn}if(qe===W.length)return u(j,Be),Nt&&Lo(j,qe),Oe;if(Be===null){for(;qe<W.length;qe++)Be=oe(j,W[qe],ce),Be!==null&&(B=y(Be,B,qe),Ue===null?Oe=Be:Ue.sibling=Be,Ue=Be);return Nt&&Lo(j,qe),Oe}for(Be=h(j,Be);qe<W.length;qe++)vn=Te(Be,j,qe,W[qe],ce),vn!==null&&(i&&vn.alternate!==null&&Be.delete(vn.key===null?qe:vn.key),B=y(vn,B,qe),Ue===null?Oe=vn:Ue.sibling=vn,Ue=vn);return i&&Be.forEach(function(qs){return o(j,qs)}),Nt&&Lo(j,qe),Oe}function ke(j,B,W,ce){var Oe=pe(W);if(typeof Oe!="function")throw Error(t(150));if(W=Oe.call(W),W==null)throw Error(t(151));for(var Ue=Oe=null,Be=B,qe=B=0,vn=null,ft=W.next();Be!==null&&!ft.done;qe++,ft=W.next()){Be.index>qe?(vn=Be,Be=null):vn=Be.sibling;var qs=re(j,Be,ft.value,ce);if(qs===null){Be===null&&(Be=vn);break}i&&Be&&qs.alternate===null&&o(j,Be),B=y(qs,B,qe),Ue===null?Oe=qs:Ue.sibling=qs,Ue=qs,Be=vn}if(ft.done)return u(j,Be),Nt&&Lo(j,qe),Oe;if(Be===null){for(;!ft.done;qe++,ft=W.next())ft=oe(j,ft.value,ce),ft!==null&&(B=y(ft,B,qe),Ue===null?Oe=ft:Ue.sibling=ft,Ue=ft);return Nt&&Lo(j,qe),Oe}for(Be=h(j,Be);!ft.done;qe++,ft=W.next())ft=Te(Be,j,qe,ft.value,ce),ft!==null&&(i&&ft.alternate!==null&&Be.delete(ft.key===null?qe:ft.key),B=y(ft,B,qe),Ue===null?Oe=ft:Ue.sibling=ft,Ue=ft);return i&&Be.forEach(function(D1){return o(j,D1)}),Nt&&Lo(j,qe),Oe}function Xt(j,B,W,ce){if(typeof W=="object"&&W!==null&&W.type===T&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case se:e:{for(var Oe=W.key,Ue=B;Ue!==null;){if(Ue.key===Oe){if(Oe=W.type,Oe===T){if(Ue.tag===7){u(j,Ue.sibling),B=m(Ue,W.props.children),B.return=j,j=B;break e}}else if(Ue.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ye&&Y_(Oe)===Ue.type){u(j,Ue.sibling),B=m(Ue,W.props),B.ref=fu(j,Ue,W),B.return=j,j=B;break e}u(j,Ue);break}else o(j,Ue);Ue=Ue.sibling}W.type===T?(B=Ho(W.props.children,j.mode,ce,W.key),B.return=j,j=B):(ce=qd(W.type,W.key,W.props,null,j.mode,ce),ce.ref=fu(j,B,W),ce.return=j,j=ce)}return I(j);case fe:e:{for(Ue=W.key;B!==null;){if(B.key===Ue)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){u(j,B.sibling),B=m(B,W.children||[]),B.return=j,j=B;break e}else{u(j,B);break}else o(j,B);B=B.sibling}B=sm(W,j.mode,ce),B.return=j,j=B}return I(j);case ye:return Ue=W._init,Xt(j,B,Ue(W._payload),ce)}if(At(W))return be(j,B,W,ce);if(pe(W))return ke(j,B,W,ce);Ed(j,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,B!==null&&B.tag===6?(u(j,B.sibling),B=m(B,W),B.return=j,j=B):(u(j,B),B=im(W,j.mode,ce),B.return=j,j=B),I(j)):u(j,B)}return Xt}var Ka=J_(!0),X_=J_(!1),Id=Os(null),Td=null,Ga=null,pp=null;function mp(){pp=Ga=Td=null}function gp(i){var o=Id.current;kt(Id),i._currentValue=o}function yp(i,o,u){for(;i!==null;){var h=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,h!==null&&(h.childLanes|=o)):h!==null&&(h.childLanes&o)!==o&&(h.childLanes|=o),i===u)break;i=i.return}}function Qa(i,o){Td=i,pp=Ga=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(hr=!0),i.firstContext=null)}function Hr(i){var o=i._currentValue;if(pp!==i)if(i={context:i,memoizedValue:o,next:null},Ga===null){if(Td===null)throw Error(t(308));Ga=i,Td.dependencies={lanes:0,firstContext:i}}else Ga=Ga.next=i;return o}var Mo=null;function _p(i){Mo===null?Mo=[i]:Mo.push(i)}function Z_(i,o,u,h){var m=o.interleaved;return m===null?(u.next=u,_p(o)):(u.next=m.next,m.next=u),o.interleaved=u,as(i,h)}function as(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ms=!1;function vp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ev(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ls(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Fs(i,o,u){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(dt&2)!==0){var m=h.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),h.pending=o,as(i,u)}return m=h.interleaved,m===null?(o.next=o,_p(h)):(o.next=m.next,m.next=o),h.interleaved=o,as(i,u)}function Sd(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Gl(i,u)}}function tv(i,o){var u=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,u===h)){var m=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var I={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?m=y=I:y=y.next=I,u=u.next}while(u!==null);y===null?m=y=o:y=y.next=o}else m=y=o;u={baseState:h.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:h.shared,effects:h.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Rd(i,o,u,h){var m=i.updateQueue;Ms=!1;var y=m.firstBaseUpdate,I=m.lastBaseUpdate,b=m.shared.pending;if(b!==null){m.shared.pending=null;var L=b,Q=L.next;L.next=null,I===null?y=Q:I.next=Q,I=L;var ie=i.alternate;ie!==null&&(ie=ie.updateQueue,b=ie.lastBaseUpdate,b!==I&&(b===null?ie.firstBaseUpdate=Q:b.next=Q,ie.lastBaseUpdate=L))}if(y!==null){var oe=m.baseState;I=0,ie=Q=L=null,b=y;do{var re=b.lane,Te=b.eventTime;if((h&re)===re){ie!==null&&(ie=ie.next={eventTime:Te,lane:0,tag:b.tag,payload:b.payload,callback:b.callback,next:null});e:{var be=i,ke=b;switch(re=o,Te=u,ke.tag){case 1:if(be=ke.payload,typeof be=="function"){oe=be.call(Te,oe,re);break e}oe=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=ke.payload,re=typeof be=="function"?be.call(Te,oe,re):be,re==null)break e;oe=ne({},oe,re);break e;case 2:Ms=!0}}b.callback!==null&&b.lane!==0&&(i.flags|=64,re=m.effects,re===null?m.effects=[b]:re.push(b))}else Te={eventTime:Te,lane:re,tag:b.tag,payload:b.payload,callback:b.callback,next:null},ie===null?(Q=ie=Te,L=oe):ie=ie.next=Te,I|=re;if(b=b.next,b===null){if(b=m.shared.pending,b===null)break;re=b,b=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);if(ie===null&&(L=oe),m.baseState=L,m.firstBaseUpdate=Q,m.lastBaseUpdate=ie,o=m.shared.interleaved,o!==null){m=o;do I|=m.lane,m=m.next;while(m!==o)}else y===null&&(m.shared.lanes=0);Bo|=I,i.lanes=I,i.memoizedState=oe}}function nv(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var h=i[o],m=h.callback;if(m!==null){if(h.callback=null,h=u,typeof m!="function")throw Error(t(191,m));m.call(h)}}}var pu={},Li=Os(pu),mu=Os(pu),gu=Os(pu);function Fo(i){if(i===pu)throw Error(t(174));return i}function wp(i,o){switch(St(gu,o),St(mu,i),St(Li,pu),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Ur(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Ur(o,i)}kt(Li),St(Li,o)}function Ya(){kt(Li),kt(mu),kt(gu)}function rv(i){Fo(gu.current);var o=Fo(Li.current),u=Ur(o,i.type);o!==u&&(St(mu,i),St(Li,u))}function Ep(i){mu.current===i&&(kt(Li),kt(mu))}var Ut=Os(0);function Ad(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ip=[];function Tp(){for(var i=0;i<Ip.length;i++)Ip[i]._workInProgressVersionPrimary=null;Ip.length=0}var Pd=ae.ReactCurrentDispatcher,Sp=ae.ReactCurrentBatchConfig,Uo=0,Bt=null,un=null,yn=null,Cd=!1,yu=!1,_u=0,e1=0;function Bn(){throw Error(t(321))}function Rp(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!li(i[u],o[u]))return!1;return!0}function Ap(i,o,u,h,m,y){if(Uo=y,Bt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Pd.current=i===null||i.memoizedState===null?i1:s1,i=u(h,m),yu){y=0;do{if(yu=!1,_u=0,25<=y)throw Error(t(301));y+=1,yn=un=null,o.updateQueue=null,Pd.current=o1,i=u(h,m)}while(yu)}if(Pd.current=xd,o=un!==null&&un.next!==null,Uo=0,yn=un=Bt=null,Cd=!1,o)throw Error(t(300));return i}function Pp(){var i=_u!==0;return _u=0,i}function Mi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?Bt.memoizedState=yn=i:yn=yn.next=i,yn}function qr(){if(un===null){var i=Bt.alternate;i=i!==null?i.memoizedState:null}else i=un.next;var o=yn===null?Bt.memoizedState:yn.next;if(o!==null)yn=o,un=i;else{if(i===null)throw Error(t(310));un=i,i={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},yn===null?Bt.memoizedState=yn=i:yn=yn.next=i}return yn}function vu(i,o){return typeof o=="function"?o(i):o}function Cp(i){var o=qr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=un,m=h.baseQueue,y=u.pending;if(y!==null){if(m!==null){var I=m.next;m.next=y.next,y.next=I}h.baseQueue=m=y,u.pending=null}if(m!==null){y=m.next,h=h.baseState;var b=I=null,L=null,Q=y;do{var ie=Q.lane;if((Uo&ie)===ie)L!==null&&(L=L.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),h=Q.hasEagerState?Q.eagerState:i(h,Q.action);else{var oe={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};L===null?(b=L=oe,I=h):L=L.next=oe,Bt.lanes|=ie,Bo|=ie}Q=Q.next}while(Q!==null&&Q!==y);L===null?I=h:L.next=b,li(h,o.memoizedState)||(hr=!0),o.memoizedState=h,o.baseState=I,o.baseQueue=L,u.lastRenderedState=h}if(i=u.interleaved,i!==null){m=i;do y=m.lane,Bt.lanes|=y,Bo|=y,m=m.next;while(m!==i)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function bp(i){var o=qr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var h=u.dispatch,m=u.pending,y=o.memoizedState;if(m!==null){u.pending=null;var I=m=m.next;do y=i(y,I.action),I=I.next;while(I!==m);li(y,o.memoizedState)||(hr=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,h]}function iv(){}function sv(i,o){var u=Bt,h=qr(),m=o(),y=!li(h.memoizedState,m);if(y&&(h.memoizedState=m,hr=!0),h=h.queue,kp(lv.bind(null,u,h,i),[i]),h.getSnapshot!==o||y||yn!==null&&yn.memoizedState.tag&1){if(u.flags|=2048,wu(9,av.bind(null,u,h,m,o),void 0,null),_n===null)throw Error(t(349));(Uo&30)!==0||ov(u,o,m)}return m}function ov(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Bt.updateQueue,o===null?(o={lastEffect:null,stores:null},Bt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function av(i,o,u,h){o.value=u,o.getSnapshot=h,uv(o)&&cv(i)}function lv(i,o,u){return u(function(){uv(o)&&cv(i)})}function uv(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!li(i,u)}catch{return!0}}function cv(i){var o=as(i,1);o!==null&&fi(o,i,1,-1)}function dv(i){var o=Mi();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vu,lastRenderedState:i},o.queue=i,i=i.dispatch=r1.bind(null,Bt,i),[o.memoizedState,i]}function wu(i,o,u,h){return i={tag:i,create:o,destroy:u,deps:h,next:null},o=Bt.updateQueue,o===null?(o={lastEffect:null,stores:null},Bt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(h=u.next,u.next=i,i.next=h,o.lastEffect=i)),i}function hv(){return qr().memoizedState}function bd(i,o,u,h){var m=Mi();Bt.flags|=i,m.memoizedState=wu(1|o,u,void 0,h===void 0?null:h)}function kd(i,o,u,h){var m=qr();h=h===void 0?null:h;var y=void 0;if(un!==null){var I=un.memoizedState;if(y=I.destroy,h!==null&&Rp(h,I.deps)){m.memoizedState=wu(o,u,y,h);return}}Bt.flags|=i,m.memoizedState=wu(1|o,u,y,h)}function fv(i,o){return bd(8390656,8,i,o)}function kp(i,o){return kd(2048,8,i,o)}function pv(i,o){return kd(4,2,i,o)}function mv(i,o){return kd(4,4,i,o)}function gv(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function yv(i,o,u){return u=u!=null?u.concat([i]):null,kd(4,4,gv.bind(null,o,i),u)}function xp(){}function _v(i,o){var u=qr();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Rp(o,h[1])?h[0]:(u.memoizedState=[i,o],i)}function vv(i,o){var u=qr();o=o===void 0?null:o;var h=u.memoizedState;return h!==null&&o!==null&&Rp(o,h[1])?h[0]:(i=i(),u.memoizedState=[i,o],i)}function wv(i,o,u){return(Uo&21)===0?(i.baseState&&(i.baseState=!1,hr=!0),i.memoizedState=u):(li(u,o)||(u=Wl(),Bt.lanes|=u,Bo|=u,i.baseState=!0),o)}function t1(i,o){var u=ot;ot=u!==0&&4>u?u:4,i(!0);var h=Sp.transition;Sp.transition={};try{i(!1),o()}finally{ot=u,Sp.transition=h}}function Ev(){return qr().memoizedState}function n1(i,o,u){var h=js(i);if(u={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null},Iv(i))Tv(o,u);else if(u=Z_(i,o,u,h),u!==null){var m=tr();fi(u,i,h,m),Sv(u,o,h)}}function r1(i,o,u){var h=js(i),m={lane:h,action:u,hasEagerState:!1,eagerState:null,next:null};if(Iv(i))Tv(o,m);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var I=o.lastRenderedState,b=y(I,u);if(m.hasEagerState=!0,m.eagerState=b,li(b,I)){var L=o.interleaved;L===null?(m.next=m,_p(o)):(m.next=L.next,L.next=m),o.interleaved=m;return}}catch{}finally{}u=Z_(i,o,m,h),u!==null&&(m=tr(),fi(u,i,h,m),Sv(u,o,h))}}function Iv(i){var o=i.alternate;return i===Bt||o!==null&&o===Bt}function Tv(i,o){yu=Cd=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Sv(i,o,u){if((u&4194240)!==0){var h=o.lanes;h&=i.pendingLanes,u|=h,o.lanes=u,Gl(i,u)}}var xd={readContext:Hr,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},i1={readContext:Hr,useCallback:function(i,o){return Mi().memoizedState=[i,o===void 0?null:o],i},useContext:Hr,useEffect:fv,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,bd(4194308,4,gv.bind(null,o,i),u)},useLayoutEffect:function(i,o){return bd(4194308,4,i,o)},useInsertionEffect:function(i,o){return bd(4,2,i,o)},useMemo:function(i,o){var u=Mi();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var h=Mi();return o=u!==void 0?u(o):o,h.memoizedState=h.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},h.queue=i,i=i.dispatch=n1.bind(null,Bt,i),[h.memoizedState,i]},useRef:function(i){var o=Mi();return i={current:i},o.memoizedState=i},useState:dv,useDebugValue:xp,useDeferredValue:function(i){return Mi().memoizedState=i},useTransition:function(){var i=dv(!1),o=i[0];return i=t1.bind(null,i[1]),Mi().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var h=Bt,m=Mi();if(Nt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),_n===null)throw Error(t(349));(Uo&30)!==0||ov(h,o,u)}m.memoizedState=u;var y={value:u,getSnapshot:o};return m.queue=y,fv(lv.bind(null,h,y,i),[i]),h.flags|=2048,wu(9,av.bind(null,h,y,u,o),void 0,null),u},useId:function(){var i=Mi(),o=_n.identifierPrefix;if(Nt){var u=os,h=ss;u=(h&~(1<<32-pt(h)-1)).toString(32)+u,o=":"+o+"R"+u,u=_u++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=e1++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},s1={readContext:Hr,useCallback:_v,useContext:Hr,useEffect:kp,useImperativeHandle:yv,useInsertionEffect:pv,useLayoutEffect:mv,useMemo:vv,useReducer:Cp,useRef:hv,useState:function(){return Cp(vu)},useDebugValue:xp,useDeferredValue:function(i){var o=qr();return wv(o,un.memoizedState,i)},useTransition:function(){var i=Cp(vu)[0],o=qr().memoizedState;return[i,o]},useMutableSource:iv,useSyncExternalStore:sv,useId:Ev,unstable_isNewReconciler:!1},o1={readContext:Hr,useCallback:_v,useContext:Hr,useEffect:kp,useImperativeHandle:yv,useInsertionEffect:pv,useLayoutEffect:mv,useMemo:vv,useReducer:bp,useRef:hv,useState:function(){return bp(vu)},useDebugValue:xp,useDeferredValue:function(i){var o=qr();return un===null?o.memoizedState=i:wv(o,un.memoizedState,i)},useTransition:function(){var i=bp(vu)[0],o=qr().memoizedState;return[i,o]},useMutableSource:iv,useSyncExternalStore:sv,useId:Ev,unstable_isNewReconciler:!1};function ci(i,o){if(i&&i.defaultProps){o=ne({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Dp(i,o,u,h){o=i.memoizedState,u=u(h,o),u=u==null?o:ne({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Dd={isMounted:function(i){return(i=i._reactInternals)?Pe(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var h=tr(),m=js(i),y=ls(h,m);y.payload=o,u!=null&&(y.callback=u),o=Fs(i,y,m),o!==null&&(fi(o,i,m,h),Sd(o,i,m))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var h=tr(),m=js(i),y=ls(h,m);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Fs(i,y,m),o!==null&&(fi(o,i,m,h),Sd(o,i,m))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=tr(),h=js(i),m=ls(u,h);m.tag=2,o!=null&&(m.callback=o),o=Fs(i,m,h),o!==null&&(fi(o,i,h,u),Sd(o,i,h))}};function Rv(i,o,u,h,m,y,I){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,y,I):o.prototype&&o.prototype.isPureReactComponent?!ou(u,h)||!ou(m,y):!0}function Av(i,o,u){var h=!1,m=Vs,y=o.contextType;return typeof y=="object"&&y!==null?y=Hr(y):(m=dr(o)?Oo:Un.current,h=o.contextTypes,y=(h=h!=null)?$a(i,m):Vs),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Dd,i.stateNode=o,o._reactInternals=i,h&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=m,i.__reactInternalMemoizedMaskedChildContext=y),o}function Pv(i,o,u,h){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,h),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,h),o.state!==i&&Dd.enqueueReplaceState(o,o.state,null)}function Np(i,o,u,h){var m=i.stateNode;m.props=u,m.state=i.memoizedState,m.refs={},vp(i);var y=o.contextType;typeof y=="object"&&y!==null?m.context=Hr(y):(y=dr(o)?Oo:Un.current,m.context=$a(i,y)),m.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Dp(i,o,y,u),m.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Dd.enqueueReplaceState(m,m.state,null),Rd(i,u,m,h),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308)}function Ja(i,o){try{var u="",h=o;do u+=Ee(h),h=h.return;while(h);var m=u}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:m,digest:null}}function Op(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Vp(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var a1=typeof WeakMap=="function"?WeakMap:Map;function Cv(i,o,u){u=ls(-1,u),u.tag=3,u.payload={element:null};var h=o.value;return u.callback=function(){Ud||(Ud=!0,Yp=h),Vp(i,o)},u}function bv(i,o,u){u=ls(-1,u),u.tag=3;var h=i.type.getDerivedStateFromError;if(typeof h=="function"){var m=o.value;u.payload=function(){return h(m)},u.callback=function(){Vp(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Vp(i,o),typeof h!="function"&&(Bs===null?Bs=new Set([this]):Bs.add(this));var I=o.stack;this.componentDidCatch(o.value,{componentStack:I!==null?I:""})}),u}function kv(i,o,u){var h=i.pingCache;if(h===null){h=i.pingCache=new a1;var m=new Set;h.set(o,m)}else m=h.get(o),m===void 0&&(m=new Set,h.set(o,m));m.has(u)||(m.add(u),i=E1.bind(null,i,o,u),o.then(i,i))}function xv(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Dv(i,o,u,h,m){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ls(-1,1),o.tag=2,Fs(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=m,i)}var l1=ae.ReactCurrentOwner,hr=!1;function er(i,o,u,h){o.child=i===null?X_(o,null,u,h):Ka(o,i.child,u,h)}function Nv(i,o,u,h,m){u=u.render;var y=o.ref;return Qa(o,m),h=Ap(i,o,u,h,y,m),u=Pp(),i!==null&&!hr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,us(i,o,m)):(Nt&&u&&up(o),o.flags|=1,er(i,o,h,m),o.child)}function Ov(i,o,u,h,m){if(i===null){var y=u.type;return typeof y=="function"&&!rm(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Vv(i,o,y,h,m)):(i=qd(u.type,null,h,o,o.mode,m),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&m)===0){var I=y.memoizedProps;if(u=u.compare,u=u!==null?u:ou,u(I,h)&&i.ref===o.ref)return us(i,o,m)}return o.flags|=1,i=Hs(y,h),i.ref=o.ref,i.return=o,o.child=i}function Vv(i,o,u,h,m){if(i!==null){var y=i.memoizedProps;if(ou(y,h)&&i.ref===o.ref)if(hr=!1,o.pendingProps=h=y,(i.lanes&m)!==0)(i.flags&131072)!==0&&(hr=!0);else return o.lanes=i.lanes,us(i,o,m)}return Lp(i,o,u,h,m)}function Lv(i,o,u){var h=o.pendingProps,m=h.children,y=i!==null?i.memoizedState:null;if(h.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Za,br),br|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,St(Za,br),br|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=y!==null?y.baseLanes:u,St(Za,br),br|=h}else y!==null?(h=y.baseLanes|u,o.memoizedState=null):h=u,St(Za,br),br|=h;return er(i,o,m,u),o.child}function Mv(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Lp(i,o,u,h,m){var y=dr(u)?Oo:Un.current;return y=$a(o,y),Qa(o,m),u=Ap(i,o,u,h,y,m),h=Pp(),i!==null&&!hr?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m,us(i,o,m)):(Nt&&h&&up(o),o.flags|=1,er(i,o,u,m),o.child)}function Fv(i,o,u,h,m){if(dr(u)){var y=!0;gd(o)}else y=!1;if(Qa(o,m),o.stateNode===null)Od(i,o),Av(o,u,h),Np(o,u,h,m),h=!0;else if(i===null){var I=o.stateNode,b=o.memoizedProps;I.props=b;var L=I.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=Hr(Q):(Q=dr(u)?Oo:Un.current,Q=$a(o,Q));var ie=u.getDerivedStateFromProps,oe=typeof ie=="function"||typeof I.getSnapshotBeforeUpdate=="function";oe||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(b!==h||L!==Q)&&Pv(o,I,h,Q),Ms=!1;var re=o.memoizedState;I.state=re,Rd(o,h,I,m),L=o.memoizedState,b!==h||re!==L||cr.current||Ms?(typeof ie=="function"&&(Dp(o,u,ie,h),L=o.memoizedState),(b=Ms||Rv(o,u,b,h,re,L,Q))?(oe||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(o.flags|=4194308)):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=h,o.memoizedState=L),I.props=h,I.state=L,I.context=Q,h=b):(typeof I.componentDidMount=="function"&&(o.flags|=4194308),h=!1)}else{I=o.stateNode,ev(i,o),b=o.memoizedProps,Q=o.type===o.elementType?b:ci(o.type,b),I.props=Q,oe=o.pendingProps,re=I.context,L=u.contextType,typeof L=="object"&&L!==null?L=Hr(L):(L=dr(u)?Oo:Un.current,L=$a(o,L));var Te=u.getDerivedStateFromProps;(ie=typeof Te=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(b!==oe||re!==L)&&Pv(o,I,h,L),Ms=!1,re=o.memoizedState,I.state=re,Rd(o,h,I,m);var be=o.memoizedState;b!==oe||re!==be||cr.current||Ms?(typeof Te=="function"&&(Dp(o,u,Te,h),be=o.memoizedState),(Q=Ms||Rv(o,u,Q,h,re,be,L)||!1)?(ie||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(h,be,L),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(h,be,L)),typeof I.componentDidUpdate=="function"&&(o.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof I.componentDidUpdate!="function"||b===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),o.memoizedProps=h,o.memoizedState=be),I.props=h,I.state=be,I.context=L,h=Q):(typeof I.componentDidUpdate!="function"||b===i.memoizedProps&&re===i.memoizedState||(o.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&re===i.memoizedState||(o.flags|=1024),h=!1)}return Mp(i,o,u,h,y,m)}function Mp(i,o,u,h,m,y){Mv(i,o);var I=(o.flags&128)!==0;if(!h&&!I)return m&&$_(o,u,!1),us(i,o,y);h=o.stateNode,l1.current=o;var b=I&&typeof u.getDerivedStateFromError!="function"?null:h.render();return o.flags|=1,i!==null&&I?(o.child=Ka(o,i.child,null,y),o.child=Ka(o,null,b,y)):er(i,o,b,y),o.memoizedState=h.state,m&&$_(o,u,!0),o.child}function Uv(i){var o=i.stateNode;o.pendingContext?z_(i,o.pendingContext,o.pendingContext!==o.context):o.context&&z_(i,o.context,!1),wp(i,o.containerInfo)}function Bv(i,o,u,h,m){return Wa(),fp(m),o.flags|=256,er(i,o,u,h),o.child}var Fp={dehydrated:null,treeContext:null,retryLane:0};function Up(i){return{baseLanes:i,cachePool:null,transitions:null}}function zv(i,o,u){var h=o.pendingProps,m=Ut.current,y=!1,I=(o.flags&128)!==0,b;if((b=I)||(b=i!==null&&i.memoizedState===null?!1:(m&2)!==0),b?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(m|=1),St(Ut,m&1),i===null)return hp(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(I=h.children,i=h.fallback,y?(h=o.mode,y=o.child,I={mode:"hidden",children:I},(h&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=I):y=Wd(I,h,0,null),i=Ho(i,h,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Up(u),o.memoizedState=Fp,i):Bp(o,I));if(m=i.memoizedState,m!==null&&(b=m.dehydrated,b!==null))return u1(i,o,I,h,b,m,u);if(y){y=h.fallback,I=o.mode,m=i.child,b=m.sibling;var L={mode:"hidden",children:h.children};return(I&1)===0&&o.child!==m?(h=o.child,h.childLanes=0,h.pendingProps=L,o.deletions=null):(h=Hs(m,L),h.subtreeFlags=m.subtreeFlags&14680064),b!==null?y=Hs(b,y):(y=Ho(y,I,u,null),y.flags|=2),y.return=o,h.return=o,h.sibling=y,o.child=h,h=y,y=o.child,I=i.child.memoizedState,I=I===null?Up(u):{baseLanes:I.baseLanes|u,cachePool:null,transitions:I.transitions},y.memoizedState=I,y.childLanes=i.childLanes&~u,o.memoizedState=Fp,h}return y=i.child,i=y.sibling,h=Hs(y,{mode:"visible",children:h.children}),(o.mode&1)===0&&(h.lanes=u),h.return=o,h.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=h,o.memoizedState=null,h}function Bp(i,o){return o=Wd({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Nd(i,o,u,h){return h!==null&&fp(h),Ka(o,i.child,null,u),i=Bp(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function u1(i,o,u,h,m,y,I){if(u)return o.flags&256?(o.flags&=-257,h=Op(Error(t(422))),Nd(i,o,I,h)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=h.fallback,m=o.mode,h=Wd({mode:"visible",children:h.children},m,0,null),y=Ho(y,m,I,null),y.flags|=2,h.return=o,y.return=o,h.sibling=y,o.child=h,(o.mode&1)!==0&&Ka(o,i.child,null,I),o.child.memoizedState=Up(I),o.memoizedState=Fp,y);if((o.mode&1)===0)return Nd(i,o,I,null);if(m.data==="$!"){if(h=m.nextSibling&&m.nextSibling.dataset,h)var b=h.dgst;return h=b,y=Error(t(419)),h=Op(y,h,void 0),Nd(i,o,I,h)}if(b=(I&i.childLanes)!==0,hr||b){if(h=_n,h!==null){switch(I&-I){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(h.suspendedLanes|I))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,as(i,m),fi(h,i,m,-1))}return nm(),h=Op(Error(t(421))),Nd(i,o,I,h)}return m.data==="$?"?(o.flags|=128,o.child=i.child,o=I1.bind(null,i),m._reactRetry=o,null):(i=y.treeContext,Cr=Ns(m.nextSibling),Pr=o,Nt=!0,ui=null,i!==null&&(jr[$r++]=ss,jr[$r++]=os,jr[$r++]=Vo,ss=i.id,os=i.overflow,Vo=o),o=Bp(o,h.children),o.flags|=4096,o)}function jv(i,o,u){i.lanes|=o;var h=i.alternate;h!==null&&(h.lanes|=o),yp(i.return,o,u)}function zp(i,o,u,h,m){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:h,tail:u,tailMode:m}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=h,y.tail=u,y.tailMode=m)}function $v(i,o,u){var h=o.pendingProps,m=h.revealOrder,y=h.tail;if(er(i,o,h.children,u),h=Ut.current,(h&2)!==0)h=h&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&jv(i,u,o);else if(i.tag===19)jv(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}if(St(Ut,h),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)i=u.alternate,i!==null&&Ad(i)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),zp(o,!1,m,u,y);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(i=m.alternate,i!==null&&Ad(i)===null){o.child=m;break}i=m.sibling,m.sibling=u,u=m,m=i}zp(o,!0,u,null,y);break;case"together":zp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Od(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function us(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Bo|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Hs(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Hs(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function c1(i,o,u){switch(o.tag){case 3:Uv(o),Wa();break;case 5:rv(o);break;case 1:dr(o.type)&&gd(o);break;case 4:wp(o,o.stateNode.containerInfo);break;case 10:var h=o.type._context,m=o.memoizedProps.value;St(Id,h._currentValue),h._currentValue=m;break;case 13:if(h=o.memoizedState,h!==null)return h.dehydrated!==null?(St(Ut,Ut.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?zv(i,o,u):(St(Ut,Ut.current&1),i=us(i,o,u),i!==null?i.sibling:null);St(Ut,Ut.current&1);break;case 19:if(h=(u&o.childLanes)!==0,(i.flags&128)!==0){if(h)return $v(i,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),St(Ut,Ut.current),h)break;return null;case 22:case 23:return o.lanes=0,Lv(i,o,u)}return us(i,o,u)}var Hv,jp,qv,Wv;Hv=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},jp=function(){},qv=function(i,o,u,h){var m=i.memoizedProps;if(m!==h){i=o.stateNode,Fo(Li.current);var y=null;switch(u){case"input":m=wr(i,m),h=wr(i,h),y=[];break;case"select":m=ne({},m,{value:void 0}),h=ne({},h,{value:void 0}),y=[];break;case"textarea":m=Qt(i,m),h=Qt(i,h),y=[];break;default:typeof m.onClick!="function"&&typeof h.onClick=="function"&&(i.onclick=fd)}Rn(u,h);var I;u=null;for(Q in m)if(!h.hasOwnProperty(Q)&&m.hasOwnProperty(Q)&&m[Q]!=null)if(Q==="style"){var b=m[Q];for(I in b)b.hasOwnProperty(I)&&(u||(u={}),u[I]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(s.hasOwnProperty(Q)?y||(y=[]):(y=y||[]).push(Q,null));for(Q in h){var L=h[Q];if(b=m!=null?m[Q]:void 0,h.hasOwnProperty(Q)&&L!==b&&(L!=null||b!=null))if(Q==="style")if(b){for(I in b)!b.hasOwnProperty(I)||L&&L.hasOwnProperty(I)||(u||(u={}),u[I]="");for(I in L)L.hasOwnProperty(I)&&b[I]!==L[I]&&(u||(u={}),u[I]=L[I])}else u||(y||(y=[]),y.push(Q,u)),u=L;else Q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,b=b?b.__html:void 0,L!=null&&b!==L&&(y=y||[]).push(Q,L)):Q==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(Q,""+L):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(s.hasOwnProperty(Q)?(L!=null&&Q==="onScroll"&&bt("scroll",i),y||b===L||(y=[])):(y=y||[]).push(Q,L))}u&&(y=y||[]).push("style",u);var Q=y;(o.updateQueue=Q)&&(o.flags|=4)}},Wv=function(i,o,u,h){u!==h&&(o.flags|=4)};function Eu(i,o){if(!Nt)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var h=null;u!==null;)u.alternate!==null&&(h=u),u=u.sibling;h===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function zn(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,h=0;if(o)for(var m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags&14680064,h|=m.flags&14680064,m.return=i,m=m.sibling;else for(m=i.child;m!==null;)u|=m.lanes|m.childLanes,h|=m.subtreeFlags,h|=m.flags,m.return=i,m=m.sibling;return i.subtreeFlags|=h,i.childLanes=u,o}function d1(i,o,u){var h=o.pendingProps;switch(cp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(o),null;case 1:return dr(o.type)&&md(),zn(o),null;case 3:return h=o.stateNode,Ya(),kt(cr),kt(Un),Tp(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(wd(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ui!==null&&(Zp(ui),ui=null))),jp(i,o),zn(o),null;case 5:Ep(o);var m=Fo(gu.current);if(u=o.type,i!==null&&o.stateNode!=null)qv(i,o,u,h,m),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!h){if(o.stateNode===null)throw Error(t(166));return zn(o),null}if(i=Fo(Li.current),wd(o)){h=o.stateNode,u=o.type;var y=o.memoizedProps;switch(h[Vi]=o,h[du]=y,i=(o.mode&1)!==0,u){case"dialog":bt("cancel",h),bt("close",h);break;case"iframe":case"object":case"embed":bt("load",h);break;case"video":case"audio":for(m=0;m<lu.length;m++)bt(lu[m],h);break;case"source":bt("error",h);break;case"img":case"image":case"link":bt("error",h),bt("load",h);break;case"details":bt("toggle",h);break;case"input":As(h,y),bt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!y.multiple},bt("invalid",h);break;case"textarea":sr(h,y),bt("invalid",h)}Rn(u,y),m=null;for(var I in y)if(y.hasOwnProperty(I)){var b=y[I];I==="children"?typeof b=="string"?h.textContent!==b&&(y.suppressHydrationWarning!==!0&&hd(h.textContent,b,i),m=["children",b]):typeof b=="number"&&h.textContent!==""+b&&(y.suppressHydrationWarning!==!0&&hd(h.textContent,b,i),m=["children",""+b]):s.hasOwnProperty(I)&&b!=null&&I==="onScroll"&&bt("scroll",h)}switch(u){case"input":Ii(h),Ti(h,y,!0);break;case"textarea":Ii(h),Vn(h);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(h.onclick=fd)}h=m,o.updateQueue=h,h!==null&&(o.flags|=4)}else{I=m.nodeType===9?m:m.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Er(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=I.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof h.is=="string"?i=I.createElement(u,{is:h.is}):(i=I.createElement(u),u==="select"&&(I=i,h.multiple?I.multiple=!0:h.size&&(I.size=h.size))):i=I.createElementNS(i,u),i[Vi]=o,i[du]=h,Hv(i,o,!1,!1),o.stateNode=i;e:{switch(I=ri(u,h),u){case"dialog":bt("cancel",i),bt("close",i),m=h;break;case"iframe":case"object":case"embed":bt("load",i),m=h;break;case"video":case"audio":for(m=0;m<lu.length;m++)bt(lu[m],i);m=h;break;case"source":bt("error",i),m=h;break;case"img":case"image":case"link":bt("error",i),bt("load",i),m=h;break;case"details":bt("toggle",i),m=h;break;case"input":As(i,h),m=wr(i,h),bt("invalid",i);break;case"option":m=h;break;case"select":i._wrapperState={wasMultiple:!!h.multiple},m=ne({},h,{value:void 0}),bt("invalid",i);break;case"textarea":sr(i,h),m=Qt(i,h),bt("invalid",i);break;default:m=h}Rn(u,m),b=m;for(y in b)if(b.hasOwnProperty(y)){var L=b[y];y==="style"?pn(i,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&fn(i,L)):y==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Sn(i,L):typeof L=="number"&&Sn(i,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?L!=null&&y==="onScroll"&&bt("scroll",i):L!=null&&Z(i,y,L,I))}switch(u){case"input":Ii(i),Ti(i,h,!1);break;case"textarea":Ii(i),Vn(i);break;case"option":h.value!=null&&i.setAttribute("value",""+je(h.value));break;case"select":i.multiple=!!h.multiple,y=h.value,y!=null?Qn(i,!!h.multiple,y,!1):h.defaultValue!=null&&Qn(i,!!h.multiple,h.defaultValue,!0);break;default:typeof m.onClick=="function"&&(i.onclick=fd)}switch(u){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return zn(o),null;case 6:if(i&&o.stateNode!=null)Wv(i,o,i.memoizedProps,h);else{if(typeof h!="string"&&o.stateNode===null)throw Error(t(166));if(u=Fo(gu.current),Fo(Li.current),wd(o)){if(h=o.stateNode,u=o.memoizedProps,h[Vi]=o,(y=h.nodeValue!==u)&&(i=Pr,i!==null))switch(i.tag){case 3:hd(h.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&hd(h.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else h=(u.nodeType===9?u:u.ownerDocument).createTextNode(h),h[Vi]=o,o.stateNode=h}return zn(o),null;case 13:if(kt(Ut),h=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Nt&&Cr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Q_(),Wa(),o.flags|=98560,y=!1;else if(y=wd(o),h!==null&&h.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Vi]=o}else Wa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;zn(o),y=!1}else ui!==null&&(Zp(ui),ui=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(h=h!==null,h!==(i!==null&&i.memoizedState!==null)&&h&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ut.current&1)!==0?cn===0&&(cn=3):nm())),o.updateQueue!==null&&(o.flags|=4),zn(o),null);case 4:return Ya(),jp(i,o),i===null&&uu(o.stateNode.containerInfo),zn(o),null;case 10:return gp(o.type._context),zn(o),null;case 17:return dr(o.type)&&md(),zn(o),null;case 19:if(kt(Ut),y=o.memoizedState,y===null)return zn(o),null;if(h=(o.flags&128)!==0,I=y.rendering,I===null)if(h)Eu(y,!1);else{if(cn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(I=Ad(i),I!==null){for(o.flags|=128,Eu(y,!1),h=I.updateQueue,h!==null&&(o.updateQueue=h,o.flags|=4),o.subtreeFlags=0,h=u,u=o.child;u!==null;)y=u,i=h,y.flags&=14680066,I=y.alternate,I===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=I.childLanes,y.lanes=I.lanes,y.child=I.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=I.memoizedProps,y.memoizedState=I.memoizedState,y.updateQueue=I.updateQueue,y.type=I.type,i=I.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return St(Ut,Ut.current&1|2),o.child}i=i.sibling}y.tail!==null&&ut()>el&&(o.flags|=128,h=!0,Eu(y,!1),o.lanes=4194304)}else{if(!h)if(i=Ad(I),i!==null){if(o.flags|=128,h=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Eu(y,!0),y.tail===null&&y.tailMode==="hidden"&&!I.alternate&&!Nt)return zn(o),null}else 2*ut()-y.renderingStartTime>el&&u!==1073741824&&(o.flags|=128,h=!0,Eu(y,!1),o.lanes=4194304);y.isBackwards?(I.sibling=o.child,o.child=I):(u=y.last,u!==null?u.sibling=I:o.child=I,y.last=I)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=ut(),o.sibling=null,u=Ut.current,St(Ut,h?u&1|2:u&1),o):(zn(o),null);case 22:case 23:return tm(),h=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==h&&(o.flags|=8192),h&&(o.mode&1)!==0?(br&1073741824)!==0&&(zn(o),o.subtreeFlags&6&&(o.flags|=8192)):zn(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function h1(i,o){switch(cp(o),o.tag){case 1:return dr(o.type)&&md(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ya(),kt(cr),kt(Un),Tp(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Ep(o),null;case 13:if(kt(Ut),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Wa()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return kt(Ut),null;case 4:return Ya(),null;case 10:return gp(o.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var Vd=!1,jn=!1,f1=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function Xa(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(h){qt(i,o,h)}else u.current=null}function $p(i,o,u){try{u()}catch(h){qt(i,o,h)}}var Kv=!1;function p1(i,o){if(tp=es,i=R_(),Kf(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var h=u.getSelection&&u.getSelection();if(h&&h.rangeCount!==0){u=h.anchorNode;var m=h.anchorOffset,y=h.focusNode;h=h.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var I=0,b=-1,L=-1,Q=0,ie=0,oe=i,re=null;t:for(;;){for(var Te;oe!==u||m!==0&&oe.nodeType!==3||(b=I+m),oe!==y||h!==0&&oe.nodeType!==3||(L=I+h),oe.nodeType===3&&(I+=oe.nodeValue.length),(Te=oe.firstChild)!==null;)re=oe,oe=Te;for(;;){if(oe===i)break t;if(re===u&&++Q===m&&(b=I),re===y&&++ie===h&&(L=I),(Te=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=Te}u=b===-1||L===-1?null:{start:b,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(np={focusedElem:i,selectionRange:u},es=!1,Ce=o;Ce!==null;)if(o=Ce,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Ce=i;else for(;Ce!==null;){o=Ce;try{var be=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(be!==null){var ke=be.memoizedProps,Xt=be.memoizedState,j=o.stateNode,B=j.getSnapshotBeforeUpdate(o.elementType===o.type?ke:ci(o.type,ke),Xt);j.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var W=o.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){qt(o,o.return,ce)}if(i=o.sibling,i!==null){i.return=o.return,Ce=i;break}Ce=o.return}return be=Kv,Kv=!1,be}function Iu(i,o,u){var h=o.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var m=h=h.next;do{if((m.tag&i)===i){var y=m.destroy;m.destroy=void 0,y!==void 0&&$p(o,u,y)}m=m.next}while(m!==h)}}function Ld(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var h=u.create;u.destroy=h()}u=u.next}while(u!==o)}}function Hp(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Gv(i){var o=i.alternate;o!==null&&(i.alternate=null,Gv(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Vi],delete o[du],delete o[op],delete o[YP],delete o[JP])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Qv(i){return i.tag===5||i.tag===3||i.tag===4}function Yv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Qv(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qp(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=fd));else if(h!==4&&(i=i.child,i!==null))for(qp(i,o,u),i=i.sibling;i!==null;)qp(i,o,u),i=i.sibling}function Wp(i,o,u){var h=i.tag;if(h===5||h===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(h!==4&&(i=i.child,i!==null))for(Wp(i,o,u),i=i.sibling;i!==null;)Wp(i,o,u),i=i.sibling}var bn=null,di=!1;function Us(i,o,u){for(u=u.child;u!==null;)Jv(i,o,u),u=u.sibling}function Jv(i,o,u){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(zr,u)}catch{}switch(u.tag){case 5:jn||Xa(u,o);case 6:var h=bn,m=di;bn=null,Us(i,o,u),bn=h,di=m,bn!==null&&(di?(i=bn,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):bn.removeChild(u.stateNode));break;case 18:bn!==null&&(di?(i=bn,u=u.stateNode,i.nodeType===8?sp(i.parentNode,u):i.nodeType===1&&sp(i,u),bs(i)):sp(bn,u.stateNode));break;case 4:h=bn,m=di,bn=u.stateNode.containerInfo,di=!0,Us(i,o,u),bn=h,di=m;break;case 0:case 11:case 14:case 15:if(!jn&&(h=u.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){m=h=h.next;do{var y=m,I=y.destroy;y=y.tag,I!==void 0&&((y&2)!==0||(y&4)!==0)&&$p(u,o,I),m=m.next}while(m!==h)}Us(i,o,u);break;case 1:if(!jn&&(Xa(u,o),h=u.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=u.memoizedProps,h.state=u.memoizedState,h.componentWillUnmount()}catch(b){qt(u,o,b)}Us(i,o,u);break;case 21:Us(i,o,u);break;case 22:u.mode&1?(jn=(h=jn)||u.memoizedState!==null,Us(i,o,u),jn=h):Us(i,o,u);break;default:Us(i,o,u)}}function Xv(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new f1),o.forEach(function(h){var m=T1.bind(null,i,h);u.has(h)||(u.add(h),h.then(m,m))})}}function hi(i,o){var u=o.deletions;if(u!==null)for(var h=0;h<u.length;h++){var m=u[h];try{var y=i,I=o,b=I;e:for(;b!==null;){switch(b.tag){case 5:bn=b.stateNode,di=!1;break e;case 3:bn=b.stateNode.containerInfo,di=!0;break e;case 4:bn=b.stateNode.containerInfo,di=!0;break e}b=b.return}if(bn===null)throw Error(t(160));Jv(y,I,m),bn=null,di=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(Q){qt(m,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Zv(o,i),o=o.sibling}function Zv(i,o){var u=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(hi(o,i),Fi(i),h&4){try{Iu(3,i,i.return),Ld(3,i)}catch(ke){qt(i,i.return,ke)}try{Iu(5,i,i.return)}catch(ke){qt(i,i.return,ke)}}break;case 1:hi(o,i),Fi(i),h&512&&u!==null&&Xa(u,u.return);break;case 5:if(hi(o,i),Fi(i),h&512&&u!==null&&Xa(u,u.return),i.flags&32){var m=i.stateNode;try{Sn(m,"")}catch(ke){qt(i,i.return,ke)}}if(h&4&&(m=i.stateNode,m!=null)){var y=i.memoizedProps,I=u!==null?u.memoizedProps:y,b=i.type,L=i.updateQueue;if(i.updateQueue=null,L!==null)try{b==="input"&&y.type==="radio"&&y.name!=null&&Tn(m,y),ri(b,I);var Q=ri(b,y);for(I=0;I<L.length;I+=2){var ie=L[I],oe=L[I+1];ie==="style"?pn(m,oe):ie==="dangerouslySetInnerHTML"?fn(m,oe):ie==="children"?Sn(m,oe):Z(m,ie,oe,Q)}switch(b){case"input":Gn(m,y);break;case"textarea":or(m,y);break;case"select":var re=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var Te=y.value;Te!=null?Qn(m,!!y.multiple,Te,!1):re!==!!y.multiple&&(y.defaultValue!=null?Qn(m,!!y.multiple,y.defaultValue,!0):Qn(m,!!y.multiple,y.multiple?[]:"",!1))}m[du]=y}catch(ke){qt(i,i.return,ke)}}break;case 6:if(hi(o,i),Fi(i),h&4){if(i.stateNode===null)throw Error(t(162));m=i.stateNode,y=i.memoizedProps;try{m.nodeValue=y}catch(ke){qt(i,i.return,ke)}}break;case 3:if(hi(o,i),Fi(i),h&4&&u!==null&&u.memoizedState.isDehydrated)try{bs(o.containerInfo)}catch(ke){qt(i,i.return,ke)}break;case 4:hi(o,i),Fi(i);break;case 13:hi(o,i),Fi(i),m=i.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(Qp=ut())),h&4&&Xv(i);break;case 22:if(ie=u!==null&&u.memoizedState!==null,i.mode&1?(jn=(Q=jn)||ie,hi(o,i),jn=Q):hi(o,i),Fi(i),h&8192){if(Q=i.memoizedState!==null,(i.stateNode.isHidden=Q)&&!ie&&(i.mode&1)!==0)for(Ce=i,ie=i.child;ie!==null;){for(oe=Ce=ie;Ce!==null;){switch(re=Ce,Te=re.child,re.tag){case 0:case 11:case 14:case 15:Iu(4,re,re.return);break;case 1:Xa(re,re.return);var be=re.stateNode;if(typeof be.componentWillUnmount=="function"){h=re,u=re.return;try{o=h,be.props=o.memoizedProps,be.state=o.memoizedState,be.componentWillUnmount()}catch(ke){qt(h,u,ke)}}break;case 5:Xa(re,re.return);break;case 22:if(re.memoizedState!==null){nw(oe);continue}}Te!==null?(Te.return=re,Ce=Te):nw(oe)}ie=ie.sibling}e:for(ie=null,oe=i;;){if(oe.tag===5){if(ie===null){ie=oe;try{m=oe.stateNode,Q?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(b=oe.stateNode,L=oe.memoizedProps.style,I=L!=null&&L.hasOwnProperty("display")?L.display:null,b.style.display=Br("display",I))}catch(ke){qt(i,i.return,ke)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=Q?"":oe.memoizedProps}catch(ke){qt(i,i.return,ke)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===i)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===i)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===i)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:hi(o,i),Fi(i),h&4&&Xv(i);break;case 21:break;default:hi(o,i),Fi(i)}}function Fi(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Qv(u)){var h=u;break e}u=u.return}throw Error(t(160))}switch(h.tag){case 5:var m=h.stateNode;h.flags&32&&(Sn(m,""),h.flags&=-33);var y=Yv(i);Wp(i,y,m);break;case 3:case 4:var I=h.stateNode.containerInfo,b=Yv(i);qp(i,b,I);break;default:throw Error(t(161))}}catch(L){qt(i,i.return,L)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function m1(i,o,u){Ce=i,ew(i)}function ew(i,o,u){for(var h=(i.mode&1)!==0;Ce!==null;){var m=Ce,y=m.child;if(m.tag===22&&h){var I=m.memoizedState!==null||Vd;if(!I){var b=m.alternate,L=b!==null&&b.memoizedState!==null||jn;b=Vd;var Q=jn;if(Vd=I,(jn=L)&&!Q)for(Ce=m;Ce!==null;)I=Ce,L=I.child,I.tag===22&&I.memoizedState!==null?rw(m):L!==null?(L.return=I,Ce=L):rw(m);for(;y!==null;)Ce=y,ew(y),y=y.sibling;Ce=m,Vd=b,jn=Q}tw(i)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,Ce=y):tw(i)}}function tw(i){for(;Ce!==null;){var o=Ce;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:jn||Ld(5,o);break;case 1:var h=o.stateNode;if(o.flags&4&&!jn)if(u===null)h.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:ci(o.type,u.memoizedProps);h.componentDidUpdate(m,u.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&nv(o,y,h);break;case 3:var I=o.updateQueue;if(I!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}nv(o,I,u)}break;case 5:var b=o.stateNode;if(u===null&&o.flags&4){u=b;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&bs(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jn||o.flags&512&&Hp(o)}catch(re){qt(o,o.return,re)}}if(o===i){Ce=null;break}if(u=o.sibling,u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function nw(i){for(;Ce!==null;){var o=Ce;if(o===i){Ce=null;break}var u=o.sibling;if(u!==null){u.return=o.return,Ce=u;break}Ce=o.return}}function rw(i){for(;Ce!==null;){var o=Ce;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Ld(4,o)}catch(L){qt(o,u,L)}break;case 1:var h=o.stateNode;if(typeof h.componentDidMount=="function"){var m=o.return;try{h.componentDidMount()}catch(L){qt(o,m,L)}}var y=o.return;try{Hp(o)}catch(L){qt(o,y,L)}break;case 5:var I=o.return;try{Hp(o)}catch(L){qt(o,I,L)}}}catch(L){qt(o,o.return,L)}if(o===i){Ce=null;break}var b=o.sibling;if(b!==null){b.return=o.return,Ce=b;break}Ce=o.return}}var g1=Math.ceil,Md=ae.ReactCurrentDispatcher,Kp=ae.ReactCurrentOwner,Wr=ae.ReactCurrentBatchConfig,dt=0,_n=null,nn=null,kn=0,br=0,Za=Os(0),cn=0,Tu=null,Bo=0,Fd=0,Gp=0,Su=null,fr=null,Qp=0,el=1/0,cs=null,Ud=!1,Yp=null,Bs=null,Bd=!1,zs=null,zd=0,Ru=0,Jp=null,jd=-1,$d=0;function tr(){return(dt&6)!==0?ut():jd!==-1?jd:jd=ut()}function js(i){return(i.mode&1)===0?1:(dt&2)!==0&&kn!==0?kn&-kn:ZP.transition!==null?($d===0&&($d=Wl()),$d):(i=ot,i!==0||(i=window.event,i=i===void 0?16:ba(i.type)),i)}function fi(i,o,u,h){if(50<Ru)throw Ru=0,Jp=null,Error(t(185));Co(i,u,h),((dt&2)===0||i!==_n)&&(i===_n&&((dt&2)===0&&(Fd|=u),cn===4&&$s(i,kn)),pr(i,h),u===1&&dt===0&&(o.mode&1)===0&&(el=ut()+500,yd&&Ls()))}function pr(i,o){var u=i.callbackNode;Po(i,o);var h=Ji(i,i===_n?kn:0);if(h===0)u!==null&&$t(u),i.callbackNode=null,i.callbackPriority=0;else if(o=h&-h,i.callbackPriority!==o){if(u!=null&&$t(u),o===1)i.tag===0?XP(sw.bind(null,i)):H_(sw.bind(null,i)),GP(function(){(dt&6)===0&&Ls()}),u=null;else{switch(Ri(h)){case 1:u=Xn;break;case 4:u=Mn;break;case 16:u=ii;break;case 536870912:u=ur;break;default:u=ii}u=fw(u,iw.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function iw(i,o){if(jd=-1,$d=0,(dt&6)!==0)throw Error(t(327));var u=i.callbackNode;if(tl()&&i.callbackNode!==u)return null;var h=Ji(i,i===_n?kn:0);if(h===0)return null;if((h&30)!==0||(h&i.expiredLanes)!==0||o)o=Hd(i,h);else{o=h;var m=dt;dt|=2;var y=aw();(_n!==i||kn!==o)&&(cs=null,el=ut()+500,jo(i,o));do try{v1();break}catch(b){ow(i,b)}while(!0);mp(),Md.current=y,dt=m,nn!==null?o=0:(_n=null,kn=0,o=cn)}if(o!==0){if(o===2&&(m=ql(i),m!==0&&(h=m,o=Xp(i,m))),o===1)throw u=Tu,jo(i,0),$s(i,h),pr(i,ut()),u;if(o===6)$s(i,h);else{if(m=i.current.alternate,(h&30)===0&&!y1(m)&&(o=Hd(i,h),o===2&&(y=ql(i),y!==0&&(h=y,o=Xp(i,y))),o===1))throw u=Tu,jo(i,0),$s(i,h),pr(i,ut()),u;switch(i.finishedWork=m,i.finishedLanes=h,o){case 0:case 1:throw Error(t(345));case 2:$o(i,fr,cs);break;case 3:if($s(i,h),(h&130023424)===h&&(o=Qp+500-ut(),10<o)){if(Ji(i,0)!==0)break;if(m=i.suspendedLanes,(m&h)!==h){tr(),i.pingedLanes|=i.suspendedLanes&m;break}i.timeoutHandle=ip($o.bind(null,i,fr,cs),o);break}$o(i,fr,cs);break;case 4:if($s(i,h),(h&4194240)===h)break;for(o=i.eventTimes,m=-1;0<h;){var I=31-pt(h);y=1<<I,I=o[I],I>m&&(m=I),h&=~y}if(h=m,h=ut()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*g1(h/1960))-h,10<h){i.timeoutHandle=ip($o.bind(null,i,fr,cs),h);break}$o(i,fr,cs);break;case 5:$o(i,fr,cs);break;default:throw Error(t(329))}}}return pr(i,ut()),i.callbackNode===u?iw.bind(null,i):null}function Xp(i,o){var u=Su;return i.current.memoizedState.isDehydrated&&(jo(i,o).flags|=256),i=Hd(i,o),i!==2&&(o=fr,fr=u,o!==null&&Zp(o)),i}function Zp(i){fr===null?fr=i:fr.push.apply(fr,i)}function y1(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var h=0;h<u.length;h++){var m=u[h],y=m.getSnapshot;m=m.value;try{if(!li(y(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $s(i,o){for(o&=~Gp,o&=~Fd,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-pt(o),h=1<<u;i[u]=-1,o&=~h}}function sw(i){if((dt&6)!==0)throw Error(t(327));tl();var o=Ji(i,0);if((o&1)===0)return pr(i,ut()),null;var u=Hd(i,o);if(i.tag!==0&&u===2){var h=ql(i);h!==0&&(o=h,u=Xp(i,h))}if(u===1)throw u=Tu,jo(i,0),$s(i,o),pr(i,ut()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,$o(i,fr,cs),pr(i,ut()),null}function em(i,o){var u=dt;dt|=1;try{return i(o)}finally{dt=u,dt===0&&(el=ut()+500,yd&&Ls())}}function zo(i){zs!==null&&zs.tag===0&&(dt&6)===0&&tl();var o=dt;dt|=1;var u=Wr.transition,h=ot;try{if(Wr.transition=null,ot=1,i)return i()}finally{ot=h,Wr.transition=u,dt=o,(dt&6)===0&&Ls()}}function tm(){br=Za.current,kt(Za)}function jo(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,KP(u)),nn!==null)for(u=nn.return;u!==null;){var h=u;switch(cp(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&md();break;case 3:Ya(),kt(cr),kt(Un),Tp();break;case 5:Ep(h);break;case 4:Ya();break;case 13:kt(Ut);break;case 19:kt(Ut);break;case 10:gp(h.type._context);break;case 22:case 23:tm()}u=u.return}if(_n=i,nn=i=Hs(i.current,null),kn=br=o,cn=0,Tu=null,Gp=Fd=Bo=0,fr=Su=null,Mo!==null){for(o=0;o<Mo.length;o++)if(u=Mo[o],h=u.interleaved,h!==null){u.interleaved=null;var m=h.next,y=u.pending;if(y!==null){var I=y.next;y.next=m,h.next=I}u.pending=h}Mo=null}return i}function ow(i,o){do{var u=nn;try{if(mp(),Pd.current=xd,Cd){for(var h=Bt.memoizedState;h!==null;){var m=h.queue;m!==null&&(m.pending=null),h=h.next}Cd=!1}if(Uo=0,yn=un=Bt=null,yu=!1,_u=0,Kp.current=null,u===null||u.return===null){cn=1,Tu=o,nn=null;break}e:{var y=i,I=u.return,b=u,L=o;if(o=kn,b.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Q=L,ie=b,oe=ie.tag;if((ie.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var Te=xv(I);if(Te!==null){Te.flags&=-257,Dv(Te,I,b,y,o),Te.mode&1&&kv(y,Q,o),o=Te,L=Q;var be=o.updateQueue;if(be===null){var ke=new Set;ke.add(L),o.updateQueue=ke}else be.add(L);break e}else{if((o&1)===0){kv(y,Q,o),nm();break e}L=Error(t(426))}}else if(Nt&&b.mode&1){var Xt=xv(I);if(Xt!==null){(Xt.flags&65536)===0&&(Xt.flags|=256),Dv(Xt,I,b,y,o),fp(Ja(L,b));break e}}y=L=Ja(L,b),cn!==4&&(cn=2),Su===null?Su=[y]:Su.push(y),y=I;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var j=Cv(y,L,o);tv(y,j);break e;case 1:b=L;var B=y.type,W=y.stateNode;if((y.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Bs===null||!Bs.has(W)))){y.flags|=65536,o&=-o,y.lanes|=o;var ce=bv(y,b,o);tv(y,ce);break e}}y=y.return}while(y!==null)}uw(u)}catch(Oe){o=Oe,nn===u&&u!==null&&(nn=u=u.return);continue}break}while(!0)}function aw(){var i=Md.current;return Md.current=xd,i===null?xd:i}function nm(){(cn===0||cn===3||cn===2)&&(cn=4),_n===null||(Bo&268435455)===0&&(Fd&268435455)===0||$s(_n,kn)}function Hd(i,o){var u=dt;dt|=2;var h=aw();(_n!==i||kn!==o)&&(cs=null,jo(i,o));do try{_1();break}catch(m){ow(i,m)}while(!0);if(mp(),dt=u,Md.current=h,nn!==null)throw Error(t(261));return _n=null,kn=0,cn}function _1(){for(;nn!==null;)lw(nn)}function v1(){for(;nn!==null&&!nt();)lw(nn)}function lw(i){var o=hw(i.alternate,i,br);i.memoizedProps=i.pendingProps,o===null?uw(i):nn=o,Kp.current=null}function uw(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=d1(u,o,br),u!==null){nn=u;return}}else{if(u=h1(u,o),u!==null){u.flags&=32767,nn=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{cn=6,nn=null;return}}if(o=o.sibling,o!==null){nn=o;return}nn=o=i}while(o!==null);cn===0&&(cn=5)}function $o(i,o,u){var h=ot,m=Wr.transition;try{Wr.transition=null,ot=1,w1(i,o,u,h)}finally{Wr.transition=m,ot=h}return null}function w1(i,o,u,h){do tl();while(zs!==null);if((dt&6)!==0)throw Error(t(327));u=i.finishedWork;var m=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(jf(i,y),i===_n&&(nn=_n=null,kn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Bd||(Bd=!0,fw(ii,function(){return tl(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=Wr.transition,Wr.transition=null;var I=ot;ot=1;var b=dt;dt|=4,Kp.current=null,p1(i,u),Zv(u,i),BP(np),es=!!tp,np=tp=null,i.current=u,m1(u),Ht(),dt=b,ot=I,Wr.transition=y}else i.current=u;if(Bd&&(Bd=!1,zs=i,zd=m),y=i.pendingLanes,y===0&&(Bs=null),Ze(u.stateNode),pr(i,ut()),o!==null)for(h=i.onRecoverableError,u=0;u<o.length;u++)m=o[u],h(m.value,{componentStack:m.stack,digest:m.digest});if(Ud)throw Ud=!1,i=Yp,Yp=null,i;return(zd&1)!==0&&i.tag!==0&&tl(),y=i.pendingLanes,(y&1)!==0?i===Jp?Ru++:(Ru=0,Jp=i):Ru=0,Ls(),null}function tl(){if(zs!==null){var i=Ri(zd),o=Wr.transition,u=ot;try{if(Wr.transition=null,ot=16>i?16:i,zs===null)var h=!1;else{if(i=zs,zs=null,zd=0,(dt&6)!==0)throw Error(t(331));var m=dt;for(dt|=4,Ce=i.current;Ce!==null;){var y=Ce,I=y.child;if((Ce.flags&16)!==0){var b=y.deletions;if(b!==null){for(var L=0;L<b.length;L++){var Q=b[L];for(Ce=Q;Ce!==null;){var ie=Ce;switch(ie.tag){case 0:case 11:case 15:Iu(8,ie,y)}var oe=ie.child;if(oe!==null)oe.return=ie,Ce=oe;else for(;Ce!==null;){ie=Ce;var re=ie.sibling,Te=ie.return;if(Gv(ie),ie===Q){Ce=null;break}if(re!==null){re.return=Te,Ce=re;break}Ce=Te}}}var be=y.alternate;if(be!==null){var ke=be.child;if(ke!==null){be.child=null;do{var Xt=ke.sibling;ke.sibling=null,ke=Xt}while(ke!==null)}}Ce=y}}if((y.subtreeFlags&2064)!==0&&I!==null)I.return=y,Ce=I;else e:for(;Ce!==null;){if(y=Ce,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Iu(9,y,y.return)}var j=y.sibling;if(j!==null){j.return=y.return,Ce=j;break e}Ce=y.return}}var B=i.current;for(Ce=B;Ce!==null;){I=Ce;var W=I.child;if((I.subtreeFlags&2064)!==0&&W!==null)W.return=I,Ce=W;else e:for(I=B;Ce!==null;){if(b=Ce,(b.flags&2048)!==0)try{switch(b.tag){case 0:case 11:case 15:Ld(9,b)}}catch(Oe){qt(b,b.return,Oe)}if(b===I){Ce=null;break e}var ce=b.sibling;if(ce!==null){ce.return=b.return,Ce=ce;break e}Ce=b.return}}if(dt=m,Ls(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(zr,i)}catch{}h=!0}return h}finally{ot=u,Wr.transition=o}}return!1}function cw(i,o,u){o=Ja(u,o),o=Cv(i,o,1),i=Fs(i,o,1),o=tr(),i!==null&&(Co(i,1,o),pr(i,o))}function qt(i,o,u){if(i.tag===3)cw(i,i,u);else for(;o!==null;){if(o.tag===3){cw(o,i,u);break}else if(o.tag===1){var h=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Bs===null||!Bs.has(h))){i=Ja(u,i),i=bv(o,i,1),o=Fs(o,i,1),i=tr(),o!==null&&(Co(o,1,i),pr(o,i));break}}o=o.return}}function E1(i,o,u){var h=i.pingCache;h!==null&&h.delete(o),o=tr(),i.pingedLanes|=i.suspendedLanes&u,_n===i&&(kn&u)===u&&(cn===4||cn===3&&(kn&130023424)===kn&&500>ut()-Qp?jo(i,0):Gp|=u),pr(i,o)}function dw(i,o){o===0&&((i.mode&1)===0?o=1:(o=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var u=tr();i=as(i,o),i!==null&&(Co(i,o,u),pr(i,u))}function I1(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),dw(i,u)}function T1(i,o){var u=0;switch(i.tag){case 13:var h=i.stateNode,m=i.memoizedState;m!==null&&(u=m.retryLane);break;case 19:h=i.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(o),dw(i,u)}var hw;hw=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||cr.current)hr=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return hr=!1,c1(i,o,u);hr=(i.flags&131072)!==0}else hr=!1,Nt&&(o.flags&1048576)!==0&&q_(o,vd,o.index);switch(o.lanes=0,o.tag){case 2:var h=o.type;Od(i,o),i=o.pendingProps;var m=$a(o,Un.current);Qa(o,u),m=Ap(null,o,h,i,m,u);var y=Pp();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,dr(h)?(y=!0,gd(o)):y=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,vp(o),m.updater=Dd,o.stateNode=m,m._reactInternals=o,Np(o,h,i,u),o=Mp(null,o,h,!0,y,u)):(o.tag=0,Nt&&y&&up(o),er(null,o,m,u),o=o.child),o;case 16:h=o.elementType;e:{switch(Od(i,o),i=o.pendingProps,m=h._init,h=m(h._payload),o.type=h,m=o.tag=R1(h),i=ci(h,i),m){case 0:o=Lp(null,o,h,i,u);break e;case 1:o=Fv(null,o,h,i,u);break e;case 11:o=Nv(null,o,h,i,u);break e;case 14:o=Ov(null,o,h,ci(h.type,i),u);break e}throw Error(t(306,h,""))}return o;case 0:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:ci(h,m),Lp(i,o,h,m,u);case 1:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:ci(h,m),Fv(i,o,h,m,u);case 3:e:{if(Uv(o),i===null)throw Error(t(387));h=o.pendingProps,y=o.memoizedState,m=y.element,ev(i,o),Rd(o,h,null,u);var I=o.memoizedState;if(h=I.element,y.isDehydrated)if(y={element:h,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){m=Ja(Error(t(423)),o),o=Bv(i,o,h,u,m);break e}else if(h!==m){m=Ja(Error(t(424)),o),o=Bv(i,o,h,u,m);break e}else for(Cr=Ns(o.stateNode.containerInfo.firstChild),Pr=o,Nt=!0,ui=null,u=X_(o,null,h,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Wa(),h===m){o=us(i,o,u);break e}er(i,o,h,u)}o=o.child}return o;case 5:return rv(o),i===null&&hp(o),h=o.type,m=o.pendingProps,y=i!==null?i.memoizedProps:null,I=m.children,rp(h,m)?I=null:y!==null&&rp(h,y)&&(o.flags|=32),Mv(i,o),er(i,o,I,u),o.child;case 6:return i===null&&hp(o),null;case 13:return zv(i,o,u);case 4:return wp(o,o.stateNode.containerInfo),h=o.pendingProps,i===null?o.child=Ka(o,null,h,u):er(i,o,h,u),o.child;case 11:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:ci(h,m),Nv(i,o,h,m,u);case 7:return er(i,o,o.pendingProps,u),o.child;case 8:return er(i,o,o.pendingProps.children,u),o.child;case 12:return er(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(h=o.type._context,m=o.pendingProps,y=o.memoizedProps,I=m.value,St(Id,h._currentValue),h._currentValue=I,y!==null)if(li(y.value,I)){if(y.children===m.children&&!cr.current){o=us(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var b=y.dependencies;if(b!==null){I=y.child;for(var L=b.firstContext;L!==null;){if(L.context===h){if(y.tag===1){L=ls(-1,u&-u),L.tag=2;var Q=y.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?L.next=L:(L.next=ie.next,ie.next=L),Q.pending=L}}y.lanes|=u,L=y.alternate,L!==null&&(L.lanes|=u),yp(y.return,u,o),b.lanes|=u;break}L=L.next}}else if(y.tag===10)I=y.type===o.type?null:y.child;else if(y.tag===18){if(I=y.return,I===null)throw Error(t(341));I.lanes|=u,b=I.alternate,b!==null&&(b.lanes|=u),yp(I,u,o),I=y.sibling}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===o){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}er(i,o,m.children,u),o=o.child}return o;case 9:return m=o.type,h=o.pendingProps.children,Qa(o,u),m=Hr(m),h=h(m),o.flags|=1,er(i,o,h,u),o.child;case 14:return h=o.type,m=ci(h,o.pendingProps),m=ci(h.type,m),Ov(i,o,h,m,u);case 15:return Vv(i,o,o.type,o.pendingProps,u);case 17:return h=o.type,m=o.pendingProps,m=o.elementType===h?m:ci(h,m),Od(i,o),o.tag=1,dr(h)?(i=!0,gd(o)):i=!1,Qa(o,u),Av(o,h,m),Np(o,h,m,u),Mp(null,o,h,!0,i,u);case 19:return $v(i,o,u);case 22:return Lv(i,o,u)}throw Error(t(156,o.tag))};function fw(i,o){return Dt(i,o)}function S1(i,o,u,h){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kr(i,o,u,h){return new S1(i,o,u,h)}function rm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function R1(i){if(typeof i=="function")return rm(i)?1:0;if(i!=null){if(i=i.$$typeof,i===M)return 11;if(i===He)return 14}return 2}function Hs(i,o){var u=i.alternate;return u===null?(u=Kr(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function qd(i,o,u,h,m,y){var I=2;if(h=i,typeof i=="function")rm(i)&&(I=1);else if(typeof i=="string")I=5;else e:switch(i){case T:return Ho(u.children,m,y,o);case S:I=8,m|=8;break;case P:return i=Kr(12,u,o,m|2),i.elementType=P,i.lanes=y,i;case C:return i=Kr(13,u,o,m),i.elementType=C,i.lanes=y,i;case Me:return i=Kr(19,u,o,m),i.elementType=Me,i.lanes=y,i;case Ne:return Wd(u,m,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case N:I=10;break e;case x:I=9;break e;case M:I=11;break e;case He:I=14;break e;case ye:I=16,h=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Kr(I,u,o,m),o.elementType=i,o.type=h,o.lanes=y,o}function Ho(i,o,u,h){return i=Kr(7,i,h,o),i.lanes=u,i}function Wd(i,o,u,h){return i=Kr(22,i,h,o),i.elementType=Ne,i.lanes=u,i.stateNode={isHidden:!1},i}function im(i,o,u){return i=Kr(6,i,null,o),i.lanes=u,i}function sm(i,o,u){return o=Kr(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function A1(i,o,u,h,m){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=h,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function om(i,o,u,h,m,y,I,b,L){return i=new A1(i,o,u,b,L),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Kr(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:h,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},vp(y),i}function P1(i,o,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:h==null?null:""+h,children:i,containerInfo:o,implementation:u}}function pw(i){if(!i)return Vs;i=i._reactInternals;e:{if(Pe(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(dr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(dr(u))return j_(i,u,o)}return o}function mw(i,o,u,h,m,y,I,b,L){return i=om(u,h,!0,i,m,y,I,b,L),i.context=pw(null),u=i.current,h=tr(),m=js(u),y=ls(h,m),y.callback=o??null,Fs(u,y,m),i.current.lanes=m,Co(i,m,h),pr(i,h),i}function Kd(i,o,u,h){var m=o.current,y=tr(),I=js(m);return u=pw(u),o.context===null?o.context=u:o.pendingContext=u,o=ls(y,I),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Fs(m,o,I),i!==null&&(fi(i,m,I,y),Sd(i,m,I)),I}function Gd(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function gw(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function am(i,o){gw(i,o),(i=i.alternate)&&gw(i,o)}function C1(){return null}var yw=typeof reportError=="function"?reportError:function(i){console.error(i)};function lm(i){this._internalRoot=i}Qd.prototype.render=lm.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));Kd(i,o,null,null)},Qd.prototype.unmount=lm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;zo(function(){Kd(null,i,null,null)}),o[rs]=null}};function Qd(i){this._internalRoot=i}Qd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Jl();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Tr.length&&o!==0&&o<Tr[u].priority;u++);Tr.splice(u,0,i),u===0&&Pa(i)}};function um(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Yd(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function _w(){}function b1(i,o,u,h,m){if(m){if(typeof h=="function"){var y=h;h=function(){var Q=Gd(I);y.call(Q)}}var I=mw(o,h,i,0,null,!1,!1,"",_w);return i._reactRootContainer=I,i[rs]=I.current,uu(i.nodeType===8?i.parentNode:i),zo(),I}for(;m=i.lastChild;)i.removeChild(m);if(typeof h=="function"){var b=h;h=function(){var Q=Gd(L);b.call(Q)}}var L=om(i,0,!1,null,null,!1,!1,"",_w);return i._reactRootContainer=L,i[rs]=L.current,uu(i.nodeType===8?i.parentNode:i),zo(function(){Kd(o,L,u,h)}),L}function Jd(i,o,u,h,m){var y=u._reactRootContainer;if(y){var I=y;if(typeof m=="function"){var b=m;m=function(){var L=Gd(I);b.call(L)}}Kd(o,I,i,m)}else I=b1(u,o,i,m,h);return Gd(I)}Ql=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=ct(o.pendingLanes);u!==0&&(Gl(o,u|1),pr(o,ut()),(dt&6)===0&&(el=ut()+500,Ls()))}break;case 13:zo(function(){var h=as(i,1);if(h!==null){var m=tr();fi(h,i,1,m)}}),am(i,1)}},Ra=function(i){if(i.tag===13){var o=as(i,134217728);if(o!==null){var u=tr();fi(o,i,134217728,u)}am(i,134217728)}},Yl=function(i){if(i.tag===13){var o=js(i),u=as(i,o);if(u!==null){var h=tr();fi(u,i,o,h)}am(i,o)}},Jl=function(){return ot},Xl=function(i,o){var u=ot;try{return ot=i,o()}finally{ot=u}},Ln=function(i,o,u){switch(o){case"input":if(Gn(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var h=u[o];if(h!==i&&h.form===i.form){var m=pd(h);if(!m)throw Error(t(90));Rt(h),Gn(h,m)}}}break;case"textarea":or(i,u);break;case"select":o=u.value,o!=null&&Qn(i,!!u.multiple,o,!1)}},xt=em,Ft=zo;var k1={usingClientEntryPoint:!1,Events:[hu,za,pd,Fe,yt,em]},Au={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x1={bundleType:Au.bundleType,version:Au.version,rendererPackageName:Au.rendererPackageName,rendererConfig:Au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Je(i),i===null?null:i.stateNode},findFiberByHostInstance:Au.findFiberByHostInstance||C1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xd.isDisabled&&Xd.supportsFiber)try{zr=Xd.inject(x1),gn=Xd}catch{}}return mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k1,mr.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!um(o))throw Error(t(200));return P1(i,o,null,u)},mr.createRoot=function(i,o){if(!um(i))throw Error(t(299));var u=!1,h="",m=yw;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=om(i,1,!1,null,null,u,!1,h,m),i[rs]=o.current,uu(i.nodeType===8?i.parentNode:i),new lm(o)},mr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Je(o),i=i===null?null:i.stateNode,i},mr.flushSync=function(i){return zo(i)},mr.hydrate=function(i,o,u){if(!Yd(o))throw Error(t(200));return Jd(null,i,o,!0,u)},mr.hydrateRoot=function(i,o,u){if(!um(i))throw Error(t(405));var h=u!=null&&u.hydratedSources||null,m=!1,y="",I=yw;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(I=u.onRecoverableError)),o=mw(o,null,i,1,u??null,m,!1,y,I),i[rs]=o.current,uu(i),h)for(i=0;i<h.length;i++)u=h[i],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new Qd(o)},mr.render=function(i,o,u){if(!Yd(o))throw Error(t(200));return Jd(null,i,o,!1,u)},mr.unmountComponentAtNode=function(i){if(!Yd(i))throw Error(t(40));return i._reactRootContainer?(zo(function(){Jd(null,null,i,!1,function(){i._reactRootContainer=null,i[rs]=null})}),!0):!1},mr.unstable_batchedUpdates=em,mr.unstable_renderSubtreeIntoContainer=function(i,o,u,h){if(!Yd(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return Jd(i,o,u,!1,h)},mr.version="18.3.1-next-f1338f8080-20240426",mr}var Aw;function LT(){if(Aw)return hm.exports;Aw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hm.exports=U1(),hm.exports}var Pw;function B1(){if(Pw)return Zd;Pw=1;var n=LT();return Zd.createRoot=n.createRoot,Zd.hydrateRoot=n.hydrateRoot,Zd}var z1=B1(),q=xg();const ge=VT(q),j1=N1({__proto__:null,default:ge},[q]);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var MT=n=>{throw TypeError(n)},$1=(n,e,t)=>e.has(n)||MT("Cannot "+t),mm=(n,e,t)=>($1(n,e,"read from private field"),t?t.call(n):e.get(n)),H1=(n,e,t)=>e.has(n)?MT("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),Cw="popstate";function q1(n={}){function e(r,s){let{pathname:a,search:l,hash:c}=r.location;return oc("",{pathname:a,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Ki(s)}return K1(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function an(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function W1(){return Math.random().toString(36).substring(2,10)}function bw(n,e){return{usr:n.state,key:n.key,idx:e}}function oc(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:t,key:e&&e.key||r||W1()}}function Ki({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function yo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function K1(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:a=!1}=r,l=s.history,c="POP",f=null,p=v();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function v(){return(l.state||{idx:null}).idx}function g(){c="POP";let O=v(),J=O==null?null:O-p;p=O,f&&f({action:c,location:U.location,delta:J})}function E(O,J){c="PUSH";let G=oc(U.location,O,J);p=v()+1;let Z=bw(G,p),ae=U.createHref(G);try{l.pushState(Z,"",ae)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;s.location.assign(ae)}a&&f&&f({action:c,location:U.location,delta:1})}function R(O,J){c="REPLACE";let G=oc(U.location,O,J);p=v();let Z=bw(G,p),ae=U.createHref(G);l.replaceState(Z,"",ae),a&&f&&f({action:c,location:U.location,delta:0})}function V(O){return FT(O)}let U={get action(){return c},get location(){return n(s,l)},listen(O){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(Cw,g),f=O,()=>{s.removeEventListener(Cw,g),f=null}},createHref(O){return e(s,O)},createURL:V,encodeLocation(O){let J=V(O);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:E,replace:R,go(O){return l.go(O)}};return U}function FT(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),tt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ki(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var Fu,kw=class{constructor(n){if(H1(this,Fu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(mm(this,Fu).has(n))return mm(this,Fu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){mm(this,Fu).set(n,e)}};Fu=new WeakMap;var G1=new Set(["lazy","caseSensitive","path","id","index","children"]);function Q1(n){return G1.has(n)}var Y1=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function J1(n){return Y1.has(n)}function X1(n){return n.index===!0}function ac(n,e,t=[],r={},s=!1){return n.map((a,l)=>{let c=[...t,String(l)],f=typeof a.id=="string"?a.id:c.join("-");if(tt(a.index!==!0||!a.children,"Cannot specify children on an index route"),tt(s||!r[f],`Found a route id collision on id "${f}".  Route id's must be globally unique within Data Router usages`),X1(a)){let p={...a,id:f};return r[f]=xw(p,e(p)),p}else{let p={...a,id:f,children:void 0};return r[f]=xw(p,e(p)),a.children&&(p.children=ac(a.children,e,c,r,s)),p}})}function xw(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function Ys(n,e,t="/"){return Uu(n,e,t,!1)}function Uu(n,e,t,r){let s=typeof e=="string"?yo(e):e,a=Jr(s.pathname||"/",t);if(a==null)return null;let l=UT(n);eC(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let p=dC(a);c=uC(l[f],p,r)}return c}function Z1(n,e){let{route:t,pathname:r,params:s}=n;return{id:t.id,pathname:r,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function UT(n,e=[],t=[],r="",s=!1){let a=(l,c,f=s,p)=>{let v={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;tt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let g=Hi([r,v.relativePath]),E=t.concat(v);l.children&&l.children.length>0&&(tt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),UT(l.children,e,E,g,f)),!(l.path==null&&!l.index)&&e.push({path:g,score:aC(g,l.index),routesMeta:E})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,c);else for(let p of BT(l.path))a(l,c,!0,p)}),e}function BT(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let l=BT(r.join("/")),c=[];return c.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&c.push(...l),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function eC(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var tC=/^:[\w-]+$/,nC=3,rC=2,iC=1,sC=10,oC=-2,Dw=n=>n==="*";function aC(n,e){let t=n.split("/"),r=t.length;return t.some(Dw)&&(r+=oC),e&&(r+=rC),t.filter(s=>!Dw(s)).reduce((s,a)=>s+(tC.test(a)?nC:a===""?iC:sC),r)}function lC(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function uC(n,e,t=!1){let{routesMeta:r}=n,s={},a="/",l=[];for(let c=0;c<r.length;++c){let f=r[c],p=c===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",g=Oh({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},v),E=f.route;if(!g&&p&&t&&!r[r.length-1].route.index&&(g=Oh({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!g)return null;Object.assign(s,g.params),l.push({params:s,pathname:Hi([a,g.pathname]),pathnameBase:pC(Hi([a,g.pathnameBase])),route:E}),g.pathnameBase!=="/"&&(a=Hi([a,g.pathnameBase]))}return l}function Oh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=cC(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((p,{paramName:v,isOptional:g},E)=>{if(v==="*"){let V=c[E]||"";l=a.slice(0,a.length-V.length).replace(/(.)\/+$/,"$1")}const R=c[E];return g&&!R?p[v]=void 0:p[v]=(R||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function cC(n,e=!1,t=!0){an(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(r.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function dC(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return an(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Jr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function hC({basename:n,pathname:e}){return e==="/"?n:Hi([n,e])}var zT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dg=n=>zT.test(n);function fC(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?yo(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=Nw(t.substring(1),"/"):a=Nw(t,e)):a=e,{pathname:a,search:mC(r),hash:gC(s)}}function Nw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function gm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ng(n){let e=jT(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Og(n,e,t,r=!1){let s;typeof n=="string"?s=yo(n):(s={...n},tt(!s.pathname||!s.pathname.includes("?"),gm("?","pathname","search",s)),tt(!s.pathname||!s.pathname.includes("#"),gm("#","pathname","hash",s)),tt(!s.search||!s.search.includes("#"),gm("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),g-=1;s.pathname=E.join("/")}c=g>=0?e[g]:"/"}let f=fC(s,c),p=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(p||v)&&(f.pathname+="/"),f}var Hi=n=>n.join("/").replace(/\/\/+/g,"/"),pC=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),mC=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,gC=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Dc=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function lc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Nc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var $T=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function HT(n,e){let t=n;if(typeof t!="string"||!zT.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,s=!1;if($T)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),c=Jr(l.pathname,e);l.origin===a.origin&&c!=null?t=c+l.search+l.hash:s=!0}catch{an(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:s,to:t}}var ro=Symbol("Uninstrumented");function yC(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(a){let l=Object.keys(t);for(let c of l)a[c]&&t[c].push(a[c])}}));let r={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=ml(t.lazy,e.lazy,()=>{});s&&(r.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(a=>{let l=s[a],c=t[`lazy.${a}`];if(typeof l=="function"&&c.length>0){let f=ml(c,l,()=>{});f&&(r.lazy=Object.assign(r.lazy||{},{[a]:f}))}})}return["loader","action"].forEach(s=>{let a=e[s];if(typeof a=="function"&&t[s].length>0){let l=a[ro]??a,c=ml(t[s],l,(...f)=>Ow(f[0]));c&&(s==="loader"&&l.hydrate===!0&&(c.hydrate=!0),c[ro]=l,r[s]=c)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(r.middleware=e.middleware.map(s=>{let a=s[ro]??s,l=ml(t.middleware,a,(...c)=>Ow(c[0]));return l?(l[ro]=a,l):s})),r}function _C(n,e){let t={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(s){let a=Object.keys(s);for(let l of a)s[l]&&t[l].push(s[l])}})),t.navigate.length>0){let r=n.navigate[ro]??n.navigate,s=ml(t.navigate,r,(...a)=>{let[l,c]=a;return{to:typeof l=="number"||typeof l=="string"?l:l?Ki(l):".",...Vw(n,c??{})}});s&&(s[ro]=r,n.navigate=s)}if(t.fetch.length>0){let r=n.fetch[ro]??n.fetch,s=ml(t.fetch,r,(...a)=>{let[l,,c,f]=a;return{href:c??".",fetcherKey:l,...Vw(n,f??{})}});s&&(s[ro]=r,n.fetch=s)}return n}function ml(n,e,t){return n.length===0?null:async(...r)=>{let s=await qT(n,t(...r),()=>e(...r),n.length-1);if(s.type==="error")throw s.value;return s.value}}async function qT(n,e,t,r){let s=n[r],a;if(s){let l,c=async()=>(l?console.error("You cannot call instrumented handlers more than once"):l=qT(n,e,t,r-1),a=await l,tt(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await s(c,e)}catch(f){console.error("An instrumentation function threw an error:",f)}l||await c(),await l}else try{a={type:"success",value:await t()}}catch(l){a={type:"error",value:l}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Ow(n){let{request:e,context:t,params:r,unstable_pattern:s}=n;return{request:vC(e),params:{...r},unstable_pattern:s,context:wC(t)}}function Vw(n,e){return{currentUrl:Ki(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function vC(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function wC(n){if(IC(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var EC=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function IC(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===EC}var WT=["POST","PUT","PATCH","DELETE"],TC=new Set(WT),SC=["GET",...WT],RC=new Set(SC),KT=new Set([301,302,303,307,308]),AC=new Set([307,308]),ym={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},PC={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Cu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},CC=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),GT="remix-router-transitions",QT=Symbol("ResetLoaderData");function bC(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";tt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],s=n.mapRouteProperties||CC,a=s;if(n.unstable_instrumentations){let k=n.unstable_instrumentations;a=F=>({...s(F),...yC(k.map(H=>H.route).filter(Boolean),F)})}let l={},c=ac(n.routes,a,void 0,l),f,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let v=n.dataStrategy||OC,g={...n.future},E=null,R=new Set,V=null,U=null,O=null,J=n.hydrationData!=null,G=Ys(c,n.history.location,p),Z=!1,ae=null,se;if(G==null&&!n.patchRoutesOnNavigation){let k=Gr(404,{pathname:n.history.location.pathname}),{matches:F,route:H}=eh(c);se=!0,G=F,ae={[H.id]:k}}else if(G&&!n.hydrationData&&Ft(G,c,n.history.location.pathname).active&&(G=null),G)if(G.some(k=>k.route.lazy))se=!1;else if(!G.some(k=>Vg(k.route)))se=!0;else{let k=n.hydrationData?n.hydrationData.loaderData:null,F=n.hydrationData?n.hydrationData.errors:null;if(F){let H=G.findIndex(te=>F[te.route.id]!==void 0);se=G.slice(0,H+1).every(te=>!Wm(te.route,k,F))}else se=G.every(H=>!Wm(H.route,k,F))}else{se=!1,G=[];let k=Ft(null,c,n.history.location.pathname);k.active&&k.matches&&(Z=!0,G=k.matches)}let fe,T={historyAction:n.history.action,location:n.history.location,matches:G,initialized:se,navigation:ym,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ae,fetchers:new Map,blockers:new Map},S="POP",P=null,N=!1,x,M=!1,C=new Map,Me=null,He=!1,ye=!1,Ne=new Set,ee=new Map,pe=0,ne=-1,D=new Map,K=new Set,he=new Map,ve=new Map,Ee=new Set,we=new Map,Ke,je=null;function st(){if(E=n.history.listen(({action:k,location:F,delta:H})=>{if(Ke){Ke(),Ke=void 0;return}an(we.size===0||H!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=lr({currentLocation:T.location,nextLocation:F,historyAction:k});if(te&&H!=null){let ue=new Promise(Se=>{Ke=Se});n.history.go(H*-1),Ln(te,{state:"blocked",location:F,proceed(){Ln(te,{state:"proceeding",proceed:void 0,reset:void 0,location:F}),ue.then(()=>n.history.go(H))},reset(){let Se=new Map(T.blockers);Se.set(te,Cu),Rt({blockers:Se})}}),P==null||P.resolve(),P=null;return}return Tn(k,F)}),t){XC(e,C);let k=()=>ZC(e,C);e.addEventListener("pagehide",k),Me=()=>e.removeEventListener("pagehide",k)}return T.initialized||Tn("POP",T.location,{initialHydration:!0}),fe}function Mt(){E&&E(),Me&&Me(),R.clear(),x&&x.abort(),T.fetchers.forEach((k,F)=>Yn(F)),T.blockers.forEach((k,F)=>mn(F))}function Ii(k){return R.add(k),()=>R.delete(k)}function Rt(k,F={}){k.matches&&(k.matches=k.matches.map(ue=>{let Se=l[ue.route.id],Ve=ue.route;return Ve.element!==Se.element||Ve.errorElement!==Se.errorElement||Ve.hydrateFallbackElement!==Se.hydrateFallbackElement?{...ue,route:Se}:ue})),T={...T,...k};let H=[],te=[];T.fetchers.forEach((ue,Se)=>{ue.state==="idle"&&(Ee.has(Se)?H.push(Se):te.push(Se))}),Ee.forEach(ue=>{!T.fetchers.has(ue)&&!ee.has(ue)&&H.push(ue)}),[...R].forEach(ue=>ue(T,{deletedFetchers:H,newErrors:k.errors??null,viewTransitionOpts:F.viewTransitionOpts,flushSync:F.flushSync===!0})),H.forEach(ue=>Yn(ue)),te.forEach(ue=>T.fetchers.delete(ue))}function In(k,F,{flushSync:H}={}){var $e,De;let te=T.actionData!=null&&T.navigation.formMethod!=null&&Hn(T.navigation.formMethod)&&T.navigation.state==="loading"&&(($e=k.state)==null?void 0:$e._isRedirect)!==!0,ue;F.actionData?Object.keys(F.actionData).length>0?ue=F.actionData:ue=null:te?ue=T.actionData:ue=null;let Se=F.loaderData?qw(T.loaderData,F.loaderData,F.matches||[],F.errors):T.loaderData,Ve=T.blockers;Ve.size>0&&(Ve=new Map(Ve),Ve.forEach((Ge,Je)=>Ve.set(Je,Cu)));let Ie=He?!1:xt(k,F.matches||T.matches),Re=N===!0||T.navigation.formMethod!=null&&Hn(T.navigation.formMethod)&&((De=k.state)==null?void 0:De._isRedirect)!==!0;f&&(c=f,f=void 0),He||S==="POP"||(S==="PUSH"?n.history.push(k,k.state):S==="REPLACE"&&n.history.replace(k,k.state));let Pe;if(S==="POP"){let Ge=C.get(T.location.pathname);Ge&&Ge.has(k.pathname)?Pe={currentLocation:T.location,nextLocation:k}:C.has(k.pathname)&&(Pe={currentLocation:k,nextLocation:T.location})}else if(M){let Ge=C.get(T.location.pathname);Ge?Ge.add(k.pathname):(Ge=new Set([k.pathname]),C.set(T.location.pathname,Ge)),Pe={currentLocation:T.location,nextLocation:k}}Rt({...F,actionData:ue,loaderData:Se,historyAction:S,location:k,initialized:!0,navigation:ym,revalidation:"idle",restoreScrollPosition:Ie,preventScrollReset:Re,blockers:Ve},{viewTransitionOpts:Pe,flushSync:H===!0}),S="POP",N=!1,M=!1,He=!1,ye=!1,P==null||P.resolve(),P=null,je==null||je.resolve(),je=null}async function wr(k,F){if(P==null||P.resolve(),P=null,typeof k=="number"){P||(P=Qw());let Je=P.promise;return n.history.go(k),Je}let H=qm(T.location,T.matches,p,k,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:te,submission:ue,error:Se}=Lw(!1,H,F),Ve=T.location,Ie=oc(T.location,te,F&&F.state);Ie={...Ie,...n.history.encodeLocation(Ie)};let Re=F&&F.replace!=null?F.replace:void 0,Pe="PUSH";Re===!0?Pe="REPLACE":Re===!1||ue!=null&&Hn(ue.formMethod)&&ue.formAction===T.location.pathname+T.location.search&&(Pe="REPLACE");let $e=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,De=(F&&F.flushSync)===!0,Ge=lr({currentLocation:Ve,nextLocation:Ie,historyAction:Pe});if(Ge){Ln(Ge,{state:"blocked",location:Ie,proceed(){Ln(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:Ie}),wr(k,F)},reset(){let Je=new Map(T.blockers);Je.set(Ge,Cu),Rt({blockers:Je})}});return}await Tn(Pe,Ie,{submission:ue,pendingError:Se,preventScrollReset:$e,replace:F&&F.replace,enableViewTransition:F&&F.viewTransition,flushSync:De,callSiteDefaultShouldRevalidate:F&&F.unstable_defaultShouldRevalidate})}function As(){je||(je=Qw()),Ur(),Rt({revalidation:"loading"});let k=je.promise;return T.navigation.state==="submitting"?k:T.navigation.state==="idle"?(Tn(T.historyAction,T.location,{startUninterruptedRevalidation:!0}),k):(Tn(S||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation,enableViewTransition:M===!0}),k)}async function Tn(k,F,H){x&&x.abort(),x=null,S=k,He=(H&&H.startUninterruptedRevalidation)===!0,yt(T.location,T.matches),N=(H&&H.preventScrollReset)===!0,M=(H&&H.enableViewTransition)===!0;let te=f||c,ue=H&&H.overrideNavigation,Se=H!=null&&H.initialHydration&&T.matches&&T.matches.length>0&&!Z?T.matches:Ys(te,F,p),Ve=(H&&H.flushSync)===!0;if(Se&&T.initialized&&!ye&&jC(T.location,F)&&!(H&&H.submission&&Hn(H.submission.formMethod))){In(F,{matches:Se},{flushSync:Ve});return}let Ie=Ft(Se,te,F.pathname);if(Ie.active&&Ie.matches&&(Se=Ie.matches),!Se){let{error:Dt,notFoundMatches:$t,route:nt}=gt(F.pathname);In(F,{matches:$t,loaderData:{},errors:{[nt.id]:Dt}},{flushSync:Ve});return}x=new AbortController;let Re=ll(n.history,F,x.signal,H&&H.submission),Pe=n.getContext?await n.getContext():new kw,$e;if(H&&H.pendingError)$e=[Js(Se).route.id,{type:"error",error:H.pendingError}];else if(H&&H.submission&&Hn(H.submission.formMethod)){let Dt=await Gn(Re,F,H.submission,Se,Pe,Ie.active,H&&H.initialHydration===!0,{replace:H.replace,flushSync:Ve});if(Dt.shortCircuited)return;if(Dt.pendingActionResult){let[$t,nt]=Dt.pendingActionResult;if(kr(nt)&&lc(nt.error)&&nt.error.status===404){x=null,In(F,{matches:Dt.matches,loaderData:{},errors:{[$t]:nt.error}});return}}Se=Dt.matches||Se,$e=Dt.pendingActionResult,ue=_m(F,H.submission),Ve=!1,Ie.active=!1,Re=ll(n.history,Re.url,Re.signal)}let{shortCircuited:De,matches:Ge,loaderData:Je,errors:Ct}=await Ti(Re,F,Se,Pe,Ie.active,ue,H&&H.submission,H&&H.fetcherSubmission,H&&H.replace,H&&H.initialHydration===!0,Ve,$e,H&&H.callSiteDefaultShouldRevalidate);De||(x=null,In(F,{matches:Ge||Se,...Ww($e),loaderData:Je,errors:Ct}))}async function Gn(k,F,H,te,ue,Se,Ve,Ie={}){Ur();let Re=YC(F,H);if(Rt({navigation:Re},{flushSync:Ie.flushSync===!0}),Se){let De=await Zt(te,F.pathname,k.signal);if(De.type==="aborted")return{shortCircuited:!0};if(De.type==="error"){if(De.partialMatches.length===0){let{matches:Je,route:Ct}=eh(c);return{matches:Je,pendingActionResult:[Ct.id,{type:"error",error:De.error}]}}let Ge=Js(De.partialMatches).route.id;return{matches:De.partialMatches,pendingActionResult:[Ge,{type:"error",error:De.error}]}}else if(De.matches)te=De.matches;else{let{notFoundMatches:Ge,error:Je,route:Ct}=gt(F.pathname);return{matches:Ge,pendingActionResult:[Ct.id,{type:"error",error:Je}]}}}let Pe,$e=mh(te,F);if(!$e.route.action&&!$e.route.lazy)Pe={type:"error",error:Gr(405,{method:k.method,pathname:F.pathname,routeId:$e.route.id})};else{let De=yl(a,l,k,te,$e,Ve?[]:r,ue),Ge=await Vn(k,De,ue,null);if(Pe=Ge[$e.route.id],!Pe){for(let Je of te)if(Ge[Je.route.id]){Pe=Ge[Je.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(Zo(Pe)){let De;return Ie&&Ie.replace!=null?De=Ie.replace:De=jw(Pe.response.headers.get("Location"),new URL(k.url),p,n.history)===T.location.pathname+T.location.search,await or(k,Pe,!0,{submission:H,replace:De}),{shortCircuited:!0}}if(kr(Pe)){let De=Js(te,$e.route.id);return(Ie&&Ie.replace)!==!0&&(S="PUSH"),{matches:te,pendingActionResult:[De.route.id,Pe,$e.route.id]}}return{matches:te,pendingActionResult:[$e.route.id,Pe]}}async function Ti(k,F,H,te,ue,Se,Ve,Ie,Re,Pe,$e,De,Ge){let Je=Se||_m(F,Ve),Ct=Ve||Ie||Gw(Je),Dt=!He&&!Pe;if(ue){if(Dt){let pt=lt(De);Rt({navigation:Je,...pt!==void 0?{actionData:pt}:{}},{flushSync:$e})}let Ze=await Zt(H,F.pathname,k.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){if(Ze.partialMatches.length===0){let{matches:An,route:en}=eh(c);return{matches:An,loaderData:{},errors:{[en.id]:Ze.error}}}let pt=Js(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,loaderData:{},errors:{[pt]:Ze.error}}}else if(Ze.matches)H=Ze.matches;else{let{error:pt,notFoundMatches:An,route:en}=gt(F.pathname);return{matches:An,loaderData:{},errors:{[en.id]:pt}}}}let $t=f||c,{dsMatches:nt,revalidatingFetchers:Ht}=Mw(k,te,a,l,n.history,T,H,Ct,F,Pe?[]:r,Pe===!0,ye,Ne,Ee,he,K,$t,p,n.patchRoutesOnNavigation!=null,De,Ge);if(ne=++pe,!n.dataStrategy&&!nt.some(Ze=>Ze.shouldLoad)&&!nt.some(Ze=>Ze.route.middleware&&Ze.route.middleware.length>0)&&Ht.length===0){let Ze=Rn();return In(F,{matches:H,loaderData:{},errors:De&&kr(De[1])?{[De[0]]:De[1].error}:null,...Ww(De),...Ze?{fetchers:new Map(T.fetchers)}:{}},{flushSync:$e}),{shortCircuited:!0}}if(Dt){let Ze={};if(!ue){Ze.navigation=Je;let pt=lt(De);pt!==void 0&&(Ze.actionData=pt)}Ht.length>0&&(Ze.fetchers=At(Ht)),Rt(Ze,{flushSync:$e})}Ht.forEach(Ze=>{pn(Ze.key),Ze.controller&&ee.set(Ze.key,Ze.controller)});let ut=()=>Ht.forEach(Ze=>pn(Ze.key));x&&x.signal.addEventListener("abort",ut);let{loaderResults:Yi,fetcherResults:Xn}=await Er(nt,Ht,k,te);if(k.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",ut),Ht.forEach(Ze=>ee.delete(Ze.key));let Mn=th(Yi);if(Mn)return await or(k,Mn.result,!0,{replace:Re}),{shortCircuited:!0};if(Mn=th(Xn),Mn)return K.add(Mn.key),await or(k,Mn.result,!0,{replace:Re}),{shortCircuited:!0};let{loaderData:ii,errors:si}=Hw(T,H,Yi,De,Ht,Xn);Pe&&T.errors&&(si={...T.errors,...si});let ur=Rn(),zr=ri(ne),gn=ur||zr||Ht.length>0;return{matches:H,loaderData:ii,errors:si,...gn?{fetchers:new Map(T.fetchers)}:{}}}function lt(k){if(k&&!kr(k[1]))return{[k[0]]:k[1].data};if(T.actionData)return Object.keys(T.actionData).length===0?null:T.actionData}function At(k){return k.forEach(F=>{let H=T.fetchers.get(F.key),te=bu(void 0,H?H.data:void 0);T.fetchers.set(F.key,te)}),new Map(T.fetchers)}async function Qn(k,F,H,te){pn(k);let ue=(te&&te.flushSync)===!0,Se=f||c,Ve=qm(T.location,T.matches,p,H,F,te==null?void 0:te.relative),Ie=Ys(Se,Ve,p),Re=Ft(Ie,Se,Ve);if(Re.active&&Re.matches&&(Ie=Re.matches),!Ie){fn(k,F,Gr(404,{pathname:Ve}),{flushSync:ue});return}let{path:Pe,submission:$e,error:De}=Lw(!0,Ve,te);if(De){fn(k,F,De,{flushSync:ue});return}let Ge=n.getContext?await n.getContext():new kw,Je=(te&&te.preventScrollReset)===!0;if($e&&Hn($e.formMethod)){await Qt(k,F,Pe,Ie,Ge,Re.active,ue,Je,$e,te&&te.unstable_defaultShouldRevalidate);return}he.set(k,{routeId:F,path:Pe}),await sr(k,F,Pe,Ie,Ge,Re.active,ue,Je,$e)}async function Qt(k,F,H,te,ue,Se,Ve,Ie,Re,Pe){Ur(),he.delete(k);let $e=T.fetchers.get(k);Yt(k,JC(Re,$e),{flushSync:Ve});let De=new AbortController,Ge=ll(n.history,H,De.signal,Re);if(Se){let mt=await Zt(te,new URL(Ge.url).pathname,Ge.signal,k);if(mt.type==="aborted")return;if(mt.type==="error"){fn(k,F,mt.error,{flushSync:Ve});return}else if(mt.matches)te=mt.matches;else{fn(k,F,Gr(404,{pathname:H}),{flushSync:Ve});return}}let Je=mh(te,H);if(!Je.route.action&&!Je.route.lazy){let mt=Gr(405,{method:Re.formMethod,pathname:H,routeId:F});fn(k,F,mt,{flushSync:Ve});return}ee.set(k,De);let Ct=pe,Dt=yl(a,l,Ge,te,Je,r,ue),$t=await Vn(Ge,Dt,ue,k),nt=$t[Je.route.id];if(!nt){for(let mt of Dt)if($t[mt.route.id]){nt=$t[mt.route.id];break}}if(Ge.signal.aborted){ee.get(k)===De&&ee.delete(k);return}if(Ee.has(k)){if(Zo(nt)||kr(nt)){Yt(k,ds(void 0));return}}else{if(Zo(nt))if(ee.delete(k),ne>Ct){Yt(k,ds(void 0));return}else return K.add(k),Yt(k,bu(Re)),or(Ge,nt,!1,{fetcherSubmission:Re,preventScrollReset:Ie});if(kr(nt)){fn(k,F,nt.error);return}}let Ht=T.navigation.location||T.location,ut=ll(n.history,Ht,De.signal),Yi=f||c,Xn=T.navigation.state!=="idle"?Ys(Yi,T.navigation.location,p):T.matches;tt(Xn,"Didn't find any matches after fetcher action");let Mn=++pe;D.set(k,Mn);let ii=bu(Re,nt.data);T.fetchers.set(k,ii);let{dsMatches:si,revalidatingFetchers:ur}=Mw(ut,ue,a,l,n.history,T,Xn,Re,Ht,r,!1,ye,Ne,Ee,he,K,Yi,p,n.patchRoutesOnNavigation!=null,[Je.route.id,nt],Pe);ur.filter(mt=>mt.key!==k).forEach(mt=>{let Zn=mt.key,oi=T.fetchers.get(Zn),ct=bu(void 0,oi?oi.data:void 0);T.fetchers.set(Zn,ct),pn(Zn),mt.controller&&ee.set(Zn,mt.controller)}),Rt({fetchers:new Map(T.fetchers)});let zr=()=>ur.forEach(mt=>pn(mt.key));De.signal.addEventListener("abort",zr);let{loaderResults:gn,fetcherResults:Ze}=await Er(si,ur,ut,ue);if(De.signal.aborted)return;if(De.signal.removeEventListener("abort",zr),D.delete(k),ee.delete(k),ur.forEach(mt=>ee.delete(mt.key)),T.fetchers.has(k)){let mt=ds(nt.data);T.fetchers.set(k,mt)}let pt=th(gn);if(pt)return or(ut,pt.result,!1,{preventScrollReset:Ie});if(pt=th(Ze),pt)return K.add(pt.key),or(ut,pt.result,!1,{preventScrollReset:Ie});let{loaderData:An,errors:en}=Hw(T,Xn,gn,void 0,ur,Ze);ri(Mn),T.navigation.state==="loading"&&Mn>ne?(tt(S,"Expected pending action"),x&&x.abort(),In(T.navigation.location,{matches:Xn,loaderData:An,errors:en,fetchers:new Map(T.fetchers)})):(Rt({errors:en,loaderData:qw(T.loaderData,An,Xn,en),fetchers:new Map(T.fetchers)}),ye=!1)}async function sr(k,F,H,te,ue,Se,Ve,Ie,Re){let Pe=T.fetchers.get(k);Yt(k,bu(Re,Pe?Pe.data:void 0),{flushSync:Ve});let $e=new AbortController,De=ll(n.history,H,$e.signal);if(Se){let nt=await Zt(te,new URL(De.url).pathname,De.signal,k);if(nt.type==="aborted")return;if(nt.type==="error"){fn(k,F,nt.error,{flushSync:Ve});return}else if(nt.matches)te=nt.matches;else{fn(k,F,Gr(404,{pathname:H}),{flushSync:Ve});return}}let Ge=mh(te,H);ee.set(k,$e);let Je=pe,Ct=yl(a,l,De,te,Ge,r,ue),$t=(await Vn(De,Ct,ue,k))[Ge.route.id];if(ee.get(k)===$e&&ee.delete(k),!De.signal.aborted){if(Ee.has(k)){Yt(k,ds(void 0));return}if(Zo($t))if(ne>Je){Yt(k,ds(void 0));return}else{K.add(k),await or(De,$t,!1,{preventScrollReset:Ie});return}if(kr($t)){fn(k,F,$t.error);return}Yt(k,ds($t.data))}}async function or(k,F,H,{submission:te,fetcherSubmission:ue,preventScrollReset:Se,replace:Ve}={}){H||(P==null||P.resolve(),P=null),F.response.headers.has("X-Remix-Revalidate")&&(ye=!0);let Ie=F.response.headers.get("Location");tt(Ie,"Expected a Location header on the redirect Response"),Ie=jw(Ie,new URL(k.url),p,n.history);let Re=oc(T.location,Ie,{_isRedirect:!0});if(t){let Ct=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Ct=!0;else if(Dg(Ie)){const Dt=FT(Ie,!0);Ct=Dt.origin!==e.location.origin||Jr(Dt.pathname,p)==null}if(Ct){Ve?e.location.replace(Ie):e.location.assign(Ie);return}}x=null;let Pe=Ve===!0||F.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:$e,formAction:De,formEncType:Ge}=T.navigation;!te&&!ue&&$e&&De&&Ge&&(te=Gw(T.navigation));let Je=te||ue;if(AC.has(F.response.status)&&Je&&Hn(Je.formMethod))await Tn(Pe,Re,{submission:{...Je,formAction:Ie},preventScrollReset:Se||N,enableViewTransition:H?M:void 0});else{let Ct=_m(Re,te);await Tn(Pe,Re,{overrideNavigation:Ct,fetcherSubmission:ue,preventScrollReset:Se||N,enableViewTransition:H?M:void 0})}}async function Vn(k,F,H,te){var Ve;let ue,Se={};try{ue=await LC(v,k,F,te,H,!1)}catch(Ie){return F.filter(Re=>Re.shouldLoad).forEach(Re=>{Se[Re.route.id]={type:"error",error:Ie}}),Se}if(k.signal.aborted)return Se;if(!Hn(k.method))for(let Ie of F){if(((Ve=ue[Ie.route.id])==null?void 0:Ve.type)==="error")break;!ue.hasOwnProperty(Ie.route.id)&&!T.loaderData.hasOwnProperty(Ie.route.id)&&(!T.errors||!T.errors.hasOwnProperty(Ie.route.id))&&Ie.shouldCallHandler()&&(ue[Ie.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Ie.route.id}`)})}for(let[Ie,Re]of Object.entries(ue))if(WC(Re)){let Pe=Re.result;Se[Ie]={type:"redirect",response:BC(Pe,k,Ie,F,p)}}else Se[Ie]=await UC(Re);return Se}async function Er(k,F,H,te){let ue=Vn(H,k,te,null),Se=Promise.all(F.map(async Re=>{if(Re.matches&&Re.match&&Re.request&&Re.controller){let $e=(await Vn(Re.request,Re.matches,te,Re.key))[Re.match.route.id];return{[Re.key]:$e}}else return Promise.resolve({[Re.key]:{type:"error",error:Gr(404,{pathname:Re.path})}})})),Ve=await ue,Ie=(await Se).reduce((Re,Pe)=>Object.assign(Re,Pe),{});return{loaderResults:Ve,fetcherResults:Ie}}function Ur(){ye=!0,he.forEach((k,F)=>{ee.has(F)&&Ne.add(F),pn(F)})}function Yt(k,F,H={}){T.fetchers.set(k,F),Rt({fetchers:new Map(T.fetchers)},{flushSync:(H&&H.flushSync)===!0})}function fn(k,F,H,te={}){let ue=Js(T.matches,F);Yn(k),Rt({errors:{[ue.route.id]:H},fetchers:new Map(T.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Sn(k){return ve.set(k,(ve.get(k)||0)+1),Ee.has(k)&&Ee.delete(k),T.fetchers.get(k)||PC}function Ir(k,F){pn(k,F==null?void 0:F.reason),Yt(k,ds(null))}function Yn(k){let F=T.fetchers.get(k);ee.has(k)&&!(F&&F.state==="loading"&&D.has(k))&&pn(k),he.delete(k),D.delete(k),K.delete(k),Ee.delete(k),Ne.delete(k),T.fetchers.delete(k)}function Br(k){let F=(ve.get(k)||0)-1;F<=0?(ve.delete(k),Ee.add(k)):ve.set(k,F),Rt({fetchers:new Map(T.fetchers)})}function pn(k,F){let H=ee.get(k);H&&(H.abort(F),ee.delete(k))}function ni(k){for(let F of k){let H=Sn(F),te=ds(H.data);T.fetchers.set(F,te)}}function Rn(){let k=[],F=!1;for(let H of K){let te=T.fetchers.get(H);tt(te,`Expected fetcher: ${H}`),te.state==="loading"&&(K.delete(H),k.push(H),F=!0)}return ni(k),F}function ri(k){let F=[];for(let[H,te]of D)if(te<k){let ue=T.fetchers.get(H);tt(ue,`Expected fetcher: ${H}`),ue.state==="loading"&&(pn(H),D.delete(H),F.push(H))}return ni(F),F.length>0}function ar(k,F){let H=T.blockers.get(k)||Cu;return we.get(k)!==F&&we.set(k,F),H}function mn(k){T.blockers.delete(k),we.delete(k)}function Ln(k,F){let H=T.blockers.get(k)||Cu;tt(H.state==="unblocked"&&F.state==="blocked"||H.state==="blocked"&&F.state==="blocked"||H.state==="blocked"&&F.state==="proceeding"||H.state==="blocked"&&F.state==="unblocked"||H.state==="proceeding"&&F.state==="unblocked",`Invalid blocker state transition: ${H.state} -> ${F.state}`);let te=new Map(T.blockers);te.set(k,F),Rt({blockers:te})}function lr({currentLocation:k,nextLocation:F,historyAction:H}){if(we.size===0)return;we.size>1&&an(!1,"A router only supports one blocker at a time");let te=Array.from(we.entries()),[ue,Se]=te[te.length-1],Ve=T.blockers.get(ue);if(!(Ve&&Ve.state==="proceeding")&&Se({currentLocation:k,nextLocation:F,historyAction:H}))return ue}function gt(k){let F=Gr(404,{pathname:k}),H=f||c,{matches:te,route:ue}=eh(H);return{notFoundMatches:te,route:ue,error:F}}function Si(k,F,H){if(V=k,O=F,U=H||null,!J&&T.navigation===ym){J=!0;let te=xt(T.location,T.matches);te!=null&&Rt({restoreScrollPosition:te})}return()=>{V=null,O=null,U=null}}function Fe(k,F){return U&&U(k,F.map(te=>Z1(te,T.loaderData)))||k.key}function yt(k,F){if(V&&O){let H=Fe(k,F);V[H]=O()}}function xt(k,F){if(V){let H=Fe(k,F),te=V[H];if(typeof te=="number")return te}return null}function Ft(k,F,H){if(n.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:Uu(F,H,p,!0)}}else return{active:!0,matches:Uu(F,H,p,!0)||[]};return{active:!1,matches:null}}async function Zt(k,F,H,te){if(!n.patchRoutesOnNavigation)return{type:"success",matches:k};let ue=k;for(;;){let Se=f==null,Ve=f||c,Ie=l;try{await n.patchRoutesOnNavigation({signal:H,path:F,matches:ue,fetcherKey:te,patch:($e,De)=>{H.aborted||Fw($e,De,Ve,Ie,a,!1)}})}catch($e){return{type:"error",error:$e,partialMatches:ue}}finally{Se&&!H.aborted&&(c=[...c])}if(H.aborted)return{type:"aborted"};let Re=Ys(Ve,F,p),Pe=null;if(Re){if(Object.keys(Re[0].params).length===0)return{type:"success",matches:Re};if(Pe=Uu(Ve,F,p,!0),!(Pe&&ue.length<Pe.length&&Pt(ue,Pe.slice(0,ue.length))))return{type:"success",matches:Re}}if(Pe||(Pe=Uu(Ve,F,p,!0)),!Pe||Pt(ue,Pe))return{type:"success",matches:null};ue=Pe}}function Pt(k,F){return k.length===F.length&&k.every((H,te)=>H.route.id===F[te].route.id)}function jt(k){l={},f=ac(k,a,void 0,l)}function Jn(k,F,H=!1){let te=f==null;Fw(k,F,f||c,l,a,H),te&&(c=[...c],Rt({}))}return fe={get basename(){return p},get future(){return g},get state(){return T},get routes(){return c},get window(){return e},initialize:st,subscribe:Ii,enableScrollRestoration:Si,navigate:wr,fetch:Qn,revalidate:As,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:Sn,resetFetcher:Ir,deleteFetcher:Br,dispose:Mt,getBlocker:ar,deleteBlocker:mn,patchRoutes:Jn,_internalFetchControllers:ee,_internalSetRoutes:jt,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){Rt(k)}},n.unstable_instrumentations&&(fe=_C(fe,n.unstable_instrumentations.map(k=>k.router).filter(Boolean))),fe}function kC(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function qm(n,e,t,r,s,a){let l,c;if(s){l=[];for(let p of e)if(l.push(p),p.route.id===s){c=p;break}}else l=e,c=e[e.length-1];let f=Og(r||".",Ng(l),Jr(n.pathname,t)||n.pathname,a==="path");if(r==null&&(f.search=n.search,f.hash=n.hash),(r==null||r===""||r===".")&&c){let p=Mg(f.search);if(c.route.index&&!p)f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let v=new URLSearchParams(f.search),g=v.getAll("index");v.delete("index"),g.filter(R=>R).forEach(R=>v.append("index",R));let E=v.toString();f.search=E?`?${E}`:""}}return t!=="/"&&(f.pathname=hC({basename:t,pathname:f.pathname})),Ki(f)}function Lw(n,e,t){if(!t||!kC(t))return{path:e};if(t.formMethod&&!QC(t.formMethod))return{path:e,error:Gr(405,{method:t.formMethod})};let r=()=>({path:e,error:Gr(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),l=t0(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Hn(a))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((E,[R,V])=>`${E}${R}=${V}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:l,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!Hn(a))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:l,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}tt(typeof FormData=="function","FormData is not available in this environment");let c,f;if(t.formData)c=Gm(t.formData),f=t.formData;else if(t.body instanceof FormData)c=Gm(t.body),f=t.body;else if(t.body instanceof URLSearchParams)c=t.body,f=$w(c);else if(t.body==null)c=new URLSearchParams,f=new FormData;else try{c=new URLSearchParams(t.body),f=$w(c)}catch{return r()}let p={formMethod:a,formAction:l,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:f,json:void 0,text:void 0};if(Hn(p.formMethod))return{path:e,submission:p};let v=yo(e);return n&&v.search&&Mg(v.search)&&c.append("index",""),v.search=`?${c}`,{path:Ki(v),submission:p}}function Mw(n,e,t,r,s,a,l,c,f,p,v,g,E,R,V,U,O,J,G,Z,ae){var He;let se=Z?kr(Z[1])?Z[1].error:Z[1].data:void 0,fe=s.createURL(a.location),T=s.createURL(f),S;if(v&&a.errors){let ye=Object.keys(a.errors)[0];S=l.findIndex(Ne=>Ne.route.id===ye)}else if(Z&&kr(Z[1])){let ye=Z[0];S=l.findIndex(Ne=>Ne.route.id===ye)-1}let P=Z?Z[1].statusCode:void 0,N=P&&P>=400,x={currentUrl:fe,currentParams:((He=a.matches[0])==null?void 0:He.params)||{},nextUrl:T,nextParams:l[0].params,...c,actionResult:se,actionStatus:P},M=Nc(l),C=l.map((ye,Ne)=>{let{route:ee}=ye,pe=null;if(S!=null&&Ne>S?pe=!1:ee.lazy?pe=!0:Vg(ee)?v?pe=Wm(ee,a.loaderData,a.errors):xC(a.loaderData,a.matches[Ne],ye)&&(pe=!0):pe=!1,pe!==null)return Km(t,r,n,M,ye,p,e,pe);let ne=!1;typeof ae=="boolean"?ne=ae:N?ne=!1:(g||fe.pathname+fe.search===T.pathname+T.search||fe.search!==T.search||DC(a.matches[Ne],ye))&&(ne=!0);let D={...x,defaultShouldRevalidate:ne},K=Gu(ye,D);return Km(t,r,n,M,ye,p,e,K,D,ae)}),Me=[];return V.forEach((ye,Ne)=>{if(v||!l.some(Ee=>Ee.route.id===ye.routeId)||R.has(Ne))return;let ee=a.fetchers.get(Ne),pe=ee&&ee.state!=="idle"&&ee.data===void 0,ne=Ys(O,ye.path,J);if(!ne){if(G&&pe)return;Me.push({key:Ne,routeId:ye.routeId,path:ye.path,matches:null,match:null,request:null,controller:null});return}if(U.has(Ne))return;let D=mh(ne,ye.path),K=new AbortController,he=ll(s,ye.path,K.signal),ve=null;if(E.has(Ne))E.delete(Ne),ve=yl(t,r,he,ne,D,p,e);else if(pe)g&&(ve=yl(t,r,he,ne,D,p,e));else{let Ee;typeof ae=="boolean"?Ee=ae:N?Ee=!1:Ee=g;let we={...x,defaultShouldRevalidate:Ee};Gu(D,we)&&(ve=yl(t,r,he,ne,D,p,e,we))}ve&&Me.push({key:Ne,routeId:ye.routeId,path:ye.path,matches:ve,match:D,request:he,controller:K})}),{dsMatches:C,revalidatingFetchers:Me}}function Vg(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Wm(n,e,t){if(n.lazy)return!0;if(!Vg(n))return!1;let r=e!=null&&n.id in e,s=t!=null&&t[n.id]!==void 0;return!r&&s?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!s}function xC(n,e,t){let r=!e||t.route.id!==e.route.id,s=!n.hasOwnProperty(t.route.id);return r||s}function DC(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Gu(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Fw(n,e,t,r,s,a){let l;if(n){let p=r[n];tt(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),l=p.children}else l=t;let c=[],f=[];if(e.forEach(p=>{let v=l.find(g=>YT(p,g));v?f.push({existingRoute:v,newRoute:p}):c.push(p)}),c.length>0){let p=ac(c,s,[n||"_","patch",String((l==null?void 0:l.length)||"0")],r);l.push(...p)}if(a&&f.length>0)for(let p=0;p<f.length;p++){let{existingRoute:v,newRoute:g}=f[p],E=v,[R]=ac([g],s,[],{},!0);Object.assign(E,{element:R.element?R.element:E.element,errorElement:R.errorElement?R.errorElement:E.errorElement,hydrateFallbackElement:R.hydrateFallbackElement?R.hydrateFallbackElement:E.hydrateFallbackElement})}}function YT(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var s;return(s=e.children)==null?void 0:s.some(a=>YT(t,a))}):!1}var Uw=new WeakMap,JT=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let s=t[e.id];if(tt(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let a=s.lazy[n];if(!a)return;let l=Uw.get(s);l||(l={},Uw.set(s,l));let c=l[n];if(c)return c;let f=(async()=>{let p=Q1(n),g=s[n]!==void 0&&n!=="hasErrorBoundary";if(p)an(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),l[n]=Promise.resolve();else if(g)an(!1,`Route "${s.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let E=await a();E!=null&&(Object.assign(s,{[n]:E}),Object.assign(s,r(s)))}typeof s.lazy=="object"&&(s.lazy[n]=void 0,Object.values(s.lazy).every(E=>E===void 0)&&(s.lazy=void 0))})();return l[n]=f,f},Bw=new WeakMap;function NC(n,e,t,r,s){let a=t[n.id];if(tt(a,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let v=Bw.get(a);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let g=(async()=>{tt(typeof n.lazy=="function","No lazy route function found");let E=await n.lazy(),R={};for(let V in E){let U=E[V];if(U===void 0)continue;let O=J1(V),G=a[V]!==void 0&&V!=="hasErrorBoundary";O?an(!O,"Route property "+V+" is not a supported property to be returned from a lazy route function. This property will be ignored."):G?an(!G,`Route "${a.id}" has a static property "${V}" defined but its lazy function is also returning a value for this property. The lazy route property "${V}" will be ignored.`):R[V]=U}Object.assign(a,R),Object.assign(a,{...r(a),lazy:void 0})})();return Bw.set(a,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let l=Object.keys(n.lazy),c=[],f;for(let v of l){if(s&&s.includes(v))continue;let g=JT({key:v,route:n,manifest:t,mapRouteProperties:r});g&&(c.push(g),v===e&&(f=g))}let p=c.length>0?Promise.all(c).then(()=>{}):void 0;return p==null||p.catch(()=>{}),f==null||f.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:f}}async function zw(n){let e=n.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,a)=>{t[e[a].route.id]=s}),t}async function OC(n){return n.matches.some(e=>e.route.middleware)?XT(n,()=>zw(n)):zw(n)}function XT(n,e){return VC(n,e,r=>{if(GC(r))throw r;return r},HC,t);function t(r,s,a){if(a)return Promise.resolve(Object.assign(a.value,{[s]:{type:"error",result:r}}));{let{matches:l}=n,c=Math.min(Math.max(l.findIndex(p=>p.route.id===s),0),Math.max(l.findIndex(p=>p.shouldCallHandler()),0)),f=Js(l,l[c].route.id).route.id;return Promise.resolve({[f]:{type:"error",result:r}})}}}async function VC(n,e,t,r,s){let{matches:a,request:l,params:c,context:f,unstable_pattern:p}=n,v=a.flatMap(E=>E.route.middleware?E.route.middleware.map(R=>[E.route.id,R]):[]);return await ZT({request:l,params:c,context:f,unstable_pattern:p},v,e,t,r,s)}async function ZT(n,e,t,r,s,a,l=0){let{request:c}=n;if(c.signal.aborted)throw c.signal.reason??new Error(`Request aborted: ${c.method} ${c.url}`);let f=e[l];if(!f)return await t();let[p,v]=f,g,E=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");try{return g={value:await ZT(n,e,t,r,s,a,l+1)},g.value}catch(R){return g={value:await a(R,p,g)},g.value}};try{let R=await v(n,E),V=R!=null?r(R):void 0;return s(V)?V:g?V??g.value:(g={value:await E()},g.value)}catch(R){return await a(R,p,g)}}function e0(n,e,t,r,s){let a=JT({key:"middleware",route:r.route,manifest:e,mapRouteProperties:n}),l=NC(r.route,Hn(t.method)?"action":"loader",e,n,s);return{middleware:a,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function Km(n,e,t,r,s,a,l,c,f=null,p){let v=!1,g=e0(n,e,t,s,a);return{...s,_lazyPromises:g,shouldLoad:c,shouldRevalidateArgs:f,shouldCallHandler(E){return v=!0,f?typeof p=="boolean"?Gu(s,{...f,defaultShouldRevalidate:p}):typeof E=="boolean"?Gu(s,{...f,defaultShouldRevalidate:E}):Gu(s,f):c},resolve(E){let{lazy:R,loader:V,middleware:U}=s.route,O=v||c||E&&!Hn(t.method)&&(R||V),J=U&&U.length>0&&!V&&!R;return O&&(Hn(t.method)||!J)?MC({request:t,unstable_pattern:r,match:s,lazyHandlerPromise:g==null?void 0:g.handler,lazyRoutePromise:g==null?void 0:g.route,handlerOverride:E,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function yl(n,e,t,r,s,a,l,c=null){return r.map(f=>f.route.id!==s.route.id?{...f,shouldLoad:!1,shouldRevalidateArgs:c,shouldCallHandler:()=>!1,_lazyPromises:e0(n,e,t,f,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Km(n,e,t,Nc(r),f,a,l,!0,c))}async function LC(n,e,t,r,s,a){t.some(p=>{var v;return(v=p._lazyPromises)==null?void 0:v.middleware})&&await Promise.all(t.map(p=>{var v;return(v=p._lazyPromises)==null?void 0:v.middleware}));let l={request:e,unstable_pattern:Nc(t),params:t[0].params,context:s,matches:t},f=await n({...l,fetcherKey:r,runClientMiddleware:p=>{let v=l;return XT(v,()=>p({...v,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var v,g;return[(v=p._lazyPromises)==null?void 0:v.handler,(g=p._lazyPromises)==null?void 0:g.route]}))}catch{}return f}async function MC({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:s,handlerOverride:a,scopedContext:l}){let c,f,p=Hn(n.method),v=p?"action":"loader",g=E=>{let R,V=new Promise((J,G)=>R=G);f=()=>R(),n.signal.addEventListener("abort",f);let U=J=>typeof E!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${v}" [routeId: ${t.route.id}]`)):E({request:n,unstable_pattern:e,params:t.params,context:l},...J!==void 0?[J]:[]),O=(async()=>{try{return{type:"data",result:await(a?a(G=>U(G)):U())}}catch(J){return{type:"error",result:J}}})();return Promise.race([O,V])};try{let E=p?t.route.action:t.route.loader;if(r||s)if(E){let R,[V]=await Promise.all([g(E).catch(U=>{R=U}),r,s]);if(R!==void 0)throw R;c=V}else{await r;let R=p?t.route.action:t.route.loader;if(R)[c]=await Promise.all([g(R),s]);else if(v==="action"){let V=new URL(n.url),U=V.pathname+V.search;throw Gr(405,{method:n.method,pathname:U,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(E)c=await g(E);else{let R=new URL(n.url),V=R.pathname+R.search;throw Gr(404,{pathname:V})}}catch(E){return{type:"error",result:E}}finally{f&&n.signal.removeEventListener("abort",f)}return c}async function FC(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function UC(n){var r,s,a,l,c;let{result:e,type:t}=n;if(Lg(e)){let f;try{f=await FC(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Dc(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:"data",data:f,statusCode:e.status,headers:e.headers}}return t==="error"?Kw(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:$C(e),statusCode:lc(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:lc(e)?e.status:void 0}:Kw(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function BC(n,e,t,r,s){let a=n.headers.get("Location");if(tt(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!Dg(a)){let l=r.slice(0,r.findIndex(c=>c.route.id===t)+1);a=qm(new URL(e.url),l,s,a),n.headers.set("Location",a)}return n}function jw(n,e,t,r){let s=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(Dg(n)){let a=n,l=a.startsWith("//")?new URL(e.protocol+a):new URL(a);if(s.includes(l.protocol))throw new Error("Invalid redirect location");let c=Jr(l.pathname,t)!=null;if(l.origin===e.origin&&c)return l.pathname+l.search+l.hash}try{let a=r.createURL(n);if(s.includes(a.protocol))throw new Error("Invalid redirect location")}catch{}return n}function ll(n,e,t,r){let s=n.createURL(t0(e)).toString(),a={signal:t};if(r&&Hn(r.formMethod)){let{formMethod:l,formEncType:c}=r;a.method=l.toUpperCase(),c==="application/json"?(a.headers=new Headers({"Content-Type":c}),a.body=JSON.stringify(r.json)):c==="text/plain"?a.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?a.body=Gm(r.formData):a.body=r.formData}return new Request(s,a)}function Gm(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function $w(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function zC(n,e,t,r=!1,s=!1){let a={},l=null,c,f=!1,p={},v=t&&kr(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let E=g.route.id,R=e[E];if(tt(!Zo(R),"Cannot handle redirect results in processLoaderData"),kr(R)){let V=R.error;if(v!==void 0&&(V=v,v=void 0),l=l||{},s)l[E]=V;else{let U=Js(n,E);l[U.route.id]==null&&(l[U.route.id]=V)}r||(a[E]=QT),f||(f=!0,c=lc(R.error)?R.error.status:500),R.headers&&(p[E]=R.headers)}else a[E]=R.data,R.statusCode&&R.statusCode!==200&&!f&&(c=R.statusCode),R.headers&&(p[E]=R.headers)}),v!==void 0&&t&&(l={[t[0]]:v},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:l,statusCode:c||200,loaderHeaders:p}}function Hw(n,e,t,r,s,a){let{loaderData:l,errors:c}=zC(e,t,r);return s.filter(f=>!f.matches||f.matches.some(p=>p.shouldLoad)).forEach(f=>{let{key:p,match:v,controller:g}=f;if(g&&g.signal.aborted)return;let E=a[p];if(tt(E,"Did not find corresponding fetcher result"),kr(E)){let R=Js(n.matches,v==null?void 0:v.route.id);c&&c[R.route.id]||(c={...c,[R.route.id]:E.error}),n.fetchers.delete(p)}else if(Zo(E))tt(!1,"Unhandled fetcher revalidation redirect");else{let R=ds(E.data);n.fetchers.set(p,R)}}),{loaderData:l,errors:c}}function qw(n,e,t,r){let s=Object.entries(e).filter(([,a])=>a!==QT).reduce((a,[l,c])=>(a[l]=c,a),{});for(let a of t){let l=a.route.id;if(!e.hasOwnProperty(l)&&n.hasOwnProperty(l)&&a.route.loader&&(s[l]=n[l]),r&&r.hasOwnProperty(l))break}return s}function Ww(n){return n?kr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Js(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function eh(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Gr(n,{pathname:e,routeId:t,method:r,type:s,message:a}={}){let l="Unknown Server Error",c="Unknown @remix-run/router error";return n===400?(l="Bad Request",r&&e&&t?c=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(c="Unable to encode submission body")):n===403?(l="Forbidden",c=`Route "${t}" does not match URL "${e}"`):n===404?(l="Not Found",c=`No route matches URL "${e}"`):n===405&&(l="Method Not Allowed",r&&e&&t?c=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(c=`Invalid request method "${r.toUpperCase()}"`)),new Dc(n||500,l,new Error(c),!0)}function th(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,s]=e[t];if(Zo(s))return{key:r,result:s}}}function t0(n){let e=typeof n=="string"?yo(n):n;return Ki({...e,hash:""})}function jC(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function $C(n){var e,t;return new Dc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function HC(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&qC(t))}function qC(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function WC(n){return Lg(n.result)&&KT.has(n.result.status)}function kr(n){return n.type==="error"}function Zo(n){return(n&&n.type)==="redirect"}function Kw(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Lg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function KC(n){return KT.has(n)}function GC(n){return Lg(n)&&KC(n.status)&&n.headers.has("Location")}function QC(n){return RC.has(n.toUpperCase())}function Hn(n){return TC.has(n.toUpperCase())}function Mg(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function mh(n,e){let t=typeof e=="string"?yo(e).search:e.search;if(n[n.length-1].route.index&&Mg(t||""))return n[n.length-1];let r=jT(n);return r[r.length-1]}function Gw(n){let{formMethod:e,formAction:t,formEncType:r,text:s,formData:a,json:l}=n;if(!(!e||!t||!r)){if(s!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function _m(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function YC(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function bu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function JC(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function ds(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function XC(n,e){try{let t=n.sessionStorage.getItem(GT);if(t){let r=JSON.parse(t);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function ZC(n,e){if(e.size>0){let t={};for(let[r,s]of e)t[r]=[...s];try{n.sessionStorage.setItem(GT,JSON.stringify(t))}catch(r){an(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function Qw(){let n,e,t=new Promise((r,s)=>{n=async a=>{r(a);try{await t}catch{}},e=async a=>{s(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var _a=q.createContext(null);_a.displayName="DataRouter";var Oc=q.createContext(null);Oc.displayName="DataRouterState";var n0=q.createContext(!1);function eb(){return q.useContext(n0)}var Fg=q.createContext({isTransitioning:!1});Fg.displayName="ViewTransition";var r0=q.createContext(new Map);r0.displayName="Fetchers";var tb=q.createContext(null);tb.displayName="Await";var ei=q.createContext(null);ei.displayName="Navigation";var of=q.createContext(null);of.displayName="Location";var Qi=q.createContext({outlet:null,matches:[],isDataRoute:!1});Qi.displayName="Route";var Ug=q.createContext(null);Ug.displayName="RouteError";var i0="REACT_ROUTER_ERROR",nb="REDIRECT",rb="ROUTE_ERROR_RESPONSE";function ib(n){if(n.startsWith(`${i0}:${nb}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sb(n){if(n.startsWith(`${i0}:${rb}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Dc(e.status,e.statusText,e.data)}catch{}}function ob(n,{relative:e}={}){tt(Vc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(ei),{hash:s,pathname:a,search:l}=Lc(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Hi([t,a])),r.createHref({pathname:c,search:l,hash:s})}function Vc(){return q.useContext(of)!=null}function va(){return tt(Vc(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(of).location}var s0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function o0(n){q.useContext(ei).static||q.useLayoutEffect(n)}function ab(){let{isDataRoute:n}=q.useContext(Qi);return n?wb():lb()}function lb(){tt(Vc(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(_a),{basename:e,navigator:t}=q.useContext(ei),{matches:r}=q.useContext(Qi),{pathname:s}=va(),a=JSON.stringify(Ng(r)),l=q.useRef(!1);return o0(()=>{l.current=!0}),q.useCallback((f,p={})=>{if(an(l.current,s0),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=Og(f,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Hi([e,v.pathname])),(p.replace?t.replace:t.push)(v,p.state,p)},[e,t,a,s,n])}q.createContext(null);function I6(){let{matches:n}=q.useContext(Qi),e=n[n.length-1];return e?e.params:{}}function Lc(n,{relative:e}={}){let{matches:t}=q.useContext(Qi),{pathname:r}=va(),s=JSON.stringify(Ng(t));return q.useMemo(()=>Og(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function ub(n,e,t,r,s){tt(Vc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=q.useContext(ei),{matches:l}=q.useContext(Qi),c=l[l.length-1],f=c?c.params:{},p=c?c.pathname:"/",v=c?c.pathnameBase:"/",g=c&&c.route;{let G=g&&g.path||"";l0(p,!g||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let E=va(),R;R=E;let V=R.pathname||"/",U=V;if(v!=="/"){let G=v.replace(/^\//,"").split("/");U="/"+V.replace(/^\//,"").split("/").slice(G.length).join("/")}let O=Ys(n,{pathname:U});return an(g||O!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),an(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),pb(O&&O.map(G=>Object.assign({},G,{params:Object.assign({},f,G.params),pathname:Hi([v,a.encodeLocation?a.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?v:Hi([v,a.encodeLocation?a.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),l,t,r,s)}function cb(){let n=vb(),e=lc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:a},"ErrorBoundary")," or"," ",q.createElement("code",{style:a},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:s},t):null,l)}var db=q.createElement(cb,null),a0=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=sb(n.digest);t&&(n=t)}let e=n!==void 0?q.createElement(Qi.Provider,{value:this.props.routeContext},q.createElement(Ug.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?q.createElement(hb,{error:n},e):e}};a0.contextType=n0;var vm=new WeakMap;function hb({children:n,error:e}){let{basename:t}=q.useContext(ei);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=ib(e.digest);if(r){let s=vm.get(e);if(s)throw s;let a=HT(r.location,t);if($T&&!vm.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw vm.set(e,l),l}return q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function fb({routeContext:n,match:e,children:t}){let r=q.useContext(_a);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Qi.Provider,{value:n},t)}function pb(n,e=[],t=null,r=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let v=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);tt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let c=!1,f=-1;if(t)for(let v=0;v<a.length;v++){let g=a[v];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(f=v),g.route.id){let{loaderData:E,errors:R}=t,V=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!R||R[g.route.id]===void 0);if(g.route.lazy||V){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let p=t&&r?(v,g)=>{var E,R;r(v,{location:t.location,params:((R=(E=t.matches)==null?void 0:E[0])==null?void 0:R.params)??{},unstable_pattern:Nc(t.matches),errorInfo:g})}:void 0;return a.reduceRight((v,g,E)=>{let R,V=!1,U=null,O=null;t&&(R=l&&g.route.id?l[g.route.id]:void 0,U=g.route.errorElement||db,c&&(f<0&&E===0?(l0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,O=null):f===E&&(V=!0,O=g.route.hydrateFallbackElement||null)));let J=e.concat(a.slice(0,E+1)),G=()=>{let Z;return R?Z=U:V?Z=O:g.route.Component?Z=q.createElement(g.route.Component,null):g.route.element?Z=g.route.element:Z=v,q.createElement(fb,{match:g,routeContext:{outlet:v,matches:J,isDataRoute:t!=null},children:Z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?q.createElement(a0,{location:t.location,revalidation:t.revalidation,component:U,error:R,children:G(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:p}):G()},null)}function Bg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mb(n){let e=q.useContext(_a);return tt(e,Bg(n)),e}function gb(n){let e=q.useContext(Oc);return tt(e,Bg(n)),e}function yb(n){let e=q.useContext(Qi);return tt(e,Bg(n)),e}function zg(n){let e=yb(n),t=e.matches[e.matches.length-1];return tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function _b(){return zg("useRouteId")}function vb(){var r;let n=q.useContext(Ug),e=gb("useRouteError"),t=zg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function wb(){let{router:n}=mb("useNavigate"),e=zg("useNavigate"),t=q.useRef(!1);return o0(()=>{t.current=!0}),q.useCallback(async(s,a={})=>{an(t.current,s0),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var Yw={};function l0(n,e,t){!e&&!Yw[n]&&(Yw[n]=!0,an(!1,t))}var Jw={};function Xw(n,e){!n&&!Jw[e]&&(Jw[e]=!0,console.warn(e))}var Eb="useOptimistic",Zw=j1[Eb],Ib=()=>{};function Tb(n){return Zw?Zw(n):[n,Ib]}function Sb(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&an(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:q.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&an(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:q.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&an(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:q.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var Rb=["HydrateFallback","hydrateFallbackElement"],Ab=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function Pb({router:n,flushSync:e,onError:t,unstable_useTransitions:r}){r=eb()||r;let[a,l]=q.useState(n.state),[c,f]=Tb(a),[p,v]=q.useState(),[g,E]=q.useState({isTransitioning:!1}),[R,V]=q.useState(),[U,O]=q.useState(),[J,G]=q.useState(),Z=q.useRef(new Map),ae=q.useCallback((S,{deletedFetchers:P,newErrors:N,flushSync:x,viewTransitionOpts:M})=>{N&&t&&Object.values(N).forEach(Me=>{var He;return t(Me,{location:S.location,params:((He=S.matches[0])==null?void 0:He.params)??{},unstable_pattern:Nc(S.matches)})}),S.fetchers.forEach((Me,He)=>{Me.data!==void 0&&Z.current.set(He,Me.data)}),P.forEach(Me=>Z.current.delete(Me)),Xw(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let C=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(Xw(M==null||C,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!M||!C){e&&x?e(()=>l(S)):r===!1?l(S):q.startTransition(()=>{r===!0&&f(Me=>eE(Me,S)),l(S)});return}if(e&&x){e(()=>{U&&(R==null||R.resolve(),U.skipTransition()),E({isTransitioning:!0,flushSync:!0,currentLocation:M.currentLocation,nextLocation:M.nextLocation})});let Me=n.window.document.startViewTransition(()=>{e(()=>l(S))});Me.finished.finally(()=>{e(()=>{V(void 0),O(void 0),v(void 0),E({isTransitioning:!1})})}),e(()=>O(Me));return}U?(R==null||R.resolve(),U.skipTransition(),G({state:S,currentLocation:M.currentLocation,nextLocation:M.nextLocation})):(v(S),E({isTransitioning:!0,flushSync:!1,currentLocation:M.currentLocation,nextLocation:M.nextLocation}))},[n.window,e,U,R,r,f,t]);q.useLayoutEffect(()=>n.subscribe(ae),[n,ae]),q.useEffect(()=>{g.isTransitioning&&!g.flushSync&&V(new Ab)},[g]),q.useEffect(()=>{if(R&&p&&n.window){let S=p,P=R.promise,N=n.window.document.startViewTransition(async()=>{r===!1?l(S):q.startTransition(()=>{r===!0&&f(x=>eE(x,S)),l(S)}),await P});N.finished.finally(()=>{V(void 0),O(void 0),v(void 0),E({isTransitioning:!1})}),O(N)}},[p,R,n.window,r,f]),q.useEffect(()=>{R&&p&&c.location.key===p.location.key&&R.resolve()},[R,U,c.location,p]),q.useEffect(()=>{!g.isTransitioning&&J&&(v(J.state),E({isTransitioning:!0,flushSync:!1,currentLocation:J.currentLocation,nextLocation:J.nextLocation}),G(void 0))},[g.isTransitioning,J]);let se=q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,P,N)=>n.navigate(S,{state:P,preventScrollReset:N==null?void 0:N.preventScrollReset}),replace:(S,P,N)=>n.navigate(S,{replace:!0,state:P,preventScrollReset:N==null?void 0:N.preventScrollReset})}),[n]),fe=n.basename||"/",T=q.useMemo(()=>({router:n,navigator:se,static:!1,basename:fe,onError:t}),[n,se,fe,t]);return q.createElement(q.Fragment,null,q.createElement(_a.Provider,{value:T},q.createElement(Oc.Provider,{value:c},q.createElement(r0.Provider,{value:Z.current},q.createElement(Fg.Provider,{value:g},q.createElement(kb,{basename:fe,location:c.location,navigationType:c.historyAction,navigator:se,unstable_useTransitions:r},q.createElement(Cb,{routes:n.routes,future:n.future,state:c,onError:t})))))),null)}function eE(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var Cb=q.memo(bb);function bb({routes:n,future:e,state:t,onError:r}){return ub(n,void 0,t,r,e)}function kb({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){tt(!Vc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=q.useMemo(()=>({basename:c,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[c,s,a,l]);typeof t=="string"&&(t=yo(t));let{pathname:p="/",search:v="",hash:g="",state:E=null,key:R="default"}=t,V=q.useMemo(()=>{let U=Jr(p,c);return U==null?null:{location:{pathname:U,search:v,hash:g,state:E,key:R},navigationType:r}},[c,p,v,g,E,R,r]);return an(V!=null,`<Router basename="${c}"> is not able to match the URL "${p}${v}${g}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:q.createElement(ei.Provider,{value:f},q.createElement(of.Provider,{children:e,value:V}))}var gh="get",yh="application/x-www-form-urlencoded";function af(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function xb(n){return af(n)&&n.tagName.toLowerCase()==="button"}function Db(n){return af(n)&&n.tagName.toLowerCase()==="form"}function Nb(n){return af(n)&&n.tagName.toLowerCase()==="input"}function Ob(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Vb(n,e){return n.button===0&&(!e||e==="_self")&&!Ob(n)}var nh=null;function Lb(){if(nh===null)try{new FormData(document.createElement("form"),0),nh=!1}catch{nh=!0}return nh}var Mb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wm(n){return n!=null&&!Mb.has(n)?(an(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yh}"`),null):n}function Fb(n,e){let t,r,s,a,l;if(Db(n)){let c=n.getAttribute("action");r=c?Jr(c,e):null,t=n.getAttribute("method")||gh,s=wm(n.getAttribute("enctype"))||yh,a=new FormData(n)}else if(xb(n)||Nb(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(r=f?Jr(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||gh,s=wm(n.getAttribute("formenctype"))||wm(c.getAttribute("enctype"))||yh,a=new FormData(c,n),!Lb()){let{name:p,type:v,value:g}=n;if(v==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,g)}}else{if(af(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=gh,r=null,s=yh,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function jg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Ub(n,e,t,r){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${r}`:s.pathname=`${s.pathname}.${r}`:s.pathname==="/"?s.pathname=`_root.${r}`:e&&Jr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}async function Bb(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zb(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function jb(n,e,t){let r=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await Bb(a,t);return l.links?l.links():[]}return[]}));return Wb(r.flat(1).filter(zb).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function tE(n,e,t,r,s,a){let l=(f,p)=>t[p]?f.route.id!==t[p].route.id:!0,c=(f,p)=>{var v;return t[p].pathname!==f.pathname||((v=t[p].route.path)==null?void 0:v.endsWith("*"))&&t[p].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,p)=>l(f,p)||c(f,p)):a==="data"?e.filter((f,p)=>{var g;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,p)||c(f,p))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function $b(n,e,{includeHydrateFallback:t}={}){return Hb(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function Hb(n){return[...new Set(n)]}function qb(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function Wb(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let a=JSON.stringify(qb(s));return t.has(a)||(t.add(a),r.push({key:a,link:s})),r},[])}function u0(){let n=q.useContext(_a);return jg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Kb(){let n=q.useContext(Oc);return jg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var $g=q.createContext(void 0);$g.displayName="FrameworkContext";function c0(){let n=q.useContext($g);return jg(n,"You must render this element inside a <HydratedRouter> element"),n}function Gb(n,e){let t=q.useContext($g),[r,s]=q.useState(!1),[a,l]=q.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:p,onMouseLeave:v,onTouchStart:g}=e,E=q.useRef(null);q.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let U=J=>{J.forEach(G=>{l(G.isIntersecting)})},O=new IntersectionObserver(U,{threshold:.5});return E.current&&O.observe(E.current),()=>{O.disconnect()}}},[n]),q.useEffect(()=>{if(r){let U=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(U)}}},[r]);let R=()=>{s(!0)},V=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:ku(c,R),onBlur:ku(f,V),onMouseEnter:ku(p,R),onMouseLeave:ku(v,V),onTouchStart:ku(g,R)}]:[!1,E,{}]}function ku(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Qb({page:n,...e}){let{router:t}=u0(),r=q.useMemo(()=>Ys(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(Jb,{page:n,matches:r,...e}):null}function Yb(n){let{manifest:e,routeModules:t}=c0(),[r,s]=q.useState([]);return q.useEffect(()=>{let a=!1;return jb(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),r}function Jb({page:n,matches:e,...t}){let r=va(),{future:s,manifest:a,routeModules:l}=c0(),{basename:c}=u0(),{loaderData:f,matches:p}=Kb(),v=q.useMemo(()=>tE(n,e,p,a,r,"data"),[n,e,p,a,r]),g=q.useMemo(()=>tE(n,e,p,a,r,"assets"),[n,e,p,a,r]),E=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let U=new Set,O=!1;if(e.forEach(G=>{var ae;let Z=a.routes[G.route.id];!Z||!Z.hasLoader||(!v.some(se=>se.route.id===G.route.id)&&G.route.id in f&&((ae=l[G.route.id])!=null&&ae.shouldRevalidate)||Z.hasClientLoader?O=!0:U.add(G.route.id))}),U.size===0)return[];let J=Ub(n,c,s.unstable_trailingSlashAwareDataRequests,"data");return O&&U.size>0&&J.searchParams.set("_routes",e.filter(G=>U.has(G.route.id)).map(G=>G.route.id).join(",")),[J.pathname+J.search]},[c,s.unstable_trailingSlashAwareDataRequests,f,r,a,v,e,n,l]),R=q.useMemo(()=>$b(g,a),[g,a]),V=Yb(g);return q.createElement(q.Fragment,null,E.map(U=>q.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),R.map(U=>q.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),V.map(({key:U,link:O})=>q.createElement("link",{key:U,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function Xb(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Zb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zb&&(window.__reactRouterVersion="7.13.0")}catch{}function ek(n,e){return bC({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:q1({window:e==null?void 0:e.window}),hydrationData:tk(),routes:n,mapRouteProperties:Sb,hydrationRouteProperties:Rb,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function tk(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:nk(n.errors)}),n}function nk(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")t[r]=new Dc(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let l=new a(s.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let a=new Error(s.message);a.stack="",t[r]=a}}else t[r]=s;return t}var d0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h0=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:a,replace:l,state:c,target:f,to:p,preventScrollReset:v,viewTransition:g,unstable_defaultShouldRevalidate:E,...R},V){let{basename:U,unstable_useTransitions:O}=q.useContext(ei),J=typeof p=="string"&&d0.test(p),G=HT(p,U);p=G.to;let Z=ob(p,{relative:s}),[ae,se,fe]=Gb(r,R),T=ok(p,{replace:l,state:c,target:f,preventScrollReset:v,relative:s,viewTransition:g,unstable_defaultShouldRevalidate:E,unstable_useTransitions:O});function S(N){e&&e(N),N.defaultPrevented||T(N)}let P=q.createElement("a",{...R,...fe,href:G.absoluteURL||Z,onClick:G.isExternal||a?e:S,ref:Xb(V,se),target:f,"data-discover":!J&&t==="render"?"true":void 0});return ae&&!J?q.createElement(q.Fragment,null,P,q.createElement(Qb,{page:Z})):P});h0.displayName="Link";var rk=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:a,to:l,viewTransition:c,children:f,...p},v){let g=Lc(l,{relative:p.relative}),E=va(),R=q.useContext(Oc),{navigator:V,basename:U}=q.useContext(ei),O=R!=null&&dk(g)&&c===!0,J=V.encodeLocation?V.encodeLocation(g).pathname:g.pathname,G=E.pathname,Z=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(G=G.toLowerCase(),Z=Z?Z.toLowerCase():null,J=J.toLowerCase()),Z&&U&&(Z=Jr(Z,U)||Z);const ae=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let se=G===J||!s&&G.startsWith(J)&&G.charAt(ae)==="/",fe=Z!=null&&(Z===J||!s&&Z.startsWith(J)&&Z.charAt(J.length)==="/"),T={isActive:se,isPending:fe,isTransitioning:O},S=se?e:void 0,P;typeof r=="function"?P=r(T):P=[r,se?"active":null,fe?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(T):a;return q.createElement(h0,{...p,"aria-current":S,className:P,ref:v,style:N,to:l,viewTransition:c},typeof f=="function"?f(T):f)});rk.displayName="NavLink";var ik=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:a,method:l=gh,action:c,onSubmit:f,relative:p,preventScrollReset:v,viewTransition:g,unstable_defaultShouldRevalidate:E,...R},V)=>{let{unstable_useTransitions:U}=q.useContext(ei),O=uk(),J=ck(c,{relative:p}),G=l.toLowerCase()==="get"?"get":"post",Z=typeof c=="string"&&d0.test(c),ae=se=>{if(f&&f(se),se.defaultPrevented)return;se.preventDefault();let fe=se.nativeEvent.submitter,T=(fe==null?void 0:fe.getAttribute("formmethod"))||l,S=()=>O(fe||se.currentTarget,{fetcherKey:e,method:T,navigate:t,replace:s,state:a,relative:p,preventScrollReset:v,viewTransition:g,unstable_defaultShouldRevalidate:E});U&&t!==!1?q.startTransition(()=>S()):S()};return q.createElement("form",{ref:V,method:G,action:J,onSubmit:r?f:ae,...R,"data-discover":!Z&&n==="render"?"true":void 0})});ik.displayName="Form";function sk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function f0(n){let e=q.useContext(_a);return tt(e,sk(n)),e}function ok(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:f}={}){let p=ab(),v=va(),g=Lc(n,{relative:a});return q.useCallback(E=>{if(Vb(E,e)){E.preventDefault();let R=t!==void 0?t:Ki(v)===Ki(g),V=()=>p(n,{replace:R,state:r,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c});f?q.startTransition(()=>V()):V()}},[v,p,g,t,r,e,n,s,a,l,c,f])}var ak=0,lk=()=>`__${String(++ak)}__`;function uk(){let{router:n}=f0("useSubmit"),{basename:e}=q.useContext(ei),t=_b(),r=n.fetch,s=n.navigate;return q.useCallback(async(a,l={})=>{let{action:c,method:f,encType:p,formData:v,body:g}=Fb(a,e);if(l.navigate===!1){let E=l.fetcherKey||lk();await r(E,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:v,body:g,formMethod:l.method||f,formEncType:l.encType||p,flushSync:l.flushSync})}else await s(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:v,body:g,formMethod:l.method||f,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,s,e,t])}function ck(n,{relative:e}={}){let{basename:t}=q.useContext(ei),r=q.useContext(Qi);tt(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a={...Lc(n||".",{relative:e})},l=va();if(n==null){a.search=l.search;let c=new URLSearchParams(a.search),f=c.getAll("index");if(f.some(v=>v==="")){c.delete("index"),f.filter(g=>g).forEach(g=>c.append("index",g));let v=c.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Hi([t,a.pathname])),Ki(a)}function dk(n,{relative:e}={}){let t=q.useContext(Fg);tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=f0("useViewTransitionState"),s=Lc(n,{relative:e});if(!t.isTransitioning)return!1;let a=Jr(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=Jr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Oh(s.pathname,l)!=null||Oh(s.pathname,a)!=null}const hk="modulepreload",fk=function(n){return"/"+n},nE={},Ei=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let l=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=l(t.map(p=>{if(p=fk(p),p in nE)return;nE[p]=!0;const v=p.endsWith(".css"),g=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const E=document.createElement("link");if(E.rel=v?"stylesheet":hk,v||(E.as="script"),E.crossOrigin="",E.href=p,f&&E.setAttribute("nonce",f),document.head.appendChild(E),v)return new Promise((R,V)=>{E.addEventListener("load",R),E.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return s.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},rE=q.lazy(()=>Ei(()=>import("./Login-CLANYJEr.js"),__vite__mapDeps([0,1,2,3,4,5]))),iE=q.lazy(()=>Ei(()=>import("./Dashboard-DDEBP220.js"),__vite__mapDeps([6,7,1,2,3,8,9,10,11,12]))),pk=q.lazy(()=>Ei(()=>import("./LecturerDetails-D4ilSt-H.js"),__vite__mapDeps([13,7,1,2,14,15,9,11,12,16,10]))),mk=q.lazy(()=>Ei(()=>import("./BookClass-CRh0FGPY.js"),__vite__mapDeps([17,7,1,2,4,5,18,19,20,9,3,21,15,10,22]))),gk=q.lazy(()=>Ei(()=>import("./MyBookings-WZtaDLdS.js"),__vite__mapDeps([23,7,1,2,14,24,18,19,5,15,9,10,16,12,22,25]))),sE=q.lazy(()=>Ei(()=>import("./Dashboard-CxOSyLIW.js"),__vite__mapDeps([26,7,1,2,14,8,9,10,16,27,28]))),yk=q.lazy(()=>Ei(()=>import("./Availability-DKsTf_-q.js"),__vite__mapDeps([29,2,18,20,9,5,4,15,10]))),oE=q.lazy(()=>Ei(()=>import("./Dashboard-Xmbi_Dkn.js"),__vite__mapDeps([30,7,1,2,14,24,18,19,5,8,9,16,12,25]))),aE=q.lazy(()=>Ei(()=>import("./Dashboard-OKy4QlvB.js"),__vite__mapDeps([31,7,1,2,14,24,18,19,5,21,20,9,8,27,28]))),lE=q.lazy(()=>Ei(()=>import("./Dashboard-CTLDXwL4.js"),__vite__mapDeps([32,2,14,7,1,8,9,27]))),_k=q.lazy(()=>Ei(()=>import("./NotFound-Bt6lg0Av.js"),__vite__mapDeps([33,2,9]))),xn=n=>e=>mi.jsx(q.Suspense,{fallback:null,children:mi.jsx(n,{...e})}),vk=ek([{path:"/",Component:xn(rE)},{path:"/login",Component:xn(rE)},{path:"/student",children:[{index:!0,Component:xn(iE)},{path:"dashboard",Component:xn(iE)},{path:"lecturer/:id",Component:xn(pk)},{path:"book/:lecturerId",Component:xn(mk)},{path:"bookings",Component:xn(gk)}]},{path:"/lecturer",children:[{index:!0,Component:xn(sE)},{path:"dashboard",Component:xn(sE)},{path:"availability",Component:xn(yk)}]},{path:"/admin",children:[{index:!0,Component:xn(oE)},{path:"dashboard",Component:xn(oE)}]},{path:"/super-admin",children:[{index:!0,Component:xn(aE)},{path:"dashboard",Component:xn(aE)}]},{path:"/developer",children:[{index:!0,Component:xn(lE)},{path:"dashboard",Component:xn(lE)}]},{path:"*",Component:xn(_k)}]),wk=()=>{};var uE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Ek=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],l=n[t++],c=n[t++],f=((s&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|l&63)}}return e.join("")},m0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const a=n[s],l=s+1<n.length,c=l?n[s+1]:0,f=s+2<n.length,p=f?n[s+2]:0,v=a>>2,g=(a&3)<<4|c>>4;let E=(c&15)<<2|p>>6,R=p&63;f||(R=64,l||(E=64)),r.push(t[v],t[g],t[E],t[R])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(p0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Ek(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],c=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const g=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||c==null||p==null||g==null)throw new Ik;const E=a<<2|c>>4;if(r.push(E),p!==64){const R=c<<4&240|p>>2;if(r.push(R),g!==64){const V=p<<6&192|g;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ik extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Tk=function(n){const e=p0(n);return m0.encodeByteArray(e,!0)},Vh=function(n){return Tk(n).replace(/\./g,"")},g0=function(n){try{return m0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=()=>y0().__FIREBASE_DEFAULTS__,Rk=()=>{if(typeof process>"u"||typeof uE>"u")return;const n=uE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ak=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&g0(n[1]);return e&&JSON.parse(e)},lf=()=>{try{return wk()||Sk()||Rk()||Ak()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},_0=n=>{var e,t;return(t=(e=lf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},v0=n=>{const e=_0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},w0=()=>{var n;return(n=lf())==null?void 0:n.config},E0=n=>{var e;return(e=lf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _o(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Vh(JSON.stringify(t)),Vh(JSON.stringify(l)),""].join(".")}const Qu={};function Ck(){const n={prod:[],emulator:[]};for(const e of Object.keys(Qu))Qu[e]?n.emulator.push(e):n.prod.push(e);return n}function bk(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let cE=!1;function qg(n,e){if(typeof window>"u"||typeof document>"u"||!_o(window.location.host)||Qu[n]===e||Qu[n]||cE)return;Qu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=Ck().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,R){E.setAttribute("width","24"),E.setAttribute("id",R),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{cE=!0,l()},E}function v(E,R){E.setAttribute("id",R),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function g(){const E=bk(r),R=t("text"),V=document.getElementById(R)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),J=t("preprendIcon"),G=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Z=E.element;c(Z),v(O,U);const ae=p();f(G,J),Z.append(G,V,O,ae),document.body.appendChild(Z)}a?(V.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dn())}function T0(){var e;const n=(e=lf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function S0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Dk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Nk(){const n=dn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function R0(){return!T0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function A0(){return!T0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Wg(){try{return typeof indexedDB=="object"}catch{return!1}}function P0(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function Ok(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk="FirebaseError";class ti extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Vk,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,vo.prototype.create)}}class vo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],l=a?Lk(a,r):"Error",c=`${this.serviceName}: ${l} (${s}).`;return new ti(s,c,r)}}function Lk(n,e){return n.replace(Mk,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Mk=/\{\$([^}]+)}/g;function Fk(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function co(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const a=n[s],l=e[s];if(dE(a)&&dE(l)){if(!co(a,l))return!1}else if(a!==l)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function dE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function zu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Uk(n,e){const t=new Bk(n,e);return t.subscribe.bind(t)}class Bk{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");zk(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Em),s.error===void 0&&(s.error=Em),s.complete===void 0&&(s.complete=Em);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zk(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Em(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=1e3,$k=2,Hk=14400*1e3,qk=.5;function hE(n,e=jk,t=$k){const r=e*Math.pow(t,n),s=Math.round(qk*r*(Math.random()-.5)*2);return Math.min(Hk,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n){return n&&n._delegate?n._delegate:n}class vr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Pk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Gk(e))try{this.getOrInitializeService({instanceIdentifier:Wo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=Wo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wo){return this.instances.has(e)}getOptions(e=Wo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&l.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Kk(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wo){return this.component?this.component.multipleInstances?e:Wo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Kk(n){return n===Wo?void 0:n}function Gk(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Wk(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const Yk={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},Jk=rt.INFO,Xk={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},Zk=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=Xk[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class uf{constructor(e){this.name=e,this._logLevel=Jk,this._logHandler=Zk,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Yk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const ex=(n,e)=>e.some(t=>n instanceof t);let fE,pE;function tx(){return fE||(fE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nx(){return pE||(pE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const C0=new WeakMap,Qm=new WeakMap,b0=new WeakMap,Im=new WeakMap,Kg=new WeakMap;function rx(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(ys(n.result)),s()},l=()=>{r(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&C0.set(t,n)}).catch(()=>{}),Kg.set(e,n),e}function ix(n){if(Qm.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),s()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Qm.set(n,e)}let Ym={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||b0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function sx(n){Ym=n(Ym)}function ox(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Tm(this),e,...t);return b0.set(r,e.sort?e.sort():[e]),ys(r)}:nx().includes(n)?function(...e){return n.apply(Tm(this),e),ys(C0.get(this))}:function(...e){return ys(n.apply(Tm(this),e))}}function ax(n){return typeof n=="function"?ox(n):(n instanceof IDBTransaction&&ix(n),ex(n,tx())?new Proxy(n,Ym):n)}function ys(n){if(n instanceof IDBRequest)return rx(n);if(Im.has(n))return Im.get(n);const e=ax(n);return e!==n&&(Im.set(n,e),Kg.set(e,n)),e}const Tm=n=>Kg.get(n);function cf(n,e,{blocked:t,upgrade:r,blocking:s,terminated:a}={}){const l=indexedDB.open(n,e),c=ys(l);return r&&l.addEventListener("upgradeneeded",f=>{r(ys(l.result),f.oldVersion,f.newVersion,ys(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),c.then(f=>{a&&f.addEventListener("close",()=>a()),s&&f.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}function Sm(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),ys(t).then(()=>{})}const lx=["get","getKey","getAll","getAllKeys","count"],ux=["put","add","delete","clear"],Rm=new Map;function mE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Rm.get(e))return Rm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=ux.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lx.includes(t)))return;const a=async function(l,...c){const f=this.transaction(l,s?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),s&&f.done]))[0]};return Rm.set(e,a),a}sx(n=>({...n,get:(e,t,r)=>mE(e,t)||n.get(e,t,r),has:(e,t)=>!!mE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function dx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jm="@firebase/app",gE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new uf("@firebase/app"),hx="@firebase/app-compat",fx="@firebase/analytics-compat",px="@firebase/analytics",mx="@firebase/app-check-compat",gx="@firebase/app-check",yx="@firebase/auth",_x="@firebase/auth-compat",vx="@firebase/database",wx="@firebase/data-connect",Ex="@firebase/database-compat",Ix="@firebase/functions",Tx="@firebase/functions-compat",Sx="@firebase/installations",Rx="@firebase/installations-compat",Ax="@firebase/messaging",Px="@firebase/messaging-compat",Cx="@firebase/performance",bx="@firebase/performance-compat",kx="@firebase/remote-config",xx="@firebase/remote-config-compat",Dx="@firebase/storage",Nx="@firebase/storage-compat",Ox="@firebase/firestore",Vx="@firebase/ai",Lx="@firebase/firestore-compat",Mx="firebase",Fx="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="[DEFAULT]",Ux={[Jm]:"fire-core",[hx]:"fire-core-compat",[px]:"fire-analytics",[fx]:"fire-analytics-compat",[gx]:"fire-app-check",[mx]:"fire-app-check-compat",[yx]:"fire-auth",[_x]:"fire-auth-compat",[vx]:"fire-rtdb",[wx]:"fire-data-connect",[Ex]:"fire-rtdb-compat",[Ix]:"fire-fn",[Tx]:"fire-fn-compat",[Sx]:"fire-iid",[Rx]:"fire-iid-compat",[Ax]:"fire-fcm",[Px]:"fire-fcm-compat",[Cx]:"fire-perf",[bx]:"fire-perf-compat",[kx]:"fire-rc",[xx]:"fire-rc-compat",[Dx]:"fire-gcs",[Nx]:"fire-gcs-compat",[Ox]:"fire-fst",[Lx]:"fire-fst-compat",[Vx]:"fire-vertex","fire-js":"fire-js",[Mx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=new Map,Bx=new Map,Zm=new Map;function yE(n,e){try{n.container.addComponent(e)}catch(t){ws.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mr(n){const e=n.name;if(Zm.has(e))return ws.debug(`There were multiple attempts to register component ${e}.`),!1;Zm.set(e,n);for(const t of uc.values())yE(t,n);for(const t of Bx.values())yE(t,n);return!0}function wo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},so=new vo("app","Firebase",zx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw so.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=Fx;function k0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Xm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw so.create("bad-app-name",{appName:String(s)});if(t||(t=w0()),!t)throw so.create("no-options");const a=uc.get(s);if(a){if(co(t,a.options)&&co(r,a.config))return a;throw so.create("duplicate-app",{appName:s})}const l=new Qk(s);for(const f of Zm.values())l.addComponent(f);const c=new jx(t,r,l);return uc.set(s,c),c}function df(n=Xm){const e=uc.get(n);if(!e&&n===Xm&&w0())return k0();if(!e)throw so.create("no-app",{appName:n});return e}function _E(){return Array.from(uc.values())}function Wn(n,e,t){let r=Ux[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const l=[`Unable to register library "${r}" with version "${e}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ws.warn(l.join(" "));return}Mr(new vr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="firebase-heartbeat-database",Hx=1,cc="firebase-heartbeat-store";let Am=null;function x0(){return Am||(Am=cf($x,Hx,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(cc)}catch(t){console.warn(t)}}}}).catch(n=>{throw so.create("idb-open",{originalErrorMessage:n.message})})),Am}async function qx(n){try{const t=(await x0()).transaction(cc),r=await t.objectStore(cc).get(D0(n));return await t.done,r}catch(e){if(e instanceof ti)ws.warn(e.message);else{const t=so.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ws.warn(t.message)}}}async function vE(n,e){try{const r=(await x0()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,D0(n)),await r.done}catch(t){if(t instanceof ti)ws.warn(t.message);else{const r=so.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ws.warn(r.message)}}}function D0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=1024,Kx=30;class Gx{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Yx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=wE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>Kx){const l=Jx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ws.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=wE(),{heartbeatsToSend:r,unsentEntries:s}=Qx(this._heartbeatsCache.heartbeats),a=Vh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ws.warn(t),""}}}function wE(){return new Date().toISOString().substring(0,10)}function Qx(n,e=Wx){const t=[];let r=n.slice();for(const s of n){const a=t.find(l=>l.agent===s.agent);if(a){if(a.dates.push(s.date),EE(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),EE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class Yx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wg()?P0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await qx(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function EE(n){return Vh(JSON.stringify({version:2,heartbeats:n})).length}function Jx(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(n){Mr(new vr("platform-logger",e=>new cx(e),"PRIVATE")),Mr(new vr("heartbeat",e=>new Gx(e),"PRIVATE")),Wn(Jm,gE,n),Wn(Jm,gE,"esm2020"),Wn("fire-js","")}Xx("");var Zx="firebase",eD="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(Zx,eD,"app");function N0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tD=N0,O0=new vo("auth","Firebase",N0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new uf("@firebase/auth");function nD(n,...e){Lh.logLevel<=rt.WARN&&Lh.warn(`Auth (${wa}): ${n}`,...e)}function _h(n,...e){Lh.logLevel<=rt.ERROR&&Lh.error(`Auth (${wa}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n,...e){throw Qg(n,...e)}function yi(n,...e){return Qg(n,...e)}function Gg(n,e,t){const r={...tD(),[e]:t};return new vo("auth","Firebase",r).create(e,{appName:n.name})}function _s(n){return Gg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V0(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Xr(n,"argument-error"),Gg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return O0.create(n,...e)}function ze(n,e,...t){if(!n)throw Qg(e,...t)}function ps(n){const e="INTERNAL ASSERTION FAILED: "+n;throw _h(e),new Error(e)}function Es(n,e){n||ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function rD(){return IE()==="http:"||IE()==="https:"}function IE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rD()||S0()||"connection"in navigator)?navigator.onLine:!0}function sD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Es(t>e,"Short delay should be less than long delay!"),this.isMobile=kk()||Dk()}get(){return iD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(n,e){Es(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lD=new Fc(3e4,6e4);function Ea(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Eo(n,e,t,r,s={}){return M0(n,s,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const c=Mc({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:f,...a};return xk()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&_o(n.emulatorConfig.host)&&(p.credentials="include"),L0.fetch()(await F0(n,n.config.apiHost,t,c),p)})}async function M0(n,e,t){n._canInitEmulator=!1;const r={...oD,...e};try{const s=new cD(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw rh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[f,p]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw rh(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw rh(n,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Gg(n,v,p);Xr(n,v)}}catch(s){if(s instanceof ti)throw s;Xr(n,"network-request-failed",{message:String(s)})}}async function hf(n,e,t,r,s={}){const a=await Eo(n,e,t,r,s);return"mfaPendingCredential"in a&&Xr(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function F0(n,e,t,r){const s=`${e}${t}?${r}`,a=n,l=a.config.emulator?Yg(n.config,s):`${n.config.apiScheme}://${s}`;return aD.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function uD(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(yi(this.auth,"network-request-failed")),lD.get())})}}function rh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=yi(n,e,r);return s.customData._tokenResponse=t,s}function TE(n){return n!==void 0&&n.enterprise!==void 0}class dD{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return uD(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hD(n,e){return Eo(n,"GET","/v2/recaptchaConfig",Ea(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fD(n,e){return Eo(n,"POST","/v1/accounts:delete",e)}async function Mh(n,e){return Eo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pD(n,e=!1){const t=It(n),r=await t.getIdToken(e),s=Jg(r);ze(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Yu(Pm(s.auth_time)),issuedAtTime:Yu(Pm(s.iat)),expirationTime:Yu(Pm(s.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Pm(n){return Number(n)*1e3}function Jg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const s=g0(t);return s?JSON.parse(s):(_h("Failed to decode base64 JWT payload"),null)}catch(s){return _h("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function SE(n){const e=Jg(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ti&&mD(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(n){var g;const e=n.auth,t=await n.getIdToken(),r=await dc(n,Mh(e,{idToken:t}));ze(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const a=(g=s.providerUserInfo)!=null&&g.length?U0(s.providerUserInfo):[],l=_D(n.providerData,a),c=n.isAnonymous,f=!(n.email&&s.passwordHash)&&!(l!=null&&l.length),p=c?f:!1,v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,v)}async function yD(n){const e=It(n);await Fh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _D(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function U0(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vD(n,e){const t=await M0(n,{},async()=>{const r=Mc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,l=await F0(n,s,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return n.emulatorConfig&&_o(n.emulatorConfig.host)&&(f.credentials="include"),L0.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wD(n,e){return Eo(n,"POST","/v2/accounts:revokeToken",Ea(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=SE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:a}=await vD(e,t);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:a}=t,l=new _l;return r&&(ze(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),s&&(ze(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),a&&(ze(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new gD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await dc(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pD(this,e)}reload(){return yD(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Fh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(_s(this.auth));const e=await this.getIdToken();return await dc(this,fD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,f=t._redirectEventId??void 0,p=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:g,emailVerified:E,isAnonymous:R,providerData:V,stsTokenManager:U}=t;ze(g&&U,e,"internal-error");const O=_l.fromJSON(this.name,U);ze(typeof g=="string",e,"internal-error"),Ws(r,e.name),Ws(s,e.name),ze(typeof E=="boolean",e,"internal-error"),ze(typeof R=="boolean",e,"internal-error"),Ws(a,e.name),Ws(l,e.name),Ws(c,e.name),Ws(f,e.name),Ws(p,e.name),Ws(v,e.name);const J=new gi({uid:g,auth:e,email:s,emailVerified:E,displayName:r,isAnonymous:R,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:O,createdAt:p,lastLoginAt:v});return V&&Array.isArray(V)&&(J.providerData=V.map(G=>({...G}))),f&&(J._redirectEventId=f),J}static async _fromIdTokenResponse(e,t,r=!1){const s=new _l;s.updateFromServerResponse(t);const a=new gi({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Fh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];ze(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?U0(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new _l;c.updateFromIdToken(r);const f=new gi({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new Map;function ms(n){Es(n instanceof Function,"Expected a class definition");let e=RE.get(n);return e?(Es(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,RE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}B0.type="NONE";const AE=B0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(n,e,t){return`firebase:${n}:${e}:${t}`}class vl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=vh(this.userKey,s.apiKey,a),this.fullPersistenceKey=vh("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Mh(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new vl(ms(AE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||ms(AE);const l=vh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const v=await p._get(l);if(v){let g;if(typeof v=="string"){const E=await Mh(e,{idToken:v}).catch(()=>{});if(!E)break;g=await gi._fromGetAccountInfoResponse(e,E,v)}else g=gi._fromJSON(e,v);p!==a&&(c=g),a=p;break}}catch{}const f=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new vl(a,e,r):(a=f[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new vl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(z0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(W0(e))return"Blackberry";if(K0(e))return"Webos";if(j0(e))return"Safari";if((e.includes("chrome/")||$0(e))&&!e.includes("edge/"))return"Chrome";if(q0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function z0(n=dn()){return/firefox\//i.test(n)}function j0(n=dn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $0(n=dn()){return/crios\//i.test(n)}function H0(n=dn()){return/iemobile/i.test(n)}function q0(n=dn()){return/android/i.test(n)}function W0(n=dn()){return/blackberry/i.test(n)}function K0(n=dn()){return/webos/i.test(n)}function Xg(n=dn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ED(n=dn()){var e;return Xg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function ID(){return Nk()&&document.documentMode===10}function G0(n=dn()){return Xg(n)||q0(n)||K0(n)||W0(n)||/windows phone/i.test(n)||H0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n,e=[]){let t;switch(n){case"Browser":t=PE(dn());break;case"Worker":t=`${PE(dn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${wa}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,c)=>{try{const f=e(a);l(f)}catch(f){c(f)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD(n,e={}){return Eo(n,"GET","/v2/passwordPolicy",Ea(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=6;class AD{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CE(this),this.idTokenSubscription=new CE(this),this.beforeStateQueue=new TD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ms(t)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await vl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Mh(this,{idToken:e}),r=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(yr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===c)&&(f!=null&&f.user)&&(r=f.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(_s(this));const t=e?It(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(_s(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(_s(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ms(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SD(this),t=new AD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new vo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ms(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await vl.create(this,[ms(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,s);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Q0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&nD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Io(n){return It(n)}class CE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Uk(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CD(n){ff=n}function Y0(n){return ff.loadJS(n)}function bD(){return ff.recaptchaEnterpriseScript}function kD(){return ff.gapiScript}function xD(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class DD{constructor(){this.enterprise=new ND}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ND{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const OD="recaptcha-enterprise",J0="NO_RECAPTCHA";class VD{constructor(e){this.type=OD,this.auth=Io(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{hD(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new dD(f);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(f=>{c(f)})})}function s(a,l,c){const f=window.grecaptcha;TE(f)?f.enterprise.ready(()=>{f.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(J0)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DD().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(c=>{if(!t&&TE(window.grecaptcha))s(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let f=bD();f.length!==0&&(f+=c),Y0(f).then(()=>{s(c,a,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function bE(n,e,t,r=!1,s=!1){const a=new VD(n);let l;if(s)l=J0;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const f=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const f=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function kE(n,e,t,r,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await bE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await bE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n,e){const t=wo(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(co(a,e??{}))return s;Xr(s,"already-initialized")}return t.initialize({options:e})}function MD(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ms);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FD(n,e,t){const r=Io(n);ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=X0(e),{host:l,port:c}=UD(e),f=c===null?"":`:${c}`,p={url:`${a}//${l}${f}/`},v=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ze(co(p,r.config.emulator)&&co(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,_o(l)?(Hg(`${a}//${l}${f}`),qg("Auth",!0)):BD()}function X0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function UD(n){const e=X0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:xE(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:xE(l)}}}function xE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ps("not implemented")}_getIdTokenResponse(e){return ps("not implemented")}_linkToIdToken(e,t){return ps("not implemented")}_getReauthenticationResolver(e){return ps("not implemented")}}async function zD(n,e){return Eo(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n,e){return hf(n,"POST","/v1/accounts:signInWithPassword",Ea(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $D(n,e){return hf(n,"POST","/v1/accounts:signInWithEmailLink",Ea(n,e))}async function HD(n,e){return hf(n,"POST","/v1/accounts:signInWithEmailLink",Ea(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Zg{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new hc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new hc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kE(e,t,"signInWithPassword",jD);case"emailLink":return $D(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kE(e,r,"signUpPassword",zD);case"emailLink":return HD(e,{idToken:t,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n,e){return hf(n,"POST","/v1/accounts:signInWithIdp",Ea(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD="http://localhost";class oa extends Zg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=t;if(!r||!s)return null;const l=new oa(r,s);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return wl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,wl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wl(e,t)}buildRequest(){const e={requestUri:qD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KD(n){const e=Bu(zu(n)).link,t=e?Bu(zu(e)).deep_link_id:null,r=Bu(zu(n)).deep_link_id;return(r?Bu(zu(r)).link:null)||r||t||e||n}class ey{constructor(e){const t=Bu(zu(e)),r=t.apiKey??null,s=t.oobCode??null,a=WD(t.mode??null);ze(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=KD(e);try{return new ey(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(){this.providerId=Bl.PROVIDER_ID}static credential(e,t){return hc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=ey.parseLink(t);return ze(r,"argument-error"),hc._fromEmailAndCode(e,r.code,r.tenantId)}}Bl.PROVIDER_ID="password";Bl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs extends Uc{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xs.credential(e.oauthAccessToken)}catch{return null}}}Xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Uc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return oa._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return fs.credential(t,r)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs extends Uc{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:Zs.PROVIDER_ID,signInMethod:Zs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zs.credentialFromTaggedObject(e)}static credentialFromError(e){return Zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zs.credential(e.oauthAccessToken)}catch{return null}}}Zs.GITHUB_SIGN_IN_METHOD="github.com";Zs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo extends Uc{constructor(){super("twitter.com")}static credential(e,t){return oa._fromParams({providerId:eo.PROVIDER_ID,signInMethod:eo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return eo.credentialFromTaggedObject(e)}static credentialFromError(e){return eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return eo.credential(t,r)}catch{return null}}}eo.TWITTER_SIGN_IN_METHOD="twitter.com";eo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const a=await gi._fromIdTokenResponse(e,r,s),l=DE(r);return new Rl({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=DE(r);return new Rl({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function DE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends ti{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Uh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Uh(e,t,r,s)}}function Z0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Uh._fromErrorAndOperation(n,a,e,r):a})}async function GD(n,e,t=!1){const r=await dc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Rl._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(n,e,t=!1){const{auth:r}=n;if(yr(r.app))return Promise.reject(_s(r));const s="reauthenticate";try{const a=await dc(n,Z0(r,s,e,n),t);ze(a.idToken,r,"internal-error");const l=Jg(a.idToken);ze(l,r,"internal-error");const{sub:c}=l;return ze(n.uid===c,r,"user-mismatch"),Rl._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(n,e,t=!1){if(yr(n.app))return Promise.reject(_s(n));const r="signIn",s=await Z0(n,r,e),a=await Rl._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(a.user),a}async function YD(n,e){return eS(Io(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JD(n){const e=Io(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function XD(n,e,t){return yr(n.app)?Promise.reject(_s(n)):YD(It(n),Bl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JD(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZD(n,e){return It(n).setPersistence(e)}function eN(n,e,t,r){return It(n).onIdTokenChanged(e,t,r)}function tN(n,e,t){return It(n).beforeAuthStateChanged(e,t)}function nN(n,e,t,r){return It(n).onAuthStateChanged(e,t,r)}function rN(n){return It(n).signOut()}const Bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bh,"1"),this.storage.removeItem(Bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=1e3,sN=10;class nS extends tS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);ID()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,sN):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},iN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}nS.type="LOCAL";const rS=nS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS extends tS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}iS.type="SESSION";const sS=iS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new mf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:a}=t.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(l).map(async p=>p(t.origin,a)),f=await oN(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,l;return new Promise((c,f)=>{const p=ty("",20);s.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:s,onMessage(g){const E=g;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(E.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(){return window}function lN(n){qi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function uN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function dN(){return oS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebaseLocalStorageDb",hN=1,zh="firebaseLocalStorage",lS="fbase_key";class Bc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function gf(n,e){return n.transaction([zh],e?"readwrite":"readonly").objectStore(zh)}function fN(){const n=indexedDB.deleteDatabase(aS);return new Bc(n).toPromise()}function ng(){const n=indexedDB.open(aS,hN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(zh,{keyPath:lS})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(zh)?e(r):(r.close(),await fN(),e(await ng()))})})}async function NE(n,e,t){const r=gf(n,!0).put({[lS]:e,value:t});return new Bc(r).toPromise()}async function pN(n,e){const t=gf(n,!1).get(e),r=await new Bc(t).toPromise();return r===void 0?null:r.value}function OE(n,e){const t=gf(n,!0).delete(e);return new Bc(t).toPromise()}const mN=800,gN=3;class uS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ng(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mf._getInstance(dN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await uN(),!this.activeServiceWorker)return;this.sender=new aN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ng();return await NE(e,Bh,"1"),await OE(e,Bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>NE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>pN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>OE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=gf(s,!1).getAll();return new Bc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uS.type="LOCAL";const yN=uS;new Fc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n,e){return e?ms(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry extends Zg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _N(n){return eS(n.auth,new ry(n),n.bypassAuthState)}function vN(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),QD(t,new ry(n),n.bypassAuthState)}async function wN(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),GD(t,new ry(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _N;case"linkViaPopup":case"linkViaRedirect":return wN;case"reauthViaPopup":case"reauthViaRedirect":return vN;default:Xr(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=new Fc(2e3,1e4);async function IN(n,e,t){if(yr(n.app))return Promise.reject(yi(n,"operation-not-supported-in-this-environment"));const r=Io(n);V0(n,e,pf);const s=ny(r,t);return new ea(r,"signInViaPopup",e,s).executeNotNull()}class ea extends cS{constructor(e,t,r,s,a){super(e,t,s,a),this.provider=r,this.authWindow=null,this.pollId=null,ea.currentPopupAction&&ea.currentPopupAction.cancel(),ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=ty();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(yi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,EN.get())};e()}}ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="pendingRedirect",wh=new Map;class SN extends cS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=wh.get(this.auth._key());if(!e){try{const r=await RN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}wh.set(this.auth._key(),e)}return this.bypassAuthState||wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RN(n,e){const t=hS(e),r=dS(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}async function AN(n,e){return dS(n)._set(hS(e),"true")}function PN(n,e){wh.set(n._key(),e)}function dS(n){return ms(n._redirectPersistence)}function hS(n){return vh(TN,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n,e,t){return bN(n,e,t)}async function bN(n,e,t){if(yr(n.app))return Promise.reject(_s(n));const r=Io(n);V0(n,e,pf),await r._initializationPromise;const s=ny(r,t);return await AN(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function kN(n,e,t=!1){if(yr(n.app))return Promise.reject(_s(n));const r=Io(n),s=ny(r,e),l=await new SN(r,s,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=600*1e3;class DN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!NN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!fS(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(yi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xN&&this.cachedEventUids.clear(),this.cachedEventUids.has(VE(e))}saveEventToCache(e){this.cachedEventUids.add(VE(e)),this.lastProcessedEventTime=Date.now()}}function VE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function fS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function NN(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(n,e={}){return Eo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,LN=/^https?/;async function MN(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ON(n);for(const t of e)try{if(FN(t))return}catch{}Xr(n,"unauthorized-domain")}function FN(n){const e=eg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!LN.test(t))return!1;if(VN.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new Fc(3e4,6e4);function LE(){const n=qi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function BN(n){return new Promise((e,t)=>{var s,a,l;function r(){LE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LE(),t(yi(n,"network-request-failed"))},timeout:UN.get()})}if((a=(s=qi().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=qi().gapi)!=null&&l.load)r();else{const c=xD("iframefcb");return qi()[c]=()=>{gapi.load?r():t(yi(n,"network-request-failed"))},Y0(`${kD()}?onload=${c}`).catch(f=>t(f))}}).catch(e=>{throw Eh=null,e})}let Eh=null;function zN(n){return Eh=Eh||BN(n),Eh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new Fc(5e3,15e3),$N="__/auth/iframe",HN="emulator/auth/iframe",qN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},WN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KN(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Yg(e,HN):`https://${n.config.authDomain}/${$N}`,r={apiKey:e.apiKey,appName:n.name,v:wa},s=WN.get(n.config.apiHost);s&&(r.eid=s);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Mc(r).slice(1)}`}async function GN(n){const e=await zN(n),t=qi().gapi;return ze(t,n,"internal-error"),e.open({where:document.body,url:KN(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qN,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const l=yi(n,"network-request-failed"),c=qi().setTimeout(()=>{a(l)},jN.get());function f(){qi().clearTimeout(c),s(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},YN=500,JN=600,XN="_blank",ZN="http://localhost";class ME{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eO(n,e,t,r=YN,s=JN){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f={...QN,width:r.toString(),height:s.toString(),top:a,left:l},p=dn().toLowerCase();t&&(c=$0(p)?XN:t),z0(p)&&(e=e||ZN,f.scrollbars="yes");const v=Object.entries(f).reduce((E,[R,V])=>`${E}${R}=${V},`,"");if(ED(p)&&c!=="_self")return tO(e||"",c),new ME(null);const g=window.open(e||"",c,v);ze(g,n,"popup-blocked");try{g.focus()}catch{}return new ME(g)}function tO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="__/auth/handler",rO="emulator/auth/handler",iO=encodeURIComponent("fac");async function FE(n,e,t,r,s,a){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:wa,eventId:s};if(e instanceof pf){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",Fk(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,g]of Object.entries({}))l[v]=g}if(e instanceof Uc){const v=e.getScopes().filter(g=>g!=="");v.length>0&&(l.scopes=v.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const v of Object.keys(c))c[v]===void 0&&delete c[v];const f=await n._getAppCheckToken(),p=f?`#${iO}=${encodeURIComponent(f)}`:"";return`${sO(n)}?${Mc(c).slice(1)}${p}`}function sO({config:n}){return n.emulator?Yg(n,rO):`https://${n.authDomain}/${nO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm="webStorageSupport";class oO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sS,this._completeRedirectFn=kN,this._overrideRedirectResult=PN}async _openPopup(e,t,r,s){var l;Es((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await FE(e,t,r,eg(),s);return eO(e,a,ty())}async _openRedirect(e,t,r,s){await this._originValidation(e);const a=await FE(e,t,r,eg(),s);return lN(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Es(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await GN(e),r=new DN(e);return t.register("authEvent",s=>(ze(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cm,{type:Cm},s=>{var l;const a=(l=s==null?void 0:s[0])==null?void 0:l[Cm];a!==void 0&&t(!!a),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=MN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return G0()||j0()||Xg()}}const aO=oO;var UE="@firebase/auth",BE="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cO(n){Mr(new vr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;ze(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Q0(n)},p=new PD(r,s,a,f);return MD(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Mr(new vr("auth-internal",e=>{const t=Io(e.getProvider("auth").getImmediate());return(r=>new lO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Wn(UE,BE,uO(n)),Wn(UE,BE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=300,hO=E0("authIdTokenMaxAge")||dO;let zE=null;const fO=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hO)return;const s=t==null?void 0:t.token;zE!==s&&(zE=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function pO(n=df()){const e=wo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=LD(n,{popupRedirectResolver:aO,persistence:[yN,rS,sS]}),r=E0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=fO(a.toString());tN(t,l,()=>l(t.currentUser)),eN(t,c=>l(c))}}const s=_0("auth");return s&&FD(t,`http://${s}`),t}function mO(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}CD({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const a=yi("internal-error");a.customData=s,t(a)},r.type="text/javascript",r.charset="UTF-8",mO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cO("Browser");var jE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var oo,pS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,S){function P(){}P.prototype=S.prototype,T.F=S.prototype,T.prototype=new P,T.prototype.constructor=T,T.D=function(N,x,M){for(var C=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)C[Me-2]=arguments[Me];return S.prototype[x].apply(N,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,S,P){P||(P=0);const N=Array(16);if(typeof S=="string")for(var x=0;x<16;++x)N[x]=S.charCodeAt(P++)|S.charCodeAt(P++)<<8|S.charCodeAt(P++)<<16|S.charCodeAt(P++)<<24;else for(x=0;x<16;++x)N[x]=S[P++]|S[P++]<<8|S[P++]<<16|S[P++]<<24;S=T.g[0],P=T.g[1],x=T.g[2];let M=T.g[3],C;C=S+(M^P&(x^M))+N[0]+3614090360&4294967295,S=P+(C<<7&4294967295|C>>>25),C=M+(x^S&(P^x))+N[1]+3905402710&4294967295,M=S+(C<<12&4294967295|C>>>20),C=x+(P^M&(S^P))+N[2]+606105819&4294967295,x=M+(C<<17&4294967295|C>>>15),C=P+(S^x&(M^S))+N[3]+3250441966&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(M^P&(x^M))+N[4]+4118548399&4294967295,S=P+(C<<7&4294967295|C>>>25),C=M+(x^S&(P^x))+N[5]+1200080426&4294967295,M=S+(C<<12&4294967295|C>>>20),C=x+(P^M&(S^P))+N[6]+2821735955&4294967295,x=M+(C<<17&4294967295|C>>>15),C=P+(S^x&(M^S))+N[7]+4249261313&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(M^P&(x^M))+N[8]+1770035416&4294967295,S=P+(C<<7&4294967295|C>>>25),C=M+(x^S&(P^x))+N[9]+2336552879&4294967295,M=S+(C<<12&4294967295|C>>>20),C=x+(P^M&(S^P))+N[10]+4294925233&4294967295,x=M+(C<<17&4294967295|C>>>15),C=P+(S^x&(M^S))+N[11]+2304563134&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(M^P&(x^M))+N[12]+1804603682&4294967295,S=P+(C<<7&4294967295|C>>>25),C=M+(x^S&(P^x))+N[13]+4254626195&4294967295,M=S+(C<<12&4294967295|C>>>20),C=x+(P^M&(S^P))+N[14]+2792965006&4294967295,x=M+(C<<17&4294967295|C>>>15),C=P+(S^x&(M^S))+N[15]+1236535329&4294967295,P=x+(C<<22&4294967295|C>>>10),C=S+(x^M&(P^x))+N[1]+4129170786&4294967295,S=P+(C<<5&4294967295|C>>>27),C=M+(P^x&(S^P))+N[6]+3225465664&4294967295,M=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(M^S))+N[11]+643717713&4294967295,x=M+(C<<14&4294967295|C>>>18),C=P+(M^S&(x^M))+N[0]+3921069994&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(x^M&(P^x))+N[5]+3593408605&4294967295,S=P+(C<<5&4294967295|C>>>27),C=M+(P^x&(S^P))+N[10]+38016083&4294967295,M=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(M^S))+N[15]+3634488961&4294967295,x=M+(C<<14&4294967295|C>>>18),C=P+(M^S&(x^M))+N[4]+3889429448&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(x^M&(P^x))+N[9]+568446438&4294967295,S=P+(C<<5&4294967295|C>>>27),C=M+(P^x&(S^P))+N[14]+3275163606&4294967295,M=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(M^S))+N[3]+4107603335&4294967295,x=M+(C<<14&4294967295|C>>>18),C=P+(M^S&(x^M))+N[8]+1163531501&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(x^M&(P^x))+N[13]+2850285829&4294967295,S=P+(C<<5&4294967295|C>>>27),C=M+(P^x&(S^P))+N[2]+4243563512&4294967295,M=S+(C<<9&4294967295|C>>>23),C=x+(S^P&(M^S))+N[7]+1735328473&4294967295,x=M+(C<<14&4294967295|C>>>18),C=P+(M^S&(x^M))+N[12]+2368359562&4294967295,P=x+(C<<20&4294967295|C>>>12),C=S+(P^x^M)+N[5]+4294588738&4294967295,S=P+(C<<4&4294967295|C>>>28),C=M+(S^P^x)+N[8]+2272392833&4294967295,M=S+(C<<11&4294967295|C>>>21),C=x+(M^S^P)+N[11]+1839030562&4294967295,x=M+(C<<16&4294967295|C>>>16),C=P+(x^M^S)+N[14]+4259657740&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(P^x^M)+N[1]+2763975236&4294967295,S=P+(C<<4&4294967295|C>>>28),C=M+(S^P^x)+N[4]+1272893353&4294967295,M=S+(C<<11&4294967295|C>>>21),C=x+(M^S^P)+N[7]+4139469664&4294967295,x=M+(C<<16&4294967295|C>>>16),C=P+(x^M^S)+N[10]+3200236656&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(P^x^M)+N[13]+681279174&4294967295,S=P+(C<<4&4294967295|C>>>28),C=M+(S^P^x)+N[0]+3936430074&4294967295,M=S+(C<<11&4294967295|C>>>21),C=x+(M^S^P)+N[3]+3572445317&4294967295,x=M+(C<<16&4294967295|C>>>16),C=P+(x^M^S)+N[6]+76029189&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(P^x^M)+N[9]+3654602809&4294967295,S=P+(C<<4&4294967295|C>>>28),C=M+(S^P^x)+N[12]+3873151461&4294967295,M=S+(C<<11&4294967295|C>>>21),C=x+(M^S^P)+N[15]+530742520&4294967295,x=M+(C<<16&4294967295|C>>>16),C=P+(x^M^S)+N[2]+3299628645&4294967295,P=x+(C<<23&4294967295|C>>>9),C=S+(x^(P|~M))+N[0]+4096336452&4294967295,S=P+(C<<6&4294967295|C>>>26),C=M+(P^(S|~x))+N[7]+1126891415&4294967295,M=S+(C<<10&4294967295|C>>>22),C=x+(S^(M|~P))+N[14]+2878612391&4294967295,x=M+(C<<15&4294967295|C>>>17),C=P+(M^(x|~S))+N[5]+4237533241&4294967295,P=x+(C<<21&4294967295|C>>>11),C=S+(x^(P|~M))+N[12]+1700485571&4294967295,S=P+(C<<6&4294967295|C>>>26),C=M+(P^(S|~x))+N[3]+2399980690&4294967295,M=S+(C<<10&4294967295|C>>>22),C=x+(S^(M|~P))+N[10]+4293915773&4294967295,x=M+(C<<15&4294967295|C>>>17),C=P+(M^(x|~S))+N[1]+2240044497&4294967295,P=x+(C<<21&4294967295|C>>>11),C=S+(x^(P|~M))+N[8]+1873313359&4294967295,S=P+(C<<6&4294967295|C>>>26),C=M+(P^(S|~x))+N[15]+4264355552&4294967295,M=S+(C<<10&4294967295|C>>>22),C=x+(S^(M|~P))+N[6]+2734768916&4294967295,x=M+(C<<15&4294967295|C>>>17),C=P+(M^(x|~S))+N[13]+1309151649&4294967295,P=x+(C<<21&4294967295|C>>>11),C=S+(x^(P|~M))+N[4]+4149444226&4294967295,S=P+(C<<6&4294967295|C>>>26),C=M+(P^(S|~x))+N[11]+3174756917&4294967295,M=S+(C<<10&4294967295|C>>>22),C=x+(S^(M|~P))+N[2]+718787259&4294967295,x=M+(C<<15&4294967295|C>>>17),C=P+(M^(x|~S))+N[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.v=function(T,S){S===void 0&&(S=T.length);const P=S-this.blockSize,N=this.C;let x=this.h,M=0;for(;M<S;){if(x==0)for(;M<=P;)s(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<S;)if(N[x++]=T.charCodeAt(M++),x==this.blockSize){s(this,N),x=0;break}}else for(;M<S;)if(N[x++]=T[M++],x==this.blockSize){s(this,N),x=0;break}}this.h=x,this.o+=S},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;S=this.o*8;for(var P=T.length-8;P<T.length;++P)T[P]=S&255,S/=256;for(this.v(T),T=Array(16),S=0,P=0;P<4;++P)for(let N=0;N<32;N+=8)T[S++]=this.g[P]>>>N&255;return T};function a(T,S){var P=c;return Object.prototype.hasOwnProperty.call(P,T)?P[T]:P[T]=S(T)}function l(T,S){this.h=S;const P=[];let N=!0;for(let x=T.length-1;x>=0;x--){const M=T[x]|0;N&&M==S||(P[x]=M,N=!1)}this.g=P}var c={};function f(T){return-128<=T&&T<128?a(T,function(S){return new l([S|0],S<0?-1:0)}):new l([T|0],T<0?-1:0)}function p(T){if(isNaN(T)||!isFinite(T))return g;if(T<0)return O(p(-T));const S=[];let P=1;for(let N=0;T>=P;N++)S[N]=T/P|0,P*=4294967296;return new l(S,0)}function v(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return O(v(T.substring(1),S));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=p(Math.pow(S,8));let N=g;for(let M=0;M<T.length;M+=8){var x=Math.min(8,T.length-M);const C=parseInt(T.substring(M,M+x),S);x<8?(x=p(Math.pow(S,x)),N=N.j(x).add(p(C))):(N=N.j(P),N=N.add(p(C)))}return N}var g=f(0),E=f(1),R=f(16777216);n=l.prototype,n.m=function(){if(U(this))return-O(this).m();let T=0,S=1;for(let P=0;P<this.g.length;P++){const N=this.i(P);T+=(N>=0?N:4294967296+N)*S,S*=4294967296}return T},n.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(V(this))return"0";if(U(this))return"-"+O(this).toString(T);const S=p(Math.pow(T,6));var P=this;let N="";for(;;){const x=ae(P,S).g;P=J(P,x.j(S));let M=((P.g.length>0?P.g[0]:P.h)>>>0).toString(T);if(P=x,V(P))return M+N;for(;M.length<6;)M="0"+M;N=M+N}},n.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function V(T){if(T.h!=0)return!1;for(let S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function U(T){return T.h==-1}n.l=function(T){return T=J(this,T),U(T)?-1:V(T)?0:1};function O(T){const S=T.g.length,P=[];for(let N=0;N<S;N++)P[N]=~T.g[N];return new l(P,~T.h).add(E)}n.abs=function(){return U(this)?O(this):this},n.add=function(T){const S=Math.max(this.g.length,T.g.length),P=[];let N=0;for(let x=0;x<=S;x++){let M=N+(this.i(x)&65535)+(T.i(x)&65535),C=(M>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);N=C>>>16,M&=65535,C&=65535,P[x]=C<<16|M}return new l(P,P[P.length-1]&-2147483648?-1:0)};function J(T,S){return T.add(O(S))}n.j=function(T){if(V(this)||V(T))return g;if(U(this))return U(T)?O(this).j(O(T)):O(O(this).j(T));if(U(T))return O(this.j(O(T)));if(this.l(R)<0&&T.l(R)<0)return p(this.m()*T.m());const S=this.g.length+T.g.length,P=[];for(var N=0;N<2*S;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(let x=0;x<T.g.length;x++){const M=this.i(N)>>>16,C=this.i(N)&65535,Me=T.i(x)>>>16,He=T.i(x)&65535;P[2*N+2*x]+=C*He,G(P,2*N+2*x),P[2*N+2*x+1]+=M*He,G(P,2*N+2*x+1),P[2*N+2*x+1]+=C*Me,G(P,2*N+2*x+1),P[2*N+2*x+2]+=M*Me,G(P,2*N+2*x+2)}for(T=0;T<S;T++)P[T]=P[2*T+1]<<16|P[2*T];for(T=S;T<2*S;T++)P[T]=0;return new l(P,0)};function G(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function Z(T,S){this.g=T,this.h=S}function ae(T,S){if(V(S))throw Error("division by zero");if(V(T))return new Z(g,g);if(U(T))return S=ae(O(T),S),new Z(O(S.g),O(S.h));if(U(S))return S=ae(T,O(S)),new Z(O(S.g),S.h);if(T.g.length>30){if(U(T)||U(S))throw Error("slowDivide_ only works with positive integers.");for(var P=E,N=S;N.l(T)<=0;)P=se(P),N=se(N);var x=fe(P,1),M=fe(N,1);for(N=fe(N,2),P=fe(P,2);!V(N);){var C=M.add(N);C.l(T)<=0&&(x=x.add(P),M=C),N=fe(N,1),P=fe(P,1)}return S=J(T,x.j(S)),new Z(x,S)}for(x=g;T.l(S)>=0;){for(P=Math.max(1,Math.floor(T.m()/S.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),M=p(P),C=M.j(S);U(C)||C.l(T)>0;)P-=N,M=p(P),C=M.j(S);V(M)&&(M=E),x=x.add(M),T=J(T,C)}return new Z(x,T)}n.B=function(T){return ae(this,T).h},n.and=function(T){const S=Math.max(this.g.length,T.g.length),P=[];for(let N=0;N<S;N++)P[N]=this.i(N)&T.i(N);return new l(P,this.h&T.h)},n.or=function(T){const S=Math.max(this.g.length,T.g.length),P=[];for(let N=0;N<S;N++)P[N]=this.i(N)|T.i(N);return new l(P,this.h|T.h)},n.xor=function(T){const S=Math.max(this.g.length,T.g.length),P=[];for(let N=0;N<S;N++)P[N]=this.i(N)^T.i(N);return new l(P,this.h^T.h)};function se(T){const S=T.g.length+1,P=[];for(let N=0;N<S;N++)P[N]=T.i(N)<<1|T.i(N-1)>>>31;return new l(P,T.h)}function fe(T,S){const P=S>>5;S%=32;const N=T.g.length-P,x=[];for(let M=0;M<N;M++)x[M]=S>0?T.i(M+P)>>>S|T.i(M+P+1)<<32-S:T.i(M+P);return new l(x,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,pS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=v,oo=l}).apply(typeof jE<"u"?jE:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mS,ju,gS,Ih,rg,yS,_S,vS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var _=0;_<d.length;++_){var w=d[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function s(d,_){if(_)e:{var w=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var $=d[A];if(!($ in w))break e;w=w[$]}d=d[d.length-1],A=w[d],_=_(A),_!=A&&_!=null&&e(w,d,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(_){var w=[],A;for(A in _)Object.prototype.hasOwnProperty.call(_,A)&&w.push([A,_[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function f(d,_,w){return d.call.apply(d.bind,arguments)}function p(d,_,w){return p=f,p.apply(null,arguments)}function v(d,_){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function g(d,_){function w(){}w.prototype=_.prototype,d.Z=_.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(A,$,Y){for(var me=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)me[Ye-2]=arguments[Ye];return _.prototype[$].apply(A,me)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function R(d){const _=d.length;if(_>0){const w=Array(_);for(let A=0;A<_;A++)w[A]=d[A];return w}return[]}function V(d,_){for(let A=1;A<arguments.length;A++){const $=arguments[A];var w=typeof $;if(w=w!="object"?w:$?Array.isArray($)?"array":w:"null",w=="array"||w=="object"&&typeof $.length=="number"){w=d.length||0;const Y=$.length||0;d.length=w+Y;for(let me=0;me<Y;me++)d[w+me]=$[me]}else d.push($)}}class U{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function O(d){l.setTimeout(()=>{throw d},0)}function J(){var d=T;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class G{constructor(){this.h=this.g=null}add(_,w){const A=Z.get();A.set(_,w),this.h?this.h.next=A:this.g=A,this.h=A}}var Z=new U(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let se,fe=!1,T=new G,S=()=>{const d=Promise.resolve(void 0);se=()=>{d.then(P)}};function P(){for(var d;d=J();){try{d.h.call(d.g)}catch(w){O(w)}var _=Z;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}fe=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};l.addEventListener("test",w,_),l.removeEventListener("test",w,_)}catch{}return d})();function C(d){return/^[\s\xa0]*$/.test(d)}function Me(d,_){x.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}g(Me,x),Me.prototype.init=function(d,_){const w=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(w=="mouseover"?_=d.fromElement:w=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),ye=0;function Ne(d,_,w,A,$){this.listener=d,this.proxy=null,this.src=_,this.type=w,this.capture=!!A,this.ha=$,this.key=++ye,this.da=this.fa=!1}function ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function pe(d,_,w){for(const A in d)_.call(w,d[A],A,d)}function ne(d,_){for(const w in d)_.call(void 0,d[w],w,d)}function D(d){const _={};for(const w in d)_[w]=d[w];return _}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(d,_){let w,A;for(let $=1;$<arguments.length;$++){A=arguments[$];for(w in A)d[w]=A[w];for(let Y=0;Y<K.length;Y++)w=K[Y],Object.prototype.hasOwnProperty.call(A,w)&&(d[w]=A[w])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,_,w,A,$){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const me=we(d,_,A,$);return me>-1?(_=d[me],w||(_.fa=!1)):(_=new Ne(_,this.src,Y,!!A,$),_.fa=w,d.push(_)),_};function Ee(d,_){const w=_.type;if(w in d.g){var A=d.g[w],$=Array.prototype.indexOf.call(A,_,void 0),Y;(Y=$>=0)&&Array.prototype.splice.call(A,$,1),Y&&(ee(_),d.g[w].length==0&&(delete d.g[w],d.h--))}}function we(d,_,w,A){for(let $=0;$<d.length;++$){const Y=d[$];if(!Y.da&&Y.listener==_&&Y.capture==!!w&&Y.ha==A)return $}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),je={};function st(d,_,w,A,$){if(Array.isArray(_)){for(let Y=0;Y<_.length;Y++)st(d,_[Y],w,A,$);return null}return w=Ti(w),d&&d[He]?d.J(_,w,c(A)?!!A.capture:!1,$):Mt(d,_,w,!1,A,$)}function Mt(d,_,w,A,$,Y){if(!_)throw Error("Invalid event type");const me=c($)?!!$.capture:!!$;let Ye=Tn(d);if(Ye||(d[Ke]=Ye=new ve(d)),w=Ye.add(_,w,A,me,Y),w.proxy)return w;if(A=Ii(),w.proxy=A,A.src=d,A.listener=w,d.addEventListener)M||($=me),$===void 0&&($=!1),d.addEventListener(_.toString(),A,$);else if(d.attachEvent)d.attachEvent(wr(_.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ii(){function d(w){return _.call(d.src,d.listener,w)}const _=As;return d}function Rt(d,_,w,A,$){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)Rt(d,_[Y],w,A,$);else A=c(A)?!!A.capture:!!A,w=Ti(w),d&&d[He]?(d=d.i,Y=String(_).toString(),Y in d.g&&(_=d.g[Y],w=we(_,w,A,$),w>-1&&(ee(_[w]),Array.prototype.splice.call(_,w,1),_.length==0&&(delete d.g[Y],d.h--)))):d&&(d=Tn(d))&&(_=d.g[_.toString()],d=-1,_&&(d=we(_,w,A,$)),(w=d>-1?_[d]:null)&&In(w))}function In(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[He])Ee(_.i,d);else{var w=d.type,A=d.proxy;_.removeEventListener?_.removeEventListener(w,A,d.capture):_.detachEvent?_.detachEvent(wr(w),A):_.addListener&&_.removeListener&&_.removeListener(A),(w=Tn(_))?(Ee(w,d),w.h==0&&(w.src=null,_[Ke]=null)):ee(d)}}}function wr(d){return d in je?je[d]:je[d]="on"+d}function As(d,_){if(d.da)d=!0;else{_=new Me(_,this);const w=d.listener,A=d.ha||d.src;d.fa&&In(d),d=w.call(A,_)}return d}function Tn(d){return d=d[Ke],d instanceof ve?d:null}var Gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ti(d){return typeof d=="function"?d:(d[Gn]||(d[Gn]=function(_){return d.handleEvent(_)}),d[Gn])}function lt(){N.call(this),this.i=new ve(this),this.M=this,this.G=null}g(lt,N),lt.prototype[He]=!0,lt.prototype.removeEventListener=function(d,_,w,A){Rt(this,d,_,w,A)};function At(d,_){var w,A=d.G;if(A)for(w=[];A;A=A.G)w.push(A);if(d=d.M,A=_.type||_,typeof _=="string")_=new x(_,d);else if(_ instanceof x)_.target=_.target||d;else{var $=_;_=new x(A,d),he(_,$)}$=!0;let Y,me;if(w)for(me=w.length-1;me>=0;me--)Y=_.g=w[me],$=Qn(Y,A,!0,_)&&$;if(Y=_.g=d,$=Qn(Y,A,!0,_)&&$,$=Qn(Y,A,!1,_)&&$,w)for(me=0;me<w.length;me++)Y=_.g=w[me],$=Qn(Y,A,!1,_)&&$}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const w=d.g[_];for(let A=0;A<w.length;A++)ee(w[A]);delete d.g[_],d.h--}}this.G=null},lt.prototype.J=function(d,_,w,A){return this.i.add(String(d),_,!1,w,A)},lt.prototype.K=function(d,_,w,A){return this.i.add(String(d),_,!0,w,A)};function Qn(d,_,w,A){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let $=!0;for(let Y=0;Y<_.length;++Y){const me=_[Y];if(me&&!me.da&&me.capture==w){const Ye=me.listener,Jt=me.ha||me.src;me.fa&&Ee(d.i,me),$=Ye.call(Jt,A)!==!1&&$}}return $&&!A.defaultPrevented}function Qt(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function sr(d){d.g=Qt(()=>{d.g=null,d.i&&(d.i=!1,sr(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class or extends N{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:sr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vn(d){N.call(this),this.h=d,this.g={}}g(Vn,N);var Er=[];function Ur(d){pe(d.g,function(_,w){this.g.hasOwnProperty(w)&&In(_)},d),d.g={}}Vn.prototype.N=function(){Vn.Z.N.call(this),Ur(this)},Vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yt=l.JSON.stringify,fn=l.JSON.parse,Sn=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ir(){}function Yn(){}var Br={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pn(){x.call(this,"d")}g(pn,x);function ni(){x.call(this,"c")}g(ni,x);var Rn={},ri=null;function ar(){return ri=ri||new lt}Rn.Ia="serverreachability";function mn(d){x.call(this,Rn.Ia,d)}g(mn,x);function Ln(d){const _=ar();At(_,new mn(_))}Rn.STAT_EVENT="statevent";function lr(d,_){x.call(this,Rn.STAT_EVENT,d),this.stat=_}g(lr,x);function gt(d){const _=ar();At(_,new lr(_,d))}Rn.Ja="timingevent";function Si(d,_){x.call(this,Rn.Ja,d),this.size=_}g(Si,x);function Fe(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function yt(){this.g=!0}yt.prototype.ua=function(){this.g=!1};function xt(d,_,w,A,$,Y){d.info(function(){if(d.g)if(Y){var me="",Ye=Y.split("&");for(let _t=0;_t<Ye.length;_t++){var Jt=Ye[_t].split("=");if(Jt.length>1){const tn=Jt[0];Jt=Jt[1];const Ar=tn.split("_");me=Ar.length>=2&&Ar[1]=="type"?me+(tn+"="+Jt+"&"):me+(tn+"=redacted&")}}}else me=null;else me=Y;return"XMLHTTP REQ ("+A+") [attempt "+$+"]: "+_+`
`+w+`
`+me})}function Ft(d,_,w,A,$,Y,me){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+$+"]: "+_+`
`+w+`
`+Y+" "+me})}function Zt(d,_,w,A){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+jt(d,w)+(A?" "+A:"")})}function Pt(d,_){d.info(function(){return"TIMEOUT: "+_})}yt.prototype.info=function(){};function jt(d,_){if(!d.g)return _;if(!_)return null;try{const Y=JSON.parse(_);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var w=Y[d];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var $=A[0];if($!="noop"&&$!="stop"&&$!="close")for(let me=1;me<A.length;me++)A[me]=""}}}}return Yt(Y)}catch{return _}}var Jn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},k={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},F;function H(){}g(H,Ir),H.prototype.g=function(){return new XMLHttpRequest},F=new H;function te(d){return encodeURIComponent(String(d))}function ue(d){var _=1;d=d.split(":");const w=[];for(;_>0&&d.length;)w.push(d.shift()),_--;return d.length&&w.push(d.join(":")),w}function Se(d,_,w,A){this.j=d,this.i=_,this.l=w,this.S=A||1,this.V=new Vn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Ie={},Re={};function Pe(d,_,w){d.M=1,d.A=Ji(en(_)),d.u=w,d.R=!0,$e(d,null)}function $e(d,_){d.F=Date.now(),Ct(d),d.B=en(d.A);var w=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),Jl(w.i,"t",A),d.C=0,w=d.j.L,d.h=new Ve,d.g=rd(d.j,w?_:null,!d.u),d.P>0&&(d.O=new or(p(d.Y,d,d.g),d.P)),_=d.V,w=d.g,A=d.ba;var $="readystatechange";Array.isArray($)||($&&(Er[0]=$.toString()),$=Er);for(let Y=0;Y<$.length;Y++){const me=st(w,$[Y],A||_.handleEvent,!1,_.h||_);if(!me)break;_.g[me.key]=me}_=d.J?D(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Ln(),xt(d.i,d.v,d.B,d.l,d.S,d.u)}Se.prototype.ba=function(d){d=d.target;const _=this.O;_&&bi(d)==3?_.j():this.Y(d)},Se.prototype.Y=function(d){try{if(d==this.g)e:{const Ye=bi(this.g),Jt=this.g.ya(),_t=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||td(this.g)))){this.K||Ye!=4||Jt==7||(Jt==8||_t<=0?Ln(3):Ln(2)),$t(this);var _=this.g.ca();this.X=_;var w=De(this);if(this.o=_==200,Ft(this.i,this.v,this.B,this.l,this.S,Ye,_),this.o){if(this.U&&!this.L){t:{if(this.g){var A,$=this.g;if((A=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var Y=A;break t}}Y=null}if(d=Y)Zt(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ut(this,d);else{this.o=!1,this.m=3,gt(12),Ht(this),nt(this);break e}}if(this.R){d=!0;let tn;for(;!this.K&&this.C<w.length;)if(tn=Je(this,w),tn==Re){Ye==4&&(this.m=4,gt(14),d=!1),Zt(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==Ie){this.m=4,gt(15),Zt(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else Zt(this.i,this.l,tn,null),ut(this,tn);if(Ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||w.length!=0||this.h.h||(this.m=1,gt(16),d=!1),this.o=this.o&&d,!d)Zt(this.i,this.l,w,"[Invalid Chunked Response]"),Ht(this),nt(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),xo(me),me.P=!0,gt(11))}}else Zt(this.i,this.l,w,null),ut(this,w);Ye==4&&Ht(this),this.o&&!this.K&&(Ye==4?Da(this.j,this):(this.o=!1,Ct(this)))}else Zl(this.g),_==400&&w.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),Ht(this),nt(this)}}}catch{}finally{}};function De(d){if(!Ge(d))return d.g.la();const _=td(d.g);if(_==="")return"";let w="";const A=_.length,$=bi(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ht(d),nt(d),"";d.h.i=new l.TextDecoder}for(let Y=0;Y<A;Y++)d.h.h=!0,w+=d.h.i.decode(_[Y],{stream:!($&&Y==A-1)});return _.length=0,d.h.g+=w,d.C=0,d.h.g}function Ge(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Je(d,_){var w=d.C,A=_.indexOf(`
`,w);return A==-1?Re:(w=Number(_.substring(w,A)),isNaN(w)?Ie:(A+=1,A+w>_.length?Re:(_=_.slice(A,A+w),d.C=A+w,_)))}Se.prototype.cancel=function(){this.K=!0,Ht(this)};function Ct(d){d.T=Date.now()+d.H,Dt(d,d.H)}function Dt(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Fe(p(d.aa,d),_)}function $t(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Se.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Pt(this.i,this.B),this.M!=2&&(Ln(),gt(17)),Ht(this),this.m=2,nt(this)):Dt(this,this.T-d)};function nt(d){d.j.I==0||d.K||Da(d.j,d)}function Ht(d){$t(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,Ur(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function ut(d,_){try{var w=d.j;if(w.I!=0&&(w.g==d||si(w.h,d))){if(!d.L&&si(w.h,d)&&w.I==3){try{var A=w.Ba.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var $=A;if($[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)xa(w),Sr(w);else break e;Di(w),gt(18)}}else w.xa=$[1],0<w.xa-w.K&&$[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Fe(p(w.Va,w),6e3));ii(w.h)<=1&&w.ta&&(w.ta=void 0)}else Rr(w,11)}else if((d.L||w.g==d)&&xa(w),!C(_))for($=w.Ba.g.parse(_),_=0;_<$.length;_++){let _t=$[_];const tn=_t[0];if(!(tn<=w.K))if(w.K=tn,_t=_t[1],w.I==2)if(_t[0]=="c"){w.M=_t[1],w.ba=_t[2];const Ar=_t[3];Ar!=null&&(w.ka=Ar,w.j.info("VER="+w.ka));const ns=_t[4];ns!=null&&(w.za=ns,w.j.info("SVER="+w.za));const Ni=_t[5];Ni!=null&&typeof Ni=="number"&&Ni>0&&(A=1.5*Ni,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Oi=d.g;if(Oi){const Va=Oi.g?Oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var Y=A.h;Y.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(ur(Y,Y.h),Y.h=null))}if(A.G){const nu=Oi.g?Oi.g.getResponseHeader("X-HTTP-Session-Id"):null;nu&&(A.wa=nu,ct(A.J,A.G,nu))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var me=d;if(A.na=tu(A,A.L?A.ba:null,A.W),me.L){zr(A.h,me);var Ye=me,Jt=A.O;Jt&&(Ye.H=Jt),Ye.D&&($t(Ye),Ct(Ye)),A.g=me}else Fn(A);w.i.length>0&&ts(w)}else _t[0]!="stop"&&_t[0]!="close"||Rr(w,7);else w.I==3&&(_t[0]=="stop"||_t[0]=="close"?_t[0]=="stop"?Rr(w,7):ba(w):_t[0]!="noop"&&w.l&&w.l.qa(_t),w.A=0)}}Ln(4)}catch{}}var Yi=class{constructor(d,_){this.g=d,this.map=_}};function Xn(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ii(d){return d.h?1:d.g?d.g.size:0}function si(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function ur(d,_){d.g?d.g.add(_):d.h=_}function zr(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Xn.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function gn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const w of d.g.values())_=_.concat(w.G);return _}return R(d.i)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pt(d,_){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const A=d[w].indexOf("=");let $,Y=null;A>=0?($=d[w].substring(0,A),Y=d[w].substring(A+1)):$=d[w],_($,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function An(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof An?(this.l=d.l,mt(this,d.j),this.o=d.o,this.g=d.g,Zn(this,d.u),this.h=d.h,oi(this,Xl(d.i)),this.m=d.m):d&&(_=String(d).match(Ze))?(this.l=!1,mt(this,_[1]||"",!0),this.o=Ao(_[2]||""),this.g=Ao(_[3]||"",!0),Zn(this,_[4]),this.h=Ao(_[5]||"",!0),oi(this,_[6]||"",!0),this.m=Ao(_[7]||"")):(this.l=!1,this.i=new ot(null,this.l))}An.prototype.toString=function(){const d=[];var _=this.j;_&&d.push(Po(_,Wl,!0),":");var w=this.g;return(w||_=="file")&&(d.push("//"),(_=this.o)&&d.push(Po(_,Wl,!0),"@"),d.push(te(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(Po(w,w.charAt(0)=="/"?Co:Kl,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",Po(w,Gl)),d.join("")},An.prototype.resolve=function(d){const _=en(this);let w=!!d.j;w?mt(_,d.j):w=!!d.o,w?_.o=d.o:w=!!d.g,w?_.g=d.g:w=d.u!=null;var A=d.h;if(w)Zn(_,d.u);else if(w=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var $=_.h.lastIndexOf("/");$!=-1&&(A=_.h.slice(0,$+1)+A)}if($=A,$==".."||$==".")A="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){A=$.lastIndexOf("/",0)==0,$=$.split("/");const Y=[];for(let me=0;me<$.length;){const Ye=$[me++];Ye=="."?A&&me==$.length&&Y.push(""):Ye==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&me==$.length&&Y.push("")):(Y.push(Ye),A=!0)}A=Y.join("/")}else A=$}return w?_.h=A:w=d.i.toString()!=="",w?oi(_,Xl(d.i)):w=!!d.m,w&&(_.m=d.m),_};function en(d){return new An(d)}function mt(d,_,w){d.j=w?Ao(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Zn(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function oi(d,_,w){_ instanceof ot?(d.i=_,Aa(d.i,d.l)):(w||(_=Po(_,jf)),d.i=new ot(_,d.l))}function ct(d,_,w){d.i.set(_,w)}function Ji(d){return ct(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ao(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Po(d,_,w){return typeof d=="string"?(d=encodeURI(d).replace(_,ql),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ql(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Wl=/[#\/\?@]/g,Kl=/[#\?:]/g,Co=/[#\?]/g,jf=/[#\?@]/g,Gl=/#/g;function ot(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Ri(d){d.g||(d.g=new Map,d.h=0,d.i&&pt(d.i,function(_,w){d.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}n=ot.prototype,n.add=function(d,_){Ri(this),this.i=null,d=Ai(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(_),this.h+=1,this};function Ql(d,_){Ri(d),_=Ai(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Ra(d,_){return Ri(d),_=Ai(d,_),d.g.has(_)}n.forEach=function(d,_){Ri(this),this.g.forEach(function(w,A){w.forEach(function($){d.call(_,$,A,this)},this)},this)};function Yl(d,_){Ri(d);let w=[];if(typeof _=="string")Ra(d,_)&&(w=w.concat(d.g.get(Ai(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)w=w.concat(d[_]);return w}n.set=function(d,_){return Ri(this),this.i=null,d=Ai(this,d),Ra(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=Yl(this,d),d.length>0?String(d[0]):_):_};function Jl(d,_,w){Ql(d,_),w.length>0&&(d.i=null,d.g.set(Ai(d,_),R(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let A=0;A<_.length;A++){var w=_[A];const $=te(w);w=Yl(this,w);for(let Y=0;Y<w.length;Y++){let me=$;w[Y]!==""&&(me+="="+te(w[Y])),d.push(me)}}return this.i=d.join("&")};function Xl(d){const _=new ot;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function Ai(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Aa(d,_){_&&!d.j&&(Ri(d),d.i=null,d.g.forEach(function(w,A){const $=A.toLowerCase();A!=$&&(Ql(this,A),Jl(this,$,w))},d)),d.j=_}function Pi(d,_){const w=new yt;if(l.Image){const A=new Image;A.onload=v(Pn,w,"TestLoadImage: loaded",!0,_,A),A.onerror=v(Pn,w,"TestLoadImage: error",!1,_,A),A.onabort=v(Pn,w,"TestLoadImage: abort",!1,_,A),A.ontimeout=v(Pn,w,"TestLoadImage: timeout",!1,_,A),l.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else _(!1)}function Ci(d,_){const w=new yt,A=new AbortController,$=setTimeout(()=>{A.abort(),Pn(w,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:A.signal}).then(Y=>{clearTimeout($),Y.ok?Pn(w,"TestPingServer: ok",!0,_):Pn(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout($),Pn(w,"TestPingServer: error",!1,_)})}function Pn(d,_,w,A,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),A(w)}catch{}}function bo(){this.g=new Sn}function Xi(d){this.i=d.Sb||null,this.h=d.ab||!1}g(Xi,Ir),Xi.prototype.g=function(){return new Tr(this.i,this.h)};function Tr(d,_){lt.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Tr,lt),n=Tr.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,ai(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ai(this)),this.g&&(this.readyState=3,ai(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Xc(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Xc(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ps(this):ai(this),this.readyState==3&&Xc(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Ps(this))},n.Na=function(d){this.g&&(this.response=d,Ps(this))},n.ga=function(){this.g&&Ps(this)};function Ps(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ai(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=_.next();return d.join(`\r
`)};function ai(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Zc(d){let _="";return pe(d,function(w,A){_+=A,_+=":",_+=w,_+=`\r
`}),_}function Pa(d,_,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=Zc(w),typeof d=="string"?w!=null&&te(w):ct(d,_,w))}function Tt(d){lt.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Tt,lt);var ed=/^https?$/i,$f=["POST","PUT"];n=Tt.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():F.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(Y){Cs(this,Y);return}if(d=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var $ in A)w.set($,A[$]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())w.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),$=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call($f,_,void 0)>=0)||A||$||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,me]of w)this.g.setRequestHeader(Y,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){Cs(this,Y)}};function Cs(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,bs(d),es(d)}function bs(d){d.A||(d.A=!0,At(d,"complete"),At(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,At(this,"complete"),At(this,"abort"),es(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),es(this,!0)),Tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Zi(this):this.Xa())},n.Xa=function(){Zi(this)};function Zi(d){if(d.h&&typeof a<"u"){if(d.v&&bi(d)==4)setTimeout(d.Ca.bind(d),0);else if(At(d,"readystatechange"),bi(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var w;if(!(w=_)){var A;if(A=Y===0){let me=String(d.D).match(Ze)[1]||null;!me&&l.self&&l.self.location&&(me=l.self.location.protocol.slice(0,-1)),A=!ed.test(me?me.toLowerCase():"")}w=A}if(w)At(d,"complete"),At(d,"success");else{d.o=6;try{var $=bi(d)>2?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.ca()+"]",bs(d)}}finally{es(d)}}}}function es(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,_||At(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function bi(d){return d.g?d.g.readyState:0}n.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),fn(_)}};function td(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Zl(d){const _={};d=(d.g&&bi(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(C(d[A]))continue;var w=ue(d[A]);const $=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Y=_[$]||[];_[$]=Y,Y.push(w)}ne(_,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(d,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||_}function Ca(d){this.za=0,this.i=[],this.j=new yt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ki("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ki("baseRetryDelayMs",5e3,d),this.Za=ki("retryDelaySeedMs",1e4,d),this.Ta=ki("forwardChannelMaxRetries",2,d),this.va=ki("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Xn(d&&d.concurrentRequestLimit),this.Ba=new bo,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ca.prototype,n.ka=8,n.I=1,n.connect=function(d,_,w,A){gt(0),this.W=d,this.H=_||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=tu(this,null,this.W),ts(this)};function ba(d){if(ka(d),d.I==3){var _=d.V++,w=en(d.J);if(ct(w,"SID",d.M),ct(w,"RID",_),ct(w,"TYPE","terminate"),xi(d,w),_=new Se(d,d.j,_),_.M=2,_.A=Ji(en(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=_.A,w=!0),w||(_.g=rd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Ct(_)}Do(d)}function Sr(d){d.g&&(xo(d),d.g.cancel(),d.g=null)}function ka(d){Sr(d),d.v&&(l.clearTimeout(d.v),d.v=null),xa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function ts(d){if(!Mn(d.h)&&!d.m){d.m=!0;var _=d.Ea;se||S(),fe||(se(),fe=!0),T.add(_,d),d.D=0}}function nd(d,_){return ii(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Fe(p(d.Ea,d,_),Na(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const $=new Se(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=D(Y),he(Y,this.U)):Y=this.U),this.u!==null||this.R||($.J=Y,Y=null),this.S)e:{for(var _=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,_>4096){_=w;break e}if(_===4096||w===this.i.length-1){_=w+1;break e}}_=1e3}else _=1e3;_=eu(this,$,_),w=en(this.J),ct(w,"RID",d),ct(w,"CVER",22),this.G&&ct(w,"X-HTTP-Session-Id",this.G),xi(this,w),Y&&(this.R?_="headers="+te(Zc(Y))+"&"+_:this.u&&Pa(w,this.u,Y)),ur(this.h,$),this.Ra&&ct(w,"TYPE","init"),this.S?(ct(w,"$req",_),ct(w,"SID","null"),$.U=!0,Pe($,w,null)):Pe($,w,_),this.I=2}}else this.I==3&&(d?ko(this,d):this.i.length==0||Mn(this.h)||ko(this))};function ko(d,_){var w;_?w=_.l:w=d.V++;const A=en(d.J);ct(A,"SID",d.M),ct(A,"RID",w),ct(A,"AID",d.K),xi(d,A),d.u&&d.o&&Pa(A,d.u,d.o),w=new Se(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),_&&(d.i=_.G.concat(d.i)),_=eu(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),ur(d.h,w),Pe(w,A,_)}function xi(d,_){d.H&&pe(d.H,function(w,A){ct(_,A,w)}),d.l&&pe({},function(w,A){ct(_,A,w)})}function eu(d,_,w){w=Math.min(d.i.length,w);const A=d.l?p(d.l.Ka,d.l,d):null;e:{var $=d.i;let Ye=-1;for(;;){const Jt=["count="+w];Ye==-1?w>0?(Ye=$[0].g,Jt.push("ofs="+Ye)):Ye=0:Jt.push("ofs="+Ye);let _t=!0;for(let tn=0;tn<w;tn++){var Y=$[tn].g;const Ar=$[tn].map;if(Y-=Ye,Y<0)Ye=Math.max(0,$[tn].g-100),_t=!1;else try{Y="req"+Y+"_"||"";try{var me=Ar instanceof Map?Ar:Object.entries(Ar);for(const[ns,Ni]of me){let Oi=Ni;c(Ni)&&(Oi=Yt(Ni)),Jt.push(Y+ns+"="+encodeURIComponent(Oi))}}catch(ns){throw Jt.push(Y+"type="+encodeURIComponent("_badmap")),ns}}catch{A&&A(Ar)}}if(_t){me=Jt.join("&");break e}}me=void 0}return d=d.i.splice(0,w),_.G=d,me}function Fn(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;se||S(),fe||(se(),fe=!0),T.add(_,d),d.A=0}}function Di(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Fe(p(d.Da,d),Na(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,ks(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Fe(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),Sr(this),ks(this))};function xo(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function ks(d){d.g=new Se(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=en(d.na);ct(_,"RID","rpc"),ct(_,"SID",d.M),ct(_,"AID",d.K),ct(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&ct(_,"TO",d.ia),ct(_,"TYPE","xmlhttp"),xi(d,_),d.u&&d.o&&Pa(_,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=Ji(en(_)),w.u=null,w.R=!0,$e(w,d)}n.Va=function(){this.C!=null&&(this.C=null,Sr(this),Di(this),gt(19))};function xa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Da(d,_){var w=null;if(d.g==_){xa(d),xo(d),d.g=null;var A=2}else if(si(d.h,_))w=_.G,zr(d.h,_),A=1;else return;if(d.I!=0){if(_.o)if(A==1){w=_.u?_.u.length:0,_=Date.now()-_.F;var $=d.D;A=ar(),At(A,new Si(A,w)),ts(d)}else Fn(d);else if($=_.m,$==3||$==0&&_.X>0||!(A==1&&nd(d,_)||A==2&&Di(d)))switch(w&&w.length>0&&(_=d.h,_.i=_.i.concat(w)),$){case 1:Rr(d,5);break;case 4:Rr(d,10);break;case 3:Rr(d,6);break;default:Rr(d,2)}}}function Na(d,_){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*_}function Rr(d,_){if(d.j.info("Error code "+_),_==2){var w=p(d.bb,d),A=d.Ua;const $=!A;A=new An(A||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||mt(A,"https"),Ji(A),$?Pi(A.toString(),w):Ci(A.toString(),w)}else gt(2);d.I=0,d.l&&d.l.pa(_),Do(d),ka(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Do(d){if(d.I=0,d.ja=[],d.l){const _=gn(d.h);(_.length!=0||d.i.length!=0)&&(V(d.ja,_),V(d.ja,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.oa()}}function tu(d,_,w){var A=w instanceof An?en(w):new An(w);if(A.g!="")_&&(A.g=_+"."+A.g),Zn(A,A.u);else{var $=l.location;A=$.protocol,_=_?_+"."+$.hostname:$.hostname,$=+$.port;const Y=new An(null);A&&mt(Y,A),_&&(Y.g=_),$&&Zn(Y,$),w&&(Y.h=w),A=Y}return w=d.G,_=d.wa,w&&_&&ct(A,w,_),ct(A,"VER",d.ka),xi(d,A),A}function rd(d,_,w){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new Tt(new Xi({ab:w})):new Tt(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function id(){}n=id.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Oa(){}Oa.prototype.g=function(d,_){return new Cn(d,_)};function Cn(d,_){lt.call(this),this.g=new Ca(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!C(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!C(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new xs(this)}g(Cn,lt),Cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){ba(this.g)},Cn.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=Yt(d),d=w);_.i.push(new Yi(_.Ya++,d)),_.I==3&&ts(_)},Cn.prototype.N=function(){this.g.l=null,delete this.j,ba(this.g),delete this.g,Cn.Z.N.call(this)};function sd(d){pn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const w in _){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}g(sd,pn);function od(){ni.call(this),this.status=1}g(od,ni);function xs(d){this.g=d}g(xs,id),xs.prototype.ra=function(){At(this.g,"a")},xs.prototype.qa=function(d){At(this.g,new sd(d))},xs.prototype.pa=function(d){At(this.g,new od)},xs.prototype.oa=function(){At(this.g,"b")},Oa.prototype.createWebChannel=Oa.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,vS=function(){return new Oa},_S=function(){return ar()},yS=Rn,rg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Jn.NO_ERROR=0,Jn.TIMEOUT=8,Jn.HTTP_ERROR=6,Ih=Jn,k.COMPLETE="complete",gS=k,Yn.EventType=Br,Br.OPEN="a",Br.CLOSE="b",Br.ERROR="c",Br.MESSAGE="d",lt.prototype.listen=lt.prototype.J,ju=Yn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,mS=Tt}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dn.UNAUTHENTICATED=new Dn(null),Dn.GOOGLE_CREDENTIALS=new Dn("google-credentials-uid"),Dn.FIRST_PARTY=new Dn("first-party-uid"),Dn.MOCK_USER=new Dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zl="12.9.0";function gO(n){zl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new uf("@firebase/firestore");function ul(){return aa.logLevel}function le(n,...e){if(aa.logLevel<=rt.DEBUG){const t=e.map(iy);aa.debug(`Firestore (${zl}): ${n}`,...t)}}function rr(n,...e){if(aa.logLevel<=rt.ERROR){const t=e.map(iy);aa.error(`Firestore (${zl}): ${n}`,...t)}}function ho(n,...e){if(aa.logLevel<=rt.WARN){const t=e.map(iy);aa.warn(`Firestore (${zl}): ${n}`,...t)}}function iy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,wS(n,r,t)}function wS(n,e,t){let r=`FIRESTORE (${zl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw rr(r),new Error(r)}function xe(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||wS(e,s,r)}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Dn.UNAUTHENTICATED)))}shutdown(){}}class _O{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vO{constructor(e){this.t=e,this.currentUser=Dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0,42304);let r=this.i;const s=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new _i,e.enqueueRetryable((()=>s(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await s(this.currentUser)}))},c=f=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new _i)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new ES(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new Dn(e)}}class wO{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Dn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class EO{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wO(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Dn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $E{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class IO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0,3512);const r=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const s=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new $E(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $E(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=TO(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<t&&(r+=e.charAt(s[a]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function ig(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),a=e.charAt(r);if(s!==a)return bm(s)===bm(a)?Qe(s,a):bm(s)?1:-1}return Qe(n.length,e.length)}const SO=55296,RO=57343;function bm(n){const e=n.charCodeAt(0);return e>=SO&&e<=RO}function Al(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function IS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="__name__";class Bi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const a=Bi.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return Qe(e.length,t.length)}static compareSegments(e,t){const r=Bi.isNumericId(e),s=Bi.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):ig(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return oo.fromString(e.substring(4,e.length-2))}}class ht extends Bi{construct(e,t,r){return new ht(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const AO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends Bi{construct(e,t,r){return new zt(e,t,r)}static isValidIdentifier(e){return AO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HE}static keyField(){return new zt([HE])}static fromServerFormat(e){const t=[];let r="",s=0;const a=()=>{if(r.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new de(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[s+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new de(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,s+=2}else c==="`"?(l=!l,s++):c!=="."||l?(r+=c,s++):(a(),s++)}if(a(),l)throw new de(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(t)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ht.fromString(e))}static fromName(e){return new _e(ht.fromString(e).popFirst(5))}static empty(){return new _e(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(n,e,t){if(!t)throw new de(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function PO(n,e,t,r){if(e===!0&&r===!0)throw new de(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function qE(n){if(!_e.isDocumentKey(n))throw new de(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WE(n){if(_e.isDocumentKey(n))throw new de(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function yf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Zr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yf(n);throw new de(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(n,e){const t={typeString:n};return e&&(t.value=e),t}function zc(n,e){if(!SS(n))throw new de(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(s&&typeof l!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new de(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=-62135596800,GE=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*GE);return new vt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<KE)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GE}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zc(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:on("string",vt._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new vt(0,0))}static max(){return new Le(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=-1;class jh{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function sg(n){return n.fields.find((e=>e.kind===2))}function Ko(n){return n.fields.filter((e=>e.kind!==2))}jh.UNKNOWN_ID=-1;class Th{constructor(e,t){this.fieldPath=e,this.kind=t}}class pc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new pc(0,Fr.min())}}function CO(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Le.fromTimestamp(r===1e9?new vt(t+1,0):new vt(t,r));return new Fr(s,_e.empty(),e)}function RS(n){return new Fr(n.readTime,n.key,fc)}class Fr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fr(Le.min(),_e.empty(),fc)}static max(){return new Fr(Le.max(),_e.empty(),fc)}}function oy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ia(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==AS)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new z(((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof z?t:z.resolve(t)}catch(t){return z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):z.reject(t)}static resolve(e){return new z(((t,r)=>{t(e)}))}static reject(e){return new z(((t,r)=>{r(e)}))}static waitFor(e){return new z(((t,r)=>{let s=0,a=0,l=!1;e.forEach((c=>{++s,c.next((()=>{++a,l&&a===s&&t()}),(f=>r(f)))})),l=!0,a===s&&t()}))}static or(e){let t=z.resolve(!1);for(const r of e)t=t.next((s=>s?z.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,a)=>{r.push(t.call(this,s,a))})),this.waitFor(r)}static mapArray(e,t){return new z(((r,s)=>{const a=e.length,l=new Array(a);let c=0;for(let f=0;f<a;f++){const p=f;t(e[p]).next((v=>{l[p]=v,++c,c===a&&r(l)}),(v=>s(v)))}}))}static doWhile(e,t){return new z(((r,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr="SimpleDb";class _f{static open(e,t,r,s){try{return new _f(t,e.transaction(s,r))}catch(a){throw new Ju(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new _i,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ju(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=ay(r.target.error);this.S.reject(new Ju(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(xr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new kO(t)}}class ao{static delete(e){return le(xr,"Removing database:",e),Qo(y0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Wg())return!1;if(ao.F())return!0;const e=dn(),t=ao.M(e),r=0<t&&t<10,s=CS(e),a=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ao.M(dn())===12.2&&rr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(xr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=a=>{const l=a.target.result;t(l)},s.onblocked=()=>{r(new Ju(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new de(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new de(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new Ju(e,l))},s.onupgradeneeded=a=>{le(xr,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,s.transaction,a.oldVersion,this.version).next((()=>{le(xr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=_f.open(this.db,e,a?"readonly":"readwrite",r),f=s(c).next((p=>(c.C(),p))).catch((p=>(c.abort(p),z.reject(p)))).toPromise();return f.catch((()=>{})),await c.D,f}catch(c){const f=c,p=f.name!=="FirebaseError"&&l<3;if(le(xr,"Transaction failed with error:",f.message,"Retrying:",p),this.close(),!p)return Promise.reject(f)}}}close(){this.db&&this.db.close(),this.db=void 0}}function CS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class bO{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Qo(this.U.delete())}}class Ju extends de{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function To(n){return n.name==="IndexedDbTransactionError"}class kO{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(xr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(xr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Qo(r)}add(e){return le(xr,"ADD",this.store.name,e,e),Qo(this.store.add(e))}get(e){return Qo(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(xr,"GET",this.store.name,e,t),t)))}delete(e){return le(xr,"DELETE",this.store.name,e),Qo(this.store.delete(e))}count(){return le(xr,"COUNT",this.store.name),Qo(this.store.count())}H(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const a=s.getAll(r.range);return new z(((l,c)=>{a.onerror=f=>{c(f.target.error)},a.onsuccess=f=>{l(f.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((c,f)=>{l.push(f)})).next((()=>l))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new z(((s,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{s(l.target.result)}}))}X(e,t){le(xr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const s=this.cursor(r);return this.J(s,((a,l,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.J(s,t)}te(e){const t=this.cursor({});return new z(((r,s)=>{t.onerror=a=>{const l=ay(a.target.error);s(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():r()})):r()}}))}J(e,t){const r=[];return new z(((s,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void s();const f=new bO(c),p=t(c.primaryKey,c.value,f);if(p instanceof z){const v=p.catch((g=>(f.done(),z.reject(g))));r.push(v)}f.isDone?s():f.G===null?c.continue():c.continue(f.G)}})).next((()=>z.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qo(n){return new z(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=ay(r.target.error);t(s)}}))}let QE=!1;function ay(n){const e=ao.M(dn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return QE||(QE=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Xu="IndexBackfiller";class xO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(Xu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(Xu,`Documents written: ${t}`)}catch(t){To(t)?le(Xu,"Ignoring IndexedDB error during index backfill: ",t):await Ia(t)}await this.re(6e4)}))}}class DO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,a=!0;return z.doWhile((()=>a===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return le(Xu,`Processing collection: ${l}`),this.oe(e,l,s).next((c=>{s-=c,r.add(l)}));a=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(s,a))).next((c=>(le(Xu,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,a)=>{const l=RS(a);oy(l,r)>0&&(r=l)})),new Fr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qr.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;function jc(n){return n==null}function mc(n){return n===0&&1/n==-1/0}function NO(n){return typeof n=="number"&&Number.isInteger(n)&&!mc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="";function Kn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YE(e)),e=OO(n.get(t),e);return YE(e)}function OO(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case $h:t+="";break;default:t+=a}}return t}function YE(n){return n+$h+""}function zi(n){const e=n.length;if(xe(e>=2,64408,{path:n}),e===2)return xe(n.charAt(0)===$h&&n.charAt(1)==="",56145,{path:n}),ht.emptyPath();const t=e-2,r=[];let s="";for(let a=0;a<e;){const l=n.indexOf($h,a);switch((l<0||l>t)&&Ae(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(a,l);let f;s.length===0?f=c:(s+=c,f=s,s=""),r.push(f);break;case"":s+=n.substring(a,l),s+="\0";break;case"":s+=n.substring(a,l+1);break;default:Ae(61167,{path:n})}a=l+2}return new ht(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="remoteDocuments",$c="owner",nl="owner",gc="mutationQueues",VO="userId",pi="mutations",JE="batchId",ta="userMutationsIndex",XE=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(n,e){return[n,Kn(e)]}function bS(n,e,t){return[n,Kn(e),t]}const LO={},Pl="documentMutations",Hh="remoteDocumentsV14",MO=["prefixPath","collectionGroup","readTime","documentId"],Rh="documentKeyIndex",FO=["prefixPath","collectionGroup","documentId"],kS="collectionGroupIndex",UO=["collectionGroup","readTime","prefixPath","documentId"],yc="remoteDocumentGlobal",og="remoteDocumentGlobalKey",Cl="targets",xS="queryTargetsIndex",BO=["canonicalId","targetId"],bl="targetDocuments",zO=["targetId","path"],ly="documentTargetsIndex",jO=["path","targetId"],qh="targetGlobalKey",ia="targetGlobal",_c="collectionParents",$O=["collectionId","parent"],kl="clientMetadata",HO="clientId",vf="bundles",qO="bundleId",wf="namedQueries",WO="name",uy="indexConfiguration",KO="indexId",ag="collectionGroupIndex",GO="collectionGroup",Zu="indexState",QO=["indexId","uid"],DS="sequenceNumberIndex",YO=["uid","sequenceNumber"],ec="indexEntries",JO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],NS="documentKeyIndex",XO=["indexId","uid","orderedDocumentKey"],Ef="documentOverlays",ZO=["userId","collectionPath","documentId"],lg="collectionPathOverlayIndex",eV=["userId","collectionPath","largestBatchId"],OS="collectionGroupOverlayIndex",tV=["userId","collectionGroup","largestBatchId"],cy="globals",nV="name",VS=[gc,pi,Pl,Go,Cl,$c,ia,bl,kl,yc,_c,vf,wf],rV=[...VS,Ef],LS=[gc,pi,Pl,Hh,Cl,$c,ia,bl,kl,yc,_c,vf,wf,Ef],MS=LS,dy=[...MS,uy,Zu,ec],iV=dy,FS=[...dy,cy],sV=FS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends PS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function hn(n,e){const t=We(n);return ao.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function So(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function US(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.comparator=e,this.root=t||Nn.EMPTY}insert(e,t){return new Lt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nn.BLACK,null,null))}remove(e){return new Lt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nn{constructor(e,t,r,s,a){this.key=e,this.value=t,this.color=r??Nn.RED,this.left=s??Nn.EMPTY,this.right=a??Nn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,a){return new Nn(e??this.key,t??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,r),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Nn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Nn.EMPTY=null,Nn.RED=!0,Nn.BLACK=!1;Nn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,r,s,a){return this}insert(e,t,r){return new Nn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eI(this.data.getIterator())}getIteratorFrom(e){return new eI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Et)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Et(this.comparator);return t.data=e,t}}class eI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new _r([])}unionWith(e){let t=new Et(zt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _r(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Al(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new BS("Invalid base64 string: "+a):a}})(e);return new ln(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let l=0;l<s.length;++l)a+=String.fromCharCode(s[l]);return a})(e);return new ln(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ln.EMPTY_BYTE_STRING=new ln("");const oV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Is(n){if(xe(!!n,39018),typeof n=="string"){let e=0;const t=oV.exec(n);if(xe(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ot(n.seconds),nanos:Ot(n.nanos)}}function Ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ts(n){return typeof n=="string"?ln.fromBase64String(n):ln.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="server_timestamp",jS="__type__",$S="__previous_value__",HS="__local_write_time__";function hy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[jS])==null?void 0:r.stringValue)===zS}function If(n){const e=n.mapValue.fields[$S];return hy(e)?If(e):e}function vc(n){const e=Is(n.mapValue.fields[HS].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,t,r,s,a,l,c,f,p,v,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=v,this.apiKey=g}}const Wh="(default)";class la{constructor(e,t){this.projectId=e,this.database=t||Wh}static empty(){return new la("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}function lV(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new de(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="__type__",qS="__max__",io={mapValue:{fields:{__type__:{stringValue:qS}}}},py="__vector__",xl="value",Ah={nullValue:"NULL_VALUE"};function fo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hy(n)?4:WS(n)?9007199254740991:Tf(n)?10:11:Ae(28295,{value:n})}function Gi(n,e){if(n===e)return!0;const t=fo(n);if(t!==fo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vc(n).isEqual(vc(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const l=Is(s.timestampValue),c=Is(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Ts(s.bytesValue).isEqual(Ts(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return Ot(s.geoPointValue.latitude)===Ot(a.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return Ot(s.integerValue)===Ot(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const l=Ot(s.doubleValue),c=Ot(a.doubleValue);return l===c?mc(l)===mc(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Al(n.arrayValue.values||[],e.arrayValue.values||[],Gi);case 10:case 11:return(function(s,a){const l=s.mapValue.fields||{},c=a.mapValue.fields||{};if(ZE(l)!==ZE(c))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(c[f]===void 0||!Gi(l[f],c[f])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function wc(n,e){return(n.values||[]).find((t=>Gi(t,e)))!==void 0}function po(n,e){if(n===e)return 0;const t=fo(n),r=fo(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=Ot(a.integerValue||a.doubleValue),f=Ot(l.integerValue||l.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(n,e);case 3:return tI(n.timestampValue,e.timestampValue);case 4:return tI(vc(n),vc(e));case 5:return ig(n.stringValue,e.stringValue);case 6:return(function(a,l){const c=Ts(a),f=Ts(l);return c.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),f=l.split("/");for(let p=0;p<c.length&&p<f.length;p++){const v=Qe(c[p],f[p]);if(v!==0)return v}return Qe(c.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Qe(Ot(a.latitude),Ot(l.latitude));return c!==0?c:Qe(Ot(a.longitude),Ot(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return nI(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var E,R,V,U;const c=a.fields||{},f=l.fields||{},p=(E=c[xl])==null?void 0:E.arrayValue,v=(R=f[xl])==null?void 0:R.arrayValue,g=Qe(((V=p==null?void 0:p.values)==null?void 0:V.length)||0,((U=v==null?void 0:v.values)==null?void 0:U.length)||0);return g!==0?g:nI(p,v)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===io.mapValue&&l===io.mapValue)return 0;if(a===io.mapValue)return 1;if(l===io.mapValue)return-1;const c=a.fields||{},f=Object.keys(c),p=l.fields||{},v=Object.keys(p);f.sort(),v.sort();for(let g=0;g<f.length&&g<v.length;++g){const E=ig(f[g],v[g]);if(E!==0)return E;const R=po(c[f[g]],p[v[g]]);if(R!==0)return R}return Qe(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function tI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Is(n),r=Is(e),s=Qe(t.seconds,r.seconds);return s!==0?s:Qe(t.nanos,r.nanos)}function nI(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const a=po(t[s],r[s]);if(a)return a}return Qe(t.length,r.length)}function Dl(n){return cg(n)}function cg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Is(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ts(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const a of t.values||[])s?s=!1:r+=",",r+=cg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const l of r)a?a=!1:s+=",",s+=`${l}:${cg(t.fields[l])}`;return s+"}"})(n.mapValue):Ae(61005,{value:n})}function Ph(n){switch(fo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(n);return e?16+Ph(e):16;case 5:return 2*n.stringValue.length;case 6:return Ts(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,a)=>s+Ph(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return So(r.fields,((a,l)=>{s+=a.length+Ph(l)})),s})(n.mapValue);default:throw Ae(13486,{value:n})}}function Ec(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dg(n){return!!n&&"integerValue"in n}function Ic(n){return!!n&&"arrayValue"in n}function rI(n){return!!n&&"nullValue"in n}function iI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ch(n){return!!n&&"mapValue"in n}function Tf(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[fy])==null?void 0:r.stringValue)===py}function tc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return So(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=tc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tc(n.arrayValue.values[t]);return e}return{...n}}function WS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===qS}const KS={mapValue:{fields:{[fy]:{stringValue:py},[xl]:{arrayValue:{}}}}};function uV(n){return"nullValue"in n?Ah:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ec(la.empty(),_e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Tf(n)?KS:{mapValue:{}}:Ae(35942,{value:n})}function cV(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ec(la.empty(),_e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?KS:"mapValue"in n?Tf(n)?{mapValue:{}}:io:Ae(61959,{value:n})}function sI(n,e){const t=po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function oI(n,e){const t=po(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.value=e}static empty(){return new On({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tc(t)}setAll(e){let t=zt.emptyPath(),r={},s=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const f=this.getFieldsMap(t);this.applyChanges(f,r,s),r={},s=[],t=c.popLast()}l?r[c.lastSegment()]=tc(l):s.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,s)}delete(e){const t=this.field(e.popLast());Ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ch(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){So(t,((s,a)=>e[s]=a));for(const s of r)delete e[s]}clone(){return new On(tc(this.value))}}function GS(n){const e=[];return So(n.fields,((t,r)=>{const s=new zt([t]);if(Ch(r)){const a=GS(r.mapValue).fields;if(a.length===0)e.push(s);else for(const l of a)e.push(s.child(l))}else e.push(s)})),new _r(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,t,r,s,a,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Vt(e,0,Le.min(),Le.min(),Le.min(),On.empty(),0)}static newFoundDocument(e,t,r,s){return new Vt(e,1,t,Le.min(),r,s,0)}static newNoDocument(e,t){return new Vt(e,2,t,Le.min(),Le.min(),On.empty(),0)}static newUnknownDocument(e,t){return new Vt(e,3,t,Le.min(),Le.min(),On.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=On.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=On.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,t){this.position=e,this.inclusive=t}}function aI(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const a=e[s],l=n.position[s];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=po(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function lI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Gi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t="asc"){this.field=e,this.dir=t}}function dV(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{}class it extends QS{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hV(e,t,r):t==="array-contains"?new mV(e,r):t==="in"?new tR(e,r):t==="not-in"?new gV(e,r):t==="array-contains-any"?new yV(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fV(e,r):new pV(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(po(t,this.value)):t!==null&&fo(this.value)===fo(t)&&this.matchesComparison(po(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wt extends QS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new wt(e,t)}matches(e){return Ol(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ol(n){return n.op==="and"}function hg(n){return n.op==="or"}function my(n){return YS(n)&&Ol(n)}function YS(n){for(const e of n.filters)if(e instanceof wt)return!1;return!0}function fg(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Dl(n.value);if(my(n))return n.filters.map((e=>fg(e))).join(",");{const e=n.filters.map((t=>fg(t))).join(",");return`${n.op}(${e})`}}function JS(n,e){return n instanceof it?(function(r,s){return s instanceof it&&r.op===s.op&&r.field.isEqual(s.field)&&Gi(r.value,s.value)})(n,e):n instanceof wt?(function(r,s){return s instanceof wt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((a,l,c)=>a&&JS(l,s.filters[c])),!0):!1})(n,e):void Ae(19439)}function XS(n,e){const t=n.filters.concat(e);return wt.create(t,n.op)}function ZS(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${Dl(t.value)}`})(n):n instanceof wt?(function(t){return t.op.toString()+" {"+t.getFilters().map(ZS).join(" ,")+"}"})(n):"Filter"}class hV extends it{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class fV extends it{constructor(e,t){super(e,"in",t),this.keys=eR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class pV extends it{constructor(e,t){super(e,"not-in",t),this.keys=eR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function eR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class mV extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ic(t)&&wc(t.arrayValue,this.value)}}class tR extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&wc(this.value.arrayValue,t)}}class gV extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(wc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wc(this.value.arrayValue,t)}}class yV extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ic(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>wc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,t=null,r=[],s=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function pg(n,e=null,t=[],r=[],s=null,a=null,l=null){return new _V(n,e,t,r,s,a,l)}function ua(n){const e=We(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>fg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),jc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Dl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Dl(r))).join(",")),e.Te=t}return e.Te}function Hc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dV(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lI(n.startAt,e.startAt)&&lI(n.endAt,e.endAt)}function Kh(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Gh(n,e){return n.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function uI(n,e,t){let r=Ah,s=!0;for(const a of Gh(n,e)){let l=Ah,c=!0;switch(a.op){case"<":case"<=":l=uV(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,c=!1;break;case"!=":case"not-in":l=Ah}sI({value:r,inclusive:s},{value:l,inclusive:c})<0&&(r=l,s=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];sI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})<0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}function cI(n,e,t){let r=io,s=!0;for(const a of Gh(n,e)){let l=io,c=!0;switch(a.op){case">=":case">":l=cV(a.value),c=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,c=!1;break;case"!=":case"not-in":l=io}oI({value:r,inclusive:s},{value:l,inclusive:c})>0&&(r=l,s=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];oI({value:r,inclusive:s},{value:l,inclusive:t.inclusive})>0&&(r=l,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t=null,r=[],s=[],a=null,l="F",c=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function vV(n,e,t,r,s,a,l,c){return new jl(n,e,t,r,s,a,l,c)}function Sf(n){return new jl(n)}function dI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function wV(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nR(n){return n.collectionGroup!==null}function nc(n){const e=We(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Et(zt.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Tc(a,r))})),t.has(zt.keyField().canonicalString())||e.Ie.push(new Tc(zt.keyField(),r))}return e.Ie}function Yr(n){const e=We(n);return e.Ee||(e.Ee=EV(e,nc(n))),e.Ee}function EV(n,e){if(n.limitType==="F")return pg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Tc(s.field,a)}));const t=n.endAt?new Nl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Nl(n.startAt.position,n.startAt.inclusive):null;return pg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function mg(n,e){const t=n.filters.concat([e]);return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function IV(n,e){const t=n.explicitOrderBy.concat([e]);return new jl(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function gg(n,e,t){return new jl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rf(n,e){return Hc(Yr(n),Yr(e))&&n.limitType===e.limitType}function rR(n){return`${ua(Yr(n))}|lt:${n.limitType}`}function cl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>ZS(s))).join(", ")}]`),jc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Dl(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Dl(s))).join(",")),`Target(${r})`})(Yr(n))}; limitType=${n.limitType})`}function qc(n,e){return e.isFoundDocument()&&(function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,s){for(const a of nc(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(l,c,f){const p=aI(l,c,f);return l.inclusive?p<=0:p<0})(r.startAt,nc(r),s)||r.endAt&&!(function(l,c,f){const p=aI(l,c,f);return l.inclusive?p>=0:p>0})(r.endAt,nc(r),s))})(n,e)}function TV(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function iR(n){return(e,t)=>{let r=!1;for(const s of nc(n)){const a=SV(s,e,t);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function SV(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(a,l,c){const f=l.data.field(a),p=c.data.field(a);return f!==null&&p!==null?po(f,p):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){So(this.inner,((t,r)=>{for(const[s,a]of r)e(s,a)}))}isEmpty(){return US(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV=new Lt(_e.comparator);function Nr(){return RV}const sR=new Lt(_e.comparator);function $u(...n){let e=sR;for(const t of n)e=e.insert(t.key,t);return e}function oR(n){let e=sR;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function ji(){return rc()}function aR(){return rc()}function rc(){return new Ss((n=>n.toString()),((n,e)=>n.isEqual(e)))}const AV=new Lt(_e.comparator),PV=new Et(_e.comparator);function Xe(...n){let e=PV;for(const t of n)e=e.add(t);return e}const CV=new Et(Qe);function bV(){return CV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mc(e)?"-0":e}}function lR(n){return{integerValue:""+n}}function kV(n,e){return NO(e)?lR(e):gy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this._=void 0}}function xV(n,e,t){return n instanceof Sc?(function(s,a){const l={fields:{[jS]:{stringValue:zS},[HS]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&hy(a)&&(a=If(a)),a&&(l.fields[$S]=a),{mapValue:l}})(t,e):n instanceof Vl?cR(n,e):n instanceof Ll?dR(n,e):(function(s,a){const l=uR(s,a),c=hI(l)+hI(s.Ae);return dg(l)&&dg(s.Ae)?lR(c):gy(s.serializer,c)})(n,e)}function DV(n,e,t){return n instanceof Vl?cR(n,e):n instanceof Ll?dR(n,e):t}function uR(n,e){return n instanceof Rc?(function(r){return dg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Sc extends Af{}class Vl extends Af{constructor(e){super(),this.elements=e}}function cR(n,e){const t=hR(e);for(const r of n.elements)t.some((s=>Gi(s,r)))||t.push(r);return{arrayValue:{values:t}}}class Ll extends Af{constructor(e){super(),this.elements=e}}function dR(n,e){let t=hR(e);for(const r of n.elements)t=t.filter((s=>!Gi(s,r)));return{arrayValue:{values:t}}}class Rc extends Af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function hI(n){return Ot(n.integerValue||n.doubleValue)}function hR(n){return Ic(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,t){this.field=e,this.transform=t}}function OV(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof Vl&&s instanceof Vl||r instanceof Ll&&s instanceof Ll?Al(r.elements,s.elements,Gi):r instanceof Rc&&s instanceof Rc?Gi(r.Ae,s.Ae):r instanceof Sc&&s instanceof Sc})(n.transform,e.transform)}class VV{constructor(e,t){this.version=e,this.transformResults=t}}class sn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Pf{}function fR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Cf(n.key,sn.none()):new $l(n.key,n.data,sn.none());{const t=n.data,r=On.empty();let s=new Et(zt.comparator);for(let a of e.fields)if(!s.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),s=s.add(a)}return new Rs(n.key,r,new _r(s.toArray()),sn.none())}}function LV(n,e,t){n instanceof $l?(function(s,a,l){const c=s.value.clone(),f=pI(s.fieldTransforms,a,l.transformResults);c.setAll(f),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Rs?(function(s,a,l){if(!bh(s.precondition,a))return void a.convertToUnknownDocument(l.version);const c=pI(s.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(pR(s)),f.setAll(c),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(s,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function ic(n,e,t,r){return n instanceof $l?(function(a,l,c,f){if(!bh(a.precondition,l))return c;const p=a.value.clone(),v=mI(a.fieldTransforms,f,l);return p.setAll(v),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Rs?(function(a,l,c,f){if(!bh(a.precondition,l))return c;const p=mI(a.fieldTransforms,f,l),v=l.data;return v.setAll(pR(a)),v.setAll(p),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,l,c){return bh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function MV(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),a=uR(r.transform,s||null);a!=null&&(t===null&&(t=On.empty()),t.set(r.field,a))}return t||null}function fI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Al(r,s,((a,l)=>OV(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class $l extends Pf{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rs extends Pf{constructor(e,t,r,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function pR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function pI(n,e,t){const r=new Map;xe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],l=a.transform,c=e.data.field(a.field);r.set(a.field,DV(l,c,t[s]))}return r}function mI(n,e,t){const r=new Map;for(const s of n){const a=s.transform,l=t.data.field(s.field);r.set(s.field,xV(a,l,e))}return r}class Cf extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yy extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&LV(a,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ic(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=aR();return this.mutations.forEach((s=>{const a=e.get(s.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(s.key)?null:c;const f=fR(l,c);f!==null&&r.set(s.key,f),l.isValidDocument()||l.convertToNoDocument(Le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Al(this.mutations,e.mutations,((t,r)=>fI(t,r)))&&Al(this.baseMutations,e.baseMutations,((t,r)=>fI(t,r)))}}class vy{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return AV})();const a=e.mutations;for(let l=0;l<a.length;l++)s=s.insert(a[l].key,r[l].version);return new vy(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,at;function mR(n){switch(n){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function gR(n){if(n===void 0)return rr("GRPC error has no .code"),X.UNKNOWN;switch(n){case rn.OK:return X.OK;case rn.CANCELLED:return X.CANCELLED;case rn.UNKNOWN:return X.UNKNOWN;case rn.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case rn.INTERNAL:return X.INTERNAL;case rn.UNAVAILABLE:return X.UNAVAILABLE;case rn.UNAUTHENTICATED:return X.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case rn.NOT_FOUND:return X.NOT_FOUND;case rn.ALREADY_EXISTS:return X.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return X.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case rn.ABORTED:return X.ABORTED;case rn.OUT_OF_RANGE:return X.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return X.UNIMPLEMENTED;case rn.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:n})}}(at=rn||(rn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=new oo([4294967295,4294967295],0);function gI(n){const e=UV().encode(n),t=new pS;return t.update(e),new Uint8Array(t.digest())}function yI(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new oo([t,r],0),new oo([s,a],0)]}class Ey{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Hu(`Invalid padding: ${t}`);if(r<0)throw new Hu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Hu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=oo.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(oo.fromNumber(r)));return s.compare(BV)===1&&(s=new oo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=gI(e),[r,s]=yI(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Ey(a,s,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=gI(e),[r,s]=yI(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,s,a);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t,r,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Wc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new bf(Le.min(),s,new Lt(Qe),Nr(),Xe())}}class Wc{constructor(e,t,r,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Wc(r,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,t,r,s){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=s}}class yR{constructor(e,t){this.targetId=e,this.Ce=t}}class _R{constructor(e,t,r=ln.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class _I{constructor(){this.ve=0,this.Fe=vI(),this.Me=ln.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),r=Xe();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ae(38017,{changeType:a})}})),new Wc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=vI()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class zV{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.He=oh(),this.Je=oh(),this.Ze=new Lt(Qe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Kh(a))if(r===0){const l=new _e(a.path);this.et(t,l,Vt.newNoDocument(l,Le.min()))}else xe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),f=c?this.ct(c,e,l):1;if(f!==0){this.it(t);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=t;let l,c;try{l=Ts(r).toUint8Array()}catch(f){if(f instanceof BS)return ho("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new Ey(l,s,a)}catch(f){return ho(f instanceof Hu?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const c=this.ot(l);if(c){if(a.current&&Kh(c.target)){const f=new _e(c.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,Vt.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let r=Xe();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((f=>{const p=this.ot(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const s=new bf(e,t,this.Ze,this.je,r);return this.je=Nr(),this.He=oh(),this.Je=oh(),this.Ze=new Lt(Qe),s}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new _I,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Et(Qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Et(Qe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _I),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function oh(){return new Lt(_e.comparator)}function vI(){return new Lt(_e.comparator)}const jV={asc:"ASCENDING",desc:"DESCENDING"},$V={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},HV={and:"AND",or:"OR"};class qV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yg(n,e){return n.useProto3Json||jc(e)?e:{value:e}}function Ml(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WV(n,e){return Ml(n,e.toTimestamp())}function En(n){return xe(!!n,49232),Le.fromTimestamp((function(t){const r=Is(t);return new vt(r.seconds,r.nanos)})(n))}function Iy(n,e){return _g(n,e).canonicalString()}function _g(n,e){const t=(function(s){return new ht(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function wR(n){const e=ht.fromString(n);return xe(bR(e),10190,{key:e.toString()}),e}function Ac(n,e){return Iy(n.databaseId,e.path)}function vs(n,e){const t=wR(e);if(t.get(1)!==n.databaseId.projectId)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(TR(t))}function ER(n,e){return Iy(n.databaseId,e)}function IR(n){const e=wR(n);return e.length===4?ht.emptyPath():TR(e)}function vg(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TR(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function wI(n,e,t){return{name:Ac(n,e),fields:t.value.mapValue.fields}}function KV(n,e,t){const r=vs(n,e.name),s=En(e.updateTime),a=e.createTime?En(e.createTime):Le.min(),l=new On({mapValue:{fields:e.fields}}),c=Vt.newFoundDocument(r,s,a,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function GV(n,e){return"found"in e?(function(r,s){xe(!!s.found,43571),s.found.name,s.found.updateTime;const a=vs(r,s.found.name),l=En(s.found.updateTime),c=s.found.createTime?En(s.found.createTime):Le.min(),f=new On({mapValue:{fields:s.found.fields}});return Vt.newFoundDocument(a,l,c,f)})(n,e):"missing"in e?(function(r,s){xe(!!s.missing,3894),xe(!!s.readTime,22933);const a=vs(r,s.missing),l=En(s.readTime);return Vt.newNoDocument(a,l)})(n,e):Ae(7234,{result:e})}function QV(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,v){return p.useProto3Json?(xe(v===void 0||typeof v=="string",58123),ln.fromBase64String(v||"")):(xe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),ln.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const v=p.code===void 0?X.UNKNOWN:gR(p.code);return new de(v,p.message||"")})(l);t=new _R(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vs(n,r.document.name),a=En(r.document.updateTime),l=r.document.createTime?En(r.document.createTime):Le.min(),c=new On({mapValue:{fields:r.document.fields}}),f=Vt.newFoundDocument(s,a,l,c),p=r.targetIds||[],v=r.removedTargetIds||[];t=new kh(p,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vs(n,r.document),a=r.readTime?En(r.readTime):Le.min(),l=Vt.newNoDocument(s,a),c=r.removedTargetIds||[];t=new kh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vs(n,r.document),a=r.removedTargetIds||[];t=new kh([],a,s,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,l=new FV(s,a),c=r.targetId;t=new yR(c,l)}}return t}function Pc(n,e){let t;if(e instanceof $l)t={update:wI(n,e.key,e.value)};else if(e instanceof Cf)t={delete:Ac(n,e.key)};else if(e instanceof Rs)t={update:wI(n,e.key,e.data),updateMask:t2(e.fieldMask)};else{if(!(e instanceof yy))return Ae(16599,{dt:e.type});t={verify:Ac(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const c=l.transform;if(c instanceof Sc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Vl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ll)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Rc)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ae(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:WV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae(27497)})(n,e.precondition)),t}function wg(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?sn.updateTime(En(a.updateTime)):a.exists!==void 0?sn.exists(a.exists):sn.none()})(e.currentDocument):sn.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(l,c){let f=null;if("setToServerValue"in c)xe(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),f=new Sc;else if("appendMissingElements"in c){const v=c.appendMissingElements.values||[];f=new Vl(v)}else if("removeAllFromArray"in c){const v=c.removeAllFromArray.values||[];f=new Ll(v)}else"increment"in c?f=new Rc(l,c.increment):Ae(16584,{proto:c});const p=zt.fromServerFormat(c.fieldPath);return new NV(p,f)})(n,s))):[];if(e.update){e.update.name;const s=vs(n,e.update.name),a=new On({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(f){const p=f.fieldPaths||[];return new _r(p.map((v=>zt.fromServerFormat(v))))})(e.updateMask);return new Rs(s,a,l,t,r)}return new $l(s,a,t,r)}if(e.delete){const s=vs(n,e.delete);return new Cf(s,t)}if(e.verify){const s=vs(n,e.verify);return new yy(s,t)}return Ae(1463,{proto:e})}function YV(n,e){return n&&n.length>0?(xe(e!==void 0,14353),n.map((t=>(function(s,a){let l=s.updateTime?En(s.updateTime):En(a);return l.isEqual(Le.min())&&(l=En(a)),new VV(l,s.transformResults||[])})(t,e)))):[]}function SR(n,e){return{documents:[ER(n,e.path)]}}function RR(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ER(n,s);const a=(function(p){if(p.length!==0)return CR(wt.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((v=>(function(E){return{field:dl(E.field),direction:XV(E.dir)}})(v)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=yg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function AR(n){let e=IR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){xe(r===1,65062);const v=t.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(g){const E=PR(g);return E instanceof wt&&my(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(g){return g.map((E=>(function(V){return new Tc(hl(V.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(E)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let E;return E=typeof g=="object"?g.value:g,jc(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(g){const E=!!g.before,R=g.values||[];return new Nl(R,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(g){const E=!g.before,R=g.values||[];return new Nl(R,E)})(t.endAt)),vV(e,s,l,a,c,"F",f,p)}function JV(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=hl(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hl(t.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=hl(t.unaryFilter.field);return it.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=hl(t.unaryFilter.field);return it.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(hl(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return wt.create(t.compositeFilter.filters.map((r=>PR(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function XV(n){return jV[n]}function ZV(n){return $V[n]}function e2(n){return HV[n]}function dl(n){return{fieldPath:n.canonicalString()}}function hl(n){return zt.fromServerFormat(n.fieldPath)}function CR(n){return n instanceof it?(function(t){if(t.op==="=="){if(iI(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NAN"}};if(rI(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iI(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NOT_NAN"}};if(rI(t.value))return{unaryFilter:{field:dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dl(t.field),op:ZV(t.op),value:t.value}}})(n):n instanceof wt?(function(t){const r=t.getFilters().map((s=>CR(s)));return r.length===1?r[0]:{compositeFilter:{op:e2(t.op),filters:r}}})(n):Ae(54877,{filter:n})}function t2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function kR(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,r,s,a=Le.min(),l=Le.min(),c=ln.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e){this.yt=e}}function n2(n,e){let t;if(e.document)t=KV(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),s=da(e.noDocument.readTime);t=Vt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const r=_e.fromSegments(e.unknownDocument.path),s=da(e.unknownDocument.version);t=Vt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const a=new vt(s[0],s[1]);return Le.fromTimestamp(a)})(e.readTime)),t}function EI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Qh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:Ac(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Ml(a,l.version.toTimestamp()),createTime:Ml(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ca(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ca(e.version)}}return r}function Qh(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ca(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function da(n){const e=new vt(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function Yo(n,e){const t=(e.baseMutations||[]).map((a=>wg(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>wg(n.yt,a))),s=vt.fromMillis(e.localWriteTimeMs);return new _y(e.batchId,s,t,r)}function qu(n){const e=da(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?da(n.lastLimboFreeSnapshotVersion):Le.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return xe(l===1,1966,{count:l}),Yr(Sf(IR(a.documents[0])))})(n.query):(function(a){return Yr(AR(a))})(n.query),new gs(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ln.fromBase64String(n.resumeToken))}function DR(n,e){const t=ca(e.snapshotVersion),r=ca(e.lastLimboFreeSnapshotVersion);let s;s=Kh(e.target)?SR(n.yt,e.target):RR(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ua(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function NR(n){const e=AR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gg(e,e.limit,"L"):e}function km(n,e){return new wy(e.largestBatchId,wg(n.yt,e.overlayMutation))}function II(n,e){const t=e.path.lastSegment();return[n,Kn(e.path.popLast()),t]}function TI(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ca(r.readTime),documentKey:Kn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{getBundleMetadata(e,t){return SI(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:da(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return SI(e).put((function(s){return{bundleId:s.id,createTime:ca(En(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return RI(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:NR(a.bundledQuery),readTime:da(a.readTime)}})(r)}))}saveNamedQuery(e,t){return RI(e).put((function(s){return{name:s.name,readTime:ca(En(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function SI(n){return hn(n,vf)}function RI(n){return hn(n,wf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new kf(e,r)}getOverlay(e,t){return xu(e).get(II(this.userId,t)).next((r=>r?km(this.serializer,r):null))}getOverlays(e,t){const r=ji();return z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((a,l)=>{const c=new wy(t,l);s.push(this.bt(e,c))})),z.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((l=>s.add(Kn(l.getCollectionPath()))));const a=[];return s.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(xu(e).X(lg,c))})),z.waitFor(a)}getOverlaysForCollection(e,t,r){const s=ji(),a=Kn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return xu(e).H(lg,l).next((c=>{for(const f of c){const p=km(this.serializer,f);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const a=ji();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xu(e).ee({index:OS,range:c},((f,p,v)=>{const g=km(this.serializer,p);a.size()<s||g.largestBatchId===l?(a.set(g.getKey(),g),l=g.largestBatchId):v.done()})).next((()=>a))}bt(e,t){return xu(e).put((function(s,a,l){const[c,f,p]=II(a,l.mutation.key);return{userId:a,collectionPath:f,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Pc(s.yt,l.mutation)}})(this.serializer,this.userId,t))}}function xu(n){return hn(n,Ef)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{St(e){return hn(e,cy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?ln.fromUint8Array(r):ln.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ot(e.integerValue));else if("doubleValue"in e){const r=Ot(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),mc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Is(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ts(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?WS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Tf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){var l,c;const r=e.fields||{};this.Ft(t,53);const s=xl,a=((c=(l=r[s].arrayValue)==null?void 0:l.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Ot(a)),this.Ot(s,t),this.Ct(r[s],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),_e.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Jo.Wt=new Jo;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il=255;function s2(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function AI(n){const e=64-(function(r){let s=0;for(let a=0;a<8;++a){const l=s2(255&r[a]);if(s+=l,l!==8)break}return s})(n);return Math.ceil(e/8)}class o2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const s=t.codePointAt(0);this.Ht(240|s>>>18),this.Ht(128|63&s>>>12),this.Ht(128|63&s>>>6),this.Ht(128|63&s)}}this.Jt()}Yt(e){const t=this.en(e),r=AI(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=AI(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(il),this.sn(255)}_n(){this.an(il),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===il?(this.sn(il),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===il?(this.an(il),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class a2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class l2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Du{constructor(){this.cn=new o2,this.ascending=new a2(this.cn),this.descending=new l2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t,r,s){this.hn=e,this.Pn=t,this.Tn=r,this.In=s}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new Xo(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:xh(this.Tn),directionalValue:xh(this.In),orderedDocumentKey:xh(t),documentKey:r.path.toArray()}}An(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ks(n,e){let t=n.hn-e.hn;return t!==0?t:(t=PI(n.Tn,e.Tn),t!==0?t:(t=PI(n.In,e.In),t!==0?t:_e.comparator(n.Pn,e.Pn)))}function PI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function xh(n){return A0()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function CI(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class bI{constructor(e){this.Vn=new Et(((t,r)=>zt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=sg(e);if(t!==void 0&&!this.pn(t))return!1;const r=Ko(e);let s=new Set,a=0,l=0;for(;a<r.length&&this.pn(r[a]);++a)s=s.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const c=this.Vn.getIterator().getNext();if(!s.has(c.field.canonicalString())){const f=r[a];if(!this.yn(c,f)||!this.wn(this.dn[l++],f))return!1}++a}for(;a<r.length;++a){const c=r[a];if(l>=this.dn.length||!this.wn(this.dn[l++],c))return!1}return!0}bn(){if(this.fn)return null;let e=new Et(zt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Th(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Th(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Th(r.field,r.dir==="asc"?0:1)));return new jh(jh.UNKNOWN_ID,this.collectionId,t,pc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(n){var t,r;if(xe(n instanceof it||n instanceof wt,20012),n instanceof it){if(n instanceof tR){const s=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((a=>it.create(n.field,"==",a))))||[];return wt.create(s,"or")}return n}const e=n.filters.map((s=>OR(s)));return wt.create(e,n.op)}function u2(n){if(n.getFilters().length===0)return[];const e=Tg(OR(n));return xe(VR(e),7391),Eg(e)||Ig(e)?[e]:e.getFilters()}function Eg(n){return n instanceof it}function Ig(n){return n instanceof wt&&my(n)}function VR(n){return Eg(n)||Ig(n)||(function(t){if(t instanceof wt&&hg(t)){for(const r of t.getFilters())if(!Eg(r)&&!Ig(r))return!1;return!0}return!1})(n)}function Tg(n){if(xe(n instanceof it||n instanceof wt,34018),n instanceof it)return n;if(n.filters.length===1)return Tg(n.filters[0]);const e=n.filters.map((r=>Tg(r)));let t=wt.create(e,n.op);return t=Yh(t),VR(t)?t:(xe(t instanceof wt,64498),xe(Ol(t),40251),xe(t.filters.length>1,57927),t.filters.reduce(((r,s)=>Ty(r,s))))}function Ty(n,e){let t;return xe(n instanceof it||n instanceof wt,38388),xe(e instanceof it||e instanceof wt,25473),t=n instanceof it?e instanceof it?(function(s,a){return wt.create([s,a],"and")})(n,e):kI(n,e):e instanceof it?kI(e,n):(function(s,a){if(xe(s.filters.length>0&&a.filters.length>0,48005),Ol(s)&&Ol(a))return XS(s,a.getFilters());const l=hg(s)?s:a,c=hg(s)?a:s,f=l.filters.map((p=>Ty(p,c)));return wt.create(f,"or")})(n,e),Yh(t)}function kI(n,e){if(Ol(e))return XS(e,n.getFilters());{const t=e.filters.map((r=>Ty(n,r)));return wt.create(t,"or")}}function Yh(n){if(xe(n instanceof it||n instanceof wt,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return Yh(e[0]);if(YS(n))return n;const t=e.map((s=>Yh(s))),r=[];return t.forEach((s=>{s instanceof it?r.push(s):s instanceof wt&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:wt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.Sn=new Sy}addToCollectionParentIndex(e,t){return this.Sn.add(t),z.resolve()}getCollectionParents(e,t){return z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return z.resolve()}deleteFieldIndex(e,t){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,t){return z.resolve()}getDocumentsMatchingTarget(e,t){return z.resolve(null)}getIndexType(e,t){return z.resolve(0)}getFieldIndexes(e,t){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,t){return z.resolve(Fr.min())}getMinOffsetFromCollectionGroup(e,t){return z.resolve(Fr.min())}updateCollectionGroup(e,t,r){return z.resolve()}updateIndexEntries(e,t){return z.resolve()}}class Sy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Et(ht.comparator),a=!s.has(r);return this.index[t]=s.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Et(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="IndexedDbIndexManager",ah=new Uint8Array(0);class d2{constructor(e,t){this.databaseId=t,this.Dn=new Sy,this.Cn=new Ss((r=>ua(r)),((r,s)=>Hc(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const a={collectionId:r,parent:Kn(s)};return DI(e).put(a)}return z.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[IS(t),""],!1,!0);return DI(e).H(s).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(zi(l.parent))}return r}))}addFieldIndex(e,t){const r=Nu(e),s=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((f=>[f.fieldPath.canonicalString(),f.kind]))}})(t);delete s.indexId;const a=r.add(s);if(t.indexState){const l=ol(e);return a.next((c=>{l.put(TI(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Nu(e),s=ol(e),a=sl(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Nu(e),r=sl(e),s=ol(e);return t.X().next((()=>r.X())).next((()=>s.X()))}createTargetIndexes(e,t){return z.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const a=new bI(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=sl(e);let s=!0;const a=new Map;return z.forEach(this.vn(t),(l=>this.Fn(e,l).next((c=>{s&&(s=!!c),a.set(l,c)})))).next((()=>{if(s){let l=Xe();const c=[];return z.forEach(a,((f,p)=>{le(xI,`Using index ${(function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(f)} to execute ${ua(t)}`);const v=(function(Z,ae){const se=sg(ae);if(se===void 0)return null;for(const fe of Gh(Z,se.fieldPath))switch(fe.op){case"array-contains-any":return fe.value.arrayValue.values||[];case"array-contains":return[fe.value]}return null})(p,f),g=(function(Z,ae){const se=new Map;for(const fe of Ko(ae))for(const T of Gh(Z,fe.fieldPath))switch(T.op){case"==":case"in":se.set(fe.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return se.set(fe.fieldPath.canonicalString(),T.value),Array.from(se.values())}return null})(p,f),E=(function(Z,ae){const se=[];let fe=!0;for(const T of Ko(ae)){const S=T.kind===0?uI(Z,T.fieldPath,Z.startAt):cI(Z,T.fieldPath,Z.startAt);se.push(S.value),fe&&(fe=S.inclusive)}return new Nl(se,fe)})(p,f),R=(function(Z,ae){const se=[];let fe=!0;for(const T of Ko(ae)){const S=T.kind===0?cI(Z,T.fieldPath,Z.endAt):uI(Z,T.fieldPath,Z.endAt);se.push(S.value),fe&&(fe=S.inclusive)}return new Nl(se,fe)})(p,f),V=this.Mn(f,p,E),U=this.Mn(f,p,R),O=this.xn(f,p,g),J=this.On(f.indexId,v,V,E.inclusive,U,R.inclusive,O);return z.forEach(J,(G=>r.Z(G,t.limit).next((Z=>{Z.forEach((ae=>{const se=_e.fromSegments(ae.documentKey);l.has(se)||(l=l.add(se),c.push(se))}))}))))})).next((()=>c))}return z.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=u2(wt.create(e.filters,"and")).map((r=>pg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,s,a,l,c){const f=(t!=null?t.length:1)*Math.max(r.length,a.length),p=f/(t!=null?t.length:1),v=[];for(let g=0;g<f;++g){const E=t?this.Nn(t[g/p]):ah,R=this.Bn(e,E,r[g%p],s),V=this.Ln(e,E,a[g%p],l),U=c.map((O=>this.Bn(e,E,O,!0)));v.push(...this.createRange(R,V,U))}return v}Bn(e,t,r,s){const a=new Xo(e,_e.empty(),t,r);return s?a:a.En()}Ln(e,t,r,s){const a=new Xo(e,_e.empty(),t,r);return s?a.En():a}Fn(e,t){const r=new bI(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((a=>{let l=null;for(const c of a)r.gn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let r=2;const s=this.vn(t);return z.forEach(s,(a=>this.Fn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(f){let p=new Et(zt.comparator),v=!1;for(const g of f.filters)for(const E of g.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?v=!0:p=p.add(E.field));for(const g of f.orderBy)g.field.isKeyField()||(p=p.add(g.field));return p.size+(v?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&s.length>1&&r===2?1:r))}kn(e,t){const r=new Du;for(const s of Ko(e)){const a=t.data.field(s.fieldPath);if(a==null)return null;const l=r.ln(s.kind);Jo.Wt.Dt(a,l)}return r.un()}Nn(e){const t=new Du;return Jo.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Du;return Jo.Wt.Dt(Ec(this.databaseId,t),r.ln((function(a){const l=Ko(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let s=[];s.push(new Du);let a=0;for(const l of Ko(e)){const c=r[a++];for(const f of s)if(this.qn(t,l.fieldPath)&&Ic(c))s=this.Un(s,l,c);else{const p=f.ln(l.kind);Jo.Wt.Dt(c,p)}}return this.$n(s)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const s=[...e],a=[];for(const l of r.arrayValue.values||[])for(const c of s){const f=new Du;f.seed(c.un()),Jo.Wt.Dt(l,f.ln(t.kind)),a.push(f)}return a}qn(e,t){return!!e.filters.find((r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Nu(e),s=ol(e);return(t?r.H(ag,IDBKeyRange.bound(t,t)):r.H()).next((a=>{const l=[];return z.forEach(a,(c=>s.get([c.indexId,this.uid]).next((f=>{l.push((function(v,g){const E=g?new pc(g.sequenceNumber,new Fr(da(g.readTime),new _e(zi(g.documentKey)),g.largestBatchId)):pc.empty(),R=v.fields.map((([V,U])=>new Th(zt.fromServerFormat(V),U)));return new jh(v.indexId,v.collectionGroup,R,E)})(c,f))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const a=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return a!==0?a:Qe(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Nu(e),a=ol(e);return this.Wn(e).next((l=>s.H(ag,IDBKeyRange.bound(t,t)).next((c=>z.forEach(c,(f=>a.put(TI(f.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return z.forEach(t,((s,a)=>{const l=r.get(s.collectionGroup);return(l?z.resolve(l):this.getFieldIndexes(e,s.collectionGroup)).next((c=>(r.set(s.collectionGroup,c),z.forEach(c,(f=>this.Qn(e,s,f).next((p=>{const v=this.Gn(a,f);return p.isEqual(v)?z.resolve():this.zn(e,a,f,p,v)})))))))}))}jn(e,t,r,s){return sl(e).put(s.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,s){return sl(e).delete(s.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const s=sl(e);let a=new Et(Ks);return s.ee({index:NS,range:IDBKeyRange.only([r.indexId,this.uid,xh(this.Kn(r,t))])},((l,c)=>{a=a.add(new Xo(r.indexId,t,CI(c.arrayValue),CI(c.directionalValue)))})).next((()=>a))}Gn(e,t){let r=new Et(Ks);const s=this.kn(t,e);if(s==null)return r;const a=sg(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Ic(l))for(const c of l.arrayValue.values||[])r=r.add(new Xo(t.indexId,e.key,this.Nn(c),s))}else r=r.add(new Xo(t.indexId,e.key,ah,s));return r}zn(e,t,r,s,a){le(xI,"Updating index entries for document '%s'",t.key);const l=[];return(function(f,p,v,g,E){const R=f.getIterator(),V=p.getIterator();let U=rl(R),O=rl(V);for(;U||O;){let J=!1,G=!1;if(U&&O){const Z=v(U,O);Z<0?G=!0:Z>0&&(J=!0)}else U!=null?G=!0:J=!0;J?(g(O),O=rl(V)):G?(E(U),U=rl(R)):(U=rl(R),O=rl(V))}})(s,a,Ks,(c=>{l.push(this.jn(e,t,r,c))}),(c=>{l.push(this.Hn(e,t,r,c))})),z.waitFor(l)}Wn(e){let t=1;return ol(e).ee({index:DS,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,a)=>{a.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,c)=>Ks(l,c))).filter(((l,c,f)=>!c||Ks(l,f[c-1])!==0));const s=[];s.push(e);for(const l of r){const c=Ks(l,e),f=Ks(l,t);if(c===0)s[0]=e.En();else if(c>0&&f<0)s.push(l),s.push(l.En());else if(f>0)break}s.push(t);const a=[];for(let l=0;l<s.length;l+=2){if(this.Jn(s[l],s[l+1]))return[];const c=s[l].An(this.uid,ah,_e.empty()),f=s[l+1].An(this.uid,ah,_e.empty());a.push(IDBKeyRange.bound(c,f))}return a}Jn(e,t){return Ks(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NI)}getMinOffset(e,t){return z.mapArray(this.vn(t),(r=>this.Fn(e,r).next((s=>s||Ae(44426))))).next(NI)}}function DI(n){return hn(n,_c)}function sl(n){return hn(n,ec)}function Nu(n){return hn(n,uy)}function ol(n){return hn(n,Zu)}function NI(n){xe(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;oy(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Fr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LR=41943040;class qn{static withCacheSize(e){return new qn(e,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MR(n,e,t){const r=n.store(pi),s=n.store(Pl),a=[],l=IDBKeyRange.only(t.batchId);let c=0;const f=r.ee({range:l},((v,g,E)=>(c++,E.delete())));a.push(f.next((()=>{xe(c===1,47070,{batchId:t.batchId})})));const p=[];for(const v of t.mutations){const g=bS(e,v.key.path,t.batchId);a.push(s.delete(g)),p.push(v.key)}return z.waitFor(a).next((()=>p))}function Jh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ae(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(LR,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);class xf{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Zn={}}static wt(e,t,r,s){xe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new xf(a,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).ee({index:ta,range:r},((s,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const a=fl(e),l=Gs(e);return l.add({}).next((c=>{xe(typeof c=="number",49019);const f=new _y(c,t,r,s),p=(function(R,V,U){const O=U.baseMutations.map((G=>Pc(R.yt,G))),J=U.mutations.map((G=>Pc(R.yt,G)));return{userId:V,batchId:U.batchId,localWriteTimeMs:U.localWriteTime.toMillis(),baseMutations:O,mutations:J}})(this.serializer,this.userId,f),v=[];let g=new Et(((E,R)=>Qe(E.canonicalString(),R.canonicalString())));for(const E of s){const R=bS(this.userId,E.key.path,c);g=g.add(E.key.path.popLast()),v.push(l.put(p)),v.push(a.put(R,LO))}return g.forEach((E=>{v.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[c]=f.keys()})),z.waitFor(v).next((()=>f))}))}lookupMutationBatch(e,t){return Gs(e).get(t).next((r=>r?(xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Yo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?z.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Zn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Gs(e).ee({index:ta,range:s},((l,c,f)=>{c.userId===this.userId&&(xe(c.batchId>=r,47524,{Yn:r}),a=Yo(this.serializer,c)),f.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ra;return Gs(e).ee({index:ta,range:t,reverse:!0},((s,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ra],[this.userId,Number.POSITIVE_INFINITY]);return Gs(e).H(ta,t).next((r=>r.map((s=>Yo(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Sh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),a=[];return fl(e).ee({range:s},((l,c,f)=>{const[p,v,g]=l,E=zi(v);if(p===this.userId&&t.path.isEqual(E))return Gs(e).get(g).next((R=>{if(!R)throw Ae(61480,{er:l,batchId:g});xe(R.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:R.userId,batchId:g}),a.push(Yo(this.serializer,R))}));f.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Et(Qe);const s=[];return t.forEach((a=>{const l=Sh(this.userId,a.path),c=IDBKeyRange.lowerBound(l),f=fl(e).ee({range:c},((p,v,g)=>{const[E,R,V]=p,U=zi(R);E===this.userId&&a.path.isEqual(U)?r=r.add(V):g.done()}));s.push(f)})),z.waitFor(s).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,a=Sh(this.userId,r),l=IDBKeyRange.lowerBound(a);let c=new Et(Qe);return fl(e).ee({range:l},((f,p,v)=>{const[g,E,R]=f,V=zi(E);g===this.userId&&r.isPrefixOf(V)?V.length===s&&(c=c.add(R)):v.done()})).next((()=>this.tr(e,c)))}tr(e,t){const r=[],s=[];return t.forEach((a=>{s.push(Gs(e).get(a).next((l=>{if(l===null)throw Ae(35274,{batchId:a});xe(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(Yo(this.serializer,l))})))})),z.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return MR(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),z.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return z.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),s=[];return fl(e).ee({range:r},((a,l,c)=>{if(a[0]===this.userId){const f=zi(a[1]);s.push(f)}else c.done()})).next((()=>{xe(s.length===0,56720,{rr:s.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return FR(e,this.userId,t)}ir(e){return UR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ra,lastStreamToken:""}))}}function FR(n,e,t){const r=Sh(e,t.path),s=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return fl(n).ee({range:a,Y:!0},((c,f,p)=>{const[v,g,E]=c;v===e&&g===s&&(l=!0),p.done()})).next((()=>l))}function Gs(n){return hn(n,pi)}function fl(n){return hn(n,Pl)}function UR(n){return hn(n,gc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ha(0)}static ar(){return new ha(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new ha(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Le.fromTimestamp(new vt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.cr(e,s))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>al(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(xe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let s=0;const a=[];return al(e).ee(((l,c)=>{const f=qu(c);f.sequenceNumber<=t&&r.get(f.targetId)===null&&(s++,a.push(this.removeTargetData(e,f)))})).next((()=>z.waitFor(a))).next((()=>s))}forEachTarget(e,t){return al(e).ee(((r,s)=>{const a=qu(s);t(a)}))}ur(e){return VI(e).get(qh).next((t=>(xe(t!==null,2888),t)))}cr(e,t){return VI(e).put(qh,t)}lr(e,t){return al(e).put(DR(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=ua(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return al(e).ee({range:s,index:xS},((l,c,f)=>{const p=qu(c);Hc(t,p.target)&&(a=p,f.done())})).next((()=>a))}addMatchingKeys(e,t,r){const s=[],a=to(e);return t.forEach((l=>{const c=Kn(l.path);s.push(a.put({targetId:r,path:c})),s.push(this.referenceDelegate.addReference(e,r,l))})),z.waitFor(s)}removeMatchingKeys(e,t,r){const s=to(e);return z.forEach(t,(a=>{const l=Kn(a.path);return z.waitFor([s.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=to(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=to(e);let a=Xe();return s.ee({range:r,Y:!0},((l,c,f)=>{const p=zi(l[1]),v=new _e(p);a=a.add(v)})).next((()=>a))}containsKey(e,t){const r=Kn(t.path),s=IDBKeyRange.bound([r],[IS(r)],!1,!0);let a=0;return to(e).ee({index:ly,Y:!0,range:s},(([l,c],f,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,t){return al(e).get(t).next((r=>r?qu(r):null))}}function al(n){return hn(n,Cl)}function VI(n){return hn(n,ia)}function to(n){return hn(n,bl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="LruGarbageCollector",f2=1048576;function MI([n,e],[t,r]){const s=Qe(n,t);return s===0?Qe(e,r):s}class p2{constructor(e){this.Pr=e,this.buffer=new Et(MI),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();MI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class BR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){le(LI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){To(t)?le(LI,"Ignoring IndexedDB error during garbage collection: ",t):await Ia(t)}await this.Ar(3e5)}))}}class m2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return z.resolve(Qr.ce);const r=new p2(t);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),z.resolve(OI)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OI):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,s,a,l,c,f,p;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,l=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(p=Date.now(),ul()<=rt.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${s} in `+(c-l)+`ms
	Removed ${a} targets in `+(f-c)+`ms
	Removed ${g} documents in `+(p-f)+`ms
Total Duration: ${p-v}ms`),z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:g}))))}}function zR(n,e){return new m2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t){this.db=e,this.garbageCollector=zR(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,s)=>t(s)))}addReference(e,t,r){return lh(e,r)}removeReference(e,t,r){return lh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lh(e,t)}wr(e,t){return(function(s,a){let l=!1;return UR(s).te((c=>FR(s,c,a).next((f=>(f&&(l=!0),z.resolve(!f)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let a=0;return this.yr(e,((l,c)=>{if(c<=t){const f=this.wr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Le.min()),to(e).delete((function(g){return[0,Kn(g.path)]})(l)))))}));s.push(f)}})).next((()=>z.waitFor(s))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lh(e,t)}yr(e,t){const r=to(e);let s,a=Qr.ce;return r.ee({index:ly},(([l,c],{path:f,sequenceNumber:p})=>{l===0?(a!==Qr.ce&&t(new _e(zi(s)),a),a=p,s=f):a=Qr.ce})).next((()=>{a!==Qr.ce&&t(new _e(zi(s)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lh(n,e){return to(n).put((function(r,s){return{targetId:0,path:Kn(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.changes=new Ss((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?z.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return qo(e).put(r)}removeEntry(e,t,r){return qo(e).delete((function(a,l){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Qh(l),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Vt.newInvalidDocument(t);return qo(e).ee({index:Rh,range:IDBKeyRange.only(Ou(t))},((s,a)=>{r=this.Sr(t,a)})).next((()=>r))}Dr(e,t){let r={size:0,document:Vt.newInvalidDocument(t)};return qo(e).ee({index:Rh,range:IDBKeyRange.only(Ou(t))},((s,a)=>{r={document:this.Sr(t,a),size:Jh(a)}})).next((()=>r))}getEntries(e,t){let r=Nr();return this.Cr(e,t,((s,a)=>{const l=this.Sr(s,a);r=r.insert(s,l)})).next((()=>r))}vr(e,t){let r=Nr(),s=new Lt(_e.comparator);return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c),s=s.insert(a,Jh(l))})).next((()=>({documents:r,Fr:s})))}Cr(e,t,r){if(t.isEmpty())return z.resolve();let s=new Et(BI);t.forEach((f=>s=s.add(f)));const a=IDBKeyRange.bound(Ou(s.first()),Ou(s.last())),l=s.getIterator();let c=l.getNext();return qo(e).ee({index:Rh,range:a},((f,p,v)=>{const g=_e.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&BI(c,g)<0;)r(c,null),c=l.getNext();c&&c.isEqual(g)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?v.j(Ou(c)):v.done()})).next((()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,a){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),Qh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],f=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qo(e).H(IDBKeyRange.bound(c,f,!0)).next((p=>{a==null||a.incrementDocumentReadCount(p.length);let v=Nr();for(const g of p){const E=this.Sr(_e.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);E.isFoundDocument()&&(qc(t,E)||s.has(E.key))&&(v=v.insert(E.key,E))}return v}))}getAllFromCollectionGroup(e,t,r,s){let a=Nr();const l=UI(t,r),c=UI(t,Fr.max());return qo(e).ee({index:kS,range:IDBKeyRange.bound(l,c,!0)},((f,p,v)=>{const g=this.Sr(_e.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(g.key,g),a.size===s&&v.done()})).next((()=>a))}newChangeBuffer(e){return new _2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return FI(e).get(og).next((t=>(xe(!!t,20021),t)))}br(e,t){return FI(e).put(og,t)}Sr(e,t){if(t){const r=n2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return Vt.newInvalidDocument(e)}}function $R(n){return new y2(n)}class _2 extends jR{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Ss((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new Et(((a,l)=>Qe(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const c=this.Or.get(a);if(t.push(this.Mr.removeEntry(e,a,c.readTime)),l.isValidDocument()){const f=EI(this.Mr.serializer,l);s=s.add(a.path.popLast());const p=Jh(f);r+=p-c.size,t.push(this.Mr.addEntry(e,a,f))}else if(r-=c.size,this.trackRemovals){const f=EI(this.Mr.serializer,l.convertToNoDocument(Le.min()));t.push(this.Mr.addEntry(e,a,f))}})),s.forEach((a=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Mr.updateMetadata(e,r)),z.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:s})=>(s.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function FI(n){return hn(n,yc)}function qo(n){return hn(n,Hh)}function Ou(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UI(n,e){const t=e.documentKey.path.toArray();return[n,Qh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function BI(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(s=Qe(t[a],r[a]),s)return s;return s=Qe(t.length,r.length),s||(s=Qe(t[t.length-2],r[r.length-2]),s||Qe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&ic(r.mutation,s,_r.empty(),vt.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Xe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Xe()){const s=ji();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((a=>{let l=$u();return a.forEach(((c,f)=>{l=l.insert(c,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=ji();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Xe())))}populateOverlays(e,t,r){const s=[];return r.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,s){let a=Nr();const l=rc(),c=(function(){return rc()})();return t.forEach(((f,p)=>{const v=r.get(p.key);s.has(p.key)&&(v===void 0||v.mutation instanceof Rs)?a=a.insert(p.key,p):v!==void 0?(l.set(p.key,v.mutation.getFieldMask()),ic(v.mutation,p,v.mutation.getFieldMask(),vt.now())):l.set(p.key,_r.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((p,v)=>l.set(p,v))),t.forEach(((p,v)=>c.set(p,new v2(v,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=rc();let s=new Lt(((l,c)=>l-c)),a=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((f=>{const p=t.get(f);if(p===null)return;let v=r.get(f)||_r.empty();v=c.applyToLocalView(p,v),r.set(f,v);const g=(s.get(c.batchId)||Xe()).add(f);s=s.insert(c.batchId,g)}))})).next((()=>{const l=[],c=s.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),p=f.key,v=f.value,g=aR();v.forEach((E=>{if(!a.has(E)){const R=fR(t.get(E),r.get(E));R!==null&&g.set(E,R),a=a.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,g))}return z.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return wV(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((a=>{const l=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-a.size):z.resolve(ji());let c=fc,f=a;return l.next((p=>z.forEach(p,((v,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(v)?z.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{f=f.insert(v,E)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,f,p,Xe()))).next((v=>({batchId:c,changes:oR(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let s=$u();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const a=t.collectionGroup;let l=$u();return this.indexManager.getCollectionParents(e,a).next((c=>z.forEach(c,(f=>{const p=(function(g,E){return new jl(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((v=>{v.forEach(((g,E)=>{l=l.insert(g,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,s)))).next((l=>{a.forEach(((f,p)=>{const v=p.getKey();l.get(v)===null&&(l=l.insert(v,Vt.newInvalidDocument(v)))}));let c=$u();return l.forEach(((f,p)=>{const v=a.get(f);v!==void 0&&ic(v.mutation,p,_r.empty(),vt.now()),qc(t,p)&&(c=c.insert(f,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}})(t)),z.resolve()}getNamedQuery(e,t){return z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:NR(s.bundledQuery),readTime:En(s.readTime)}})(t)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.overlays=new Lt(_e.comparator),this.Lr=new Map}getOverlay(e,t){return z.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ji();return z.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&r.set(s,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,a)=>{this.bt(e,t,a)})),z.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),z.resolve()}getOverlaysForCollection(e,t,r){const s=ji(),a=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const f=c.getNext().value,p=f.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&s.set(f.getKey(),f)}return z.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let a=new Lt(((p,v)=>p-v));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let v=a.get(p.largestBatchId);v===null&&(v=ji(),a=a.insert(p.largestBatchId,v)),v.set(p.getKey(),p)}}const c=ji(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((p,v)=>c.set(p,v))),!(c.size()>=s)););return z.resolve(c)}bt(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const l=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new wy(t,r));let a=this.Lr.get(t);a===void 0&&(a=Xe(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.sessionToken=ln.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(){this.kr=new Et(wn.Kr),this.qr=new Et(wn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new wn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new wn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new ht([])),r=new wn(t,e),s=new wn(t,e+1),a=[];return this.qr.forEachInRange([r,s],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new ht([])),r=new wn(t,e),s=new wn(t,e+1);let a=Xe();return this.qr.forEachInRange([r,s],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new wn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class wn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Qe(e.Hr,t.Hr)}static Ur(e,t){return Qe(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Et(wn.Kr)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new _y(a,t,r,s);this.mutationQueue.push(l);for(const c of s)this.Jr=this.Jr.add(new wn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return z.resolve(l)}lookupMutationBatch(e,t){return z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Xr(r),a=s<0?0:s;return z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?ra:this.Yn-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new wn(t,0),s=new wn(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,s],(l=>{const c=this.Zr(l.Hr);a.push(c)})),z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Et(Qe);return t.forEach((s=>{const a=new wn(s,0),l=new wn(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(c=>{r=r.add(c.Hr)}))})),z.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const l=new wn(new _e(a),0);let c=new Et(Qe);return this.Jr.forEachWhile((f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(c=c.add(f.Hr)),!0)}),l),z.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){xe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return z.forEach(t.mutations,(s=>{const a=new wn(s.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new wn(t,0),s=this.Jr.firstAfterOrEqual(r);return z.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.ti=e,this.docs=(function(){return new Lt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),a=s?s.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return z.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let r=Nr();return t.forEach((s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Vt.newInvalidDocument(s))})),z.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let a=Nr();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:p,value:{document:v}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||oy(RS(v),r)<=0||(s.has(v.key)||qc(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return z.resolve(a)}getAllFromCollectionGroup(e,t,r,s){Ae(9500)}ni(e,t){return z.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new R2(this)}getSize(e){return z.resolve(this.size)}}class R2 extends jR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)})),z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.persistence=e,this.ri=new Ss((t=>ua(t)),Hc),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new Ry,this.targetCount=0,this.oi=ha._r()}forEachTarget(e,t){return this.ri.forEach(((r,s)=>t(s))),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ha(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,z.resolve()}updateTargetData(e,t){return this.lr(t),z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,t,r){let s=0;const a=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)})),z.waitFor(a).next((()=>s))}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return z.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),z.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((l=>{a.push(s.markPotentiallyOrphaned(e,l))})),z.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),z.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return z.resolve(r)}containsKey(e,t){return z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(e,t){this._i={},this.overlays={},this.ai=new Qr(0),this.ui=!1,this.ui=!0,this.ci=new I2,this.referenceDelegate=e(this),this.li=new A2(this),this.indexManager=new c2,this.remoteDocumentCache=(function(s){return new S2(s)})((r=>this.referenceDelegate.hi(r))),this.serializer=new xR(t),this.Pi=new w2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new E2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new T2(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const s=new P2(this.ai.next());return this.referenceDelegate.Ti(),r(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return z.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class P2 extends PS{constructor(e){super(),this.currentSequenceNumber=e}}class Df{constructor(e){this.persistence=e,this.Ri=new Ry,this.Ai=null}static Vi(e){return new Df(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),z.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.di,(r=>{const s=_e.fromPath(r);return this.mi(e,s).next((a=>{a||t.removeEntry(s,Le.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return z.or([()=>z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Xh{constructor(e,t){this.persistence=e,this.fi=new Ss((r=>Kn(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=zR(this,t)}static Vi(e,t){return new Xh(e,t)}Ti(){}Ii(e){return z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return z.forEach(this.fi,((r,s)=>this.wr(e,r,s).next((a=>a?z.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(r++,a.removeEntry(l,Le.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ph(e.data.value)),t}wr(e,t,r){return z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return z.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.serializer=e}k(e,t,r,s){const a=new _f("createOrUpgrade",t);r<1&&s>=1&&((function(f){f.createObjectStore($c)})(e),(function(f){f.createObjectStore(gc,{keyPath:VO}),f.createObjectStore(pi,{keyPath:JE,autoIncrement:!0}).createIndex(ta,XE,{unique:!0}),f.createObjectStore(Pl)})(e),zI(e),(function(f){f.createObjectStore(Go)})(e));let l=z.resolve();return r<3&&s>=3&&(r!==0&&((function(f){f.deleteObjectStore(bl),f.deleteObjectStore(Cl),f.deleteObjectStore(ia)})(e),zI(e)),l=l.next((()=>(function(f){const p=f.store(ia),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return p.put(qh,v)})(a)))),r<4&&s>=4&&(r!==0&&(l=l.next((()=>(function(f,p){return p.store(pi).H().next((g=>{f.deleteObjectStore(pi),f.createObjectStore(pi,{keyPath:JE,autoIncrement:!0}).createIndex(ta,XE,{unique:!0});const E=p.store(pi),R=g.map((V=>E.put(V)));return z.waitFor(R)}))})(e,a)))),l=l.next((()=>{(function(f){f.createObjectStore(kl,{keyPath:HO})})(e)}))),r<5&&s>=5&&(l=l.next((()=>this.gi(a)))),r<6&&s>=6&&(l=l.next((()=>((function(f){f.createObjectStore(yc)})(e),this.pi(a))))),r<7&&s>=7&&(l=l.next((()=>this.yi(a)))),r<8&&s>=8&&(l=l.next((()=>this.wi(e,a)))),r<9&&s>=9&&(l=l.next((()=>{(function(f){f.objectStoreNames.contains("remoteDocumentChanges")&&f.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(l=l.next((()=>this.bi(a)))),r<11&&s>=11&&(l=l.next((()=>{(function(f){f.createObjectStore(vf,{keyPath:qO})})(e),(function(f){f.createObjectStore(wf,{keyPath:WO})})(e)}))),r<12&&s>=12&&(l=l.next((()=>{(function(f){const p=f.createObjectStore(Ef,{keyPath:ZO});p.createIndex(lg,eV,{unique:!1}),p.createIndex(OS,tV,{unique:!1})})(e)}))),r<13&&s>=13&&(l=l.next((()=>(function(f){const p=f.createObjectStore(Hh,{keyPath:MO});p.createIndex(Rh,FO),p.createIndex(kS,UO)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Go)))),r<14&&s>=14&&(l=l.next((()=>this.Di(e,a)))),r<15&&s>=15&&(l=l.next((()=>(function(f){f.createObjectStore(uy,{keyPath:KO,autoIncrement:!0}).createIndex(ag,GO,{unique:!1}),f.createObjectStore(Zu,{keyPath:QO}).createIndex(DS,YO,{unique:!1}),f.createObjectStore(ec,{keyPath:JO}).createIndex(NS,XO,{unique:!1})})(e)))),r<16&&s>=16&&(l=l.next((()=>{t.objectStore(Zu).clear()})).next((()=>{t.objectStore(ec).clear()}))),r<17&&s>=17&&(l=l.next((()=>{(function(f){f.createObjectStore(cy,{keyPath:nV})})(e)}))),r<18&&s>=18&&A0()&&(l=l.next((()=>{t.objectStore(Zu).clear()})).next((()=>{t.objectStore(ec).clear()}))),l}pi(e){let t=0;return e.store(Go).ee(((r,s)=>{t+=Jh(s)})).next((()=>{const r={byteSize:t};return e.store(yc).put(og,r)}))}gi(e){const t=e.store(gc),r=e.store(pi);return t.H().next((s=>z.forEach(s,(a=>{const l=IDBKeyRange.bound([a.userId,ra],[a.userId,a.lastAcknowledgedBatchId]);return r.H(ta,l).next((c=>z.forEach(c,(f=>{xe(f.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:f.batchId});const p=Yo(this.serializer,f);return MR(e,a.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(bl),r=e.store(Go);return e.store(ia).get(qh).next((s=>{const a=[];return r.ee(((l,c)=>{const f=new ht(l),p=(function(g){return[0,Kn(g)]})(f);a.push(t.get(p).next((v=>v?z.resolve():(g=>t.put({targetId:0,path:Kn(g),sequenceNumber:s.highestListenSequenceNumber}))(f))))})).next((()=>z.waitFor(a)))}))}wi(e,t){e.createObjectStore(_c,{keyPath:$O});const r=t.store(_c),s=new Sy,a=l=>{if(s.add(l)){const c=l.lastSegment(),f=l.popLast();return r.put({collectionId:c,parent:Kn(f)})}};return t.store(Go).ee({Y:!0},((l,c)=>{const f=new ht(l);return a(f.popLast())})).next((()=>t.store(Pl).ee({Y:!0},(([l,c,f],p)=>{const v=zi(c);return a(v.popLast())}))))}bi(e){const t=e.store(Cl);return t.ee(((r,s)=>{const a=qu(s),l=DR(this.serializer,a);return t.put(l)}))}Si(e,t){const r=t.store(Go),s=[];return r.ee(((a,l)=>{const c=t.store(Hh),f=(function(g){return g.document?new _e(ht.fromString(g.document.name).popFirst(5)):g.noDocument?_e.fromSegments(g.noDocument.path):g.unknownDocument?_e.fromSegments(g.unknownDocument.path):Ae(36783)})(l).path.toArray(),p={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};s.push(c.put(p))})).next((()=>z.waitFor(s)))}Di(e,t){const r=t.store(pi),s=$R(this.serializer),a=new Ay(Df.Vi,this.serializer.yt);return r.H().next((l=>{const c=new Map;return l.forEach((f=>{let p=c.get(f.userId)??Xe();Yo(this.serializer,f).keys().forEach((v=>p=p.add(v))),c.set(f.userId,p)})),z.forEach(c,((f,p)=>{const v=new Dn(p),g=kf.wt(this.serializer,v),E=a.getIndexManager(v),R=xf.wt(v,this.serializer,E,a.referenceDelegate);return new HR(s,R,g,E).recalculateAndSaveOverlaysForDocumentKeys(new ug(t,Qr.ce),f).next()}))}))}}function zI(n){n.createObjectStore(bl,{keyPath:zO}).createIndex(ly,jO,{unique:!0}),n.createObjectStore(Cl,{keyPath:"targetId"}).createIndex(xS,BO,{unique:!0}),n.createObjectStore(ia)}const Qs="IndexedDbPersistence",xm=18e5,Dm=5e3,Nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",b2="main";class Py{constructor(e,t,r,s,a,l,c,f,p,v,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=a,this.window=l,this.document=c,this.Fi=p,this.Mi=v,this.xi=g,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!Py.v())throw new de(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new g2(this,s),this.Ki=t+b2,this.serializer=new xR(f),this.qi=new ao(this.Ki,this.xi,new C2(this.serializer)),this.ci=new i2,this.li=new h2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$R(this.serializer),this.Pi=new r2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,v===!1&&rr(Qs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(X.FAILED_PRECONDITION,Nm);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new Qr(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(To(e))return le(Qs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(Qs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Vu(e).get(nl).next((t=>z.resolve(this.Xi(t))))}Yi(e){return uh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,xm)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=hn(t,kl);return r.H().next((s=>{const a=this.ns(s,xm),l=s.filter((c=>a.indexOf(c)===-1));return z.forEach(l,(c=>r.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?z.resolve(!0):Vu(e).get(nl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Dm)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new de(X.FAILED_PRECONDITION,Nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||uh(e).H().next((r=>this.ns(r,Dm).find((s=>{if(this.clientId!==s.clientId){const a=!this.networkEnabled&&s.networkEnabled,l=!this.inForeground&&s.inForeground,c=this.networkEnabled===s.networkEnabled;if(a||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(Qs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[$c,kl],(e=>{const t=new ug(e,Qr.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>uh(e).H().next((t=>this.ns(t,xm).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return xf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return kf.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){le(Qs,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",a=(function(f){return f===18?sV:f===17?FS:f===16?iV:f===15?dy:f===14?MS:f===13?LS:f===12?rV:f===11?VS:void Ae(60245)})(this.xi);let l;return this.qi.runTransaction(e,s,a,(c=>(l=new ug(c,this.ai?this.ai.next():Qr.ce),t==="readwrite-primary"?this.ji(l).next((f=>!!f||this.Hi(l))).next((f=>{if(!f)throw rr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new de(X.FAILED_PRECONDITION,AS);return r(l)})).next((f=>this.Zi(l).next((()=>f)))):this.Ps(l).next((()=>r(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Ps(e){return Vu(e).get(nl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Dm)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(X.FAILED_PRECONDITION,Nm)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put(nl,t)}static v(){return ao.v()}Ji(e){const t=Vu(e);return t.get(nl).next((r=>this.Xi(r)?(le(Qs,"Releasing primary lease."),t.delete(nl)):z.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(rr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;R0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return le(Qs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return rr(Qs,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){rr("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vu(n){return hn(n,$c)}function uh(n){return hn(n,kl)}function k2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=s}static Es(e,t){let r=Xe(),s=Xe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Cy(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return R0()?8:CS(dn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,s,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new x2;return this.ys(e,t,l).next((c=>{if(a.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>a.result))}ws(e,t,r,s){return r.documentReadCount<this.Vs?(ul()<=rt.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",cl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),z.resolve()):(ul()<=rt.DEBUG&&le("QueryEngine","Query:",cl(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(ul()<=rt.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",cl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yr(t))):z.resolve())}gs(e,t){if(dI(t))return z.resolve(null);let r=Yr(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=gg(t,null,"F"),r=Yr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Xe(...a);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((f=>{const p=this.bs(t,c);return this.Ss(t,p,l,f.readTime)?this.gs(e,gg(t,null,"F")):this.Ds(e,p,t,f)}))))})))))}ps(e,t,r,s){return dI(t)||s.isEqual(Le.min())?z.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,s)?z.resolve(null):(ul()<=rt.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),cl(t)),this.Ds(e,l,t,CO(s,fc)).next((c=>c)))}))}bs(e,t){let r=new Et(iR(e));return t.forEach(((s,a)=>{qc(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,r){return ul()<=rt.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",cl(t)),this.fs.getDocumentsMatchingQuery(e,t,Fr.min(),r)}Ds(e,t,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="LocalStore",D2=3e8;class N2{constructor(e,t,r,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new Lt(Qe),this.Fs=new Ss((a=>ua(a)),Hc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function WR(n,e,t,r){return new N2(n,e,t,r)}async function KR(n,e){const t=We(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],c=[];let f=Xe();for(const p of s){l.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}for(const p of a){c.push(p.batchId);for(const v of p.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function O2(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,f,p,v){const g=p.batch,E=g.keys();let R=z.resolve();return E.forEach((V=>{R=R.next((()=>v.getEntry(f,V))).next((U=>{const O=p.docVersions.get(V);xe(O!==null,48541),U.version.compareTo(O)<0&&(g.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),v.addEntry(U)))}))})),R.next((()=>c.mutationQueue.removeMutationBatch(f,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let f=Xe();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(f=f.add(c.batch.mutations[p].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function GR(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function V2(n,e){const t=We(n),r=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const c=[];e.targetChanges.forEach(((v,g)=>{const E=s.get(g);if(!E)return;c.push(t.li.removeMatchingKeys(a,v.removedDocuments,g).next((()=>t.li.addMatchingKeys(a,v.addedDocuments,g))));let R=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?R=R.withResumeToken(ln.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,r)),s=s.insert(g,R),(function(U,O,J){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=D2?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(E,R,v)&&c.push(t.li.updateTargetData(a,R))}));let f=Nr(),p=Xe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),c.push(L2(a,l,e.documentUpdates).next((v=>{f=v.Bs,p=v.Ls}))),!r.isEqual(Le.min())){const v=t.li.getLastRemoteSnapshotVersion(a).next((g=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(v)}return z.waitFor(c).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,p))).next((()=>f))})).then((a=>(t.vs=s,a)))}function L2(n,e,t){let r=Xe(),s=Xe();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Nr();return t.forEach(((c,f)=>{const p=a.get(c);f.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(c)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(c,f.readTime),l=l.insert(c,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(c,f)):le(by,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",f.version)})),{Bs:l,Ls:s}}))}function M2(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ra),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function F2(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.li.getTargetData(r,e).next((a=>a?(s=a,z.resolve(s)):t.li.allocateTargetId(r).next((l=>(s=new gs(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Sg(n,e,t){const r=We(n),s=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!To(l))throw l;le(by,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function jI(n,e,t){const r=We(n);let s=Le.min(),a=Xe();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,p,v){const g=We(f),E=g.Fs.get(v);return E!==void 0?z.resolve(g.vs.get(E)):g.li.getTargetData(p,v)})(r,l,Yr(e)).next((c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,c.targetId).next((f=>{a=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?s:Le.min(),t?a:Xe()))).next((c=>(U2(r,TV(e),c),{documents:c,ks:a})))))}function U2(n,e,t){let r=n.Ms.get(e)||Le.min();t.forEach(((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class $I{constructor(){this.activeTargetIds=bV()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class QR{constructor(){this.vo=new $I,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new $I,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="ConnectivityMonitor";class qI{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(HI,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){le(HI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function Rg(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="RestConnection",z2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class j2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Wh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,t,r,s,a){const l=Rg(),c=this.Qo(e,t.toUriEncodedString());le(Om,`Sending RPC '${e}' ${l}:`,c,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,s,a);const{host:p}=new URL(c),v=_o(p);return this.zo(e,c,f,r,v).then((g=>(le(Om,`Received RPC '${e}' ${l}: `,g),g)),(g=>{throw ho(Om,`RPC '${e}' ${l} failed with error: `,g,"url: ",c,"request:",r),g}))}jo(e,t,r,s,a,l){return this.Wo(e,t,r,s,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+zl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),r&&r.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const r=z2[e];let s=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="WebChannelConnection",Lu=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(s){setTimeout((()=>{throw s}),0)}}))};class El extends j2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!El.c_){const e=_S();Lu(e,yS.STAT_EVENT,(t=>{t.stat===rg.PROXY?le($n,"STAT_EVENT: detected buffering proxy"):t.stat===rg.NOPROXY&&le($n,"STAT_EVENT: detected no buffering proxy")})),El.c_=!0}}zo(e,t,r,s,a){const l=Rg();return new Promise(((c,f)=>{const p=new mS;p.setWithCredentials(!0),p.listenOnce(gS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Ih.NO_ERROR:const g=p.getResponseJson();le($n,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),c(g);break;case Ih.TIMEOUT:le($n,`RPC '${e}' ${l} timed out`),f(new de(X.DEADLINE_EXCEEDED,"Request time out"));break;case Ih.HTTP_ERROR:const E=p.getStatus();if(le($n,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let R=p.getResponseJson();Array.isArray(R)&&(R=R[0]);const V=R==null?void 0:R.error;if(V&&V.status&&V.message){const U=(function(J){const G=J.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(G)>=0?G:X.UNKNOWN})(V.status);f(new de(U,V.message))}else f(new de(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new de(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{le($n,`RPC '${e}' ${l} completed.`)}}));const v=JSON.stringify(s);le($n,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",v,r,15)}))}T_(e,t,r){const s=Rg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=a.join("");le($n,`Creating RPC '${e}' stream ${s}: ${p}`,c);const v=l.createWebChannel(p,c);this.I_(v);let g=!1,E=!1;const R=new $2({Ho:V=>{E?le($n,`Not sending because RPC '${e}' stream ${s} is closed:`,V):(g||(le($n,`Opening RPC '${e}' stream ${s} transport.`),v.open(),g=!0),le($n,`RPC '${e}' stream ${s} sending:`,V),v.send(V))},Jo:()=>v.close()});return Lu(v,ju.EventType.OPEN,(()=>{E||(le($n,`RPC '${e}' stream ${s} transport opened.`),R.i_())})),Lu(v,ju.EventType.CLOSE,(()=>{E||(E=!0,le($n,`RPC '${e}' stream ${s} transport closed`),R.o_(),this.E_(v))})),Lu(v,ju.EventType.ERROR,(V=>{E||(E=!0,ho($n,`RPC '${e}' stream ${s} transport errored. Name:`,V.name,"Message:",V.message),R.o_(new de(X.UNAVAILABLE,"The operation could not be completed")))})),Lu(v,ju.EventType.MESSAGE,(V=>{var U;if(!E){const O=V.data[0];xe(!!O,16349);const J=O,G=(J==null?void 0:J.error)||((U=J[0])==null?void 0:U.error);if(G){le($n,`RPC '${e}' stream ${s} received error:`,G);const Z=G.status;let ae=(function(T){const S=rn[T];if(S!==void 0)return gR(S)})(Z),se=G.message;Z==="NOT_FOUND"&&se.includes("database")&&se.includes("does not exist")&&se.includes(this.databaseId.database)&&ho(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ae===void 0&&(ae=X.INTERNAL,se="Unknown error status: "+Z+" with message "+G.message),E=!0,R.o_(new de(ae,se)),v.close()}else le($n,`RPC '${e}' stream ${s} received:`,O),R.__(O)}})),El.u_(),setTimeout((()=>{R.s_()}),0),R}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return vS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(n){return new El(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(){return typeof window<"u"?window:null}function Dh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(n){return new qV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */El.c_=!1;class ky{constructor(e,t,r=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="PersistentStream";class YR{constructor(e,t,r,s,a,l,c,f){this.Ci=e,this.b_=r,this.S_=s,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ky(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new de(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(WI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(le(WI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class W2 extends YR{constructor(e,t,r,s,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=QV(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Le.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Le.min():l.readTime?En(l.readTime):Le.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=vg(this.serializer),t.addTarget=(function(a,l){let c;const f=l.target;if(c=Kh(f)?{documents:SR(a,f)}:{query:RR(a,f).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=vR(a,l.resumeToken);const p=yg(a,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Le.min())>0){c.readTime=Ml(a,l.snapshotVersion.toTimestamp());const p=yg(a,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=JV(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=vg(this.serializer),t.removeTarget=e,this.K_(t)}}class K2 extends YR{constructor(e,t,r,s,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=YV(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=vg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Pc(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{}class Q2 extends G2{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,_g(t,r),s,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(X.UNKNOWN,a.toString())}))}jo(e,t,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,_g(t,r),s,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(X.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Y2(n,e,t,r){return new Q2(n,e,t,r)}class J2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(rr(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa="RemoteStore";class X2{constructor(e,t,r,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Ta(this)&&(le(fa,"Restarting streams for network reachability change."),await(async function(f){const p=We(f);p.Ea.add(4),await Kc(p),p.Va.set("Unknown"),p.Ea.delete(4),await Of(p)})(this))}))})),this.Va=new J2(r,s)}}async function Of(n){if(Ta(n))for(const e of n.Ra)await e(!0)}async function Kc(n){for(const e of n.Ra)await e(!1)}function JR(n,e){const t=We(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Oy(t)?Ny(t):Hl(t).O_()&&Dy(t,e))}function xy(n,e){const t=We(n),r=Hl(t);t.Ia.delete(e),r.O_()&&XR(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ta(t)&&t.Va.set("Unknown"))}function Dy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Hl(n).Z_(e)}function XR(n,e){n.da.$e(e),Hl(n).X_(e)}function Ny(n){n.da=new zV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Hl(n).start(),n.Va.ua()}function Oy(n){return Ta(n)&&!Hl(n).x_()&&n.Ia.size>0}function Ta(n){return We(n).Ea.size===0}function ZR(n){n.da=void 0}async function Z2(n){n.Va.set("Online")}async function eL(n){n.Ia.forEach(((e,t)=>{Dy(n,e)}))}async function tL(n,e){ZR(n),Oy(n)?(n.Va.ha(e),Ny(n)):n.Va.set("Unknown")}async function nL(n,e,t){if(n.Va.set("Online"),e instanceof _R&&e.state===2&&e.cause)try{await(async function(s,a){const l=a.cause;for(const c of a.targetIds)s.Ia.has(c)&&(await s.remoteSyncer.rejectListen(c,l),s.Ia.delete(c),s.da.removeTarget(c))})(n,e)}catch(r){le(fa,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zh(n,r)}else if(e instanceof kh?n.da.Xe(e):e instanceof yR?n.da.st(e):n.da.tt(e),!t.isEqual(Le.min()))try{const r=await GR(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const c=a.da.Tt(l);return c.targetChanges.forEach(((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ia.get(p);v&&a.Ia.set(p,v.withResumeToken(f.resumeToken,l))}})),c.targetMismatches.forEach(((f,p)=>{const v=a.Ia.get(f);if(!v)return;a.Ia.set(f,v.withResumeToken(ln.EMPTY_BYTE_STRING,v.snapshotVersion)),XR(a,f);const g=new gs(v.target,f,p,v.sequenceNumber);Dy(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){le(fa,"Failed to raise snapshot:",r),await Zh(n,r)}}async function Zh(n,e,t){if(!To(e))throw e;n.Ea.add(1),await Kc(n),n.Va.set("Offline"),t||(t=()=>GR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(fa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Of(n)}))}function eA(n,e){return e().catch((t=>Zh(n,t,e)))}async function Gc(n){const e=We(n),t=mo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ra;for(;rL(e);)try{const s=await M2(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,iL(e,s)}catch(s){await Zh(e,s)}tA(e)&&nA(e)}function rL(n){return Ta(n)&&n.Ta.length<10}function iL(n,e){n.Ta.push(e);const t=mo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function tA(n){return Ta(n)&&!mo(n).x_()&&n.Ta.length>0}function nA(n){mo(n).start()}async function sL(n){mo(n).ra()}async function oL(n){const e=mo(n);for(const t of n.Ta)e.ea(t.mutations)}async function aL(n,e,t){const r=n.Ta.shift(),s=vy.from(r,e,t);await eA(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Gc(n)}async function lL(n,e){e&&mo(n).Y_&&await(async function(r,s){if((function(l){return mR(l)&&l!==X.ABORTED})(s.code)){const a=r.Ta.shift();mo(r).B_(),await eA(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Gc(r)}})(n,e),tA(n)&&nA(n)}async function KI(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),le(fa,"RemoteStore received new credentials");const r=Ta(t);t.Ea.add(3),await Kc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Of(t)}async function uL(n,e){const t=We(n);e?(t.Ea.delete(2),await Of(t)):e||(t.Ea.add(2),await Kc(t),t.Va.set("Unknown"))}function Hl(n){return n.ma||(n.ma=(function(t,r,s){const a=We(t);return a.sa(),new W2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:Z2.bind(null,n),Yo:eL.bind(null,n),t_:tL.bind(null,n),J_:nL.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Oy(n)?Ny(n):n.Va.set("Unknown")):(await n.ma.stop(),ZR(n))}))),n.ma}function mo(n){return n.fa||(n.fa=(function(t,r,s){const a=We(t);return a.sa(),new K2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:sL.bind(null,n),t_:lL.bind(null,n),ta:oL.bind(null,n),na:aL.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Gc(n)):(await n.fa.stop(),n.Ta.length>0&&(le(fa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,t,r,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,a){const l=Date.now()+r,c=new Vy(e,t,l,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ly(n,e){if(rr("AsyncQueue",`${e}: ${n}`),To(n))return new de(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{static emptySet(e){return new Il(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=$u(),this.sortedSet=new Lt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Il)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Il;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.ga=new Lt(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Fl{constructor(e,t,r,s,a,l,c,f,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,a){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Fl(e,t,Il.emptySet(t),l,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class dL{constructor(){this.queries=QI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=We(t),a=s.queries;s.queries=QI(),a.forEach(((l,c)=>{for(const f of c.ba)f.onError(r)}))})(this,new de(X.ABORTED,"Firestore shutting down"))}}function QI(){return new Ss((n=>rR(n)),Rf)}async function rA(n,e){const t=We(n);let r=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(r=2):(a=new cL,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(l){const c=Ly(l,`Initialization of query '${cl(e.query)}' failed`);return void e.onError(c)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&My(t)}async function iA(n,e){const t=We(n),r=e.query;let s=3;const a=t.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function hL(n,e){const t=We(n);let r=!1;for(const s of e){const a=s.query,l=t.queries.get(a);if(l){for(const c of l.ba)c.Fa(s)&&(r=!0);l.wa=s}}r&&My(t)}function fL(n,e,t){const r=We(n),s=r.queries.get(e);if(s)for(const a of s.ba)a.onError(t);r.queries.delete(e)}function My(n){n.Ca.forEach((e=>{e.next()}))}var Ag,YI;(YI=Ag||(Ag={})).Ma="default",YI.Cache="cache";class sA{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.key=e}}class aA{constructor(e){this.key=e}}class pL{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.eu=iR(e),this.tu=new Il(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new GI,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=s,c=!1;const f=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((v,g)=>{const E=s.get(v),R=qc(this.query,g)?g:null,V=!!E&&this.mutatedKeys.has(E.key),U=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let O=!1;E&&R?E.data.isEqual(R.data)?V!==U&&(r.track({type:3,doc:R}),O=!0):this.su(E,R)||(r.track({type:2,doc:R}),O=!0,(f&&this.eu(R,f)>0||p&&this.eu(R,p)<0)&&(c=!0)):!E&&R?(r.track({type:0,doc:R}),O=!0):E&&!R&&(r.track({type:1,doc:E}),O=!0,(f||p)&&(c=!0)),O&&(R?(l=l.add(R),a=U?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{tu:l,iu:r,Ss:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((v,g)=>(function(R,V){const U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:O})}};return U(R)-U(V)})(v.type,g.type)||this.eu(v.doc,g.doc))),this.ou(r),s=s??!1;const c=t&&!s?this._u():[],f=this.Ya.size===0&&this.current&&!s?1:0,p=f!==this.Xa;return this.Xa=f,l.length!==0||p?{snapshot:new Fl(this.query,e.tu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new GI,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new aA(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new oA(r))})),t}cu(e){this.Za=e.ks,this.Ya=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Fy="SyncEngine";class mL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class gL{constructor(e){this.key=e,this.hu=!1}}class yL{constructor(e,t,r,s,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Ss((c=>rR(c)),Rf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Lt(_e.comparator),this.Au=new Map,this.Vu=new Ry,this.du={},this.mu=new Map,this.fu=ha.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _L(n,e,t=!0){const r=fA(n);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await lA(r,e,t,!0),s}async function vL(n,e){const t=fA(n);await lA(t,e,!0,!1)}async function lA(n,e,t,r){const s=await F2(n.localStore,Yr(e)),a=s.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await wL(n,e,a,l==="current",s.resumeToken)),n.isPrimaryClient&&t&&JR(n.remoteStore,s),c}async function wL(n,e,t,r,s){n.pu=(g,E,R)=>(async function(U,O,J,G){let Z=O.view.ru(J);Z.Ss&&(Z=await jI(U.localStore,O.query,!1).then((({documents:T})=>O.view.ru(T,Z))));const ae=G&&G.targetChanges.get(O.targetId),se=G&&G.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(Z,U.isPrimaryClient,ae,se);return XI(U,O.targetId,fe.au),fe.snapshot})(n,g,E,R);const a=await jI(n.localStore,e,!0),l=new pL(e,a.ks),c=l.ru(a.documents),f=Wc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=l.applyChanges(c,n.isPrimaryClient,f);XI(n,t,p.au);const v=new mL(e,t,l);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function EL(n,e,t){const r=We(n),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter((l=>!Rf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sg(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&xy(r.remoteStore,s.targetId),Pg(r,s.targetId)})).catch(Ia)):(Pg(r,s.targetId),await Sg(r.localStore,s.targetId,!0))}async function IL(n,e){const t=We(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),xy(t.remoteStore,r.targetId))}async function TL(n,e,t){const r=pA(n);try{const s=await(function(l,c){const f=We(l),p=vt.now(),v=c.reduce(((R,V)=>R.add(V.key)),Xe());let g,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let V=Nr(),U=Xe();return f.xs.getEntries(R,v).next((O=>{V=O,V.forEach(((J,G)=>{G.isValidDocument()||(U=U.add(J))}))})).next((()=>f.localDocuments.getOverlayedDocuments(R,V))).next((O=>{g=O;const J=[];for(const G of c){const Z=MV(G,g.get(G.key).overlayedDocument);Z!=null&&J.push(new Rs(G.key,Z,GS(Z.value.mapValue),sn.exists(!0)))}return f.mutationQueue.addMutationBatch(R,p,J,c)})).next((O=>{E=O;const J=O.applyToLocalDocumentSet(g,U);return f.documentOverlayCache.saveOverlays(R,O.batchId,J)}))})).then((()=>({batchId:E.batchId,changes:oR(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(l,c,f){let p=l.du[l.currentUser.toKey()];p||(p=new Lt(Qe)),p=p.insert(c,f),l.du[l.currentUser.toKey()]=p})(r,s.batchId,t),await Qc(r,s.changes),await Gc(r.remoteStore)}catch(s){const a=Ly(s,"Failed to persist write");t.reject(a)}}async function uA(n,e){const t=We(n);try{const r=await V2(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const l=t.Au.get(a);l&&(xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?l.hu=!0:s.modifiedDocuments.size>0?xe(l.hu,14607):s.removedDocuments.size>0&&(xe(l.hu,42227),l.hu=!1))})),await Qc(t,r,e)}catch(r){await Ia(r)}}function JI(n,e,t){const r=We(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&s.push(c.snapshot)})),(function(l,c){const f=We(l);f.onlineState=c;let p=!1;f.queries.forEach(((v,g)=>{for(const E of g.ba)E.va(c)&&(p=!0)})),p&&My(f)})(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SL(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),a=s&&s.key;if(a){let l=new Lt(_e.comparator);l=l.insert(a,Vt.newNoDocument(a,Le.min()));const c=Xe().add(a),f=new bf(Le.min(),new Map,new Lt(Qe),l,c);await uA(r,f),r.Ru=r.Ru.remove(a),r.Au.delete(e),Uy(r)}else await Sg(r.localStore,e,!1).then((()=>Pg(r,e,t))).catch(Ia)}async function RL(n,e){const t=We(n),r=e.batch.batchId;try{const s=await O2(t.localStore,e);dA(t,r,null),cA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Qc(t,s)}catch(s){await Ia(s)}}async function AL(n,e,t){const r=We(n);try{const s=await(function(l,c){const f=We(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let v;return f.mutationQueue.lookupMutationBatch(p,c).next((g=>(xe(g!==null,37113),v=g.keys(),f.mutationQueue.removeMutationBatch(p,g)))).next((()=>f.mutationQueue.performConsistencyCheck(p))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(p,v,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,v))).next((()=>f.localDocuments.getDocuments(p,v)))}))})(r.localStore,e);dA(r,e,t),cA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Qc(r,s)}catch(s){await Ia(s)}}function cA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function dA(n,e,t){const r=We(n);let s=r.du[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Pg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||hA(n,r)}))}function hA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(xy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Uy(n))}function XI(n,e,t){for(const r of t)r instanceof oA?(n.Vu.addReference(r.key,e),PL(n,r)):r instanceof aA?(le(Fy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||hA(n,r.key)):Ae(19791,{wu:r})}function PL(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(le(Fy,"New document in limbo: "+t),n.Eu.add(r),Uy(n))}function Uy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(ht.fromString(e)),r=n.fu.next();n.Au.set(r,new gL(t)),n.Ru=n.Ru.insert(t,r),JR(n.remoteStore,new gs(Yr(Sf(t.path)),r,"TargetPurposeLimboResolution",Qr.ce))}}async function Qc(n,e,t){const r=We(n),s=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,f)=>{l.push(r.pu(f,e,t).then((p=>{var v;if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,g?"current":"not-current")}if(p){s.push(p);const g=Cy.Es(f.targetId,p);a.push(g)}})))})),await Promise.all(l),r.Pu.J_(s),await(async function(f,p){const v=We(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>z.forEach(p,(E=>z.forEach(E.Ts,(R=>v.persistence.referenceDelegate.addReference(g,E.targetId,R))).next((()=>z.forEach(E.Is,(R=>v.persistence.referenceDelegate.removeReference(g,E.targetId,R)))))))))}catch(g){if(!To(g))throw g;le(by,"Failed to update sequence numbers: "+g)}for(const g of p){const E=g.targetId;if(!g.fromCache){const R=v.vs.get(E),V=R.snapshotVersion,U=R.withLastLimboFreeSnapshotVersion(V);v.vs=v.vs.insert(E,U)}}})(r.localStore,a))}async function CL(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){le(Fy,"User change. New user:",e.toKey());const r=await KR(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((f=>{f.reject(new de(X.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qc(t,r.Ns)}}function bL(n,e){const t=We(n),r=t.Au.get(e);if(r&&r.hu)return Xe().add(r.key);{let s=Xe();const a=t.Iu.get(e);if(!a)return s;for(const l of a){const c=t.Tu.get(l);s=s.unionWith(c.view.nu)}return s}}function fA(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=uA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=bL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SL.bind(null,e),e.Pu.J_=hL.bind(null,e.eventManager),e.Pu.yu=fL.bind(null,e.eventManager),e}function pA(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AL.bind(null,e),e}class Cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return WR(this.persistence,new qR,e.initialUser,this.serializer)}Cu(e){return new Ay(Df.Vi,this.serializer)}Du(e){return new QR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cc.provider={build:()=>new Cc};class kL extends Cc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xe(this.persistence.referenceDelegate instanceof Xh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new Ay((r=>Xh.Vi(r,t)),this.serializer)}}class xL extends Cc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await pA(this.xu.syncEngine),await Gc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return WR(this.persistence,new qR,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new BR(r,e.asyncQueue,t)}Mu(e,t){const r=new DO(t,this.persistence);return new xO(e.asyncQueue,r)}Cu(e){const t=k2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?qn.withCacheSize(this.cacheSizeBytes):qn.DEFAULT;return new Py(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,q2(),Dh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new QR}}class ef{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>JI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CL.bind(null,this.syncEngine),await uL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dL})()}createDatastore(e){const t=Nf(e.databaseInfo.databaseId),r=H2(e.databaseInfo);return Y2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,a,l,c){return new X2(r,s,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>JI(this.syncEngine,t,0)),(function(){return qI.v()?new qI:new B2})())}createSyncEngine(e,t){return(function(s,a,l,c,f,p,v){const g=new yL(s,a,l,c,f,p);return v&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=We(s);le(fa,"RemoteStore shutting down."),a.Ea.add(5),await Kc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ef.provider={build:()=>new ef};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DL=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,a){const l=We(s),c={documents:a.map((g=>Ac(l.serializer,g)))},f=await l.jo("BatchGetDocuments",l.serializer.databaseId,ht.emptyPath(),c,a.length),p=new Map;f.forEach((g=>{const E=GV(l.serializer,g);p.set(E.key.toString(),E)}));const v=[];return a.forEach((g=>{const E=p.get(g.toString());xe(!!E,55234,{key:g}),v.push(E)})),v})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Cf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const s=_e.fromPath(r);this.mutations.push(new yy(s,this.precondition(s)))})),await(async function(r,s){const a=We(r),l={writes:s.map((c=>Pc(a.serializer,c)))};await a.Wo("Commit",a.serializer.databaseId,ht.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});t=Le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new de(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?sn.exists(!1):sn.updateTime(t):sn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new de(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sn.updateTime(t)}return sn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,t,r,s,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=a,this.zu=r.maxAttempts,this.M_=new ky(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new DL(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Zu(s)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!jc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!mR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="FirestoreClient";class OL{constructor(e,t,r,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=s,this.user=Dn.UNAUTHENTICATED,this.clientId=sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{le(go,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(le(go,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Ly(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Vm(n,e){n.asyncQueue.verifyOperationInProgress(),le(go,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await KR(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ZI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VL(n);le(go,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>KI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>KI(e.remoteStore,s))),n._onlineComponents=e}async function VL(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(go,"Using user provided OfflineComponentProvider");try{await Vm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===X.FAILED_PRECONDITION||s.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;ho("Error using user provided cache. Falling back to memory cache: "+t),await Vm(n,new Cc)}}else le(go,"Using default OfflineComponentProvider"),await Vm(n,new kL(void 0));return n._offlineComponents}async function By(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(go,"Using user provided OnlineComponentProvider"),await ZI(n,n._uninitializedComponentsProvider._online)):(le(go,"Using default OnlineComponentProvider"),await ZI(n,new ef))),n._onlineComponents}function LL(n){return By(n).then((e=>e.syncEngine))}function ML(n){return By(n).then((e=>e.datastore))}async function gA(n){const e=await By(n),t=e.eventManager;return t.onListen=_L.bind(null,e.syncEngine),t.onUnlisten=EL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IL.bind(null,e.syncEngine),t}function FL(n,e,t={}){const r=new _i;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,f,p){const v=new mA({next:E=>{v.Nu(),l.enqueueAndForget((()=>iA(a,g)));const R=E.docs.has(c);!R&&E.fromCache?p.reject(new de(X.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&E.fromCache&&f&&f.source==="server"?p.reject(new de(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),g=new sA(Sf(c.path),v,{includeMetadataChanges:!0,Ka:!0});return rA(a,g)})(await gA(n),n.asyncQueue,e,t,r))),r.promise}function UL(n,e,t={}){const r=new _i;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,f,p){const v=new mA({next:E=>{v.Nu(),l.enqueueAndForget((()=>iA(a,g))),E.fromCache&&f.source==="server"?p.reject(new de(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),g=new sA(c,v,{includeMetadataChanges:!0,Ka:!0});return rA(a,g)})(await gA(n),n.asyncQueue,e,t,r))),r.promise}function BL(n,e){const t=new _i;return n.asyncQueue.enqueueAndForget((async()=>TL(await LL(n),e,t))),t.promise}function zL(n,e,t){const r=new _i;return n.asyncQueue.enqueueAndForget((async()=>{const s=await ML(n);new NL(n.asyncQueue,s,t,e,r).ju()})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="ComponentProvider",eT=new Map;function $L(n,e,t,r,s){return new aV(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,yA(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firestore.googleapis.com",tT=!0;class nT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_A,this.ssl=tT}else this.host=e.host,this.ssl=e.ssl??tT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f2)throw new de(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}PO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new yO;switch(r.type){case"firstParty":return new EO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=eT.get(t);r&&(le(jL,"Removing Datastore"),eT.delete(t),r.terminate())})(this),Promise.resolve()}}function HL(n,e,t,r={}){var p;n=Zr(n,Vf);const s=_o(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;s&&(Hg(`https://${c}`),qg("Firestore",!0)),a.host!==_A&&a.host!==c&&ho("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:c,ssl:s,emulatorOptions:r};if(!co(f,l)&&(n._setSettings(f),r.mockUserToken)){let v,g;if(typeof r.mockUserToken=="string")v=r.mockUserToken,g=Dn.MOCK_USER;else{v=I0(r.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new de(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Dn(E)}n._authCredentials=new _O(new ES(v,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Sa(this.firestore,e,this._query)}}class Wt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(zc(t,Wt._jsonSchema))return new Wt(e,r||null,new _e(ht.fromString(t.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:on("string",Wt._jsonSchemaVersion),referencePath:on("string")};class lo extends Sa{constructor(e,t,r){super(e,t,Sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new _e(e))}withConverter(e){return new lo(this.firestore,e,this._path)}}function A6(n,e,...t){if(n=It(n),TS("collection","path",e),n instanceof Vf){const r=ht.fromString(e,...t);return WE(r),new lo(n,null,r)}{if(!(n instanceof Wt||n instanceof lo))throw new de(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return WE(r),new lo(n.firestore,null,r)}}function vA(n,e,...t){if(n=It(n),arguments.length===1&&(e=sy.newId()),TS("doc","path",e),n instanceof Vf){const r=ht.fromString(e,...t);return qE(r),new Wt(n,null,new _e(r))}{if(!(n instanceof Wt||n instanceof lo))throw new de(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ht.fromString(e,...t));return qE(r),new Wt(n.firestore,n instanceof lo?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT="AsyncQueue";class iT{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ky(this,"async_queue_retry"),this._c=()=>{const r=Dh();r&&le(rT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Dh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Dh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new _i;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!To(e))throw e;le(rT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,rr("INTERNAL UNHANDLED ERROR: ",sT(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Vy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:sT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ro extends Vf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new iT,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iT(e),this._firestoreClient=void 0,await e}}}function qL(n,e){const t=typeof n=="object"?n:df(),r=typeof n=="string"?n:Wh,s=wo(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=v0("firestore");a&&HL(s,...a)}return s}function Lf(n){if(n._terminated)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||wA(n),n._firestoreClient}function wA(n){var r,s,a,l;const e=n._freezeSettings(),t=$L(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new OL(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}})(n._componentsProvider))}function WL(n,e){ho("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return KL(n,ef.provider,{build:r=>new xL(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function KL(n,e,t){if((n=Zr(n,Ro))._firestoreClient||n._terminated)throw new de(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(X.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},wA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Dr(ln.fromBase64String(e))}catch(t){throw new de(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Dr(ln.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Dr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zc(e,Dr._jsonSchema))return Dr.fromBase64String(e.bytes)}}Dr._jsonSchemaVersion="firestore/bytes/1.0",Dr._jsonSchema={type:on("string",Dr._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wi._jsonSchemaVersion}}static fromJSON(e){if(zc(e,Wi._jsonSchema))return new Wi(e.latitude,e.longitude)}}Wi._jsonSchemaVersion="firestore/geoPoint/1.0",Wi._jsonSchema={type:on("string",Wi._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zc(e,vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new vi(e.vectorValues);throw new de(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:on("string",vi._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=/^__.*__$/;class QL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms):new $l(e,this.data,t,this.fieldTransforms)}}class EA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:n})}}class jy{constructor(e,t,r,s,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new jy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return tf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(IA(this.dataSource)&&GL.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class YL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Nf(e)}createContext(e,t,r,s=!1){return new jy({dataSource:e,methodName:t,targetDoc:r,path:zt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yc(n){const e=n._freezeSettings(),t=Nf(n._databaseId);return new YL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $y(n,e,t,r,s,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);Hy("Data must be an object, but it was:",l,r);const c=RA(r,l);let f,p;if(a.merge)f=new _r(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const g of a.mergeFields){const E=pa(e,g,t);if(!l.contains(E))throw new de(X.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);CA(v,E)||v.push(E)}f=new _r(v),p=l.fieldTransforms.filter((g=>f.covers(g.field)))}else f=null,p=l.fieldTransforms;return new QL(new On(c),f,p)}class Ff extends zy{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}function TA(n,e,t,r){const s=n.createContext(1,e,t);Hy("Data must be an object, but it was:",s,r);const a=[],l=On.empty();So(r,((f,p)=>{const v=PA(e,f,t);p=It(p);const g=s.childContextForFieldPath(v);if(p instanceof Ff)a.push(v);else{const E=Jc(p,g);E!=null&&(a.push(v),l.set(v,E))}}));const c=new _r(a);return new EA(l,c,s.fieldTransforms)}function SA(n,e,t,r,s,a){const l=n.createContext(1,e,t),c=[pa(e,r,t)],f=[s];if(a.length%2!=0)throw new de(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)c.push(pa(e,a[E])),f.push(a[E+1]);const p=[],v=On.empty();for(let E=c.length-1;E>=0;--E)if(!CA(p,c[E])){const R=c[E];let V=f[E];V=It(V);const U=l.childContextForFieldPath(R);if(V instanceof Ff)p.push(R);else{const O=Jc(V,U);O!=null&&(p.push(R),v.set(R,O))}}const g=new _r(p);return new EA(v,g,l.fieldTransforms)}function JL(n,e,t,r=!1){return Jc(t,n.createContext(r?4:3,e))}function Jc(n,e){if(AA(n=It(n)))return Hy("Unsupported field value:",e,n),RA(n,e);if(n instanceof zy)return(function(r,s){if(!IA(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,s){const a=[];let l=0;for(const c of r){let f=Jc(c,s.childContextForArray(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,s){if((r=It(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kV(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=vt.fromDate(r);return{timestampValue:Ml(s.serializer,a)}}if(r instanceof vt){const a=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ml(s.serializer,a)}}if(r instanceof Wi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dr)return{bytesValue:vR(s.serializer,r._byteString)};if(r instanceof Wt){const a=s.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw s.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Iy(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof vi)return(function(l,c){const f=l instanceof vi?l.toArray():l;return{mapValue:{fields:{[fy]:{stringValue:py},[xl]:{arrayValue:{values:f.map((v=>{if(typeof v!="number")throw c.createError("VectorValues must only contain numeric values.");return gy(c.serializer,v)}))}}}}}})(r,s);if(kR(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${yf(r)}`)})(n,e)}function RA(n,e){const t={};return US(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):So(n,((r,s)=>{const a=Jc(s,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function AA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof vt||n instanceof Wi||n instanceof Dr||n instanceof Wt||n instanceof zy||n instanceof vi||kR(n))}function Hy(n,e,t){if(!AA(t)||!SS(t)){const r=yf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function pa(n,e,t){if((e=It(e))instanceof Mf)return e._internalPath;if(typeof e=="string")return PA(n,e);throw tf("Field path arguments must be of type string or ",n,!1,void 0,t)}const XL=new RegExp("[~\\*/\\[\\]]");function PA(n,e,t){if(e.search(XL)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mf(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tf(n,e,t,r,s){const a=r&&!r.isEmpty(),l=s!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${s}`),f+=")"),new de(X.INVALID_ARGUMENT,c+n+f)}function CA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{convertValue(e,t="none"){switch(fo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return So(e,((s,a)=>{r[s]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,s,a;const t=(a=(s=(r=e.fields)==null?void 0:r[xl].arrayValue)==null?void 0:s.values)==null?void 0:a.map((l=>Ot(l.doubleValue)));return new vi(t)}convertGeoPoint(e){return new Wi(Ot(e.latitude),Ot(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=If(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vc(e));default:return null}}convertTimestamp(e){const t=Is(e);return new vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ht.fromString(e);xe(bR(r),9688,{name:e});const s=new la(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return s.isEqual(t)||rr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends bA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}const oT="@firebase/firestore",aT="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e,t,r,s,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(pa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ZL extends nf{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wy{}class kA extends Wy{}function P6(n,e,...t){let r=[];e instanceof Wy&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof Ky)).length,c=a.filter((f=>f instanceof Uf)).length;if(l>1||l>0&&c>0)throw new de(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Uf extends kA{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Uf(e,t,r)}_apply(e){const t=this._parse(e);return xA(e._query,t),new Sa(e.firestore,e.converter,mg(e._query,t))}_parse(e){const t=Yc(e.firestore);return(function(a,l,c,f,p,v,g){let E;if(p.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){uT(g,v);const V=[];for(const U of g)V.push(lT(f,a,U));E={arrayValue:{values:V}}}else E=lT(f,a,g)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||uT(g,v),E=JL(c,l,g,v==="in"||v==="not-in");return it.create(p,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function C6(n,e,t){const r=e,s=pa("where",n);return Uf._create(s,r,t)}class Ky extends Wy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ky(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:wt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let l=s;const c=a.getFlattenedFilters();for(const f of c)xA(l,f),l=mg(l,f)})(e._query,t),new Sa(e.firestore,e.converter,mg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gy extends kA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Gy(e,t)}_apply(e){const t=(function(s,a,l){if(s.startAt!==null)throw new de(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new de(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tc(a,l)})(e._query,this._field,this._direction);return new Sa(e.firestore,e.converter,IV(e._query,t))}}function b6(n,e="asc"){const t=e,r=pa("orderBy",n);return Gy._create(r,t)}function lT(n,e,t){if(typeof(t=It(t))=="string"){if(t==="")throw new de(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nR(e)&&t.indexOf("/")!==-1)throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ht.fromString(t));if(!_e.isDocumentKey(r))throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ec(n,new _e(r))}if(t instanceof Wt)return Ec(n,t._key);throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(t)}.`)}function uT(n,e){if(!Array.isArray(n)||n.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xA(n,e){const t=(function(s,a){for(const l of s)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Qy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tM extends bA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,t)}}class gl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uo extends nf{constructor(e,t,r,s,a,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(pa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=uo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}uo._jsonSchemaVersion="firestore/documentSnapshot/1.0",uo._jsonSchema={type:on("string",uo._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Nh extends uo{data(e={}){return super.data(e)}}class Tl{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new gl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Nh(this._firestore,this._userDataWriter,r.key,r,new gl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map((c=>{const f=new Nh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new gl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const f=new Nh(s._firestore,s._userDataWriter,c.doc.key,c.doc,new gl(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,v=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),v=l.indexOf(c.doc.key)),{type:nM(c.type),doc:f,oldIndex:p,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tl._jsonSchemaVersion="firestore/querySnapshot/1.0",Tl._jsonSchema={type:on("string",Tl._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};const rM={maxAttempts:5};function Wu(n,e){if((n=It(n)).firestore!==e)throw new de(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yc(e)}get(e){const t=Wu(e,this._firestore),r=new tM(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Ae(24041);const a=s[0];if(a.isFoundDocument())return new nf(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new nf(this._firestore,r,t._key,null,t.converter);throw Ae(18433,{doc:a})}))}set(e,t,r){const s=Wu(e,this._firestore),a=Qy(s.converter,t,r),l=$y(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,r);return this._transaction.set(s._key,l),this}update(e,t,r,...s){const a=Wu(e,this._firestore);let l;return l=typeof(t=It(t))=="string"||t instanceof Mf?SA(this._dataReader,"Transaction.update",a._key,t,r,s):TA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Wu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM extends iM{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Wu(e,this._firestore),r=new qy(this._firestore);return super.get(e).then((s=>new uo(this._firestore,r,t._key,s._document,new gl(!1,!1),t.converter)))}}function k6(n,e,t){n=Zr(n,Ro);const r={...rM,...t};(function(l){if(l.maxAttempts<1)throw new de(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const s=Lf(n);return zL(s,(a=>e(new sM(n,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(n){n=Zr(n,Wt);const e=Zr(n.firestore,Ro),t=Lf(e);return FL(t,n._key).then((r=>lM(e,n,r)))}function x6(n){n=Zr(n,Sa);const e=Zr(n.firestore,Ro),t=Lf(e),r=new qy(e);return eM(n._query),UL(t,n._query).then((s=>new Tl(e,r,n,s)))}function aM(n,e,t){n=Zr(n,Wt);const r=Zr(n.firestore,Ro),s=Qy(n.converter,e,t),a=Yc(r);return Yy(r,[$y(a,"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,sn.none())])}function D6(n,e,t,...r){n=Zr(n,Wt);const s=Zr(n.firestore,Ro),a=Yc(s);let l;return l=typeof(e=It(e))=="string"||e instanceof Mf?SA(a,"updateDoc",n._key,e,t,r):TA(a,"updateDoc",n._key,e),Yy(s,[l.toMutation(n._key,sn.exists(!0))])}function N6(n,e){const t=Zr(n.firestore,Ro),r=vA(n),s=Qy(n.converter,e),a=Yc(n.firestore);return Yy(t,[$y(a,"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then((()=>r))}function Yy(n,e){const t=Lf(n);return BL(t,e)}function lM(n,e,t){const r=t.docs.get(e._key),s=new qy(n);return new uo(n,s,e._key,r,new gl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){gO(wa),Mr(new vr("firestore",((r,{instanceIdentifier:s,options:a})=>{const l=r.getProvider("app").getImmediate(),c=new Ro(new vO(r.getProvider("auth-internal")),new IO(l,r.getProvider("app-check-internal")),lV(l,s),l);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),Wn(oT,aT,e),Wn(oT,aT,"esm2020")})();const DA="@firebase/installations",Jy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=1e4,OA=`w:${Jy}`,VA="FIS_v2",uM="https://firebaseinstallations.googleapis.com/v1",cM=3600*1e3,dM="installations",hM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ma=new vo(dM,hM,fM);function LA(n){return n instanceof ti&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA({projectId:n}){return`${uM}/projects/${n}/installations`}function FA(n){return{token:n.token,requestStatus:2,expiresIn:mM(n.expiresIn),creationTime:Date.now()}}async function UA(n,e){const r=(await e.json()).error;return ma.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function BA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function pM(n,{refreshToken:e}){const t=BA(n);return t.append("Authorization",gM(e)),t}async function zA(n){const e=await n();return e.status>=500&&e.status<600?n():e}function mM(n){return Number(n.replace("s","000"))}function gM(n){return`${VA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=MA(n),s=BA(n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={fid:t,authVersion:VA,appId:n.appId,sdkVersion:OA},c={method:"POST",headers:s,body:JSON.stringify(l)},f=await zA(()=>fetch(r,c));if(f.ok){const p=await f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:FA(p.authToken)}}else throw await UA("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=/^[cdef][\w-]{21}$/,Cg="";function wM(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=EM(n);return vM.test(t)?t:Cg}catch{return Cg}}function EM(n){return _M(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A=new Map;function HA(n,e){const t=Bf(n);qA(t,e),IM(t,e)}function qA(n,e){const t=$A.get(n);if(t)for(const r of t)r(e)}function IM(n,e){const t=TM();t&&t.postMessage({key:n,fid:e}),SM()}let na=null;function TM(){return!na&&"BroadcastChannel"in self&&(na=new BroadcastChannel("[Firebase] FID Change"),na.onmessage=n=>{qA(n.data.key,n.data.fid)}),na}function SM(){$A.size===0&&na&&(na.close(),na=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM="firebase-installations-database",AM=1,ga="firebase-installations-store";let Lm=null;function Xy(){return Lm||(Lm=cf(RM,AM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ga)}}})),Lm}async function rf(n,e){const t=Bf(n),s=(await Xy()).transaction(ga,"readwrite"),a=s.objectStore(ga),l=await a.get(t);return await a.put(e,t),await s.done,(!l||l.fid!==e.fid)&&HA(n,e.fid),e}async function WA(n){const e=Bf(n),r=(await Xy()).transaction(ga,"readwrite");await r.objectStore(ga).delete(e),await r.done}async function zf(n,e){const t=Bf(n),s=(await Xy()).transaction(ga,"readwrite"),a=s.objectStore(ga),l=await a.get(t),c=e(l);return c===void 0?await a.delete(t):await a.put(c,t),await s.done,c&&(!l||l.fid!==c.fid)&&HA(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(n){let e;const t=await zf(n.appConfig,r=>{const s=PM(r),a=CM(n,s);return e=a.registrationPromise,a.installationEntry});return t.fid===Cg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function PM(n){const e=n||{fid:wM(),registrationStatus:0};return KA(e)}function CM(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ma.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=bM(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:kM(n)}:{installationEntry:e}}async function bM(n,e){try{const t=await yM(n,e);return rf(n.appConfig,t)}catch(t){throw LA(t)&&t.customData.serverCode===409?await WA(n.appConfig):await rf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function kM(n){let e=await cT(n.appConfig);for(;e.registrationStatus===1;)await jA(100),e=await cT(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Zy(n);return r||t}return e}function cT(n){return zf(n,e=>{if(!e)throw ma.create("installation-not-found");return KA(e)})}function KA(n){return xM(n)?{fid:n.fid,registrationStatus:0}:n}function xM(n){return n.registrationStatus===1&&n.registrationTime+NA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DM({appConfig:n,heartbeatServiceProvider:e},t){const r=NM(n,t),s=pM(n,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&s.append("x-firebase-client",p)}const l={installation:{sdkVersion:OA,appId:n.appId}},c={method:"POST",headers:s,body:JSON.stringify(l)},f=await zA(()=>fetch(r,c));if(f.ok){const p=await f.json();return FA(p)}else throw await UA("Generate Auth Token",f)}function NM(n,{fid:e}){return`${MA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(n,e=!1){let t;const r=await zf(n.appConfig,a=>{if(!GA(a))throw ma.create("not-registered");const l=a.authToken;if(!e&&LM(l))return a;if(l.requestStatus===1)return t=OM(n,e),a;{if(!navigator.onLine)throw ma.create("app-offline");const c=FM(a);return t=VM(n,c),c}});return t?await t:r.authToken}async function OM(n,e){let t=await dT(n.appConfig);for(;t.authToken.requestStatus===1;)await jA(100),t=await dT(n.appConfig);const r=t.authToken;return r.requestStatus===0?e_(n,e):r}function dT(n){return zf(n,e=>{if(!GA(e))throw ma.create("not-registered");const t=e.authToken;return UM(t)?{...e,authToken:{requestStatus:0}}:e})}async function VM(n,e){try{const t=await DM(n,e),r={...e,authToken:t};return await rf(n.appConfig,r),t}catch(t){if(LA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await WA(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await rf(n.appConfig,r)}throw t}}function GA(n){return n!==void 0&&n.registrationStatus===2}function LM(n){return n.requestStatus===2&&!MM(n)}function MM(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+cM}function FM(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function UM(n){return n.requestStatus===1&&n.requestTime+NA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BM(n){const e=n,{installationEntry:t,registrationPromise:r}=await Zy(e);return r?r.catch(console.error):e_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(n,e=!1){const t=n;return await jM(t),(await e_(t,e)).token}async function jM(n){const{registrationPromise:e}=await Zy(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n){if(!n||!n.options)throw Mm("App Configuration");if(!n.name)throw Mm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Mm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Mm(n){return ma.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QA="installations",HM="installations-internal",qM=n=>{const e=n.getProvider("app").getImmediate(),t=$M(e),r=wo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},WM=n=>{const e=n.getProvider("app").getImmediate(),t=wo(e,QA).getImmediate();return{getId:()=>BM(t),getToken:s=>zM(t,s)}};function KM(){Mr(new vr(QA,qM,"PUBLIC")),Mr(new vr(HM,WM,"PRIVATE"))}KM();Wn(DA,Jy);Wn(DA,Jy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="analytics",GM="firebase_id",QM="origin",YM=60*1e3,JM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",t_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new uf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Vr=new vo("analytics","Analytics",XM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(n){if(!n.startsWith(t_)){const e=Vr.create("invalid-gtag-resource",{gtagURL:n});return ir.warn(e.message),""}return n}function YA(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function eF(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function tF(n,e){const t=eF("firebase-js-sdk-policy",{createScriptURL:ZM}),r=document.createElement("script"),s=`${t_}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function nF(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function rF(n,e,t,r,s,a){const l=r[s];try{if(l)await e[l];else{const f=(await YA(t)).find(p=>p.measurementId===s);f&&await e[f.appId]}}catch(c){ir.error(c)}n("config",s,a)}async function iF(n,e,t,r,s){try{let a=[];if(s&&s.send_to){let l=s.send_to;Array.isArray(l)||(l=[l]);const c=await YA(t);for(const f of l){const p=c.find(g=>g.measurementId===f),v=p&&e[p.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,s||{})}catch(a){ir.error(a)}}function sF(n,e,t,r){async function s(a,...l){try{if(a==="event"){const[c,f]=l;await iF(n,e,t,c,f)}else if(a==="config"){const[c,f]=l;await rF(n,e,t,r,c,f)}else if(a==="consent"){const[c,f]=l;n("consent",c,f)}else if(a==="get"){const[c,f,p]=l;n("get",c,f,p)}else if(a==="set"){const[c]=l;n("set",c)}else n(a,...l)}catch(c){ir.error(c)}}return s}function oF(n,e,t,r,s){let a=function(...l){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=sF(a,n,e,t),{gtagCore:a,wrappedGtag:window[s]}}function aF(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(t_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lF=30,uF=1e3;class cF{constructor(e={},t=uF){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const JA=new cF;function dF(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function hF(n){var l;const{appId:e,apiKey:t}=n,r={method:"GET",headers:dF(t)},s=JM.replace("{app-id}",e),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let c="";try{const f=await a.json();(l=f.error)!=null&&l.message&&(c=f.error.message)}catch{}throw Vr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function fF(n,e=JA,t){const{appId:r,apiKey:s,measurementId:a}=n.options;if(!r)throw Vr.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw Vr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new gF;return setTimeout(async()=>{c.abort()},YM),XA({appId:r,apiKey:s,measurementId:a},l,c,e)}async function XA(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=JA){var c;const{appId:a,measurementId:l}=n;try{await pF(r,e)}catch(f){if(l)return ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:l};throw f}try{const f=await hF(n);return s.deleteThrottleMetadata(a),f}catch(f){const p=f;if(!mF(p)){if(s.deleteThrottleMetadata(a),l)return ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:l};throw f}const v=Number((c=p==null?void 0:p.customData)==null?void 0:c.httpStatus)===503?hE(t,s.intervalMillis,lF):hE(t,s.intervalMillis),g={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return s.setThrottleMetadata(a,g),ir.debug(`Calling attemptFetch again in ${v} millis`),XA(n,g,r,s)}}function pF(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(a),r(Vr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function mF(n){if(!(n instanceof ti)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class gF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function yF(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const a=await e,l={...r,send_to:a};n("event",t,l)}}async function _F(n,e,t,r){if(r&&r.global){const s={};for(const a of Object.keys(t))s[`user_properties.${a}`]=t[a];return n("set",s),Promise.resolve()}else{const s=await e;n("config",s,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(){if(Wg())try{await P0()}catch(n){return ir.warn(Vr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ir.warn(Vr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function wF(n,e,t,r,s,a,l){const c=fF(n);c.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&ir.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>ir.error(E)),e.push(c);const f=vF().then(E=>{if(E)return r.getId()}),[p,v]=await Promise.all([c,f]);aF(a)||tF(a,p.measurementId),s("js",new Date);const g=(l==null?void 0:l.config)??{};return g[QM]="firebase",g.update=!0,v!=null&&(g[GM]=v),s("config",p.measurementId,g),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(e){this.app=e}_delete(){return delete Sl[this.app.options.appId],Promise.resolve()}}let Sl={},hT=[];const fT={};let Fm="dataLayer",IF="gtag",pT,n_,mT=!1;function TF(){const n=[];if(S0()&&n.push("This is a browser extension environment."),Ok()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Vr.create("invalid-analytics-context",{errorInfo:e});ir.warn(t.message)}}function SF(n,e,t){TF();const r=n.options.appId;if(!r)throw Vr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Vr.create("no-api-key");if(Sl[r]!=null)throw Vr.create("already-exists",{id:r});if(!mT){nF(Fm);const{wrappedGtag:a,gtagCore:l}=oF(Sl,hT,fT,Fm,IF);n_=a,pT=l,mT=!0}return Sl[r]=wF(n,hT,fT,e,pT,Fm,t),new EF(n)}function RF(n=df()){n=It(n);const e=wo(n,sf);return e.isInitialized()?e.getImmediate():AF(n)}function AF(n,e={}){const t=wo(n,sf);if(t.isInitialized()){const s=t.getImmediate();if(co(e,t.getOptions()))return s;throw Vr.create("already-initialized")}return t.initialize({options:e})}function PF(n,e,t){n=It(n),_F(n_,Sl[n.app.options.appId],e,t).catch(r=>ir.error(r))}function CF(n,e,t,r){n=It(n),yF(n_,Sl[n.app.options.appId],e,t,r).catch(s=>ir.error(s))}const gT="@firebase/analytics",yT="0.10.19";function bF(){Mr(new vr(sf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return SF(r,s,t)},"PUBLIC")),Mr(new vr("analytics-internal",n,"PRIVATE")),Wn(gT,yT),Wn(gT,yT,"esm2020");function n(e){try{const t=e.getProvider(sf).getImmediate();return{logEvent:(r,s,a)=>CF(t,r,s,a),setUserProperties:(r,s)=>PF(t,r,s)}}catch(t){throw Vr.create("interop-component-reg-failed",{reason:t})}}}bF();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="firebasestorage.googleapis.com",eP="storageBucket",kF=120*1e3,xF=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt extends ti{constructor(e,t,r=0){super(Um(e),`Firebase Storage: ${t} (${Um(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Gt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Um(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Kt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Kt||(Kt={}));function Um(n){return"storage/"+n}function r_(){const n="An unknown error occurred, please check the error payload for server response.";return new Gt(Kt.UNKNOWN,n)}function DF(n){return new Gt(Kt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function NF(n){return new Gt(Kt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function OF(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Gt(Kt.UNAUTHENTICATED,n)}function VF(){return new Gt(Kt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LF(n){return new Gt(Kt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function MF(){return new Gt(Kt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FF(){return new Gt(Kt.CANCELED,"User canceled the upload/download.")}function UF(n){return new Gt(Kt.INVALID_URL,"Invalid URL '"+n+"'.")}function BF(n){return new Gt(Kt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function zF(){return new Gt(Kt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eP+"' property when initializing the app?")}function jF(){return new Gt(Kt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $F(){return new Gt(Kt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HF(n){return new Gt(Kt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bg(n){return new Gt(Kt.INVALID_ARGUMENT,n)}function tP(){return new Gt(Kt.APP_DELETED,"The Firebase app was deleted.")}function qF(n){return new Gt(Kt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sc(n,e){return new Gt(Kt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Mu(n){throw new Gt(Kt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Or.makeFromUrl(e,t)}catch{return new Or(e,"")}if(r.path==="")return r;throw BF(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+s+l,"i"),f={bucket:1,path:3};function p(ae){ae.path_=decodeURIComponent(ae.path)}const v="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",R=new RegExp(`^https?://${g}/${v}/b/${s}/o${E}`,"i"),V={bucket:1,path:3},U=t===ZA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",J=new RegExp(`^https?://${U}/${s}/${O}`,"i"),Z=[{regex:c,indices:f,postModify:a},{regex:R,indices:V,postModify:p},{regex:J,indices:{bucket:1,path:2},postModify:p}];for(let ae=0;ae<Z.length;ae++){const se=Z[ae],fe=se.regex.exec(e);if(fe){const T=fe[se.indices.bucket];let S=fe[se.indices.path];S||(S=""),r=new Or(T,S),se.postModify(r);break}}if(r==null)throw UF(e);return r}}class WF{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KF(n,e,t){let r=1,s=null,a=null,l=!1,c=0;function f(){return c===2}let p=!1;function v(...O){p||(p=!0,e.apply(null,O))}function g(O){s=setTimeout(()=>{s=null,n(R,f())},O)}function E(){a&&clearTimeout(a)}function R(O,...J){if(p){E();return}if(O){E(),v.call(null,O,...J);return}if(f()||l){E(),v.call(null,O,...J);return}r<64&&(r*=2);let Z;c===1?(c=2,Z=0):Z=(r+Math.random())*1e3,g(Z)}let V=!1;function U(O){V||(V=!0,E(),!p&&(s!==null?(O||(c=2),clearTimeout(s),g(0)):O||(c=1)))}return g(0),a=setTimeout(()=>{l=!0,U(!0)},t),U}function GF(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(n){return n!==void 0}function YF(n){return typeof n=="object"&&!Array.isArray(n)}function i_(n){return typeof n=="string"||n instanceof String}function _T(n){return s_()&&n instanceof Blob}function s_(){return typeof Blob<"u"}function vT(n,e,t,r){if(r<e)throw bg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function nP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var sa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(sa||(sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JF(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XF{constructor(e,t,r,s,a,l,c,f,p,v,g,E=!0,R=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=v,this.connectionFactory_=g,this.retry=E,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,U)=>{this.resolve_=V,this.reject_=U,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new dh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const f=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===sa.NO_ERROR,f=a.getStatus();if(!c||JF(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===sa.ABORT;r(!1,new dh(!1,null,v));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new dh(p,a))})},t=(r,s)=>{const a=this.resolve_,l=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const f=this.callback_(c,c.getResponse());QF(f)?a(f):a()}catch(f){l(f)}else if(c!==null){const f=r_();f.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,f)):l(f)}else if(s.canceled){const f=this.appDelete_?tP():FF();l(f)}else{const f=MF();l(f)}};this.canceled_?t(!1,new dh(!1,null,!0)):this.backoffId_=KF(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GF(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function ZF(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function e4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function n4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function r4(n,e,t,r,s,a,l=!0,c=!1){const f=nP(n.urlParams),p=n.url+f,v=Object.assign({},n.headers);return t4(v,e),ZF(v,t),e4(v,a),n4(v,r),new XF(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function s4(...n){const e=i4();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(s_())return new Blob(n);throw new Gt(Kt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function o4(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(n){if(typeof atob>"u")throw HF("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bm{constructor(e,t){this.data=e,this.contentType=t||null}}function l4(n,e){switch(n){case $i.RAW:return new Bm(rP(e));case $i.BASE64:case $i.BASE64URL:return new Bm(iP(n,e));case $i.DATA_URL:return new Bm(c4(e),d4(e))}throw r_()}function rP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=n.charCodeAt(++t);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function u4(n){let e;try{e=decodeURIComponent(n)}catch{throw sc($i.DATA_URL,"Malformed data URL.")}return rP(e)}function iP(n,e){switch(n){case $i.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw sc(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case $i.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw sc(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=a4(e)}catch(s){throw s.message.includes("polyfill")?s:sc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class sP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw sc($i.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=h4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function c4(n){const e=new sP(n);return e.base64?iP($i.BASE64,e.rest):u4(e.rest)}function d4(n){return new sP(n).contentType}function h4(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,t){let r=0,s="";_T(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(_T(this.data_)){const r=this.data_,s=o4(r,e,t);return s===null?null:new no(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new no(r,!0)}}static getBlob(...e){if(s_()){const t=e.map(r=>r instanceof no?r.data_:r);return new no(s4.apply(null,t))}else{const t=e.map(l=>i_(l)?l4($i.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const s=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)s[a++]=l[c]}),new no(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n){let e;try{e=JSON.parse(n)}catch{return null}return YF(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function p4(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function aP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(n,e){return e}class nr{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||m4}}let hh=null;function g4(n){return!i_(n)||n.length<2?n:aP(n)}function lP(){if(hh)return hh;const n=[];n.push(new nr("bucket")),n.push(new nr("generation")),n.push(new nr("metageneration")),n.push(new nr("name","fullPath",!0));function e(a,l){return g4(l)}const t=new nr("name");t.xform=e,n.push(t);function r(a,l){return l!==void 0?Number(l):l}const s=new nr("size");return s.xform=r,n.push(s),n.push(new nr("timeCreated")),n.push(new nr("updated")),n.push(new nr("md5Hash",null,!0)),n.push(new nr("cacheControl",null,!0)),n.push(new nr("contentDisposition",null,!0)),n.push(new nr("contentEncoding",null,!0)),n.push(new nr("contentLanguage",null,!0)),n.push(new nr("contentType",null,!0)),n.push(new nr("metadata","customMetadata",!0)),hh=n,hh}function y4(n,e){function t(){const r=n.bucket,s=n.fullPath,a=new Or(r,s);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function _4(n,e,t){const r={};r.type="file";const s=t.length;for(let a=0;a<s;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return y4(r,n),r}function uP(n,e,t){const r=oP(e);return r===null?null:_4(n,r,t)}function v4(n,e,t,r){const s=oP(e);if(s===null||!i_(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const v=n.bucket,g=n.fullPath,E="/b/"+l(v)+"/o/"+l(g),R=o_(E,t,r),V=nP({alt:"media",token:p});return R+V})[0]}function w4(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class cP{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){if(!n)throw r_()}function E4(n,e){function t(r,s){const a=uP(n,s,e);return dP(a!==null),a}return t}function I4(n,e){function t(r,s){const a=uP(n,s,e);return dP(a!==null),v4(a,s,n.host,n._protocol)}return t}function hP(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=VF():s=OF():t.getStatus()===402?s=NF(n.bucket):t.getStatus()===403?s=LF(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function T4(n){const e=hP(n);function t(r,s){let a=e(r,s);return r.getStatus()===404&&(a=DF(n.path)),a.serverResponse=s.serverResponse,a}return t}function S4(n,e,t){const r=e.fullServerUrl(),s=o_(r,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,c=new cP(s,a,I4(n,t),l);return c.errorHandler=T4(e),c}function R4(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function A4(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=R4(null,e)),r}function P4(n,e,t,r,s){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let Z="";for(let ae=0;ae<2;ae++)Z=Z+Math.random().toString().slice(2);return Z}const f=c();l["Content-Type"]="multipart/related; boundary="+f;const p=A4(e,r,s),v=w4(p,t),g="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+f+"--",R=no.getBlob(g,r,E);if(R===null)throw jF();const V={name:p.fullPath},U=o_(a,n.host,n._protocol),O="POST",J=n.maxUploadRetryTime,G=new cP(U,O,E4(n,t),J);return G.urlParams=V,G.headers=l,G.body=R.uploadData(),G.errorHandler=hP(e),G}class C4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,a){if(this.sent_)throw Mu("cannot .send() more than once");if(_o(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Mu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class b4 extends C4{initXhr(){this.xhr_.responseType="text"}}function fP(){return new b4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e,t){this._service=e,t instanceof Or?this._location=t:this._location=Or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ya(e,t)}get root(){const e=new Or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aP(this._location.path)}get storage(){return this._service}get parent(){const e=f4(this._location.path);if(e===null)return null;const t=new Or(this._location.bucket,e);return new ya(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw qF(e)}}function k4(n,e,t){n._throwIfRoot("uploadBytes");const r=P4(n.storage,n._location,lP(),new no(e,!0),t);return n.storage.makeRequestWithTokens(r,fP).then(s=>({metadata:s,ref:n}))}function x4(n){n._throwIfRoot("getDownloadURL");const e=S4(n.storage,n._location,lP());return n.storage.makeRequestWithTokens(e,fP).then(t=>{if(t===null)throw $F();return t})}function D4(n,e){const t=p4(n._location.path,e),r=new Or(n._location.bucket,t);return new ya(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(n){return/^[A-Za-z]+:\/\//.test(n)}function O4(n,e){return new ya(n,e)}function pP(n,e){if(n instanceof a_){const t=n;if(t._bucket==null)throw zF();const r=new ya(t,t._bucket);return e!=null?pP(r,e):r}else return e!==void 0?D4(n,e):n}function V4(n,e){if(e&&N4(e)){if(n instanceof a_)return O4(n,e);throw bg("To use ref(service, url), the first argument must be a Storage instance.")}else return pP(n,e)}function wT(n,e){const t=e==null?void 0:e[eP];return t==null?null:Or.makeFromBucketSpec(t,n)}function L4(n,e,t,r={}){n.host=`${e}:${t}`;const s=_o(e);s&&(Hg(`https://${n.host}/b`),qg("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:I0(a,n.app.options.projectId))}class a_{constructor(e,t,r,s,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=ZA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kF,this._maxUploadRetryTime=xF,this._requests=new Set,s!=null?this._bucket=Or.makeFromBucketSpec(s,this._host):this._bucket=wT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Or.makeFromBucketSpec(this._url,e):this._bucket=wT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ya(this,e)}_makeRequest(e,t,r,s,a=!0){if(this._deleted)return new WF(tP());{const l=r4(e,this._appId,r,s,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const ET="@firebase/storage",IT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="storage";function O6(n,e,t){return n=It(n),k4(n,e,t)}function V6(n){return n=It(n),x4(n)}function L6(n,e){return n=It(n),V4(n,e)}function M4(n=df(),e){n=It(n);const r=wo(n,mP).getImmediate({identifier:e}),s=v0("storage");return s&&F4(r,...s),r}function F4(n,e,t,r={}){L4(n,e,t,r)}function U4(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new a_(t,r,s,e,wa)}function B4(){Mr(new vr(mP,U4,"PUBLIC").setMultipleInstances(!0)),Wn(ET,IT,""),Wn(ET,IT,"esm2020")}B4();const Ku={apiKey:"AIzaSyA2W9m7u415haZwLdIidqNMYbP3rJF_J2k",authDomain:"vosl12.firebaseapp.com",projectId:"vosl12",storageBucket:"vosl12.firebasestorage.app",messagingSenderId:"23089939460",appId:"1:23089939460:web:fc0efbea5db8290f6be151"},gP=!!(Ku.apiKey&&Ku.authDomain&&Ku.projectId&&Ku.appId),fh=gP;let wi;gP&&(wi=_E().length?_E()[0]:k0(Ku));const pl=wi?pO(wi):void 0,yP=wi?qL(wi):void 0,TT=wi?new fs:void 0;let z4;const M6=wi?M4(wi):void 0;if(wi){ZD(pl,rS).catch(()=>{});try{typeof window<"u"&&(z4=RF(wi))}catch{}try{WL(yP).catch(()=>{})}catch{}}const j4=wi;/*! Capacitor: https://capacitorjs.com/ - MIT License */const $4=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(a,l)=>{t.platforms.set(a,l)},s=a=>{t.platforms.has(a)&&(t.currentPlatform=t.platforms.get(a))};return t.addPlatform=r,t.setPlatform=s,t},H4=n=>n.CapacitorPlatforms=$4(n),_P=H4(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});_P.addPlatform;_P.setPlatform;var Ul;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(Ul||(Ul={}));class zm extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const q4=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},W4=n=>{var e,t,r,s,a;const l=n.CapacitorCustomPlatform||null,c=n.Capacitor||{},f=c.Plugins=c.Plugins||{},p=n.CapacitorPlatforms,v=()=>l!==null?l.name:q4(n),g=((e=p==null?void 0:p.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||v,E=()=>g()!=="web",R=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||E,V=T=>{const S=ae.get(T);return!!(S!=null&&S.platforms.has(g())||J(T))},U=((r=p==null?void 0:p.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||V,O=T=>{var S;return(S=c.PluginHeaders)===null||S===void 0?void 0:S.find(P=>P.name===T)},J=((s=p==null?void 0:p.currentPlatform)===null||s===void 0?void 0:s.getPluginHeader)||O,G=T=>n.console.error(T),Z=(T,S,P)=>Promise.reject(`${P} does not have an implementation of "${S}".`),ae=new Map,se=(T,S={})=>{const P=ae.get(T);if(P)return console.warn(`Capacitor plugin "${T}" already registered. Cannot register plugins twice.`),P.proxy;const N=g(),x=J(T);let M;const C=async()=>(!M&&N in S?M=typeof S[N]=="function"?M=await S[N]():M=S[N]:l!==null&&!M&&"web"in S&&(M=typeof S.web=="function"?M=await S.web():M=S.web),M),Me=(ne,D)=>{var K,he;if(x){const ve=x==null?void 0:x.methods.find(Ee=>D===Ee.name);if(ve)return ve.rtype==="promise"?Ee=>c.nativePromise(T,D.toString(),Ee):(Ee,we)=>c.nativeCallback(T,D.toString(),Ee,we);if(ne)return(K=ne[D])===null||K===void 0?void 0:K.bind(ne)}else{if(ne)return(he=ne[D])===null||he===void 0?void 0:he.bind(ne);throw new zm(`"${T}" plugin is not implemented on ${N}`,Ul.Unimplemented)}},He=ne=>{let D;const K=(...he)=>{const ve=C().then(Ee=>{const we=Me(Ee,ne);if(we){const Ke=we(...he);return D=Ke==null?void 0:Ke.remove,Ke}else throw new zm(`"${T}.${ne}()" is not implemented on ${N}`,Ul.Unimplemented)});return ne==="addListener"&&(ve.remove=async()=>D()),ve};return K.toString=()=>`${ne.toString()}() { [capacitor code] }`,Object.defineProperty(K,"name",{value:ne,writable:!1,configurable:!1}),K},ye=He("addListener"),Ne=He("removeListener"),ee=(ne,D)=>{const K=ye({eventName:ne},D),he=async()=>{const Ee=await K;Ne({eventName:ne,callbackId:Ee},D)},ve=new Promise(Ee=>K.then(()=>Ee({remove:he})));return ve.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await he()},ve},pe=new Proxy({},{get(ne,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?ee:ye;case"removeListener":return Ne;default:return He(D)}}});return f[T]=pe,ae.set(T,{name:T,proxy:pe,platforms:new Set([...Object.keys(S),...x?[N]:[]])}),pe},fe=((a=p==null?void 0:p.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||se;return c.convertFileSrc||(c.convertFileSrc=T=>T),c.getPlatform=g,c.handleError=G,c.isNativePlatform=R,c.isPluginAvailable=U,c.pluginMethodNoop=Z,c.registerPlugin=fe,c.Exception=zm,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},K4=n=>n.Capacitor=W4(n),bc=K4(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),vP=bc.registerPlugin;bc.Plugins;class wP{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const s=this.listeners[e];if(!s){if(r){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}s.forEach(a=>a(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new bc.Exception(e,Ul.Unimplemented)}unavailable(e="not available"){return new bc.Exception(e,Ul.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const s=r.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const ST=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),RT=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class G4 extends wP{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=RT(s).trim(),a=RT(a).trim(),t[s]=a}),t}async setCookie(e){try{const t=ST(e.key),r=ST(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${s}; path=${a}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}vP("CapacitorCookies",{web:()=>new G4});const Q4=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>t(s),r.readAsDataURL(n)}),Y4=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(s=>s.toLocaleLowerCase()).reduce((s,a,l)=>(s[a]=n[e[l]],s),{})},J4=(n,e=!0)=>n?Object.entries(n).reduce((r,s)=>{const[a,l]=s;let c,f;return Array.isArray(l)?(f="",l.forEach(p=>{c=e?encodeURIComponent(p):p,f+=`${a}=${c}&`}),f.slice(0,-1)):(c=e?encodeURIComponent(l):l,f=`${a}=${c}`),`${r}&${f}`},"").substr(1):null,X4=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),s=Y4(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(s.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[l,c]of Object.entries(n.data||{}))a.set(l,c);t.body=a.toString()}else if(s.includes("multipart/form-data")||n.data instanceof FormData){const a=new FormData;if(n.data instanceof FormData)n.data.forEach((c,f)=>{a.append(f,c)});else for(const c of Object.keys(n.data))a.append(c,n.data[c]);t.body=a;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(s.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Z4 extends wP{async request(e){const t=X4(e,e.webFetchExtra),r=J4(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,a=await fetch(s,t),l=a.headers.get("content-type")||"";let{responseType:c="text"}=a.ok?e:{};l.includes("application/json")&&(c="json");let f,p;switch(c){case"arraybuffer":case"blob":p=await a.blob(),f=await Q4(p);break;case"json":f=await a.json();break;case"document":case"text":default:f=await a.text()}const v={};return a.headers.forEach((g,E)=>{v[E]=g}),{data:f,headers:v,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}vP("CapacitorHttp",{web:()=>new Z4});const EP=q.createContext(void 0),eU=({children:n})=>{const[e,t]=q.useState(null);q.useEffect(()=>{if(!fh)return;const l=nN(pl,async c=>{if(!c){t(null);return}const f=vA(yP,"users",c.uid),p=await oM(f);let v="STUDENT",g=c.displayName||c.email||"User";if(p.exists()){const E=p.data();v=E.role||"STUDENT",g=E.name||g}else await aM(f,{email:c.email,name:g,role:v});t({id:c.uid,email:c.email||"",name:g,role:v,password:"",avatar:c.photoURL||void 0})});return()=>l&&l()},[]);const r=async(l,c)=>{if(!fh)throw new Error("Firebase is not configured. Add env vars.");await XD(pl,l,c)},s=async()=>{if(!fh)throw new Error("Firebase is not configured. Add env vars.");bc.isNativePlatform()?await CN(pl,TT):await IN(pl,TT)},a=()=>{fh&&rN(pl).catch(()=>{}),t(null)};return mi.jsx(EP.Provider,{value:{user:e,loginWithEmail:r,loginWithGoogle:s,logout:a,isAuthenticated:!!e},children:n})},F6=()=>{const n=q.useContext(EP);if(!n)throw new Error("useAuth must be used within AuthProvider");return n};var tU=(n,e,t,r,s,a,l,c)=>{let f=document.documentElement,p=["light","dark"];function v(R){(Array.isArray(n)?n:[n]).forEach(V=>{let U=V==="class",O=U&&a?s.map(J=>a[J]||J):s;U?(f.classList.remove(...O),f.classList.add(a&&a[R]?a[R]:R)):f.setAttribute(V,R)}),g(R)}function g(R){c&&p.includes(R)&&(f.style.colorScheme=R)}function E(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)v(r);else try{let R=localStorage.getItem(e)||t,V=l&&R==="system"?E():R;v(V)}catch{}},nU=q.createContext(void 0),rU={setTheme:n=>{},themes:[]},iU=()=>{var n;return(n=q.useContext(nU))!=null?n:rU};q.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:l,themes:c,nonce:f,scriptProps:p})=>{let v=JSON.stringify([t,e,a,n,c,l,r,s]).slice(1,-1);return q.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?f:"",dangerouslySetInnerHTML:{__html:`(${tU.toString()})(${v})`}})});var sU=LT();const oU=VT(sU);function aU(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const lU=n=>{switch(n){case"success":return dU;case"info":return fU;case"warning":return hU;case"error":return pU;default:return null}},uU=Array(12).fill(0),cU=({visible:n,className:e})=>ge.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ge.createElement("div",{className:"sonner-spinner"},uU.map((t,r)=>ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),dU=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),hU=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),fU=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pU=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),mU=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),gU=()=>{const[n,e]=ge.useState(document.hidden);return ge.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let kg=1;class yU{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:kg++,l=this.toasts.find(f=>f.id===a),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(f=>f.id===a?(this.publish({...f,...e,id:a,title:r}),{...f,...e,id:a,dismissible:c,title:r}):f):this.addToast({title:r,...s,dismissible:c,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const s=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,l;const c=s.then(async p=>{if(l=["resolve",p],ge.isValidElement(p))a=!1,this.create({id:r,type:"default",message:p});else if(vU(p)&&!p.ok){a=!1;const g=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,E=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,V=typeof g=="object"&&!ge.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:E,...V})}else if(p instanceof Error){a=!1;const g=typeof t.error=="function"?await t.error(p):t.error,E=typeof t.description=="function"?await t.description(p):t.description,V=typeof g=="object"&&!ge.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:E,...V})}else if(t.success!==void 0){a=!1;const g=typeof t.success=="function"?await t.success(p):t.success,E=typeof t.description=="function"?await t.description(p):t.description,V=typeof g=="object"&&!ge.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:E,...V})}}).catch(async p=>{if(l=["reject",p],t.error!==void 0){a=!1;const v=typeof t.error=="function"?await t.error(p):t.error,g=typeof t.description=="function"?await t.description(p):t.description,R=typeof v=="object"&&!ge.isValidElement(v)?v:{message:v};this.create({id:r,type:"error",description:g,...R})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),f=()=>new Promise((p,v)=>c.then(()=>l[0]==="reject"?v(l[1]):p(l[1])).catch(v));return typeof r!="string"&&typeof r!="number"?{unwrap:f}:Object.assign(r,{unwrap:f})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||kg++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const gr=new yU,_U=(n,e)=>{const t=(e==null?void 0:e.id)||kg++;return gr.addToast({title:n,...e,id:t}),t},vU=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",wU=_U,EU=()=>gr.toasts,IU=()=>gr.getActiveToasts(),U6=Object.assign(wU,{success:gr.success,info:gr.info,warning:gr.warning,error:gr.error,custom:gr.custom,message:gr.message,promise:gr.promise,dismiss:gr.dismiss,loading:gr.loading},{getHistory:EU,getToasts:IU});aU("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ph(n){return n.label!==void 0}const TU=3,SU="24px",RU="16px",AT=4e3,AU=356,PU=14,CU=45,bU=200;function Ui(...n){return n.filter(Boolean).join(" ")}function kU(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const xU=n=>{var e,t,r,s,a,l,c,f,p;const{invert:v,toast:g,unstyled:E,interacting:R,setHeights:V,visibleToasts:U,heights:O,index:J,toasts:G,expanded:Z,removeToast:ae,defaultRichColors:se,closeButton:fe,style:T,cancelButtonStyle:S,actionButtonStyle:P,className:N="",descriptionClassName:x="",duration:M,position:C,gap:Me,expandByDefault:He,classNames:ye,icons:Ne,closeButtonAriaLabel:ee="Close toast"}=n,[pe,ne]=ge.useState(null),[D,K]=ge.useState(null),[he,ve]=ge.useState(!1),[Ee,we]=ge.useState(!1),[Ke,je]=ge.useState(!1),[st,Mt]=ge.useState(!1),[Ii,Rt]=ge.useState(!1),[In,wr]=ge.useState(0),[As,Tn]=ge.useState(0),Gn=ge.useRef(g.duration||M||AT),Ti=ge.useRef(null),lt=ge.useRef(null),At=J===0,Qn=J+1<=U,Qt=g.type,sr=g.dismissible!==!1,or=g.className||"",Vn=g.descriptionClassName||"",Er=ge.useMemo(()=>O.findIndex(Fe=>Fe.toastId===g.id)||0,[O,g.id]),Ur=ge.useMemo(()=>{var Fe;return(Fe=g.closeButton)!=null?Fe:fe},[g.closeButton,fe]),Yt=ge.useMemo(()=>g.duration||M||AT,[g.duration,M]),fn=ge.useRef(0),Sn=ge.useRef(0),Ir=ge.useRef(0),Yn=ge.useRef(null),[Br,pn]=C.split("-"),ni=ge.useMemo(()=>O.reduce((Fe,yt,xt)=>xt>=Er?Fe:Fe+yt.height,0),[O,Er]),Rn=gU(),ri=g.invert||v,ar=Qt==="loading";Sn.current=ge.useMemo(()=>Er*Me+ni,[Er,ni]),ge.useEffect(()=>{Gn.current=Yt},[Yt]),ge.useEffect(()=>{ve(!0)},[]),ge.useEffect(()=>{const Fe=lt.current;if(Fe){const yt=Fe.getBoundingClientRect().height;return Tn(yt),V(xt=>[{toastId:g.id,height:yt,position:g.position},...xt]),()=>V(xt=>xt.filter(Ft=>Ft.toastId!==g.id))}},[V,g.id]),ge.useLayoutEffect(()=>{if(!he)return;const Fe=lt.current,yt=Fe.style.height;Fe.style.height="auto";const xt=Fe.getBoundingClientRect().height;Fe.style.height=yt,Tn(xt),V(Ft=>Ft.find(Pt=>Pt.toastId===g.id)?Ft.map(Pt=>Pt.toastId===g.id?{...Pt,height:xt}:Pt):[{toastId:g.id,height:xt,position:g.position},...Ft])},[he,g.title,g.description,V,g.id]);const mn=ge.useCallback(()=>{we(!0),wr(Sn.current),V(Fe=>Fe.filter(yt=>yt.toastId!==g.id)),setTimeout(()=>{ae(g)},bU)},[g,ae,V,Sn]);ge.useEffect(()=>{if(g.promise&&Qt==="loading"||g.duration===1/0||g.type==="loading")return;let Fe;return Z||R||Rn?(()=>{if(Ir.current<fn.current){const Ft=new Date().getTime()-fn.current;Gn.current=Gn.current-Ft}Ir.current=new Date().getTime()})():(()=>{Gn.current!==1/0&&(fn.current=new Date().getTime(),Fe=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),mn()},Gn.current))})(),()=>clearTimeout(Fe)},[Z,R,g,Qt,Rn,mn]),ge.useEffect(()=>{g.delete&&mn()},[mn,g.delete]);function Ln(){var Fe;if(Ne!=null&&Ne.loading){var yt;return ge.createElement("div",{className:Ui(ye==null?void 0:ye.loader,g==null||(yt=g.classNames)==null?void 0:yt.loader,"sonner-loader"),"data-visible":Qt==="loading"},Ne.loading)}return ge.createElement(cU,{className:Ui(ye==null?void 0:ye.loader,g==null||(Fe=g.classNames)==null?void 0:Fe.loader),visible:Qt==="loading"})}const lr=g.icon||(Ne==null?void 0:Ne[Qt])||lU(Qt);var gt,Si;return ge.createElement("li",{tabIndex:0,ref:lt,className:Ui(N,or,ye==null?void 0:ye.toast,g==null||(e=g.classNames)==null?void 0:e.toast,ye==null?void 0:ye.default,ye==null?void 0:ye[Qt],g==null||(t=g.classNames)==null?void 0:t[Qt]),"data-sonner-toast":"","data-rich-colors":(gt=g.richColors)!=null?gt:se,"data-styled":!(g.jsx||g.unstyled||E),"data-mounted":he,"data-promise":!!g.promise,"data-swiped":Ii,"data-removed":Ee,"data-visible":Qn,"data-y-position":Br,"data-x-position":pn,"data-index":J,"data-front":At,"data-swiping":Ke,"data-dismissible":sr,"data-type":Qt,"data-invert":ri,"data-swipe-out":st,"data-swipe-direction":D,"data-expanded":!!(Z||He&&he),style:{"--index":J,"--toasts-before":J,"--z-index":G.length-J,"--offset":`${Ee?In:Sn.current}px`,"--initial-height":He?"auto":`${As}px`,...T,...g.style},onDragEnd:()=>{je(!1),ne(null),Yn.current=null},onPointerDown:Fe=>{ar||!sr||(Ti.current=new Date,wr(Sn.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(je(!0),Yn.current={x:Fe.clientX,y:Fe.clientY}))},onPointerUp:()=>{var Fe,yt,xt;if(st||!sr)return;Yn.current=null;const Ft=Number(((Fe=lt.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Zt=Number(((yt=lt.current)==null?void 0:yt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Pt=new Date().getTime()-((xt=Ti.current)==null?void 0:xt.getTime()),jt=pe==="x"?Ft:Zt,Jn=Math.abs(jt)/Pt;if(Math.abs(jt)>=CU||Jn>.11){wr(Sn.current),g.onDismiss==null||g.onDismiss.call(g,g),K(pe==="x"?Ft>0?"right":"left":Zt>0?"down":"up"),mn(),Mt(!0);return}else{var k,F;(k=lt.current)==null||k.style.setProperty("--swipe-amount-x","0px"),(F=lt.current)==null||F.style.setProperty("--swipe-amount-y","0px")}Rt(!1),je(!1),ne(null)},onPointerMove:Fe=>{var yt,xt,Ft;if(!Yn.current||!sr||((yt=window.getSelection())==null?void 0:yt.toString().length)>0)return;const Pt=Fe.clientY-Yn.current.y,jt=Fe.clientX-Yn.current.x;var Jn;const k=(Jn=n.swipeDirections)!=null?Jn:kU(C);!pe&&(Math.abs(jt)>1||Math.abs(Pt)>1)&&ne(Math.abs(jt)>Math.abs(Pt)?"x":"y");let F={x:0,y:0};const H=te=>1/(1.5+Math.abs(te)/20);if(pe==="y"){if(k.includes("top")||k.includes("bottom"))if(k.includes("top")&&Pt<0||k.includes("bottom")&&Pt>0)F.y=Pt;else{const te=Pt*H(Pt);F.y=Math.abs(te)<Math.abs(Pt)?te:Pt}}else if(pe==="x"&&(k.includes("left")||k.includes("right")))if(k.includes("left")&&jt<0||k.includes("right")&&jt>0)F.x=jt;else{const te=jt*H(jt);F.x=Math.abs(te)<Math.abs(jt)?te:jt}(Math.abs(F.x)>0||Math.abs(F.y)>0)&&Rt(!0),(xt=lt.current)==null||xt.style.setProperty("--swipe-amount-x",`${F.x}px`),(Ft=lt.current)==null||Ft.style.setProperty("--swipe-amount-y",`${F.y}px`)}},Ur&&!g.jsx&&Qt!=="loading"?ge.createElement("button",{"aria-label":ee,"data-disabled":ar,"data-close-button":!0,onClick:ar||!sr?()=>{}:()=>{mn(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Ui(ye==null?void 0:ye.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(Si=Ne==null?void 0:Ne.close)!=null?Si:mU):null,(Qt||g.icon||g.promise)&&g.icon!==null&&((Ne==null?void 0:Ne[Qt])!==null||g.icon)?ge.createElement("div",{"data-icon":"",className:Ui(ye==null?void 0:ye.icon,g==null||(s=g.classNames)==null?void 0:s.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Ln():null,g.type!=="loading"?lr:null):null,ge.createElement("div",{"data-content":"",className:Ui(ye==null?void 0:ye.content,g==null||(a=g.classNames)==null?void 0:a.content)},ge.createElement("div",{"data-title":"",className:Ui(ye==null?void 0:ye.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ge.createElement("div",{"data-description":"",className:Ui(x,Vn,ye==null?void 0:ye.description,g==null||(c=g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),ge.isValidElement(g.cancel)?g.cancel:g.cancel&&ph(g.cancel)?ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||S,onClick:Fe=>{ph(g.cancel)&&sr&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Fe),mn())},className:Ui(ye==null?void 0:ye.cancelButton,g==null||(f=g.classNames)==null?void 0:f.cancelButton)},g.cancel.label):null,ge.isValidElement(g.action)?g.action:g.action&&ph(g.action)?ge.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||P,onClick:Fe=>{ph(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Fe),!Fe.defaultPrevented&&mn())},className:Ui(ye==null?void 0:ye.actionButton,g==null||(p=g.classNames)==null?void 0:p.actionButton)},g.action.label):null)};function PT(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function DU(n,e){const t={};return[n,e].forEach((r,s)=>{const a=s===1,l=a?"--mobile-offset":"--offset",c=a?RU:SU;function f(p){["top","right","bottom","left"].forEach(v=>{t[`${l}-${v}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?f(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?t[`${l}-${p}`]=c:t[`${l}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):f(c)}),t}const NU=ge.forwardRef(function(e,t){const{invert:r,position:s="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:f,offset:p,mobileOffset:v,theme:g="light",richColors:E,duration:R,style:V,visibleToasts:U=TU,toastOptions:O,dir:J=PT(),gap:G=PU,icons:Z,containerAriaLabel:ae="Notifications"}=e,[se,fe]=ge.useState([]),T=ge.useMemo(()=>Array.from(new Set([s].concat(se.filter(D=>D.position).map(D=>D.position)))),[se,s]),[S,P]=ge.useState([]),[N,x]=ge.useState(!1),[M,C]=ge.useState(!1),[Me,He]=ge.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ye=ge.useRef(null),Ne=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=ge.useRef(null),pe=ge.useRef(!1),ne=ge.useCallback(D=>{fe(K=>{var he;return(he=K.find(ve=>ve.id===D.id))!=null&&he.delete||gr.dismiss(D.id),K.filter(({id:ve})=>ve!==D.id)})},[]);return ge.useEffect(()=>gr.subscribe(D=>{if(D.dismiss){requestAnimationFrame(()=>{fe(K=>K.map(he=>he.id===D.id?{...he,delete:!0}:he))});return}setTimeout(()=>{oU.flushSync(()=>{fe(K=>{const he=K.findIndex(ve=>ve.id===D.id);return he!==-1?[...K.slice(0,he),{...K[he],...D},...K.slice(he+1)]:[D,...K]})})})}),[se]),ge.useEffect(()=>{if(g!=="system"){He(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?He("dark"):He("light")),typeof window>"u")return;const D=window.matchMedia("(prefers-color-scheme: dark)");try{D.addEventListener("change",({matches:K})=>{He(K?"dark":"light")})}catch{D.addListener(({matches:he})=>{try{He(he?"dark":"light")}catch(ve){console.error(ve)}})}},[g]),ge.useEffect(()=>{se.length<=1&&x(!1)},[se]),ge.useEffect(()=>{const D=K=>{var he;if(a.every(we=>K[we]||K.code===we)){var Ee;x(!0),(Ee=ye.current)==null||Ee.focus()}K.code==="Escape"&&(document.activeElement===ye.current||(he=ye.current)!=null&&he.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)},[a]),ge.useEffect(()=>{if(ye.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,pe.current=!1)}},[ye.current]),ge.createElement("section",{ref:t,"aria-label":`${ae} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},T.map((D,K)=>{var he;const[ve,Ee]=D.split("-");return se.length?ge.createElement("ol",{key:D,dir:J==="auto"?PT():J,tabIndex:-1,ref:ye,className:f,"data-sonner-toaster":!0,"data-sonner-theme":Me,"data-y-position":ve,"data-lifted":N&&se.length>1&&!l,"data-x-position":Ee,style:{"--front-toast-height":`${((he=S[0])==null?void 0:he.height)||0}px`,"--width":`${AU}px`,"--gap":`${G}px`,...V,...DU(p,v)},onBlur:we=>{pe.current&&!we.currentTarget.contains(we.relatedTarget)&&(pe.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||pe.current||(pe.current=!0,ee.current=we.relatedTarget)},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{M||x(!1)},onDragEnd:()=>x(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||C(!0)},onPointerUp:()=>C(!1)},se.filter(we=>!we.position&&K===0||we.position===D).map((we,Ke)=>{var je,st;return ge.createElement(xU,{key:we.id,icons:Z,index:Ke,toast:we,defaultRichColors:E,duration:(je=O==null?void 0:O.duration)!=null?je:R,className:O==null?void 0:O.className,descriptionClassName:O==null?void 0:O.descriptionClassName,invert:r,visibleToasts:U,closeButton:(st=O==null?void 0:O.closeButton)!=null?st:c,interacting:M,position:D,style:O==null?void 0:O.style,unstyled:O==null?void 0:O.unstyled,classNames:O==null?void 0:O.classNames,cancelButtonStyle:O==null?void 0:O.cancelButtonStyle,actionButtonStyle:O==null?void 0:O.actionButtonStyle,closeButtonAriaLabel:O==null?void 0:O.closeButtonAriaLabel,removeToast:ne,toasts:se.filter(Mt=>Mt.position==we.position),heights:S.filter(Mt=>Mt.position==we.position),setHeights:P,expandByDefault:l,gap:G,expanded:N,swipeDirections:e.swipeDirections})})):null}))}),OU=({...n})=>{const{theme:e="system"}=iU();return mi.jsx(NU,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...n})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VU="/firebase-messaging-sw.js",LU="/firebase-cloud-messaging-push-scope",IP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",MU="https://fcmregistrations.googleapis.com/v1",TP="google.c.a.c_id",FU="google.c.a.c_l",UU="google.c.a.ts",BU="google.c.a.e",CT=1e4;var bT;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(bT||(bT={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var kc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(kc||(kc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function zU(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),s=new Uint8Array(r.length);for(let a=0;a<r.length;++a)s[a]=r.charCodeAt(a);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="fcm_token_details_db",jU=5,kT="fcm_token_object_Store";async function $U(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(jm))return null;let e=null;return(await cf(jm,jU,{upgrade:async(r,s,a,l)=>{if(s<2||!r.objectStoreNames.contains(kT))return;const c=l.objectStore(kT),f=await c.index("fcmSenderId").get(n);if(await c.clear(),!!f){if(s===2){const p=f;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:p.createTime??Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:hs(p.vapidKey)}}}else if(s===3){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:hs(p.auth),p256dh:hs(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:hs(p.vapidKey)}}}else if(s===4){const p=f;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:hs(p.auth),p256dh:hs(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:hs(p.vapidKey)}}}}}})).close(),await Sm(jm),await Sm("fcm_vapid_details_db"),await Sm("undefined"),HU(e)?e:null}function HU(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qU="firebase-messaging-database",WU=1,xc="firebase-messaging-store";let $m=null;function SP(){return $m||($m=cf(qU,WU,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(xc)}}})),$m}async function KU(n){const e=RP(n),r=await(await SP()).transaction(xc).objectStore(xc).get(e);if(r)return r;{const s=await $U(n.appConfig.senderId);if(s)return await l_(n,s),s}}async function l_(n,e){const t=RP(n),s=(await SP()).transaction(xc,"readwrite");return await s.objectStore(xc).put(e,t),await s.done,e}function RP({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GU={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Lr=new vo("messaging","Messaging",GU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QU(n,e){const t=await c_(n),r=AP(e),s={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=await(await fetch(u_(n.appConfig),s)).json()}catch(l){throw Lr.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(a.error){const l=a.error.message;throw Lr.create("token-subscribe-failed",{errorInfo:l})}if(!a.token)throw Lr.create("token-subscribe-no-token");return a.token}async function YU(n,e){const t=await c_(n),r=AP(e.subscriptionOptions),s={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${u_(n.appConfig)}/${e.token}`,s)).json()}catch(l){throw Lr.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(a.error){const l=a.error.message;throw Lr.create("token-update-failed",{errorInfo:l})}if(!a.token)throw Lr.create("token-update-no-token");return a.token}async function JU(n,e){const r={method:"DELETE",headers:await c_(n)};try{const a=await(await fetch(`${u_(n.appConfig)}/${e}`,r)).json();if(a.error){const l=a.error.message;throw Lr.create("token-unsubscribe-failed",{errorInfo:l})}}catch(s){throw Lr.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function u_({projectId:n}){return`${MU}/projects/${n}/registrations`}async function c_({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function AP({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const s={web:{endpoint:t,auth:e,p256dh:n}};return r!==IP&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=10080*60*1e3;async function ZU(n){const e=await t6(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:hs(e.getKey("auth")),p256dh:hs(e.getKey("p256dh"))},r=await KU(n.firebaseDependencies);if(r){if(n6(r.subscriptionOptions,t))return Date.now()>=r.createTime+XU?e6(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await JU(n.firebaseDependencies,r.token)}catch(s){console.warn(s)}return xT(n.firebaseDependencies,t)}else return xT(n.firebaseDependencies,t)}async function e6(n,e){try{const t=await YU(n.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await l_(n.firebaseDependencies,r),t}catch(t){throw t}}async function xT(n,e){const r={token:await QU(n,e),createTime:Date.now(),subscriptionOptions:e};return await l_(n,r),r.token}async function t6(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:zU(e)})}function n6(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,s=e.auth===n.auth,a=e.p256dh===n.p256dh;return t&&r&&s&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return r6(e,n),i6(e,n),s6(e,n),e}function r6(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const s=e.notification.image;s&&(n.notification.image=s);const a=e.notification.icon;a&&(n.notification.icon=a)}function i6(n,e){e.data&&(n.data=e.data)}function s6(n,e){var s,a,l,c;if(!e.fcmOptions&&!((s=e.notification)!=null&&s.click_action))return;n.fcmOptions={};const t=((a=e.fcmOptions)==null?void 0:a.link)??((l=e.notification)==null?void 0:l.click_action);t&&(n.fcmOptions.link=t);const r=(c=e.fcmOptions)==null?void 0:c.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(n){return typeof n=="object"&&!!n&&TP in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a6(n){if(!n||!n.options)throw Hm("App Configuration Object");if(!n.name)throw Hm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Hm(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Hm(n){return Lr.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=a6(e);this.firebaseDependencies={app:e,appConfig:s,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6(n){try{n.swRegistration=await navigator.serviceWorker.register(VU,{scope:LU}),n.swRegistration.update().catch(()=>{}),await c6(n.swRegistration)}catch(e){throw Lr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function c6(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${CT} ms`)),CT),s=n.installing||n.waiting;n.active?(clearTimeout(r),e()):s?s.onstatechange=a=>{var l;((l=a.target)==null?void 0:l.state)==="activated"&&(s.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d6(n,e){if(!e&&!n.swRegistration&&await u6(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Lr.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=IP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6(n,e){if(!navigator)throw Lr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Lr.create("permission-blocked");return await h6(n,e==null?void 0:e.vapidKey),await d6(n,e==null?void 0:e.serviceWorkerRegistration),ZU(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(n,e,t){const r=m6(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[TP],message_name:t[FU],message_time:t[UU],message_device_time:Math.floor(Date.now()/1e3)})}function m6(n){switch(n){case kc.NOTIFICATION_CLICKED:return"notification_open";case kc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g6(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===kc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(DT(t)):n.onMessageHandler.next(DT(t)));const r=t.data;o6(r)&&r[BU]==="1"&&await p6(n,t.messageType,r)}const NT="@firebase/messaging",OT="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6=n=>{const e=new l6(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>g6(e,t)),e},_6=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>f6(e,r)}};function v6(){Mr(new vr("messaging",y6,"PUBLIC")),Mr(new vr("messaging-internal",_6,"PRIVATE")),Wn(NT,OT),Wn(NT,OT,"esm2020")}v6();const w6=async()=>{};function E6(){return q.useEffect(()=>{w6()},[]),mi.jsxs(eU,{children:[mi.jsxs("div",{className:"min-h-screen flex flex-col",children:[mi.jsx("div",{className:"flex-1",children:mi.jsx(Pb,{router:vk})}),mi.jsx("footer",{className:"text-center text-gray-500 text-xs py-3",children:"Developed by esystemlk"})]}),mi.jsx(OU,{})]})}z1.createRoot(document.getElementById("root")).render(mi.jsx(E6,{}));export{fh as F,oU as R,ab as a,I6 as b,sU as c,ge as d,j1 as e,A6 as f,x6 as g,vA as h,oM as i,mi as j,N6 as k,yP as l,k6 as m,L6 as n,b6 as o,M6 as p,P6 as q,q as r,aM as s,U6 as t,F6 as u,O6 as v,C6 as w,V6 as x,D6 as y};
