import{r as i,j as e,b as Fe,u as Ae,a as Oe,t as k}from"./index-BToGKl4C.js";import{g as Me,a as Te,r as Y,u as Ge}from"./db-nqeXl3hD.js";import{u as S,e as I,S as Le,B as E,C as O,d as M,a as X,b as Z}from"./card-D3FJTV3E.js";import{L as P}from"./label-4GA2Mnnj.js";import{u as Q,c as N,a as G,b as $e}from"./index-C2-HvyGl.js";import{P as C}from"./index-CpMpevxU.js";import{u as Ve,R as Be,I as We,c as ee,P as A,a as T}from"./index-Bym7oP2B.js";import{u as ze,a as Ue,C as qe}from"./index-BqcXzDUE.js";import{c as L}from"./createLucideIcon-DePTzsAY.js";import{I as _}from"./input-D88w0eFp.js";import{P as He,h as Ke,R as Ye,u as Xe,F as Ze,D as Je}from"./index-DkKjMSK8.js";import{A as Qe}from"./arrow-left-BUPTS_F6.js";import{C as et}from"./calendar-BPRpVTBD.js";import{C as tt}from"./credit-card-zELxOLdy.js";import"./mockData-meiYRdoj.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],at=L("circle",ot);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],rt=L("upload",st);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],it=L("x",nt);var $="Radio",[ct,te]=G($),[lt,dt]=ct($),oe=i.forwardRef((t,o)=>{const{__scopeRadio:s,name:n,checked:r=!1,required:a,disabled:c,value:l="on",onCheck:u,form:p,...g}=t,[m,h]=i.useState(null),f=S(o,b=>h(b)),v=i.useRef(!1),y=m?p||!!m.closest("form"):!0;return e.jsxs(lt,{scope:s,checked:r,disabled:c,children:[e.jsx(C.button,{type:"button",role:"radio","aria-checked":r,"data-state":re(r),"data-disabled":c?"":void 0,disabled:c,value:l,...g,ref:f,onClick:N(t.onClick,b=>{r||u==null||u(),y&&(v.current=b.isPropagationStopped(),v.current||b.stopPropagation())})}),y&&e.jsx(ut,{control:m,bubbles:!v.current,name:n,value:l,checked:r,required:a,disabled:c,form:p,style:{transform:"translateX(-100%)"}})]})});oe.displayName=$;var ae="RadioIndicator",se=i.forwardRef((t,o)=>{const{__scopeRadio:s,forceMount:n,...r}=t,a=dt(ae,s);return e.jsx(A,{present:n||a.checked,children:e.jsx(C.span,{"data-state":re(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:o})})});se.displayName=ae;var ut=t=>{const{control:o,checked:s,bubbles:n=!0,...r}=t,a=i.useRef(null),c=ze(s),l=Ue(o);return i.useEffect(()=>{const u=a.current,p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(c!==s&&m){const h=new Event("click",{bubbles:n});m.call(u,s),u.dispatchEvent(h)}},[c,s,n]),e.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:s,...r,tabIndex:-1,ref:a,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function re(t){return t?"checked":"unchecked"}var pt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],V="RadioGroup",[mt]=G(V,[ee,te]),ne=ee(),ie=te(),[ft,gt]=mt(V),ce=i.forwardRef((t,o)=>{const{__scopeRadioGroup:s,name:n,defaultValue:r,value:a,required:c=!1,disabled:l=!1,orientation:u,dir:p,loop:g=!0,onValueChange:m,...h}=t,f=ne(s),v=Ve(p),[y,b]=Q({prop:a,defaultProp:r,onChange:m});return e.jsx(ft,{scope:s,name:n,required:c,disabled:l,value:y,onValueChange:b,children:e.jsx(Be,{asChild:!0,...f,orientation:u,dir:v,loop:g,children:e.jsx(C.div,{role:"radiogroup","aria-required":c,"aria-orientation":u,"data-disabled":l?"":void 0,dir:v,...h,ref:o})})})});ce.displayName=V;var le="RadioGroupItem",de=i.forwardRef((t,o)=>{const{__scopeRadioGroup:s,disabled:n,...r}=t,a=gt(le,s),c=a.disabled||n,l=ne(s),u=ie(s),p=i.useRef(null),g=S(o,p),m=a.value===r.value,h=i.useRef(!1);return i.useEffect(()=>{const f=y=>{pt.includes(y.key)&&(h.current=!0)},v=()=>h.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",v)}},[]),e.jsx(We,{asChild:!0,...l,focusable:!c,active:m,children:e.jsx(oe,{disabled:c,required:a.required,checked:m,...u,...r,name:a.name,ref:g,onCheck:()=>a.onValueChange(r.value),onKeyDown:N(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:N(r.onFocus,()=>{var f;h.current&&((f=p.current)==null||f.click())})})})});de.displayName=le;var xt="RadioGroupIndicator",ue=i.forwardRef((t,o)=>{const{__scopeRadioGroup:s,...n}=t,r=ie(s);return e.jsx(se,{...r,...n,ref:o})});ue.displayName=xt;var ht=ce,vt=de,jt=ue;function yt({className:t,...o}){return e.jsx(ht,{"data-slot":"radio-group",className:I("grid gap-3",t),...o})}function J({className:t,...o}){return e.jsx(vt,{"data-slot":"radio-group-item",className:I("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...o,children:e.jsx(jt,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(at,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}var B="Dialog",[pe]=G(B),[bt,j]=pe(B),me=t=>{const{__scopeDialog:o,children:s,open:n,defaultOpen:r,onOpenChange:a,modal:c=!0}=t,l=i.useRef(null),u=i.useRef(null),[p=!1,g]=Q({prop:n,defaultProp:r,onChange:a});return e.jsx(bt,{scope:o,triggerRef:l,contentRef:u,contentId:T(),titleId:T(),descriptionId:T(),open:p,onOpenChange:g,onOpenToggle:i.useCallback(()=>g(m=>!m),[g]),modal:c,children:s})};me.displayName=B;var fe="DialogTrigger",Nt=i.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,r=j(fe,s),a=S(o,r.triggerRef);return e.jsx(C.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":U(r.open),...n,ref:a,onClick:N(t.onClick,r.onOpenToggle)})});Nt.displayName=fe;var W="DialogPortal",[Ct,ge]=pe(W,{forceMount:void 0}),xe=t=>{const{__scopeDialog:o,forceMount:s,children:n,container:r}=t,a=j(W,o);return e.jsx(Ct,{scope:o,forceMount:s,children:i.Children.map(n,c=>e.jsx(A,{present:s||a.open,children:e.jsx(He,{asChild:!0,container:r,children:c})}))})};xe.displayName=W;var F="DialogOverlay",he=i.forwardRef((t,o)=>{const s=ge(F,t.__scopeDialog),{forceMount:n=s.forceMount,...r}=t,a=j(F,t.__scopeDialog);return a.modal?e.jsx(A,{present:n||a.open,children:e.jsx(Rt,{...r,ref:o})}):null});he.displayName=F;var Rt=i.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,r=j(F,s);return e.jsx(Ye,{as:Le,allowPinchZoom:!0,shards:[r.contentRef],children:e.jsx(C.div,{"data-state":U(r.open),...n,ref:o,style:{pointerEvents:"auto",...n.style}})})}),w="DialogContent",ve=i.forwardRef((t,o)=>{const s=ge(w,t.__scopeDialog),{forceMount:n=s.forceMount,...r}=t,a=j(w,t.__scopeDialog);return e.jsx(A,{present:n||a.open,children:a.modal?e.jsx(Dt,{...r,ref:o}):e.jsx(Pt,{...r,ref:o})})});ve.displayName=w;var Dt=i.forwardRef((t,o)=>{const s=j(w,t.__scopeDialog),n=i.useRef(null),r=S(o,s.contentRef,n);return i.useEffect(()=>{const a=n.current;if(a)return Ke(a)},[]),e.jsx(je,{...t,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:N(t.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=s.triggerRef.current)==null||c.focus()}),onPointerDownOutside:N(t.onPointerDownOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0;(c.button===2||l)&&a.preventDefault()}),onFocusOutside:N(t.onFocusOutside,a=>a.preventDefault())})}),Pt=i.forwardRef((t,o)=>{const s=j(w,t.__scopeDialog),n=i.useRef(!1),r=i.useRef(!1);return e.jsx(je,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,l;(c=t.onCloseAutoFocus)==null||c.call(t,a),a.defaultPrevented||(n.current||(l=s.triggerRef.current)==null||l.focus(),a.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:a=>{var u,p;(u=t.onInteractOutside)==null||u.call(t,a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=a.target;((p=s.triggerRef.current)==null?void 0:p.contains(c))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&r.current&&a.preventDefault()}})}),je=i.forwardRef((t,o)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:a,...c}=t,l=j(w,s),u=i.useRef(null),p=S(o,u);return Xe(),e.jsxs(e.Fragment,{children:[e.jsx(Ze,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:a,children:e.jsx(Je,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":U(l.open),...c,ref:p,onDismiss:()=>l.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(wt,{titleId:l.titleId}),e.jsx(kt,{contentRef:u,descriptionId:l.descriptionId})]})]})}),z="DialogTitle",ye=i.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,r=j(z,s);return e.jsx(C.h2,{id:r.titleId,...n,ref:o})});ye.displayName=z;var be="DialogDescription",Ne=i.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,r=j(be,s);return e.jsx(C.p,{id:r.descriptionId,...n,ref:o})});Ne.displayName=be;var Ce="DialogClose",Re=i.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,r=j(Ce,s);return e.jsx(C.button,{type:"button",...n,ref:o,onClick:N(t.onClick,()=>r.onOpenChange(!1))})});Re.displayName=Ce;function U(t){return t?"open":"closed"}var De="DialogTitleWarning",[ro,Pe]=$e(De,{contentName:w,titleName:z,docsSlug:"dialog"}),wt=({titleId:t})=>{const o=Pe(De),s=`\`${o.contentName}\` requires a \`${o.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${o.docsSlug}`;return i.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},It="DialogDescriptionWarning",kt=({contentRef:t,descriptionId:o})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Pe(It).contentName}}.`;return i.useEffect(()=>{var a;const r=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");o&&r&&(document.getElementById(o)||console.warn(n))},[n,t,o]),null},Et=me,St=xe,_t=he,Ft=ve,At=ye,Ot=Ne,Mt=Re;function Tt({...t}){return e.jsx(Et,{"data-slot":"dialog",...t})}function Gt({...t}){return e.jsx(St,{"data-slot":"dialog-portal",...t})}function Lt({className:t,...o}){return e.jsx(_t,{"data-slot":"dialog-overlay",className:I("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...o})}function $t({className:t,children:o,...s}){return e.jsxs(Gt,{"data-slot":"dialog-portal",children:[e.jsx(Lt,{}),e.jsxs(Ft,{"data-slot":"dialog-content",className:I("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...s,children:[o,e.jsxs(Mt,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(it,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Vt({className:t,...o}){return e.jsx("div",{"data-slot":"dialog-header",className:I("flex flex-col gap-2 text-center sm:text-left",t),...o})}function Bt({className:t,...o}){return e.jsx(At,{"data-slot":"dialog-title",className:I("text-lg leading-none font-semibold",t),...o})}function Wt({className:t,...o}){return e.jsx(Ot,{"data-slot":"dialog-description",className:I("text-muted-foreground text-sm",t),...o})}function no(){const{lecturerId:t}=Fe(),{user:o}=Ae(),s=Oe(),[n,r]=i.useState(""),[a,c]=i.useState(""),[l,u]=i.useState("VISA"),[p,g]=i.useState(!1),[m,h]=i.useState(null),[f,v]=i.useState(""),[y,b]=i.useState("");i.useEffect(()=>{o||s("/login")},[o,s]);const[x,we]=i.useState(null),[q,Ie]=i.useState([]);if(i.useEffect(()=>{t&&(Me(t).then(we),Te(t).then(Ie))},[t]),!x)return e.jsx("div",{children:"Lecturer not found"});const ke=q.slice(0,7),R=q.find(d=>d.date===n),H=(R==null?void 0:R.timeSlots.filter(d=>d.available))||[],Ee=d=>{d.target.files&&d.target.files[0]&&h(d.target.files[0])},Se=()=>{if(!n||!a){k.error("Please select a date and time");return}g(!0)},_e=async()=>{if(l==="VISA"){if(!f||f.length<16){k.error("Please enter a valid card number");return}const d={studentId:o.id,studentName:o.name,lecturerId:x.id,lecturerName:x.name,subject:x.subject,date:n,time:a,status:"CONFIRMED",paymentMethod:"VISA",paymentStatus:"APPROVED",price:x.price};R&&await Y(R.id,y,d),k.success("Booking confirmed! Payment successful."),g(!1),s("/student/bookings")}else{if(!m){k.error("Please upload a payment receipt");return}let d="";try{d=await Ge(o.id,m)}catch{}const D={studentId:o.id,studentName:o.name,lecturerId:x.id,lecturerName:x.name,subject:x.subject,date:n,time:a,status:"PENDING",paymentMethod:"RECEIPT",paymentStatus:"PENDING",receiptUrl:d||void 0,price:x.price};R&&await Y(R.id,y,D),k.success("Booking submitted! Waiting for admin approval."),g(!1),s("/student/bookings")}};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f8f9fa"},children:[e.jsx("div",{className:"sticky top-0 z-10 shadow-sm",style:{backgroundColor:"#0066FF"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>s(`/student/lecturer/${t}`),className:"text-white hover:bg-white/20",children:e.jsx(Qe,{className:"w-5 h-5"})}),e.jsx("h1",{className:"text-white font-semibold",children:"Book a Class"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsx(O,{className:"mb-6",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:x.avatar,alt:x.name,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold text-lg",children:x.name}),e.jsx("p",{className:"text-sm",style:{color:"#0066FF"},children:x.subject}),e.jsxs("p",{className:"text-sm font-semibold mt-1",children:["$",x.price," / hour"]})]})]})})}),e.jsxs(O,{className:"mb-6",children:[e.jsx(X,{children:e.jsxs(Z,{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-5 h-5",style:{color:"#0066FF"}}),"Select Date"]})}),e.jsx(M,{children:e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ke.map(d=>{const D=new Date(d.date),K=n===d.date;return e.jsxs(E,{variant:K?"default":"outline",className:"h-auto py-3 flex flex-col",style:K?{backgroundColor:"#0066FF",color:"white"}:{},onClick:()=>{r(d.date),c("")},children:[e.jsx("span",{className:"text-sm font-semibold",children:D.toLocaleDateString("en-US",{weekday:"short"})}),e.jsx("span",{className:"text-xs",children:D.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},d.id)})})})]}),n&&e.jsxs(O,{className:"mb-6",children:[e.jsx(X,{children:e.jsx(Z,{style:{color:"#0066FF"},children:"Select Time"})}),e.jsxs(M,{children:[e.jsx("div",{className:"grid grid-cols-2 gap-3",children:H.map(d=>{const D=a===d.time;return e.jsx(E,{variant:D?"default":"outline",style:D?{backgroundColor:"#FFD700",color:"#000"}:{},onClick:()=>{c(d.time),b(d.id)},children:d.time},d.id)})}),H.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No available slots for this date"})]})]}),n&&a&&e.jsx(E,{className:"w-full h-12 text-white text-lg",style:{backgroundColor:"#0066FF"},onClick:Se,children:"Proceed to Payment"})]}),e.jsx(Tt,{open:p,onOpenChange:g,children:e.jsxs($t,{className:"max-w-md",children:[e.jsxs(Vt,{children:[e.jsx(Bt,{style:{color:"#0066FF"},children:"Complete Payment"}),e.jsxs(Wt,{children:["Total Amount: $",x.price]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(P,{className:"mb-3 block",children:"Payment Method"}),e.jsxs(yt,{value:l,onValueChange:d=>u(d),children:[e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx(J,{value:"VISA",id:"visa"}),e.jsxs(P,{htmlFor:"visa",className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx(tt,{className:"w-5 h-5",style:{color:"#0066FF"}}),"Pay with Visa Card"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 p-3 border rounded-lg",children:[e.jsx(J,{value:"RECEIPT",id:"receipt"}),e.jsxs(P,{htmlFor:"receipt",className:"flex items-center gap-2 cursor-pointer flex-1",children:[e.jsx(rt,{className:"w-5 h-5",style:{color:"#FFD700"}}),"Upload Payment Receipt"]})]})]})]}),l==="VISA"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(_,{id:"cardNumber",placeholder:"1234 5678 9012 3456",value:f,onChange:d=>v(d.target.value.replace(/\D/g,"")),maxLength:16}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(P,{htmlFor:"expiry",children:"Expiry Date"}),e.jsx(_,{id:"expiry",placeholder:"MM/YY"})]}),e.jsxs("div",{children:[e.jsx(P,{htmlFor:"cvv",children:"CVV"}),e.jsx(_,{id:"cvv",placeholder:"123",maxLength:3})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(P,{htmlFor:"receipt",children:"Upload Receipt (Image or PDF)"}),e.jsx(_,{id:"receipt",type:"file",accept:"image/*,.pdf",onChange:Ee}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-green-600",children:[e.jsx(qe,{className:"w-4 h-4"}),m.name]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Your booking will be pending until admin approves the payment"})]}),e.jsx(E,{className:"w-full text-white",style:{backgroundColor:"#0066FF"},onClick:_e,children:l==="VISA"?"Pay Now":"Submit Booking"})]})]})})]})}export{no as default};
