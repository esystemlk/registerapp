import{u as B,a as L,r as c,j as e}from"./index-BToGKl4C.js";import{l as I,c as R}from"./db-nqeXl3hD.js";import{B as i,C as d,d as x,a as f,b as N}from"./card-D3FJTV3E.js";import{B as O}from"./badge-93OQ6PlQ.js";import{L as T}from"./log-out-DFYYjqEx.js";import{C as U}from"./calendar-BPRpVTBD.js";import{C as z}from"./clock-izyGzFpI.js";import{U as y}from"./users-CI1jHPHp.js";import{S as A}from"./settings-DrNu1FeT.js";import"./mockData-meiYRdoj.js";import"./createLucideIcon-DePTzsAY.js";function Z(){const{user:t,logout:D}=B(),m=L(),[l,j]=c.useState(new Date);c.useEffect(()=>{(!t||!["LECTURER","ADMIN","SUPER_ADMIN","DEVELOPER"].includes(t.role))&&m("/login")},[t,m]);const b=()=>{D(),m("/login")},[o,w]=c.useState(void 0);c.useEffect(()=>{I().then(s=>{const n=s.find(a=>a.userId===(t==null?void 0:t.id));w(n)})},[t==null?void 0:t.id]);const[h,v]=c.useState([]);c.useEffect(()=>{const s=o==null?void 0:o.id;s&&R(s).then(v)},[o==null?void 0:o.id]);const g=h.filter(s=>{const n=new Date(s.date),a=new Date;return n.toDateString()===a.toDateString()&&s.status==="CONFIRMED"}),C=h.filter(s=>new Date(s.date)>new Date&&s.status==="CONFIRMED"),F=(s=>{const n=s.getFullYear(),a=s.getMonth(),p=new Date(n,a,1),S=new Date(n,a+1,0).getDate(),E=p.getDay(),u=[];for(let r=0;r<E;r++)u.push(null);for(let r=1;r<=S;r++)u.push(r);return u})(l),k=l.toLocaleString("default",{month:"long",year:"numeric"}),M=s=>{if(!s)return!1;const n=new Date(l.getFullYear(),l.getMonth(),s);return h.some(a=>new Date(a.date).toDateString()===n.toDateString()&&a.status==="CONFIRMED")};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f8f9fa"},children:[e.jsx("div",{className:"sticky top-0 z-10 shadow-sm",style:{backgroundColor:"#0066FF"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"/logo.png",alt:"smartlabs",className:"w-10 h-10 rounded-full bg-white object-cover"}),e.jsx("p",{className:"text-white/80 text-xs",children:"Lecturer Portal"})]}),e.jsx(i,{variant:"ghost",size:"sm",onClick:b,className:"text-white hover:bg-white/20",children:e.jsx(T,{className:"w-4 h-4"})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-1",style:{color:"#0066FF"},children:["Welcome, ",t==null?void 0:t.name,"!"]}),e.jsx("p",{className:"text-gray-600",children:"Manage your classes and availability"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsx(d,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(U,{className:"w-6 h-6 mx-auto mb-2",style:{color:"#0066FF"}}),e.jsx("p",{className:"text-2xl font-bold",children:g.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Today"})]})}),e.jsx(d,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(z,{className:"w-6 h-6 mx-auto mb-2",style:{color:"#FFD700"}}),e.jsx("p",{className:"text-2xl font-bold",children:C.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Upcoming"})]})}),e.jsx(d,{children:e.jsxs(x,{className:"p-4 text-center",children:[e.jsx(y,{className:"w-6 h-6 mx-auto mb-2",style:{color:"#10b981"}}),e.jsx("p",{className:"text-2xl font-bold",children:h.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs(i,{onClick:()=>m("/lecturer/availability"),className:"h-20 flex flex-col gap-2 text-white",style:{backgroundColor:"#0066FF"},children:[e.jsx(A,{className:"w-6 h-6"}),e.jsx("span",{children:"Set Availability"})]}),e.jsxs(i,{variant:"outline",className:"h-20 flex flex-col gap-2",style:{borderColor:"#FFD700",color:"#0066FF"},children:[e.jsx(y,{className:"w-6 h-6"}),e.jsx("span",{children:"My Students"})]})]}),e.jsxs(d,{className:"mb-6",children:[e.jsxs(f,{children:[e.jsxs(N,{className:"flex items-center justify-between",children:[e.jsx("span",{style:{color:"#0066FF"},children:"Calendar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{const s=new Date(l);s.setMonth(s.getMonth()-1),j(s)},children:"←"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{const s=new Date(l);s.setMonth(s.getMonth()+1),j(s)},children:"→"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:k})]}),e.jsxs(x,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:F.map((s,n)=>{const a=M(s);return e.jsx("div",{className:`aspect-square flex items-center justify-center text-sm rounded ${s?a?"font-semibold text-white":"text-gray-700":""}`,style:a?{backgroundColor:"#0066FF"}:s?{backgroundColor:"#f9fafb"}:{},children:s},n)})})]})]}),e.jsxs(d,{children:[e.jsx(f,{children:e.jsx(N,{style:{color:"#0066FF"},children:"Today's Classes"})}),e.jsx(x,{children:g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(s=>e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:s.studentName}),e.jsx(O,{style:{backgroundColor:"#10b981",color:"white"},children:s.time})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.subject})]},s.id))}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No classes scheduled for today"})})]})]})]})}export{Z as default};
