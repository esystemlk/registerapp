const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-RXVlXTsy.js","assets/input-Bp-9N0Nk.js","assets/label-CKOw0SqW.js","assets/index-oQduYenF.js","assets/card-CoGWnkv-.js","assets/Dashboard-ChRlrKe4.js","assets/HeaderBar-D0LKnIUw.js","assets/calendar-BK-64CZt.js","assets/createLucideIcon-BGnTon0B.js","assets/star-XAYAVMm6.js","assets/dollar-sign-DAQBw-uW.js","assets/LecturerDetails-QuGkwy4K.js","assets/badge-C8nEnegs.js","assets/arrow-left-DkjRGO3g.js","assets/clock-DX7MeWmh.js","assets/BookClass-DCeCV5Fu.js","assets/radio-group-CEsQC9ue.js","assets/index-i2ZupbD7.js","assets/index-9O4Fc58M.js","assets/index-DiL10ndF.js","assets/index-B-eIdhW6.js","assets/credit-card-E6UXsCxd.js","assets/check-7XvYrTOL.js","assets/MyBookings-BfoHQ1Ms.js","assets/tabs-BH9iIQA7.js","assets/calendar-CpbuF6B_.js","assets/file-text-CY4PZNLJ.js","assets/Dashboard-BmRd4Cn9.js","assets/users-WD4XIn4k.js","assets/settings-Q1E9ex78.js","assets/Availability-qaVplco3.js","assets/circle-alert-Du1OZuiH.js","assets/Dashboard-Itlqqtnw.js","assets/circle-x-C7FXVuQ7.js","assets/Dashboard-D66xU0qO.js","assets/Dashboard-Bhn-iYfx.js","assets/NotFound-DnyeAxE8.js","assets/Register-11l6e-Db.js","assets/Onboarding-_iXvMQoH.js","assets/Thread-BYVNX0sj.js","assets/Analytics-CnyjjtnP.js","assets/BookingDetails-FA5tLluU.js","assets/KYCReview-Cc_oRg4b.js","assets/SupportInbox-DE6k4jXh.js","assets/Support-Cpy2Anx6.js"])))=>i.map(i=>d[i]);
function s1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var vB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Hm={exports:{}},Ju={},qm={exports:{}},it={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pE;function o1(){if(pE)return it;pE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),g=Symbol.iterator;function w(O){return O===null||typeof O!="object"?null:(O=g&&O[g]||O["@@iterator"],typeof O=="function"?O:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,L={};function D(O,G,re){this.props=O,this.context=G,this.refs=L,this.updater=re||b}D.prototype.isReactComponent={},D.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},D.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function X(){}X.prototype=D.prototype;function K(O,G,re){this.props=O,this.context=G,this.refs=L,this.updater=re||b}var Z=K.prototype=new X;Z.constructor=K,k(Z,D.prototype),Z.isPureReactComponent=!0;var oe=Array.isArray,ie=Object.prototype.hasOwnProperty,ue={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(O,G,re){var de,_e={},we=null,Ce=null;if(G!=null)for(de in G.ref!==void 0&&(Ce=G.ref),G.key!==void 0&&(we=""+G.key),G)ie.call(G,de)&&!I.hasOwnProperty(de)&&(_e[de]=G[de]);var qe=arguments.length-2;if(qe===1)_e.children=re;else if(1<qe){for(var Ze=Array(qe),kt=0;kt<qe;kt++)Ze[kt]=arguments[kt+2];_e.children=Ze}if(O&&O.defaultProps)for(de in qe=O.defaultProps,qe)_e[de]===void 0&&(_e[de]=qe[de]);return{$$typeof:n,type:O,key:we,ref:Ce,props:_e,_owner:ue.current}}function A(O,G){return{$$typeof:n,type:O.type,key:G,ref:O.ref,props:O.props,_owner:O._owner}}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function N(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(re){return G[re]})}var F=/\/+/g;function P(O,G){return typeof O=="object"&&O!==null&&O.key!=null?N(""+O.key):G.toString(36)}function Be(O,G,re,de,_e){var we=typeof O;(we==="undefined"||we==="boolean")&&(O=null);var Ce=!1;if(O===null)Ce=!0;else switch(we){case"string":case"number":Ce=!0;break;case"object":switch(O.$$typeof){case n:case e:Ce=!0}}if(Ce)return Ce=O,_e=_e(Ce),O=de===""?"."+P(Ce,0):de,oe(_e)?(re="",O!=null&&(re=O.replace(F,"$&/")+"/"),Be(_e,G,re,"",function(kt){return kt})):_e!=null&&(V(_e)&&(_e=A(_e,re+(!_e.key||Ce&&Ce.key===_e.key?"":(""+_e.key).replace(F,"$&/")+"/")+O)),G.push(_e)),1;if(Ce=0,de=de===""?".":de+":",oe(O))for(var qe=0;qe<O.length;qe++){we=O[qe];var Ze=de+P(we,qe);Ce+=Be(we,G,re,Ze,_e)}else if(Ze=w(O),typeof Ze=="function")for(O=Ze.call(O),qe=0;!(we=O.next()).done;)we=we.value,Ze=de+P(we,qe++),Ce+=Be(we,G,re,Ze,_e);else if(we==="object")throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ce}function ze(O,G,re){if(O==null)return O;var de=[],_e=0;return Be(O,de,"","",function(we){return G.call(re,we,_e++)}),de}function fe(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(re){(O._status===0||O._status===-1)&&(O._status=1,O._result=re)},function(re){(O._status===0||O._status===-1)&&(O._status=2,O._result=re)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var be={current:null},$={transition:null},pe={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:$,ReactCurrentOwner:ue};function ne(){throw Error("act(...) is not supported in production builds of React.")}return it.Children={map:ze,forEach:function(O,G,re){ze(O,function(){G.apply(this,arguments)},re)},count:function(O){var G=0;return ze(O,function(){G++}),G},toArray:function(O){return ze(O,function(G){return G})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},it.Component=D,it.Fragment=t,it.Profiler=i,it.PureComponent=K,it.StrictMode=r,it.Suspense=h,it.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,it.act=ne,it.cloneElement=function(O,G,re){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var de=k({},O.props),_e=O.key,we=O.ref,Ce=O._owner;if(G!=null){if(G.ref!==void 0&&(we=G.ref,Ce=ue.current),G.key!==void 0&&(_e=""+G.key),O.type&&O.type.defaultProps)var qe=O.type.defaultProps;for(Ze in G)ie.call(G,Ze)&&!I.hasOwnProperty(Ze)&&(de[Ze]=G[Ze]===void 0&&qe!==void 0?qe[Ze]:G[Ze])}var Ze=arguments.length-2;if(Ze===1)de.children=re;else if(1<Ze){qe=Array(Ze);for(var kt=0;kt<Ze;kt++)qe[kt]=arguments[kt+2];de.children=qe}return{$$typeof:n,type:O.type,key:_e,ref:we,props:de,_owner:Ce}},it.createContext=function(O){return O={$$typeof:l,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:o,_context:O},O.Consumer=O},it.createElement=S,it.createFactory=function(O){var G=S.bind(null,O);return G.type=O,G},it.createRef=function(){return{current:null}},it.forwardRef=function(O){return{$$typeof:c,render:O}},it.isValidElement=V,it.lazy=function(O){return{$$typeof:y,_payload:{_status:-1,_result:O},_init:fe}},it.memo=function(O,G){return{$$typeof:p,type:O,compare:G===void 0?null:G}},it.startTransition=function(O){var G=$.transition;$.transition={};try{O()}finally{$.transition=G}},it.unstable_act=ne,it.useCallback=function(O,G){return be.current.useCallback(O,G)},it.useContext=function(O){return be.current.useContext(O)},it.useDebugValue=function(){},it.useDeferredValue=function(O){return be.current.useDeferredValue(O)},it.useEffect=function(O,G){return be.current.useEffect(O,G)},it.useId=function(){return be.current.useId()},it.useImperativeHandle=function(O,G,re){return be.current.useImperativeHandle(O,G,re)},it.useInsertionEffect=function(O,G){return be.current.useInsertionEffect(O,G)},it.useLayoutEffect=function(O,G){return be.current.useLayoutEffect(O,G)},it.useMemo=function(O,G){return be.current.useMemo(O,G)},it.useReducer=function(O,G,re){return be.current.useReducer(O,G,re)},it.useRef=function(O){return be.current.useRef(O)},it.useState=function(O){return be.current.useState(O)},it.useSyncExternalStore=function(O,G,re){return be.current.useSyncExternalStore(O,G,re)},it.useTransition=function(){return be.current.useTransition()},it.version="18.3.1",it}var mE;function vy(){return mE||(mE=1,qm.exports=o1()),qm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gE;function a1(){if(gE)return Ju;gE=1;var n=vy(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var y,g={},w=null,b=null;p!==void 0&&(w=""+p),h.key!==void 0&&(w=""+h.key),h.ref!==void 0&&(b=h.ref);for(y in h)r.call(h,y)&&!o.hasOwnProperty(y)&&(g[y]=h[y]);if(c&&c.defaultProps)for(y in h=c.defaultProps,h)g[y]===void 0&&(g[y]=h[y]);return{$$typeof:e,type:c,key:w,ref:b,props:g,_owner:i.current}}return Ju.Fragment=t,Ju.jsx=l,Ju.jsxs=l,Ju}var yE;function l1(){return yE||(yE=1,Hm.exports=a1()),Hm.exports}var hn=l1(),Ph={},Wm={exports:{}},xr={},Km={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE;function u1(){return vE||(vE=1,(function(n){function e($,pe){var ne=$.length;$.push(pe);e:for(;0<ne;){var O=ne-1>>>1,G=$[O];if(0<i(G,pe))$[O]=pe,$[ne]=G,ne=O;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var pe=$[0],ne=$.pop();if(ne!==pe){$[0]=ne;e:for(var O=0,G=$.length,re=G>>>1;O<re;){var de=2*(O+1)-1,_e=$[de],we=de+1,Ce=$[we];if(0>i(_e,ne))we<G&&0>i(Ce,_e)?($[O]=Ce,$[we]=ne,O=we):($[O]=_e,$[de]=ne,O=de);else if(we<G&&0>i(Ce,ne))$[O]=Ce,$[we]=ne,O=we;else break e}}return pe}function i($,pe){var ne=$.sortIndex-pe.sortIndex;return ne!==0?ne:$.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],y=1,g=null,w=3,b=!1,k=!1,L=!1,D=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z($){for(var pe=t(p);pe!==null;){if(pe.callback===null)r(p);else if(pe.startTime<=$)r(p),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(p)}}function oe($){if(L=!1,Z($),!k)if(t(h)!==null)k=!0,fe(ie);else{var pe=t(p);pe!==null&&be(oe,pe.startTime-$)}}function ie($,pe){k=!1,L&&(L=!1,X(S),S=-1),b=!0;var ne=w;try{for(Z(pe),g=t(h);g!==null&&(!(g.expirationTime>pe)||$&&!N());){var O=g.callback;if(typeof O=="function"){g.callback=null,w=g.priorityLevel;var G=O(g.expirationTime<=pe);pe=n.unstable_now(),typeof G=="function"?g.callback=G:g===t(h)&&r(h),Z(pe)}else r(h);g=t(h)}if(g!==null)var re=!0;else{var de=t(p);de!==null&&be(oe,de.startTime-pe),re=!1}return re}finally{g=null,w=ne,b=!1}}var ue=!1,I=null,S=-1,A=5,V=-1;function N(){return!(n.unstable_now()-V<A)}function F(){if(I!==null){var $=n.unstable_now();V=$;var pe=!0;try{pe=I(!0,$)}finally{pe?P():(ue=!1,I=null)}}else ue=!1}var P;if(typeof K=="function")P=function(){K(F)};else if(typeof MessageChannel<"u"){var Be=new MessageChannel,ze=Be.port2;Be.port1.onmessage=F,P=function(){ze.postMessage(null)}}else P=function(){D(F,0)};function fe($){I=$,ue||(ue=!0,P())}function be($,pe){S=D(function(){$(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){k||b||(k=!0,fe(ie))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function($){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var ne=w;w=pe;try{return $()}finally{w=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,pe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ne=w;w=$;try{return pe()}finally{w=ne}},n.unstable_scheduleCallback=function($,pe,ne){var O=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?O+ne:O):ne=O,$){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ne+G,$={id:y++,callback:pe,priorityLevel:$,startTime:ne,expirationTime:G,sortIndex:-1},ne>O?($.sortIndex=ne,e(p,$),t(h)===null&&$===t(p)&&(L?(X(S),S=-1):L=!0,be(oe,ne-O))):($.sortIndex=G,e(h,$),k||b||(k=!0,fe(ie))),$},n.unstable_shouldYield=N,n.unstable_wrapCallback=function($){var pe=w;return function(){var ne=w;w=pe;try{return $.apply(this,arguments)}finally{w=ne}}}})(Gm)),Gm}var _E;function c1(){return _E||(_E=1,Km.exports=u1()),Km.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function d1(){if(wE)return xr;wE=1;var n=vy(),e=c1();function t(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(i[s]=a,s=0;s<a.length;s++)r.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},g={};function w(s){return h.call(g,s)?!0:h.call(y,s)?!1:p.test(s)?g[s]=!0:(y[s]=!0,!1)}function b(s,a,u,f){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,a,u,f){if(a===null||typeof a>"u"||b(s,a,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function L(s,a,u,f,m,v,T){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=v,this.removeEmptyString=T}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){D[s]=new L(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];D[a]=new L(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){D[s]=new L(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){D[s]=new L(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){D[s]=new L(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){D[s]=new L(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){D[s]=new L(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){D[s]=new L(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){D[s]=new L(s,5,!1,s.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function K(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(X,K);D[a]=new L(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(X,K);D[a]=new L(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(X,K);D[a]=new L(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){D[s]=new L(s,1,!1,s.toLowerCase(),null,!1,!1)}),D.xlinkHref=new L("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){D[s]=new L(s,1,!1,s.toLowerCase(),null,!0,!0)});function Z(s,a,u,f){var m=D.hasOwnProperty(a)?D[a]:null;(m!==null?m.type!==0:f||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,u,m,f)&&(u=null),f||m===null?w(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(a=m.attributeName,f=m.attributeNamespace,u===null?s.removeAttribute(a):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?s.setAttributeNS(f,a,u):s.setAttribute(a,u))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ie=Symbol.for("react.element"),ue=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Be=Symbol.for("react.suspense_list"),ze=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),$=Symbol.iterator;function pe(s){return s===null||typeof s!="object"?null:(s=$&&s[$]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Object.assign,O;function G(s){if(O===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);O=a&&a[1]||""}return`
`+O+s}var re=!1;function de(s,a){if(!s||re)return"";re=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(Y){var f=Y}Reflect.construct(s,[],a)}else{try{a.call()}catch(Y){f=Y}s.call(a.prototype)}else{try{throw Error()}catch(Y){f=Y}s()}}catch(Y){if(Y&&f&&typeof Y.stack=="string"){for(var m=Y.stack.split(`
`),v=f.stack.split(`
`),T=m.length-1,C=v.length-1;1<=T&&0<=C&&m[T]!==v[C];)C--;for(;1<=T&&0<=C;T--,C--)if(m[T]!==v[C]){if(T!==1||C!==1)do if(T--,C--,0>C||m[T]!==v[C]){var M=`
`+m[T].replace(" at new "," at ");return s.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",s.displayName)),M}while(1<=T&&0<=C);break}}}finally{re=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?G(s):""}function _e(s){switch(s.tag){case 5:return G(s.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return s=de(s.type,!1),s;case 11:return s=de(s.type.render,!1),s;case 1:return s=de(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case ue:return"Portal";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case Be:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case N:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case F:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ze:return a=s.displayName||null,a!==null?a:we(s.type)||"Memo";case fe:a=s._payload,s=s._init;try{return we(s(a))}catch{}}return null}function Ce(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function qe(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ze(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function kt(s){var a=Ze(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),f=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return m.call(this)},set:function(T){f=""+T,v.call(this,T)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function wr(s){s._valueTracker||(s._valueTracker=kt(s))}function _t(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return s&&(f=Ze(s)?s.checked?"true":"false":s.value),s=f,s!==u?(a.setValue(s),!0):!1}function Nn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Mr(s,a){var u=a.checked;return ne({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Ws(s,a){var u=a.defaultValue==null?"":a.defaultValue,f=a.checked!=null?a.checked:a.defaultChecked;u=qe(a.value!=null?a.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function On(s,a){a=a.checked,a!=null&&Z(s,"checked",a,!1)}function ar(s,a){On(s,a);var u=qe(a.value),f=a.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?ft(s,a.type,u):a.hasOwnProperty("defaultValue")&&ft(s,a.type,qe(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function Oi(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var f=a.type;if(!(f!=="submit"&&f!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function ft(s,a,u){(a!=="number"||Nn(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Nt=Array.isArray;function lr(s,a,u,f){if(s=s.options,a){a={};for(var m=0;m<u.length;m++)a["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=a.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&f&&(s[u].defaultSelected=!0)}else{for(u=""+qe(u),a=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}a!==null||s[m].disabled||(a=s[m])}a!==null&&(a.selected=!0)}}function nn(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Er(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(Nt(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:qe(u)}}function Tr(s,a){var u=qe(a.value),f=qe(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function Wn(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Fr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ni(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Fr(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var rn,In=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,f,m){MSApp.execUnsafeLocalFunction(function(){return s(a,u,f,m)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(rn=rn||document.createElement("div"),rn.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=rn.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Vn(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(s){ur.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),Ur[a]=Ur[s]})});function ri(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Ur.hasOwnProperty(s)&&Ur[s]?(""+a).trim():a+"px"}function Sn(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=ri(u,a[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,m):s[u]=m}}var yi=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ln(s,a){if(a){if(yi[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function vi(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ir=null;function bn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Kn=null,Sr=null,It=null;function Vi(s){if(s=Lu(s)){if(typeof Kn!="function")throw Error(t(280));var a=s.stateNode;a&&(a=$d(a),Kn(s.stateNode,s.type,a))}}function je(s){Sr?It?It.push(s):It=[s]:Sr=s}function St(){if(Sr){var s=Sr,a=It;if(It=Sr=null,Vi(s),a)for(s=0;s<a.length;s++)Vi(a[s])}}function Ft(s,a){return s(a)}function Ht(){}var an=!1;function Ot(s,a,u){if(an)return s(a,u);an=!0;try{return Ft(s,a,u)}finally{an=!1,(Sr!==null||It!==null)&&(Ht(),St())}}function Qt(s,a){var u=s.stateNode;if(u===null)return null;var f=$d(u);if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var cr=!1;if(c)try{var x={};Object.defineProperty(x,"passive",{get:function(){cr=!0}}),window.addEventListener("test",x,x),window.removeEventListener("test",x,x)}catch{cr=!1}function U(s,a,u,f,m,v,T,C,M){var Y=Array.prototype.slice.call(arguments,3);try{a.apply(u,Y)}catch(ae){this.onError(ae)}}var W=!1,te=null,he=!1,Se=null,Fe={onError:function(s){W=!0,te=s}};function Te(s,a,u,f,m,v,T,C,M){W=!1,te=null,U.apply(Fe,arguments)}function Re(s,a,u,f,m,v,T,C,M){if(Te.apply(this,arguments),W){if(W){var Y=te;W=!1,te=null}else throw Error(t(198));he||(he=!0,Se=Y)}}function Pe(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Ke(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Le(s){if(Pe(s)!==s)throw Error(t(188))}function Ye(s){var a=s.alternate;if(!a){if(a=Pe(s),a===null)throw Error(t(188));return a!==s?null:s}for(var u=s,f=a;;){var m=u.return;if(m===null)break;var v=m.alternate;if(v===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===u)return Le(m),s;if(v===f)return Le(m),a;v=v.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=v;else{for(var T=!1,C=m.child;C;){if(C===u){T=!0,u=m,f=v;break}if(C===f){T=!0,f=m,u=v;break}C=C.sibling}if(!T){for(C=v.child;C;){if(C===u){T=!0,u=v,f=m;break}if(C===f){T=!0,f=v,u=m;break}C=C.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:a}function et(s){return s=Ye(s),s!==null?Vt(s):null}function Vt(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=Vt(s);if(a!==null)return a;s=s.sibling}return null}var Ut=e.unstable_scheduleCallback,Yt=e.unstable_cancelCallback,lt=e.unstable_shouldYield,Jt=e.unstable_requestPaint,pt=e.unstable_now,hs=e.unstable_getCurrentPriorityLevel,dr=e.unstable_ImmediatePriority,Gn=e.unstable_UserBlockingPriority,_i=e.unstable_NormalPriority,wi=e.unstable_LowPriority,br=e.unstable_IdlePriority,ii=null,Rn=null;function rt(s){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(ii,s,void 0,(s.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:Et,Mn=Math.log,ln=Math.LN2;function Et(s){return s>>>=0,s===0?32:31-(Mn(s)/ln|0)|0}var hr=64,Ei=4194304;function mt(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function fs(s,a){var u=s.pendingLanes;if(u===0)return 0;var f=0,m=s.suspendedLanes,v=s.pingedLanes,T=u&268435455;if(T!==0){var C=T&~m;C!==0?f=mt(C):(v&=T,v!==0&&(f=mt(v)))}else T=u&~m,T!==0?f=mt(T):v!==0&&(f=mt(v));if(f===0)return 0;if(a!==0&&a!==f&&(a&m)===0&&(m=f&-f,v=a&-a,m>=v||m===16&&(v&4194240)!==0))return a;if((f&4)!==0&&(f|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=f;0<a;)u=31-wt(a),m=1<<u,f|=s[u],a&=~m;return f}function jo(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $o(s,a){for(var u=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes;0<v;){var T=31-wt(v),C=1<<T,M=m[T];M===-1?((C&u)===0||(C&f)!==0)&&(m[T]=jo(C,a)):M<=a&&(s.expiredLanes|=C),v&=~C}}function mu(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function gu(){var s=hr;return hr<<=1,(hr&4194240)===0&&(hr=64),s}function yu(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Ho(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-wt(a),s[a]=u}function Tp(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-wt(u),v=1<<m;a[m]=0,f[m]=-1,s[m]=-1,u&=~v}}function vu(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var f=31-wt(u),m=1<<f;m&a|s[f]&a&&(s[f]|=a),u&=~m}}var dt=0;function Li(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var _u,qa,wu,Eu,Tu,Mi=!1,Wa=[],Fi=null,Ui=null,Fn=null,qo=new Map,ps=new Map,Br=[],Ad="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ks(s,a){switch(s){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":Ui=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":qo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":ps.delete(a.pointerId)}}function Ti(s,a,u,f,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:v,targetContainers:[m]},a!==null&&(a=Lu(a),a!==null&&qa(a)),s):(s.eventSystemFlags|=f,a=s.targetContainers,m!==null&&a.indexOf(m)===-1&&a.push(m),s)}function Pd(s,a,u,f,m){switch(a){case"focusin":return Fi=Ti(Fi,s,a,u,f,m),!0;case"dragenter":return Ui=Ti(Ui,s,a,u,f,m),!0;case"mouseover":return Fn=Ti(Fn,s,a,u,f,m),!0;case"pointerover":var v=m.pointerId;return qo.set(v,Ti(qo.get(v)||null,s,a,u,f,m)),!0;case"gotpointercapture":return v=m.pointerId,ps.set(v,Ti(ps.get(v)||null,s,a,u,f,m)),!0}return!1}function Ka(s){var a=Qo(s.target);if(a!==null){var u=Pe(a);if(u!==null){if(a=u.tag,a===13){if(a=Ke(u),a!==null){s.blockedOn=a,Tu(s.priority,function(){wu(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Ct(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=Ga(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);Ir=f,u.target.dispatchEvent(f),Ir=null}else return a=Lu(u),a!==null&&qa(a),s.blockedOn=u,!1;a.shift()}return!0}function kd(s,a,u){Ct(s)&&u.delete(a)}function Ip(){Mi=!1,Fi!==null&&Ct(Fi)&&(Fi=null),Ui!==null&&Ct(Ui)&&(Ui=null),Fn!==null&&Ct(Fn)&&(Fn=null),qo.forEach(kd),ps.forEach(kd)}function Gs(s,a){s.blockedOn===a&&(s.blockedOn=null,Mi||(Mi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ip)))}function Qs(s){function a(m){return Gs(m,s)}if(0<Wa.length){Gs(Wa[0],s);for(var u=1;u<Wa.length;u++){var f=Wa[u];f.blockedOn===s&&(f.blockedOn=null)}}for(Fi!==null&&Gs(Fi,s),Ui!==null&&Gs(Ui,s),Fn!==null&&Gs(Fn,s),qo.forEach(a),ps.forEach(a),u=0;u<Br.length;u++)f=Br[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<Br.length&&(u=Br[0],u.blockedOn===null);)Ka(u),u.blockedOn===null&&Br.shift()}var ms=oe.ReactCurrentBatchConfig,gs=!0;function Bi(s,a,u,f){var m=dt,v=ms.transition;ms.transition=null;try{dt=1,Iu(s,a,u,f)}finally{dt=m,ms.transition=v}}function Cd(s,a,u,f){var m=dt,v=ms.transition;ms.transition=null;try{dt=4,Iu(s,a,u,f)}finally{dt=m,ms.transition=v}}function Iu(s,a,u,f){if(gs){var m=Ga(s,a,u,f);if(m===null)Op(s,a,f,zi,u),Ks(s,f);else if(Pd(m,s,a,u,f))f.stopPropagation();else if(Ks(s,f),a&4&&-1<Ad.indexOf(s)){for(;m!==null;){var v=Lu(m);if(v!==null&&_u(v),v=Ga(s,a,u,f),v===null&&Op(s,a,f,zi,u),v===m)break;m=v}m!==null&&f.stopPropagation()}else Op(s,a,f,null,u)}}var zi=null;function Ga(s,a,u,f){if(zi=null,s=bn(f),s=Qo(s),s!==null)if(a=Pe(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Ke(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return zi=s,null}function Qa(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hs()){case dr:return 1;case Gn:return 4;case _i:case wi:return 16;case br:return 536870912;default:return 16}default:return 16}}var zr=null,Ya=null,ys=null;function xd(){if(ys)return ys;var s,a=Ya,u=a.length,f,m="value"in zr?zr.value:zr.textContent,v=m.length;for(s=0;s<u&&a[s]===m[s];s++);var T=u-s;for(f=1;f<=T&&a[u-f]===m[v-f];f++);return ys=m.slice(s,1<f?1-f:void 0)}function Wo(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function ji(){return!0}function Su(){return!1}function Qn(s){function a(u,f,m,v,T){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(u=s[C],this[C]=u?u(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?ji:Su,this.isPropagationStopped=Su,this}return ne(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),a}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ko=Qn($i),Ys=ne({},$i,{view:0,detail:0}),Ja=Qn(Ys),Xa,Za,jr,Go=ne({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xe,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==jr&&(jr&&s.type==="mousemove"?(Xa=s.screenX-jr.screenX,Za=s.screenY-jr.screenY):Za=Xa=0,jr=s),Xa)},movementY:function(s){return"movementY"in s?s.movementY:Za}}),bu=Qn(Go),Dd=ne({},Go,{dataTransfer:0}),Nd=Qn(Dd),el=ne({},Ys,{relatedTarget:0}),Un=Qn(el),Od=ne({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Vd=Qn(Od),Js=ne({},$i,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=Qn(Js),_=ne({},$i,{data:0}),E=Qn(_),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},J={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ye(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=J[s])?!!a[s]:!1}function Xe(){return ye}var sn=ne({},Ys,{key:function(s){if(s.key){var a=R[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Wo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?q[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xe,charCode:function(s){return s.type==="keypress"?Wo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Wo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),bt=Qn(sn),un=ne({},Go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$r=Qn(un),vs=ne({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xe}),Hi=Qn(vs),qi=ne({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),tl=Qn(qi),Ru=ne({},Go,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ZP=Qn(Ru),ek=[9,13,27,32],Sp=c&&"CompositionEvent"in window,Au=null;c&&"documentMode"in document&&(Au=document.documentMode);var tk=c&&"TextEvent"in window&&!Au,o_=c&&(!Sp||Au&&8<Au&&11>=Au),a_=" ",l_=!1;function u_(s,a){switch(s){case"keyup":return ek.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function c_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var nl=!1;function nk(s,a){switch(s){case"compositionend":return c_(a);case"keypress":return a.which!==32?null:(l_=!0,a_);case"textInput":return s=a.data,s===a_&&l_?null:s;default:return null}}function rk(s,a){if(nl)return s==="compositionend"||!Sp&&u_(s,a)?(s=xd(),ys=Ya=zr=null,nl=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return o_&&a.locale!=="ko"?null:a.data;default:return null}}var ik={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d_(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!ik[s.type]:a==="textarea"}function h_(s,a,u,f){je(f),a=Bd(a,"onChange"),0<a.length&&(u=new Ko("onChange","change",null,u,f),s.push({event:u,listeners:a}))}var Pu=null,ku=null;function sk(s){C_(s,0)}function Ld(s){var a=al(s);if(_t(a))return s}function ok(s,a){if(s==="change")return a}var f_=!1;if(c){var bp;if(c){var Rp="oninput"in document;if(!Rp){var p_=document.createElement("div");p_.setAttribute("oninput","return;"),Rp=typeof p_.oninput=="function"}bp=Rp}else bp=!1;f_=bp&&(!document.documentMode||9<document.documentMode)}function m_(){Pu&&(Pu.detachEvent("onpropertychange",g_),ku=Pu=null)}function g_(s){if(s.propertyName==="value"&&Ld(ku)){var a=[];h_(a,ku,s,bn(s)),Ot(sk,a)}}function ak(s,a,u){s==="focusin"?(m_(),Pu=a,ku=u,Pu.attachEvent("onpropertychange",g_)):s==="focusout"&&m_()}function lk(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ld(ku)}function uk(s,a){if(s==="click")return Ld(a)}function ck(s,a){if(s==="input"||s==="change")return Ld(a)}function dk(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Ii=typeof Object.is=="function"?Object.is:dk;function Cu(s,a){if(Ii(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(a,m)||!Ii(s[m],a[m]))return!1}return!0}function y_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function v_(s,a){var u=y_(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=a&&f>=a)return{node:u,offset:a-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=y_(u)}}function __(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?__(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function w_(){for(var s=window,a=Nn();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=Nn(s.document)}return a}function Ap(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function hk(s){var a=w_(),u=s.focusedElem,f=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&__(u.ownerDocument.documentElement,u)){if(f!==null&&Ap(u)){if(a=f.start,s=f.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,v=Math.min(f.start,m);f=f.end===void 0?v:Math.min(f.end,m),!s.extend&&v>f&&(m=f,f=v,v=m),m=v_(u,v);var T=v_(u,f);m&&T&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(a=a.createRange(),a.setStart(m.node,m.offset),s.removeAllRanges(),v>f?(s.addRange(a),s.extend(T.node,T.offset)):(a.setEnd(T.node,T.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var fk=c&&"documentMode"in document&&11>=document.documentMode,rl=null,Pp=null,xu=null,kp=!1;function E_(s,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;kp||rl==null||rl!==Nn(f)||(f=rl,"selectionStart"in f&&Ap(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),xu&&Cu(xu,f)||(xu=f,f=Bd(Pp,"onSelect"),0<f.length&&(a=new Ko("onSelect","select",null,a,u),s.push({event:a,listeners:f}),a.target=rl)))}function Md(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var il={animationend:Md("Animation","AnimationEnd"),animationiteration:Md("Animation","AnimationIteration"),animationstart:Md("Animation","AnimationStart"),transitionend:Md("Transition","TransitionEnd")},Cp={},T_={};c&&(T_=document.createElement("div").style,"AnimationEvent"in window||(delete il.animationend.animation,delete il.animationiteration.animation,delete il.animationstart.animation),"TransitionEvent"in window||delete il.transitionend.transition);function Fd(s){if(Cp[s])return Cp[s];if(!il[s])return s;var a=il[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in T_)return Cp[s]=a[u];return s}var I_=Fd("animationend"),S_=Fd("animationiteration"),b_=Fd("animationstart"),R_=Fd("transitionend"),A_=new Map,P_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(s,a){A_.set(s,a),o(a,[s])}for(var xp=0;xp<P_.length;xp++){var Dp=P_[xp],pk=Dp.toLowerCase(),mk=Dp[0].toUpperCase()+Dp.slice(1);Xs(pk,"on"+mk)}Xs(I_,"onAnimationEnd"),Xs(S_,"onAnimationIteration"),Xs(b_,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(R_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Du));function k_(s,a,u){var f=s.type||"unknown-event";s.currentTarget=u,Re(f,a,void 0,s),s.currentTarget=null}function C_(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],m=f.event;f=f.listeners;e:{var v=void 0;if(a)for(var T=f.length-1;0<=T;T--){var C=f[T],M=C.instance,Y=C.currentTarget;if(C=C.listener,M!==v&&m.isPropagationStopped())break e;k_(m,C,Y),v=M}else for(T=0;T<f.length;T++){if(C=f[T],M=C.instance,Y=C.currentTarget,C=C.listener,M!==v&&m.isPropagationStopped())break e;k_(m,C,Y),v=M}}}if(he)throw s=Se,he=!1,Se=null,s}function Lt(s,a){var u=a[Bp];u===void 0&&(u=a[Bp]=new Set);var f=s+"__bubble";u.has(f)||(x_(a,s,2,!1),u.add(f))}function Np(s,a,u){var f=0;a&&(f|=4),x_(u,s,f,a)}var Ud="_reactListening"+Math.random().toString(36).slice(2);function Nu(s){if(!s[Ud]){s[Ud]=!0,r.forEach(function(u){u!=="selectionchange"&&(gk.has(u)||Np(u,!1,s),Np(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Ud]||(a[Ud]=!0,Np("selectionchange",!1,a))}}function x_(s,a,u,f){switch(Qa(a)){case 1:var m=Bi;break;case 4:m=Cd;break;default:m=Iu}u=m.bind(null,a,u,s),m=void 0,!cr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(a,u,{capture:!0,passive:m}):s.addEventListener(a,u,!0):m!==void 0?s.addEventListener(a,u,{passive:m}):s.addEventListener(a,u,!1)}function Op(s,a,u,f,m){var v=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(T===4)for(T=f.return;T!==null;){var M=T.tag;if((M===3||M===4)&&(M=T.stateNode.containerInfo,M===m||M.nodeType===8&&M.parentNode===m))return;T=T.return}for(;C!==null;){if(T=Qo(C),T===null)return;if(M=T.tag,M===5||M===6){f=v=T;continue e}C=C.parentNode}}f=f.return}Ot(function(){var Y=v,ae=bn(u),le=[];e:{var se=A_.get(s);if(se!==void 0){var Ie=Ko,xe=s;switch(s){case"keypress":if(Wo(u)===0)break e;case"keydown":case"keyup":Ie=bt;break;case"focusin":xe="focus",Ie=Un;break;case"focusout":xe="blur",Ie=Un;break;case"beforeblur":case"afterblur":Ie=Un;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=bu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Hi;break;case I_:case S_:case b_:Ie=Vd;break;case R_:Ie=tl;break;case"scroll":Ie=Ja;break;case"wheel":Ie=ZP;break;case"copy":case"cut":case"paste":Ie=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=$r}var Oe=(a&4)!==0,on=!Oe&&s==="scroll",H=Oe?se!==null?se+"Capture":null:se;Oe=[];for(var B=Y,Q;B!==null;){Q=B;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,H!==null&&(me=Qt(B,H),me!=null&&Oe.push(Ou(B,me,Q)))),on)break;B=B.return}0<Oe.length&&(se=new Ie(se,xe,null,u,ae),le.push({event:se,listeners:Oe}))}}if((a&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",Ie=s==="mouseout"||s==="pointerout",se&&u!==Ir&&(xe=u.relatedTarget||u.fromElement)&&(Qo(xe)||xe[_s]))break e;if((Ie||se)&&(se=ae.window===ae?ae:(se=ae.ownerDocument)?se.defaultView||se.parentWindow:window,Ie?(xe=u.relatedTarget||u.toElement,Ie=Y,xe=xe?Qo(xe):null,xe!==null&&(on=Pe(xe),xe!==on||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(Ie=null,xe=Y),Ie!==xe)){if(Oe=bu,me="onMouseLeave",H="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Oe=$r,me="onPointerLeave",H="onPointerEnter",B="pointer"),on=Ie==null?se:al(Ie),Q=xe==null?se:al(xe),se=new Oe(me,B+"leave",Ie,u,ae),se.target=on,se.relatedTarget=Q,me=null,Qo(ae)===Y&&(Oe=new Oe(H,B+"enter",xe,u,ae),Oe.target=Q,Oe.relatedTarget=on,me=Oe),on=me,Ie&&xe)t:{for(Oe=Ie,H=xe,B=0,Q=Oe;Q;Q=sl(Q))B++;for(Q=0,me=H;me;me=sl(me))Q++;for(;0<B-Q;)Oe=sl(Oe),B--;for(;0<Q-B;)H=sl(H),Q--;for(;B--;){if(Oe===H||H!==null&&Oe===H.alternate)break t;Oe=sl(Oe),H=sl(H)}Oe=null}else Oe=null;Ie!==null&&D_(le,se,Ie,Oe,!1),xe!==null&&on!==null&&D_(le,on,xe,Oe,!0)}}e:{if(se=Y?al(Y):window,Ie=se.nodeName&&se.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&se.type==="file")var Me=ok;else if(d_(se))if(f_)Me=ck;else{Me=lk;var $e=ak}else(Ie=se.nodeName)&&Ie.toLowerCase()==="input"&&(se.type==="checkbox"||se.type==="radio")&&(Me=uk);if(Me&&(Me=Me(s,Y))){h_(le,Me,u,ae);break e}$e&&$e(s,se,Y),s==="focusout"&&($e=se._wrapperState)&&$e.controlled&&se.type==="number"&&ft(se,"number",se.value)}switch($e=Y?al(Y):window,s){case"focusin":(d_($e)||$e.contentEditable==="true")&&(rl=$e,Pp=Y,xu=null);break;case"focusout":xu=Pp=rl=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,E_(le,u,ae);break;case"selectionchange":if(fk)break;case"keydown":case"keyup":E_(le,u,ae)}var He;if(Sp)e:{switch(s){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else nl?u_(s,u)&&(Ge="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ge="onCompositionStart");Ge&&(o_&&u.locale!=="ko"&&(nl||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&nl&&(He=xd()):(zr=ae,Ya="value"in zr?zr.value:zr.textContent,nl=!0)),$e=Bd(Y,Ge),0<$e.length&&(Ge=new E(Ge,s,null,u,ae),le.push({event:Ge,listeners:$e}),He?Ge.data=He:(He=c_(u),He!==null&&(Ge.data=He)))),(He=tk?nk(s,u):rk(s,u))&&(Y=Bd(Y,"onBeforeInput"),0<Y.length&&(ae=new E("onBeforeInput","beforeinput",null,u,ae),le.push({event:ae,listeners:Y}),ae.data=He))}C_(le,a)})}function Ou(s,a,u){return{instance:s,listener:a,currentTarget:u}}function Bd(s,a){for(var u=a+"Capture",f=[];s!==null;){var m=s,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=Qt(s,u),v!=null&&f.unshift(Ou(s,v,m)),v=Qt(s,a),v!=null&&f.push(Ou(s,v,m))),s=s.return}return f}function sl(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function D_(s,a,u,f,m){for(var v=a._reactName,T=[];u!==null&&u!==f;){var C=u,M=C.alternate,Y=C.stateNode;if(M!==null&&M===f)break;C.tag===5&&Y!==null&&(C=Y,m?(M=Qt(u,v),M!=null&&T.unshift(Ou(u,M,C))):m||(M=Qt(u,v),M!=null&&T.push(Ou(u,M,C)))),u=u.return}T.length!==0&&s.push({event:a,listeners:T})}var yk=/\r\n?/g,vk=/\u0000|\uFFFD/g;function N_(s){return(typeof s=="string"?s:""+s).replace(yk,`
`).replace(vk,"")}function zd(s,a,u){if(a=N_(a),N_(s)!==a&&u)throw Error(t(425))}function jd(){}var Vp=null,Lp=null;function Mp(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fp=typeof setTimeout=="function"?setTimeout:void 0,_k=typeof clearTimeout=="function"?clearTimeout:void 0,O_=typeof Promise=="function"?Promise:void 0,wk=typeof queueMicrotask=="function"?queueMicrotask:typeof O_<"u"?function(s){return O_.resolve(null).then(s).catch(Ek)}:Fp;function Ek(s){setTimeout(function(){throw s})}function Up(s,a){var u=a,f=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){s.removeChild(m),Qs(a);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);Qs(a)}function Zs(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function V_(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var ol=Math.random().toString(36).slice(2),Wi="__reactFiber$"+ol,Vu="__reactProps$"+ol,_s="__reactContainer$"+ol,Bp="__reactEvents$"+ol,Tk="__reactListeners$"+ol,Ik="__reactHandles$"+ol;function Qo(s){var a=s[Wi];if(a)return a;for(var u=s.parentNode;u;){if(a=u[_s]||u[Wi]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=V_(s);s!==null;){if(u=s[Wi])return u;s=V_(s)}return a}s=u,u=s.parentNode}return null}function Lu(s){return s=s[Wi]||s[_s],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function al(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function $d(s){return s[Vu]||null}var zp=[],ll=-1;function eo(s){return{current:s}}function Mt(s){0>ll||(s.current=zp[ll],zp[ll]=null,ll--)}function xt(s,a){ll++,zp[ll]=s.current,s.current=a}var to={},Yn=eo(to),Rr=eo(!1),Yo=to;function ul(s,a){var u=s.type.contextTypes;if(!u)return to;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===a)return f.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in u)m[v]=a[v];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=m),m}function Ar(s){return s=s.childContextTypes,s!=null}function Hd(){Mt(Rr),Mt(Yn)}function L_(s,a,u){if(Yn.current!==to)throw Error(t(168));xt(Yn,a),xt(Rr,u)}function M_(s,a,u){var f=s.stateNode;if(a=a.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in a))throw Error(t(108,Ce(s)||"Unknown",m));return ne({},u,f)}function qd(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||to,Yo=Yn.current,xt(Yn,s),xt(Rr,Rr.current),!0}function F_(s,a,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=M_(s,a,Yo),f.__reactInternalMemoizedMergedChildContext=s,Mt(Rr),Mt(Yn),xt(Yn,s)):Mt(Rr),xt(Rr,u)}var ws=null,Wd=!1,jp=!1;function U_(s){ws===null?ws=[s]:ws.push(s)}function Sk(s){Wd=!0,U_(s)}function no(){if(!jp&&ws!==null){jp=!0;var s=0,a=dt;try{var u=ws;for(dt=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}ws=null,Wd=!1}catch(m){throw ws!==null&&(ws=ws.slice(s+1)),Ut(dr,no),m}finally{dt=a,jp=!1}}return null}var cl=[],dl=0,Kd=null,Gd=0,si=[],oi=0,Jo=null,Es=1,Ts="";function Xo(s,a){cl[dl++]=Gd,cl[dl++]=Kd,Kd=s,Gd=a}function B_(s,a,u){si[oi++]=Es,si[oi++]=Ts,si[oi++]=Jo,Jo=s;var f=Es;s=Ts;var m=32-wt(f)-1;f&=~(1<<m),u+=1;var v=32-wt(a)+m;if(30<v){var T=m-m%5;v=(f&(1<<T)-1).toString(32),f>>=T,m-=T,Es=1<<32-wt(a)+m|u<<m|f,Ts=v+s}else Es=1<<v|u<<m|f,Ts=s}function $p(s){s.return!==null&&(Xo(s,1),B_(s,1,0))}function Hp(s){for(;s===Kd;)Kd=cl[--dl],cl[dl]=null,Gd=cl[--dl],cl[dl]=null;for(;s===Jo;)Jo=si[--oi],si[oi]=null,Ts=si[--oi],si[oi]=null,Es=si[--oi],si[oi]=null}var Hr=null,qr=null,Bt=!1,Si=null;function z_(s,a){var u=ci(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function j_(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Hr=s,qr=Zs(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Hr=s,qr=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=Jo!==null?{id:Es,overflow:Ts}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=ci(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Hr=s,qr=null,!0):!1;default:return!1}}function qp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Wp(s){if(Bt){var a=qr;if(a){var u=a;if(!j_(s,a)){if(qp(s))throw Error(t(418));a=Zs(u.nextSibling);var f=Hr;a&&j_(s,a)?z_(f,u):(s.flags=s.flags&-4097|2,Bt=!1,Hr=s)}}else{if(qp(s))throw Error(t(418));s.flags=s.flags&-4097|2,Bt=!1,Hr=s}}}function $_(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Hr=s}function Qd(s){if(s!==Hr)return!1;if(!Bt)return $_(s),Bt=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Mp(s.type,s.memoizedProps)),a&&(a=qr)){if(qp(s))throw H_(),Error(t(418));for(;a;)z_(s,a),a=Zs(a.nextSibling)}if($_(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){qr=Zs(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}qr=null}}else qr=Hr?Zs(s.stateNode.nextSibling):null;return!0}function H_(){for(var s=qr;s;)s=Zs(s.nextSibling)}function hl(){qr=Hr=null,Bt=!1}function Kp(s){Si===null?Si=[s]:Si.push(s)}var bk=oe.ReactCurrentBatchConfig;function Mu(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var m=f,v=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===v?a.ref:(a=function(T){var C=m.refs;T===null?delete C[v]:C[v]=T},a._stringRef=v,a)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Yd(s,a){throw s=Object.prototype.toString.call(a),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function q_(s){var a=s._init;return a(s._payload)}function W_(s){function a(H,B){if(s){var Q=H.deletions;Q===null?(H.deletions=[B],H.flags|=16):Q.push(B)}}function u(H,B){if(!s)return null;for(;B!==null;)a(H,B),B=B.sibling;return null}function f(H,B){for(H=new Map;B!==null;)B.key!==null?H.set(B.key,B):H.set(B.index,B),B=B.sibling;return H}function m(H,B){return H=co(H,B),H.index=0,H.sibling=null,H}function v(H,B,Q){return H.index=Q,s?(Q=H.alternate,Q!==null?(Q=Q.index,Q<B?(H.flags|=2,B):Q):(H.flags|=2,B)):(H.flags|=1048576,B)}function T(H){return s&&H.alternate===null&&(H.flags|=2),H}function C(H,B,Q,me){return B===null||B.tag!==6?(B=Fm(Q,H.mode,me),B.return=H,B):(B=m(B,Q),B.return=H,B)}function M(H,B,Q,me){var Me=Q.type;return Me===I?ae(H,B,Q.props.children,me,Q.key):B!==null&&(B.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===fe&&q_(Me)===B.type)?(me=m(B,Q.props),me.ref=Mu(H,B,Q),me.return=H,me):(me=wh(Q.type,Q.key,Q.props,null,H.mode,me),me.ref=Mu(H,B,Q),me.return=H,me)}function Y(H,B,Q,me){return B===null||B.tag!==4||B.stateNode.containerInfo!==Q.containerInfo||B.stateNode.implementation!==Q.implementation?(B=Um(Q,H.mode,me),B.return=H,B):(B=m(B,Q.children||[]),B.return=H,B)}function ae(H,B,Q,me,Me){return B===null||B.tag!==7?(B=oa(Q,H.mode,me,Me),B.return=H,B):(B=m(B,Q),B.return=H,B)}function le(H,B,Q){if(typeof B=="string"&&B!==""||typeof B=="number")return B=Fm(""+B,H.mode,Q),B.return=H,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case ie:return Q=wh(B.type,B.key,B.props,null,H.mode,Q),Q.ref=Mu(H,null,B),Q.return=H,Q;case ue:return B=Um(B,H.mode,Q),B.return=H,B;case fe:var me=B._init;return le(H,me(B._payload),Q)}if(Nt(B)||pe(B))return B=oa(B,H.mode,Q,null),B.return=H,B;Yd(H,B)}return null}function se(H,B,Q,me){var Me=B!==null?B.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Me!==null?null:C(H,B,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ie:return Q.key===Me?M(H,B,Q,me):null;case ue:return Q.key===Me?Y(H,B,Q,me):null;case fe:return Me=Q._init,se(H,B,Me(Q._payload),me)}if(Nt(Q)||pe(Q))return Me!==null?null:ae(H,B,Q,me,null);Yd(H,Q)}return null}function Ie(H,B,Q,me,Me){if(typeof me=="string"&&me!==""||typeof me=="number")return H=H.get(Q)||null,C(B,H,""+me,Me);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case ie:return H=H.get(me.key===null?Q:me.key)||null,M(B,H,me,Me);case ue:return H=H.get(me.key===null?Q:me.key)||null,Y(B,H,me,Me);case fe:var $e=me._init;return Ie(H,B,Q,$e(me._payload),Me)}if(Nt(me)||pe(me))return H=H.get(Q)||null,ae(B,H,me,Me,null);Yd(B,me)}return null}function xe(H,B,Q,me){for(var Me=null,$e=null,He=B,Ge=B=0,kn=null;He!==null&&Ge<Q.length;Ge++){He.index>Ge?(kn=He,He=null):kn=He.sibling;var vt=se(H,He,Q[Ge],me);if(vt===null){He===null&&(He=kn);break}s&&He&&vt.alternate===null&&a(H,He),B=v(vt,B,Ge),$e===null?Me=vt:$e.sibling=vt,$e=vt,He=kn}if(Ge===Q.length)return u(H,He),Bt&&Xo(H,Ge),Me;if(He===null){for(;Ge<Q.length;Ge++)He=le(H,Q[Ge],me),He!==null&&(B=v(He,B,Ge),$e===null?Me=He:$e.sibling=He,$e=He);return Bt&&Xo(H,Ge),Me}for(He=f(H,He);Ge<Q.length;Ge++)kn=Ie(He,H,Ge,Q[Ge],me),kn!==null&&(s&&kn.alternate!==null&&He.delete(kn.key===null?Ge:kn.key),B=v(kn,B,Ge),$e===null?Me=kn:$e.sibling=kn,$e=kn);return s&&He.forEach(function(ho){return a(H,ho)}),Bt&&Xo(H,Ge),Me}function Oe(H,B,Q,me){var Me=pe(Q);if(typeof Me!="function")throw Error(t(150));if(Q=Me.call(Q),Q==null)throw Error(t(151));for(var $e=Me=null,He=B,Ge=B=0,kn=null,vt=Q.next();He!==null&&!vt.done;Ge++,vt=Q.next()){He.index>Ge?(kn=He,He=null):kn=He.sibling;var ho=se(H,He,vt.value,me);if(ho===null){He===null&&(He=kn);break}s&&He&&ho.alternate===null&&a(H,He),B=v(ho,B,Ge),$e===null?Me=ho:$e.sibling=ho,$e=ho,He=kn}if(vt.done)return u(H,He),Bt&&Xo(H,Ge),Me;if(He===null){for(;!vt.done;Ge++,vt=Q.next())vt=le(H,vt.value,me),vt!==null&&(B=v(vt,B,Ge),$e===null?Me=vt:$e.sibling=vt,$e=vt);return Bt&&Xo(H,Ge),Me}for(He=f(H,He);!vt.done;Ge++,vt=Q.next())vt=Ie(He,H,Ge,vt.value,me),vt!==null&&(s&&vt.alternate!==null&&He.delete(vt.key===null?Ge:vt.key),B=v(vt,B,Ge),$e===null?Me=vt:$e.sibling=vt,$e=vt);return s&&He.forEach(function(i1){return a(H,i1)}),Bt&&Xo(H,Ge),Me}function on(H,B,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===I&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ie:e:{for(var Me=Q.key,$e=B;$e!==null;){if($e.key===Me){if(Me=Q.type,Me===I){if($e.tag===7){u(H,$e.sibling),B=m($e,Q.props.children),B.return=H,H=B;break e}}else if($e.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===fe&&q_(Me)===$e.type){u(H,$e.sibling),B=m($e,Q.props),B.ref=Mu(H,$e,Q),B.return=H,H=B;break e}u(H,$e);break}else a(H,$e);$e=$e.sibling}Q.type===I?(B=oa(Q.props.children,H.mode,me,Q.key),B.return=H,H=B):(me=wh(Q.type,Q.key,Q.props,null,H.mode,me),me.ref=Mu(H,B,Q),me.return=H,H=me)}return T(H);case ue:e:{for($e=Q.key;B!==null;){if(B.key===$e)if(B.tag===4&&B.stateNode.containerInfo===Q.containerInfo&&B.stateNode.implementation===Q.implementation){u(H,B.sibling),B=m(B,Q.children||[]),B.return=H,H=B;break e}else{u(H,B);break}else a(H,B);B=B.sibling}B=Um(Q,H.mode,me),B.return=H,H=B}return T(H);case fe:return $e=Q._init,on(H,B,$e(Q._payload),me)}if(Nt(Q))return xe(H,B,Q,me);if(pe(Q))return Oe(H,B,Q,me);Yd(H,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,B!==null&&B.tag===6?(u(H,B.sibling),B=m(B,Q),B.return=H,H=B):(u(H,B),B=Fm(Q,H.mode,me),B.return=H,H=B),T(H)):u(H,B)}return on}var fl=W_(!0),K_=W_(!1),Jd=eo(null),Xd=null,pl=null,Gp=null;function Qp(){Gp=pl=Xd=null}function Yp(s){var a=Jd.current;Mt(Jd),s._currentValue=a}function Jp(s,a,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),s===u)break;s=s.return}}function ml(s,a){Xd=s,Gp=pl=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(Pr=!0),s.firstContext=null)}function ai(s){var a=s._currentValue;if(Gp!==s)if(s={context:s,memoizedValue:a,next:null},pl===null){if(Xd===null)throw Error(t(308));pl=s,Xd.dependencies={lanes:0,firstContext:s}}else pl=pl.next=s;return a}var Zo=null;function Xp(s){Zo===null?Zo=[s]:Zo.push(s)}function G_(s,a,u,f){var m=a.interleaved;return m===null?(u.next=u,Xp(a)):(u.next=m.next,m.next=u),a.interleaved=u,Is(s,f)}function Is(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var ro=!1;function Zp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Q_(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Ss(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function io(s,a,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(gt&2)!==0){var m=f.pending;return m===null?a.next=a:(a.next=m.next,m.next=a),f.pending=a,Is(s,u)}return m=f.interleaved,m===null?(a.next=a,Xp(f)):(a.next=m.next,m.next=a),f.interleaved=a,Is(s,u)}function Zd(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,vu(s,u)}}function Y_(s,a){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?m=v=T:v=v.next=T,u=u.next}while(u!==null);v===null?m=v=a:v=v.next=a}else m=v=a;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function eh(s,a,u,f){var m=s.updateQueue;ro=!1;var v=m.firstBaseUpdate,T=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var M=C,Y=M.next;M.next=null,T===null?v=Y:T.next=Y,T=M;var ae=s.alternate;ae!==null&&(ae=ae.updateQueue,C=ae.lastBaseUpdate,C!==T&&(C===null?ae.firstBaseUpdate=Y:C.next=Y,ae.lastBaseUpdate=M))}if(v!==null){var le=m.baseState;T=0,ae=Y=M=null,C=v;do{var se=C.lane,Ie=C.eventTime;if((f&se)===se){ae!==null&&(ae=ae.next={eventTime:Ie,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var xe=s,Oe=C;switch(se=a,Ie=u,Oe.tag){case 1:if(xe=Oe.payload,typeof xe=="function"){le=xe.call(Ie,le,se);break e}le=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Oe.payload,se=typeof xe=="function"?xe.call(Ie,le,se):xe,se==null)break e;le=ne({},le,se);break e;case 2:ro=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,se=m.effects,se===null?m.effects=[C]:se.push(C))}else Ie={eventTime:Ie,lane:se,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ae===null?(Y=ae=Ie,M=le):ae=ae.next=Ie,T|=se;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;se=C,C=se.next,se.next=null,m.lastBaseUpdate=se,m.shared.pending=null}}while(!0);if(ae===null&&(M=le),m.baseState=M,m.firstBaseUpdate=Y,m.lastBaseUpdate=ae,a=m.shared.interleaved,a!==null){m=a;do T|=m.lane,m=m.next;while(m!==a)}else v===null&&(m.shared.lanes=0);na|=T,s.lanes=T,s.memoizedState=le}}function J_(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var f=s[a],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var Fu={},Ki=eo(Fu),Uu=eo(Fu),Bu=eo(Fu);function ea(s){if(s===Fu)throw Error(t(174));return s}function em(s,a){switch(xt(Bu,a),xt(Uu,s),xt(Ki,Fu),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:ni(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=ni(a,s)}Mt(Ki),xt(Ki,a)}function gl(){Mt(Ki),Mt(Uu),Mt(Bu)}function X_(s){ea(Bu.current);var a=ea(Ki.current),u=ni(a,s.type);a!==u&&(xt(Uu,s),xt(Ki,u))}function tm(s){Uu.current===s&&(Mt(Ki),Mt(Uu))}var qt=eo(0);function th(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var nm=[];function rm(){for(var s=0;s<nm.length;s++)nm[s]._workInProgressVersionPrimary=null;nm.length=0}var nh=oe.ReactCurrentDispatcher,im=oe.ReactCurrentBatchConfig,ta=0,Wt=null,yn=null,An=null,rh=!1,zu=!1,ju=0,Rk=0;function Jn(){throw Error(t(321))}function sm(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Ii(s[u],a[u]))return!1;return!0}function om(s,a,u,f,m,v){if(ta=v,Wt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,nh.current=s===null||s.memoizedState===null?Ck:xk,s=u(f,m),zu){v=0;do{if(zu=!1,ju=0,25<=v)throw Error(t(301));v+=1,An=yn=null,a.updateQueue=null,nh.current=Dk,s=u(f,m)}while(zu)}if(nh.current=oh,a=yn!==null&&yn.next!==null,ta=0,An=yn=Wt=null,rh=!1,a)throw Error(t(300));return s}function am(){var s=ju!==0;return ju=0,s}function Gi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?Wt.memoizedState=An=s:An=An.next=s,An}function li(){if(yn===null){var s=Wt.alternate;s=s!==null?s.memoizedState:null}else s=yn.next;var a=An===null?Wt.memoizedState:An.next;if(a!==null)An=a,yn=s;else{if(s===null)throw Error(t(310));yn=s,s={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},An===null?Wt.memoizedState=An=s:An=An.next=s}return An}function $u(s,a){return typeof a=="function"?a(s):a}function lm(s){var a=li(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=yn,m=f.baseQueue,v=u.pending;if(v!==null){if(m!==null){var T=m.next;m.next=v.next,v.next=T}f.baseQueue=m=v,u.pending=null}if(m!==null){v=m.next,f=f.baseState;var C=T=null,M=null,Y=v;do{var ae=Y.lane;if((ta&ae)===ae)M!==null&&(M=M.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),f=Y.hasEagerState?Y.eagerState:s(f,Y.action);else{var le={lane:ae,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};M===null?(C=M=le,T=f):M=M.next=le,Wt.lanes|=ae,na|=ae}Y=Y.next}while(Y!==null&&Y!==v);M===null?T=f:M.next=C,Ii(f,a.memoizedState)||(Pr=!0),a.memoizedState=f,a.baseState=T,a.baseQueue=M,u.lastRenderedState=f}if(s=u.interleaved,s!==null){m=s;do v=m.lane,Wt.lanes|=v,na|=v,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function um(s){var a=li(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,m=u.pending,v=a.memoizedState;if(m!==null){u.pending=null;var T=m=m.next;do v=s(v,T.action),T=T.next;while(T!==m);Ii(v,a.memoizedState)||(Pr=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),u.lastRenderedState=v}return[v,f]}function Z_(){}function ew(s,a){var u=Wt,f=li(),m=a(),v=!Ii(f.memoizedState,m);if(v&&(f.memoizedState=m,Pr=!0),f=f.queue,cm(rw.bind(null,u,f,s),[s]),f.getSnapshot!==a||v||An!==null&&An.memoizedState.tag&1){if(u.flags|=2048,Hu(9,nw.bind(null,u,f,m,a),void 0,null),Pn===null)throw Error(t(349));(ta&30)!==0||tw(u,a,m)}return m}function tw(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function nw(s,a,u,f){a.value=u,a.getSnapshot=f,iw(a)&&sw(s)}function rw(s,a,u){return u(function(){iw(a)&&sw(s)})}function iw(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Ii(s,u)}catch{return!0}}function sw(s){var a=Is(s,1);a!==null&&Pi(a,s,1,-1)}function ow(s){var a=Gi();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$u,lastRenderedState:s},a.queue=s,s=s.dispatch=kk.bind(null,Wt,s),[a.memoizedState,s]}function Hu(s,a,u,f){return s={tag:s,create:a,destroy:u,deps:f,next:null},a=Wt.updateQueue,a===null?(a={lastEffect:null,stores:null},Wt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,a.lastEffect=s)),s}function aw(){return li().memoizedState}function ih(s,a,u,f){var m=Gi();Wt.flags|=s,m.memoizedState=Hu(1|a,u,void 0,f===void 0?null:f)}function sh(s,a,u,f){var m=li();f=f===void 0?null:f;var v=void 0;if(yn!==null){var T=yn.memoizedState;if(v=T.destroy,f!==null&&sm(f,T.deps)){m.memoizedState=Hu(a,u,v,f);return}}Wt.flags|=s,m.memoizedState=Hu(1|a,u,v,f)}function lw(s,a){return ih(8390656,8,s,a)}function cm(s,a){return sh(2048,8,s,a)}function uw(s,a){return sh(4,2,s,a)}function cw(s,a){return sh(4,4,s,a)}function dw(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function hw(s,a,u){return u=u!=null?u.concat([s]):null,sh(4,4,dw.bind(null,a,s),u)}function dm(){}function fw(s,a){var u=li();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&sm(a,f[1])?f[0]:(u.memoizedState=[s,a],s)}function pw(s,a){var u=li();a=a===void 0?null:a;var f=u.memoizedState;return f!==null&&a!==null&&sm(a,f[1])?f[0]:(s=s(),u.memoizedState=[s,a],s)}function mw(s,a,u){return(ta&21)===0?(s.baseState&&(s.baseState=!1,Pr=!0),s.memoizedState=u):(Ii(u,a)||(u=gu(),Wt.lanes|=u,na|=u,s.baseState=!0),a)}function Ak(s,a){var u=dt;dt=u!==0&&4>u?u:4,s(!0);var f=im.transition;im.transition={};try{s(!1),a()}finally{dt=u,im.transition=f}}function gw(){return li().memoizedState}function Pk(s,a,u){var f=lo(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},yw(s))vw(a,u);else if(u=G_(s,a,u,f),u!==null){var m=pr();Pi(u,s,f,m),_w(u,a,f)}}function kk(s,a,u){var f=lo(s),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(yw(s))vw(a,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,C=v(T,u);if(m.hasEagerState=!0,m.eagerState=C,Ii(C,T)){var M=a.interleaved;M===null?(m.next=m,Xp(a)):(m.next=M.next,M.next=m),a.interleaved=m;return}}catch{}finally{}u=G_(s,a,m,f),u!==null&&(m=pr(),Pi(u,s,f,m),_w(u,a,f))}}function yw(s){var a=s.alternate;return s===Wt||a!==null&&a===Wt}function vw(s,a){zu=rh=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function _w(s,a,u){if((u&4194240)!==0){var f=a.lanes;f&=s.pendingLanes,u|=f,a.lanes=u,vu(s,u)}}var oh={readContext:ai,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},Ck={readContext:ai,useCallback:function(s,a){return Gi().memoizedState=[s,a===void 0?null:a],s},useContext:ai,useEffect:lw,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,ih(4194308,4,dw.bind(null,a,s),u)},useLayoutEffect:function(s,a){return ih(4194308,4,s,a)},useInsertionEffect:function(s,a){return ih(4,2,s,a)},useMemo:function(s,a){var u=Gi();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var f=Gi();return a=u!==void 0?u(a):a,f.memoizedState=f.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},f.queue=s,s=s.dispatch=Pk.bind(null,Wt,s),[f.memoizedState,s]},useRef:function(s){var a=Gi();return s={current:s},a.memoizedState=s},useState:ow,useDebugValue:dm,useDeferredValue:function(s){return Gi().memoizedState=s},useTransition:function(){var s=ow(!1),a=s[0];return s=Ak.bind(null,s[1]),Gi().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var f=Wt,m=Gi();if(Bt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Pn===null)throw Error(t(349));(ta&30)!==0||tw(f,a,u)}m.memoizedState=u;var v={value:u,getSnapshot:a};return m.queue=v,lw(rw.bind(null,f,v,s),[s]),f.flags|=2048,Hu(9,nw.bind(null,f,v,u,a),void 0,null),u},useId:function(){var s=Gi(),a=Pn.identifierPrefix;if(Bt){var u=Ts,f=Es;u=(f&~(1<<32-wt(f)-1)).toString(32)+u,a=":"+a+"R"+u,u=ju++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=Rk++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},xk={readContext:ai,useCallback:fw,useContext:ai,useEffect:cm,useImperativeHandle:hw,useInsertionEffect:uw,useLayoutEffect:cw,useMemo:pw,useReducer:lm,useRef:aw,useState:function(){return lm($u)},useDebugValue:dm,useDeferredValue:function(s){var a=li();return mw(a,yn.memoizedState,s)},useTransition:function(){var s=lm($u)[0],a=li().memoizedState;return[s,a]},useMutableSource:Z_,useSyncExternalStore:ew,useId:gw,unstable_isNewReconciler:!1},Dk={readContext:ai,useCallback:fw,useContext:ai,useEffect:cm,useImperativeHandle:hw,useInsertionEffect:uw,useLayoutEffect:cw,useMemo:pw,useReducer:um,useRef:aw,useState:function(){return um($u)},useDebugValue:dm,useDeferredValue:function(s){var a=li();return yn===null?a.memoizedState=s:mw(a,yn.memoizedState,s)},useTransition:function(){var s=um($u)[0],a=li().memoizedState;return[s,a]},useMutableSource:Z_,useSyncExternalStore:ew,useId:gw,unstable_isNewReconciler:!1};function bi(s,a){if(s&&s.defaultProps){a=ne({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function hm(s,a,u,f){a=s.memoizedState,u=u(f,a),u=u==null?a:ne({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var ah={isMounted:function(s){return(s=s._reactInternals)?Pe(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var f=pr(),m=lo(s),v=Ss(f,m);v.payload=a,u!=null&&(v.callback=u),a=io(s,v,m),a!==null&&(Pi(a,s,m,f),Zd(a,s,m))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var f=pr(),m=lo(s),v=Ss(f,m);v.tag=1,v.payload=a,u!=null&&(v.callback=u),a=io(s,v,m),a!==null&&(Pi(a,s,m,f),Zd(a,s,m))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=pr(),f=lo(s),m=Ss(u,f);m.tag=2,a!=null&&(m.callback=a),a=io(s,m,f),a!==null&&(Pi(a,s,f,u),Zd(a,s,f))}};function ww(s,a,u,f,m,v,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,v,T):a.prototype&&a.prototype.isPureReactComponent?!Cu(u,f)||!Cu(m,v):!0}function Ew(s,a,u){var f=!1,m=to,v=a.contextType;return typeof v=="object"&&v!==null?v=ai(v):(m=Ar(a)?Yo:Yn.current,f=a.contextTypes,v=(f=f!=null)?ul(s,m):to),a=new a(u,v),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ah,s.stateNode=a,a._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=v),a}function Tw(s,a,u,f){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==s&&ah.enqueueReplaceState(a,a.state,null)}function fm(s,a,u,f){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},Zp(s);var v=a.contextType;typeof v=="object"&&v!==null?m.context=ai(v):(v=Ar(a)?Yo:Yn.current,m.context=ul(s,v)),m.state=s.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(hm(s,a,v,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(a=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),a!==m.state&&ah.enqueueReplaceState(m,m.state,null),eh(s,u,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function yl(s,a){try{var u="",f=a;do u+=_e(f),f=f.return;while(f);var m=u}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:a,stack:m,digest:null}}function pm(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function mm(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var Nk=typeof WeakMap=="function"?WeakMap:Map;function Iw(s,a,u){u=Ss(-1,u),u.tag=3,u.payload={element:null};var f=a.value;return u.callback=function(){ph||(ph=!0,Cm=f),mm(s,a)},u}function Sw(s,a,u){u=Ss(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=a.value;u.payload=function(){return f(m)},u.callback=function(){mm(s,a)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){mm(s,a),typeof f!="function"&&(oo===null?oo=new Set([this]):oo.add(this));var T=a.stack;this.componentDidCatch(a.value,{componentStack:T!==null?T:""})}),u}function bw(s,a,u){var f=s.pingCache;if(f===null){f=s.pingCache=new Nk;var m=new Set;f.set(a,m)}else m=f.get(a),m===void 0&&(m=new Set,f.set(a,m));m.has(u)||(m.add(u),s=Kk.bind(null,s,a,u),a.then(s,s))}function Rw(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function Aw(s,a,u,f,m){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Ss(-1,1),a.tag=2,io(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var Ok=oe.ReactCurrentOwner,Pr=!1;function fr(s,a,u,f){a.child=s===null?K_(a,null,u,f):fl(a,s.child,u,f)}function Pw(s,a,u,f,m){u=u.render;var v=a.ref;return ml(a,m),f=om(s,a,u,f,v,m),u=am(),s!==null&&!Pr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,bs(s,a,m)):(Bt&&u&&$p(a),a.flags|=1,fr(s,a,f,m),a.child)}function kw(s,a,u,f,m){if(s===null){var v=u.type;return typeof v=="function"&&!Mm(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=v,Cw(s,a,v,f,m)):(s=wh(u.type,null,f,a,a.mode,m),s.ref=a.ref,s.return=a,a.child=s)}if(v=s.child,(s.lanes&m)===0){var T=v.memoizedProps;if(u=u.compare,u=u!==null?u:Cu,u(T,f)&&s.ref===a.ref)return bs(s,a,m)}return a.flags|=1,s=co(v,f),s.ref=a.ref,s.return=a,a.child=s}function Cw(s,a,u,f,m){if(s!==null){var v=s.memoizedProps;if(Cu(v,f)&&s.ref===a.ref)if(Pr=!1,a.pendingProps=f=v,(s.lanes&m)!==0)(s.flags&131072)!==0&&(Pr=!0);else return a.lanes=s.lanes,bs(s,a,m)}return gm(s,a,u,f,m)}function xw(s,a,u){var f=a.pendingProps,m=f.children,v=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},xt(_l,Wr),Wr|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,xt(_l,Wr),Wr|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=v!==null?v.baseLanes:u,xt(_l,Wr),Wr|=f}else v!==null?(f=v.baseLanes|u,a.memoizedState=null):f=u,xt(_l,Wr),Wr|=f;return fr(s,a,m,u),a.child}function Dw(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function gm(s,a,u,f,m){var v=Ar(u)?Yo:Yn.current;return v=ul(a,v),ml(a,m),u=om(s,a,u,f,v,m),f=am(),s!==null&&!Pr?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~m,bs(s,a,m)):(Bt&&f&&$p(a),a.flags|=1,fr(s,a,u,m),a.child)}function Nw(s,a,u,f,m){if(Ar(u)){var v=!0;qd(a)}else v=!1;if(ml(a,m),a.stateNode===null)uh(s,a),Ew(a,u,f),fm(a,u,f,m),f=!0;else if(s===null){var T=a.stateNode,C=a.memoizedProps;T.props=C;var M=T.context,Y=u.contextType;typeof Y=="object"&&Y!==null?Y=ai(Y):(Y=Ar(u)?Yo:Yn.current,Y=ul(a,Y));var ae=u.getDerivedStateFromProps,le=typeof ae=="function"||typeof T.getSnapshotBeforeUpdate=="function";le||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==f||M!==Y)&&Tw(a,T,f,Y),ro=!1;var se=a.memoizedState;T.state=se,eh(a,f,T,m),M=a.memoizedState,C!==f||se!==M||Rr.current||ro?(typeof ae=="function"&&(hm(a,u,ae,f),M=a.memoizedState),(C=ro||ww(a,u,C,f,se,M,Y))?(le||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(a.flags|=4194308)):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=M),T.props=f,T.state=M,T.context=Y,f=C):(typeof T.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{T=a.stateNode,Q_(s,a),C=a.memoizedProps,Y=a.type===a.elementType?C:bi(a.type,C),T.props=Y,le=a.pendingProps,se=T.context,M=u.contextType,typeof M=="object"&&M!==null?M=ai(M):(M=Ar(u)?Yo:Yn.current,M=ul(a,M));var Ie=u.getDerivedStateFromProps;(ae=typeof Ie=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==le||se!==M)&&Tw(a,T,f,M),ro=!1,se=a.memoizedState,T.state=se,eh(a,f,T,m);var xe=a.memoizedState;C!==le||se!==xe||Rr.current||ro?(typeof Ie=="function"&&(hm(a,u,Ie,f),xe=a.memoizedState),(Y=ro||ww(a,u,Y,f,se,xe,M)||!1)?(ae||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,xe,M),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,xe,M)),typeof T.componentDidUpdate=="function"&&(a.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=xe),T.props=f,T.state=xe,T.context=M,f=Y):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&se===s.memoizedState||(a.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&se===s.memoizedState||(a.flags|=1024),f=!1)}return ym(s,a,u,f,v,m)}function ym(s,a,u,f,m,v){Dw(s,a);var T=(a.flags&128)!==0;if(!f&&!T)return m&&F_(a,u,!1),bs(s,a,v);f=a.stateNode,Ok.current=a;var C=T&&typeof u.getDerivedStateFromError!="function"?null:f.render();return a.flags|=1,s!==null&&T?(a.child=fl(a,s.child,null,v),a.child=fl(a,null,C,v)):fr(s,a,C,v),a.memoizedState=f.state,m&&F_(a,u,!0),a.child}function Ow(s){var a=s.stateNode;a.pendingContext?L_(s,a.pendingContext,a.pendingContext!==a.context):a.context&&L_(s,a.context,!1),em(s,a.containerInfo)}function Vw(s,a,u,f,m){return hl(),Kp(m),a.flags|=256,fr(s,a,u,f),a.child}var vm={dehydrated:null,treeContext:null,retryLane:0};function _m(s){return{baseLanes:s,cachePool:null,transitions:null}}function Lw(s,a,u){var f=a.pendingProps,m=qt.current,v=!1,T=(a.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(m&2)!==0),C?(v=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),xt(qt,m&1),s===null)return Wp(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(T=f.children,s=f.fallback,v?(f=a.mode,v=a.child,T={mode:"hidden",children:T},(f&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=T):v=Eh(T,f,0,null),s=oa(s,f,u,null),v.return=a,s.return=a,v.sibling=s,a.child=v,a.child.memoizedState=_m(u),a.memoizedState=vm,s):wm(a,T));if(m=s.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return Vk(s,a,T,f,C,m,u);if(v){v=f.fallback,T=a.mode,m=s.child,C=m.sibling;var M={mode:"hidden",children:f.children};return(T&1)===0&&a.child!==m?(f=a.child,f.childLanes=0,f.pendingProps=M,a.deletions=null):(f=co(m,M),f.subtreeFlags=m.subtreeFlags&14680064),C!==null?v=co(C,v):(v=oa(v,T,u,null),v.flags|=2),v.return=a,f.return=a,f.sibling=v,a.child=f,f=v,v=a.child,T=s.child.memoizedState,T=T===null?_m(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},v.memoizedState=T,v.childLanes=s.childLanes&~u,a.memoizedState=vm,f}return v=s.child,s=v.sibling,f=co(v,{mode:"visible",children:f.children}),(a.mode&1)===0&&(f.lanes=u),f.return=a,f.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=f,a.memoizedState=null,f}function wm(s,a){return a=Eh({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function lh(s,a,u,f){return f!==null&&Kp(f),fl(a,s.child,null,u),s=wm(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function Vk(s,a,u,f,m,v,T){if(u)return a.flags&256?(a.flags&=-257,f=pm(Error(t(422))),lh(s,a,T,f)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(v=f.fallback,m=a.mode,f=Eh({mode:"visible",children:f.children},m,0,null),v=oa(v,m,T,null),v.flags|=2,f.return=a,v.return=a,f.sibling=v,a.child=f,(a.mode&1)!==0&&fl(a,s.child,null,T),a.child.memoizedState=_m(T),a.memoizedState=vm,v);if((a.mode&1)===0)return lh(s,a,T,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var C=f.dgst;return f=C,v=Error(t(419)),f=pm(v,f,void 0),lh(s,a,T,f)}if(C=(T&s.childLanes)!==0,Pr||C){if(f=Pn,f!==null){switch(T&-T){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|T))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,Is(s,m),Pi(f,s,m,-1))}return Lm(),f=pm(Error(t(421))),lh(s,a,T,f)}return m.data==="$?"?(a.flags|=128,a.child=s.child,a=Gk.bind(null,s),m._reactRetry=a,null):(s=v.treeContext,qr=Zs(m.nextSibling),Hr=a,Bt=!0,Si=null,s!==null&&(si[oi++]=Es,si[oi++]=Ts,si[oi++]=Jo,Es=s.id,Ts=s.overflow,Jo=a),a=wm(a,f.children),a.flags|=4096,a)}function Mw(s,a,u){s.lanes|=a;var f=s.alternate;f!==null&&(f.lanes|=a),Jp(s.return,a,u)}function Em(s,a,u,f,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(v.isBackwards=a,v.rendering=null,v.renderingStartTime=0,v.last=f,v.tail=u,v.tailMode=m)}function Fw(s,a,u){var f=a.pendingProps,m=f.revealOrder,v=f.tail;if(fr(s,a,f.children,u),f=qt.current,(f&2)!==0)f=f&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Mw(s,u,a);else if(s.tag===19)Mw(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(xt(qt,f),(a.mode&1)===0)a.memoizedState=null;else switch(m){case"forwards":for(u=a.child,m=null;u!==null;)s=u.alternate,s!==null&&th(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=a.child,a.child=null):(m=u.sibling,u.sibling=null),Em(a,!1,m,u,v);break;case"backwards":for(u=null,m=a.child,a.child=null;m!==null;){if(s=m.alternate,s!==null&&th(s)===null){a.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Em(a,!0,u,null,v);break;case"together":Em(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function uh(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function bs(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),na|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(t(153));if(a.child!==null){for(s=a.child,u=co(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=co(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function Lk(s,a,u){switch(a.tag){case 3:Ow(a),hl();break;case 5:X_(a);break;case 1:Ar(a.type)&&qd(a);break;case 4:em(a,a.stateNode.containerInfo);break;case 10:var f=a.type._context,m=a.memoizedProps.value;xt(Jd,f._currentValue),f._currentValue=m;break;case 13:if(f=a.memoizedState,f!==null)return f.dehydrated!==null?(xt(qt,qt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Lw(s,a,u):(xt(qt,qt.current&1),s=bs(s,a,u),s!==null?s.sibling:null);xt(qt,qt.current&1);break;case 19:if(f=(u&a.childLanes)!==0,(s.flags&128)!==0){if(f)return Fw(s,a,u);a.flags|=128}if(m=a.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),xt(qt,qt.current),f)break;return null;case 22:case 23:return a.lanes=0,xw(s,a,u)}return bs(s,a,u)}var Uw,Tm,Bw,zw;Uw=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Tm=function(){},Bw=function(s,a,u,f){var m=s.memoizedProps;if(m!==f){s=a.stateNode,ea(Ki.current);var v=null;switch(u){case"input":m=Mr(s,m),f=Mr(s,f),v=[];break;case"select":m=ne({},m,{value:void 0}),f=ne({},f,{value:void 0}),v=[];break;case"textarea":m=nn(s,m),f=nn(s,f),v=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=jd)}Ln(u,f);var T;u=null;for(Y in m)if(!f.hasOwnProperty(Y)&&m.hasOwnProperty(Y)&&m[Y]!=null)if(Y==="style"){var C=m[Y];for(T in C)C.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(i.hasOwnProperty(Y)?v||(v=[]):(v=v||[]).push(Y,null));for(Y in f){var M=f[Y];if(C=m!=null?m[Y]:void 0,f.hasOwnProperty(Y)&&M!==C&&(M!=null||C!=null))if(Y==="style")if(C){for(T in C)!C.hasOwnProperty(T)||M&&M.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in M)M.hasOwnProperty(T)&&C[T]!==M[T]&&(u||(u={}),u[T]=M[T])}else u||(v||(v=[]),v.push(Y,u)),u=M;else Y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,C=C?C.__html:void 0,M!=null&&C!==M&&(v=v||[]).push(Y,M)):Y==="children"?typeof M!="string"&&typeof M!="number"||(v=v||[]).push(Y,""+M):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(i.hasOwnProperty(Y)?(M!=null&&Y==="onScroll"&&Lt("scroll",s),v||C===M||(v=[])):(v=v||[]).push(Y,M))}u&&(v=v||[]).push("style",u);var Y=v;(a.updateQueue=Y)&&(a.flags|=4)}},zw=function(s,a,u,f){u!==f&&(a.flags|=4)};function qu(s,a){if(!Bt)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Xn(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(a)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=u,a}function Mk(s,a,u){var f=a.pendingProps;switch(Hp(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(a),null;case 1:return Ar(a.type)&&Hd(),Xn(a),null;case 3:return f=a.stateNode,gl(),Mt(Rr),Mt(Yn),rm(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Qd(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Si!==null&&(Nm(Si),Si=null))),Tm(s,a),Xn(a),null;case 5:tm(a);var m=ea(Bu.current);if(u=a.type,s!==null&&a.stateNode!=null)Bw(s,a,u,f,m),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!f){if(a.stateNode===null)throw Error(t(166));return Xn(a),null}if(s=ea(Ki.current),Qd(a)){f=a.stateNode,u=a.type;var v=a.memoizedProps;switch(f[Wi]=a,f[Vu]=v,s=(a.mode&1)!==0,u){case"dialog":Lt("cancel",f),Lt("close",f);break;case"iframe":case"object":case"embed":Lt("load",f);break;case"video":case"audio":for(m=0;m<Du.length;m++)Lt(Du[m],f);break;case"source":Lt("error",f);break;case"img":case"image":case"link":Lt("error",f),Lt("load",f);break;case"details":Lt("toggle",f);break;case"input":Ws(f,v),Lt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!v.multiple},Lt("invalid",f);break;case"textarea":Er(f,v),Lt("invalid",f)}Ln(u,v),m=null;for(var T in v)if(v.hasOwnProperty(T)){var C=v[T];T==="children"?typeof C=="string"?f.textContent!==C&&(v.suppressHydrationWarning!==!0&&zd(f.textContent,C,s),m=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(v.suppressHydrationWarning!==!0&&zd(f.textContent,C,s),m=["children",""+C]):i.hasOwnProperty(T)&&C!=null&&T==="onScroll"&&Lt("scroll",f)}switch(u){case"input":wr(f),Oi(f,v,!0);break;case"textarea":wr(f),Wn(f);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(f.onclick=jd)}f=m,a.updateQueue=f,f!==null&&(a.flags|=4)}else{T=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Fr(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(u,{is:f.is}):(s=T.createElement(u),u==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,u),s[Wi]=a,s[Vu]=f,Uw(s,a,!1,!1),a.stateNode=s;e:{switch(T=vi(u,f),u){case"dialog":Lt("cancel",s),Lt("close",s),m=f;break;case"iframe":case"object":case"embed":Lt("load",s),m=f;break;case"video":case"audio":for(m=0;m<Du.length;m++)Lt(Du[m],s);m=f;break;case"source":Lt("error",s),m=f;break;case"img":case"image":case"link":Lt("error",s),Lt("load",s),m=f;break;case"details":Lt("toggle",s),m=f;break;case"input":Ws(s,f),m=Mr(s,f),Lt("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ne({},f,{value:void 0}),Lt("invalid",s);break;case"textarea":Er(s,f),m=nn(s,f),Lt("invalid",s);break;default:m=f}Ln(u,m),C=m;for(v in C)if(C.hasOwnProperty(v)){var M=C[v];v==="style"?Sn(s,M):v==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&In(s,M)):v==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&Vn(s,M):typeof M=="number"&&Vn(s,""+M):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?M!=null&&v==="onScroll"&&Lt("scroll",s):M!=null&&Z(s,v,M,T))}switch(u){case"input":wr(s),Oi(s,f,!1);break;case"textarea":wr(s),Wn(s);break;case"option":f.value!=null&&s.setAttribute("value",""+qe(f.value));break;case"select":s.multiple=!!f.multiple,v=f.value,v!=null?lr(s,!!f.multiple,v,!1):f.defaultValue!=null&&lr(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=jd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Xn(a),null;case 6:if(s&&a.stateNode!=null)zw(s,a,s.memoizedProps,f);else{if(typeof f!="string"&&a.stateNode===null)throw Error(t(166));if(u=ea(Bu.current),ea(Ki.current),Qd(a)){if(f=a.stateNode,u=a.memoizedProps,f[Wi]=a,(v=f.nodeValue!==u)&&(s=Hr,s!==null))switch(s.tag){case 3:zd(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&zd(f.nodeValue,u,(s.mode&1)!==0)}v&&(a.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Wi]=a,a.stateNode=f}return Xn(a),null;case 13:if(Mt(qt),f=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Bt&&qr!==null&&(a.mode&1)!==0&&(a.flags&128)===0)H_(),hl(),a.flags|=98560,v=!1;else if(v=Qd(a),f!==null&&f.dehydrated!==null){if(s===null){if(!v)throw Error(t(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(t(317));v[Wi]=a}else hl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Xn(a),v=!1}else Si!==null&&(Nm(Si),Si=null),v=!0;if(!v)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(qt.current&1)!==0?vn===0&&(vn=3):Lm())),a.updateQueue!==null&&(a.flags|=4),Xn(a),null);case 4:return gl(),Tm(s,a),s===null&&Nu(a.stateNode.containerInfo),Xn(a),null;case 10:return Yp(a.type._context),Xn(a),null;case 17:return Ar(a.type)&&Hd(),Xn(a),null;case 19:if(Mt(qt),v=a.memoizedState,v===null)return Xn(a),null;if(f=(a.flags&128)!==0,T=v.rendering,T===null)if(f)qu(v,!1);else{if(vn!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(T=th(s),T!==null){for(a.flags|=128,qu(v,!1),f=T.updateQueue,f!==null&&(a.updateQueue=f,a.flags|=4),a.subtreeFlags=0,f=u,u=a.child;u!==null;)v=u,s=f,v.flags&=14680066,T=v.alternate,T===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=T.childLanes,v.lanes=T.lanes,v.child=T.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=T.memoizedProps,v.memoizedState=T.memoizedState,v.updateQueue=T.updateQueue,v.type=T.type,s=T.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return xt(qt,qt.current&1|2),a.child}s=s.sibling}v.tail!==null&&pt()>wl&&(a.flags|=128,f=!0,qu(v,!1),a.lanes=4194304)}else{if(!f)if(s=th(T),s!==null){if(a.flags|=128,f=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),qu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!T.alternate&&!Bt)return Xn(a),null}else 2*pt()-v.renderingStartTime>wl&&u!==1073741824&&(a.flags|=128,f=!0,qu(v,!1),a.lanes=4194304);v.isBackwards?(T.sibling=a.child,a.child=T):(u=v.last,u!==null?u.sibling=T:a.child=T,v.last=T)}return v.tail!==null?(a=v.tail,v.rendering=a,v.tail=a.sibling,v.renderingStartTime=pt(),a.sibling=null,u=qt.current,xt(qt,f?u&1|2:u&1),a):(Xn(a),null);case 22:case 23:return Vm(),f=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(a.flags|=8192),f&&(a.mode&1)!==0?(Wr&1073741824)!==0&&(Xn(a),a.subtreeFlags&6&&(a.flags|=8192)):Xn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function Fk(s,a){switch(Hp(a),a.tag){case 1:return Ar(a.type)&&Hd(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return gl(),Mt(Rr),Mt(Yn),rm(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return tm(a),null;case 13:if(Mt(qt),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(t(340));hl()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Mt(qt),null;case 4:return gl(),null;case 10:return Yp(a.type._context),null;case 22:case 23:return Vm(),null;case 24:return null;default:return null}}var ch=!1,Zn=!1,Uk=typeof WeakSet=="function"?WeakSet:Set,ke=null;function vl(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Xt(s,a,f)}else u.current=null}function Im(s,a,u){try{u()}catch(f){Xt(s,a,f)}}var jw=!1;function Bk(s,a){if(Vp=gs,s=w_(),Ap(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,v=f.focusNode;f=f.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var T=0,C=-1,M=-1,Y=0,ae=0,le=s,se=null;t:for(;;){for(var Ie;le!==u||m!==0&&le.nodeType!==3||(C=T+m),le!==v||f!==0&&le.nodeType!==3||(M=T+f),le.nodeType===3&&(T+=le.nodeValue.length),(Ie=le.firstChild)!==null;)se=le,le=Ie;for(;;){if(le===s)break t;if(se===u&&++Y===m&&(C=T),se===v&&++ae===f&&(M=T),(Ie=le.nextSibling)!==null)break;le=se,se=le.parentNode}le=Ie}u=C===-1||M===-1?null:{start:C,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(Lp={focusedElem:s,selectionRange:u},gs=!1,ke=a;ke!==null;)if(a=ke,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,ke=s;else for(;ke!==null;){a=ke;try{var xe=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var Oe=xe.memoizedProps,on=xe.memoizedState,H=a.stateNode,B=H.getSnapshotBeforeUpdate(a.elementType===a.type?Oe:bi(a.type,Oe),on);H.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var Q=a.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(me){Xt(a,a.return,me)}if(s=a.sibling,s!==null){s.return=a.return,ke=s;break}ke=a.return}return xe=jw,jw=!1,xe}function Wu(s,a,u){var f=a.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var v=m.destroy;m.destroy=void 0,v!==void 0&&Im(a,u,v)}m=m.next}while(m!==f)}}function dh(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==a)}}function Sm(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function $w(s){var a=s.alternate;a!==null&&(s.alternate=null,$w(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[Wi],delete a[Vu],delete a[Bp],delete a[Tk],delete a[Ik])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Hw(s){return s.tag===5||s.tag===3||s.tag===4}function qw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Hw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function bm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=jd));else if(f!==4&&(s=s.child,s!==null))for(bm(s,a,u),s=s.sibling;s!==null;)bm(s,a,u),s=s.sibling}function Rm(s,a,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(Rm(s,a,u),s=s.sibling;s!==null;)Rm(s,a,u),s=s.sibling}var Bn=null,Ri=!1;function so(s,a,u){for(u=u.child;u!==null;)Ww(s,a,u),u=u.sibling}function Ww(s,a,u){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(ii,u)}catch{}switch(u.tag){case 5:Zn||vl(u,a);case 6:var f=Bn,m=Ri;Bn=null,so(s,a,u),Bn=f,Ri=m,Bn!==null&&(Ri?(s=Bn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Bn.removeChild(u.stateNode));break;case 18:Bn!==null&&(Ri?(s=Bn,u=u.stateNode,s.nodeType===8?Up(s.parentNode,u):s.nodeType===1&&Up(s,u),Qs(s)):Up(Bn,u.stateNode));break;case 4:f=Bn,m=Ri,Bn=u.stateNode.containerInfo,Ri=!0,so(s,a,u),Bn=f,Ri=m;break;case 0:case 11:case 14:case 15:if(!Zn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var v=m,T=v.destroy;v=v.tag,T!==void 0&&((v&2)!==0||(v&4)!==0)&&Im(u,a,T),m=m.next}while(m!==f)}so(s,a,u);break;case 1:if(!Zn&&(vl(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(C){Xt(u,a,C)}so(s,a,u);break;case 21:so(s,a,u);break;case 22:u.mode&1?(Zn=(f=Zn)||u.memoizedState!==null,so(s,a,u),Zn=f):so(s,a,u);break;default:so(s,a,u)}}function Kw(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new Uk),a.forEach(function(f){var m=Qk.bind(null,s,f);u.has(f)||(u.add(f),f.then(m,m))})}}function Ai(s,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var v=s,T=a,C=T;e:for(;C!==null;){switch(C.tag){case 5:Bn=C.stateNode,Ri=!1;break e;case 3:Bn=C.stateNode.containerInfo,Ri=!0;break e;case 4:Bn=C.stateNode.containerInfo,Ri=!0;break e}C=C.return}if(Bn===null)throw Error(t(160));Ww(v,T,m),Bn=null,Ri=!1;var M=m.alternate;M!==null&&(M.return=null),m.return=null}catch(Y){Xt(m,a,Y)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Gw(a,s),a=a.sibling}function Gw(s,a){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Ai(a,s),Qi(s),f&4){try{Wu(3,s,s.return),dh(3,s)}catch(Oe){Xt(s,s.return,Oe)}try{Wu(5,s,s.return)}catch(Oe){Xt(s,s.return,Oe)}}break;case 1:Ai(a,s),Qi(s),f&512&&u!==null&&vl(u,u.return);break;case 5:if(Ai(a,s),Qi(s),f&512&&u!==null&&vl(u,u.return),s.flags&32){var m=s.stateNode;try{Vn(m,"")}catch(Oe){Xt(s,s.return,Oe)}}if(f&4&&(m=s.stateNode,m!=null)){var v=s.memoizedProps,T=u!==null?u.memoizedProps:v,C=s.type,M=s.updateQueue;if(s.updateQueue=null,M!==null)try{C==="input"&&v.type==="radio"&&v.name!=null&&On(m,v),vi(C,T);var Y=vi(C,v);for(T=0;T<M.length;T+=2){var ae=M[T],le=M[T+1];ae==="style"?Sn(m,le):ae==="dangerouslySetInnerHTML"?In(m,le):ae==="children"?Vn(m,le):Z(m,ae,le,Y)}switch(C){case"input":ar(m,v);break;case"textarea":Tr(m,v);break;case"select":var se=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var Ie=v.value;Ie!=null?lr(m,!!v.multiple,Ie,!1):se!==!!v.multiple&&(v.defaultValue!=null?lr(m,!!v.multiple,v.defaultValue,!0):lr(m,!!v.multiple,v.multiple?[]:"",!1))}m[Vu]=v}catch(Oe){Xt(s,s.return,Oe)}}break;case 6:if(Ai(a,s),Qi(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,v=s.memoizedProps;try{m.nodeValue=v}catch(Oe){Xt(s,s.return,Oe)}}break;case 3:if(Ai(a,s),Qi(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Qs(a.containerInfo)}catch(Oe){Xt(s,s.return,Oe)}break;case 4:Ai(a,s),Qi(s);break;case 13:Ai(a,s),Qi(s),m=s.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(km=pt())),f&4&&Kw(s);break;case 22:if(ae=u!==null&&u.memoizedState!==null,s.mode&1?(Zn=(Y=Zn)||ae,Ai(a,s),Zn=Y):Ai(a,s),Qi(s),f&8192){if(Y=s.memoizedState!==null,(s.stateNode.isHidden=Y)&&!ae&&(s.mode&1)!==0)for(ke=s,ae=s.child;ae!==null;){for(le=ke=ae;ke!==null;){switch(se=ke,Ie=se.child,se.tag){case 0:case 11:case 14:case 15:Wu(4,se,se.return);break;case 1:vl(se,se.return);var xe=se.stateNode;if(typeof xe.componentWillUnmount=="function"){f=se,u=se.return;try{a=f,xe.props=a.memoizedProps,xe.state=a.memoizedState,xe.componentWillUnmount()}catch(Oe){Xt(f,u,Oe)}}break;case 5:vl(se,se.return);break;case 22:if(se.memoizedState!==null){Jw(le);continue}}Ie!==null?(Ie.return=se,ke=Ie):Jw(le)}ae=ae.sibling}e:for(ae=null,le=s;;){if(le.tag===5){if(ae===null){ae=le;try{m=le.stateNode,Y?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(C=le.stateNode,M=le.memoizedProps.style,T=M!=null&&M.hasOwnProperty("display")?M.display:null,C.style.display=ri("display",T))}catch(Oe){Xt(s,s.return,Oe)}}}else if(le.tag===6){if(ae===null)try{le.stateNode.nodeValue=Y?"":le.memoizedProps}catch(Oe){Xt(s,s.return,Oe)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===s)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===s)break e;for(;le.sibling===null;){if(le.return===null||le.return===s)break e;ae===le&&(ae=null),le=le.return}ae===le&&(ae=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:Ai(a,s),Qi(s),f&4&&Kw(s);break;case 21:break;default:Ai(a,s),Qi(s)}}function Qi(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(Hw(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Vn(m,""),f.flags&=-33);var v=qw(s);Rm(s,v,m);break;case 3:case 4:var T=f.stateNode.containerInfo,C=qw(s);bm(s,C,T);break;default:throw Error(t(161))}}catch(M){Xt(s,s.return,M)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function zk(s,a,u){ke=s,Qw(s)}function Qw(s,a,u){for(var f=(s.mode&1)!==0;ke!==null;){var m=ke,v=m.child;if(m.tag===22&&f){var T=m.memoizedState!==null||ch;if(!T){var C=m.alternate,M=C!==null&&C.memoizedState!==null||Zn;C=ch;var Y=Zn;if(ch=T,(Zn=M)&&!Y)for(ke=m;ke!==null;)T=ke,M=T.child,T.tag===22&&T.memoizedState!==null?Xw(m):M!==null?(M.return=T,ke=M):Xw(m);for(;v!==null;)ke=v,Qw(v),v=v.sibling;ke=m,ch=C,Zn=Y}Yw(s)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,ke=v):Yw(s)}}function Yw(s){for(;ke!==null;){var a=ke;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:Zn||dh(5,a);break;case 1:var f=a.stateNode;if(a.flags&4&&!Zn)if(u===null)f.componentDidMount();else{var m=a.elementType===a.type?u.memoizedProps:bi(a.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var v=a.updateQueue;v!==null&&J_(a,v,f);break;case 3:var T=a.updateQueue;if(T!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}J_(a,T,u)}break;case 5:var C=a.stateNode;if(u===null&&a.flags&4){u=C;var M=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var Y=a.alternate;if(Y!==null){var ae=Y.memoizedState;if(ae!==null){var le=ae.dehydrated;le!==null&&Qs(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Zn||a.flags&512&&Sm(a)}catch(se){Xt(a,a.return,se)}}if(a===s){ke=null;break}if(u=a.sibling,u!==null){u.return=a.return,ke=u;break}ke=a.return}}function Jw(s){for(;ke!==null;){var a=ke;if(a===s){ke=null;break}var u=a.sibling;if(u!==null){u.return=a.return,ke=u;break}ke=a.return}}function Xw(s){for(;ke!==null;){var a=ke;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{dh(4,a)}catch(M){Xt(a,u,M)}break;case 1:var f=a.stateNode;if(typeof f.componentDidMount=="function"){var m=a.return;try{f.componentDidMount()}catch(M){Xt(a,m,M)}}var v=a.return;try{Sm(a)}catch(M){Xt(a,v,M)}break;case 5:var T=a.return;try{Sm(a)}catch(M){Xt(a,T,M)}}}catch(M){Xt(a,a.return,M)}if(a===s){ke=null;break}var C=a.sibling;if(C!==null){C.return=a.return,ke=C;break}ke=a.return}}var jk=Math.ceil,hh=oe.ReactCurrentDispatcher,Am=oe.ReactCurrentOwner,ui=oe.ReactCurrentBatchConfig,gt=0,Pn=null,cn=null,zn=0,Wr=0,_l=eo(0),vn=0,Ku=null,na=0,fh=0,Pm=0,Gu=null,kr=null,km=0,wl=1/0,Rs=null,ph=!1,Cm=null,oo=null,mh=!1,ao=null,gh=0,Qu=0,xm=null,yh=-1,vh=0;function pr(){return(gt&6)!==0?pt():yh!==-1?yh:yh=pt()}function lo(s){return(s.mode&1)===0?1:(gt&2)!==0&&zn!==0?zn&-zn:bk.transition!==null?(vh===0&&(vh=gu()),vh):(s=dt,s!==0||(s=window.event,s=s===void 0?16:Qa(s.type)),s)}function Pi(s,a,u,f){if(50<Qu)throw Qu=0,xm=null,Error(t(185));Ho(s,u,f),((gt&2)===0||s!==Pn)&&(s===Pn&&((gt&2)===0&&(fh|=u),vn===4&&uo(s,zn)),Cr(s,f),u===1&&gt===0&&(a.mode&1)===0&&(wl=pt()+500,Wd&&no()))}function Cr(s,a){var u=s.callbackNode;$o(s,a);var f=fs(s,s===Pn?zn:0);if(f===0)u!==null&&Yt(u),s.callbackNode=null,s.callbackPriority=0;else if(a=f&-f,s.callbackPriority!==a){if(u!=null&&Yt(u),a===1)s.tag===0?Sk(eE.bind(null,s)):U_(eE.bind(null,s)),wk(function(){(gt&6)===0&&no()}),u=null;else{switch(Li(f)){case 1:u=dr;break;case 4:u=Gn;break;case 16:u=_i;break;case 536870912:u=br;break;default:u=_i}u=lE(u,Zw.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function Zw(s,a){if(yh=-1,vh=0,(gt&6)!==0)throw Error(t(327));var u=s.callbackNode;if(El()&&s.callbackNode!==u)return null;var f=fs(s,s===Pn?zn:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||a)a=_h(s,f);else{a=f;var m=gt;gt|=2;var v=nE();(Pn!==s||zn!==a)&&(Rs=null,wl=pt()+500,ia(s,a));do try{qk();break}catch(C){tE(s,C)}while(!0);Qp(),hh.current=v,gt=m,cn!==null?a=0:(Pn=null,zn=0,a=vn)}if(a!==0){if(a===2&&(m=mu(s),m!==0&&(f=m,a=Dm(s,m))),a===1)throw u=Ku,ia(s,0),uo(s,f),Cr(s,pt()),u;if(a===6)uo(s,f);else{if(m=s.current.alternate,(f&30)===0&&!$k(m)&&(a=_h(s,f),a===2&&(v=mu(s),v!==0&&(f=v,a=Dm(s,v))),a===1))throw u=Ku,ia(s,0),uo(s,f),Cr(s,pt()),u;switch(s.finishedWork=m,s.finishedLanes=f,a){case 0:case 1:throw Error(t(345));case 2:sa(s,kr,Rs);break;case 3:if(uo(s,f),(f&130023424)===f&&(a=km+500-pt(),10<a)){if(fs(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){pr(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=Fp(sa.bind(null,s,kr,Rs),a);break}sa(s,kr,Rs);break;case 4:if(uo(s,f),(f&4194240)===f)break;for(a=s.eventTimes,m=-1;0<f;){var T=31-wt(f);v=1<<T,T=a[T],T>m&&(m=T),f&=~v}if(f=m,f=pt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*jk(f/1960))-f,10<f){s.timeoutHandle=Fp(sa.bind(null,s,kr,Rs),f);break}sa(s,kr,Rs);break;case 5:sa(s,kr,Rs);break;default:throw Error(t(329))}}}return Cr(s,pt()),s.callbackNode===u?Zw.bind(null,s):null}function Dm(s,a){var u=Gu;return s.current.memoizedState.isDehydrated&&(ia(s,a).flags|=256),s=_h(s,a),s!==2&&(a=kr,kr=u,a!==null&&Nm(a)),s}function Nm(s){kr===null?kr=s:kr.push.apply(kr,s)}function $k(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],v=m.getSnapshot;m=m.value;try{if(!Ii(v(),m))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function uo(s,a){for(a&=~Pm,a&=~fh,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-wt(a),f=1<<u;s[u]=-1,a&=~f}}function eE(s){if((gt&6)!==0)throw Error(t(327));El();var a=fs(s,0);if((a&1)===0)return Cr(s,pt()),null;var u=_h(s,a);if(s.tag!==0&&u===2){var f=mu(s);f!==0&&(a=f,u=Dm(s,f))}if(u===1)throw u=Ku,ia(s,0),uo(s,a),Cr(s,pt()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,sa(s,kr,Rs),Cr(s,pt()),null}function Om(s,a){var u=gt;gt|=1;try{return s(a)}finally{gt=u,gt===0&&(wl=pt()+500,Wd&&no())}}function ra(s){ao!==null&&ao.tag===0&&(gt&6)===0&&El();var a=gt;gt|=1;var u=ui.transition,f=dt;try{if(ui.transition=null,dt=1,s)return s()}finally{dt=f,ui.transition=u,gt=a,(gt&6)===0&&no()}}function Vm(){Wr=_l.current,Mt(_l)}function ia(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,_k(u)),cn!==null)for(u=cn.return;u!==null;){var f=u;switch(Hp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Hd();break;case 3:gl(),Mt(Rr),Mt(Yn),rm();break;case 5:tm(f);break;case 4:gl();break;case 13:Mt(qt);break;case 19:Mt(qt);break;case 10:Yp(f.type._context);break;case 22:case 23:Vm()}u=u.return}if(Pn=s,cn=s=co(s.current,null),zn=Wr=a,vn=0,Ku=null,Pm=fh=na=0,kr=Gu=null,Zo!==null){for(a=0;a<Zo.length;a++)if(u=Zo[a],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,v=u.pending;if(v!==null){var T=v.next;v.next=m,f.next=T}u.pending=f}Zo=null}return s}function tE(s,a){do{var u=cn;try{if(Qp(),nh.current=oh,rh){for(var f=Wt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}rh=!1}if(ta=0,An=yn=Wt=null,zu=!1,ju=0,Am.current=null,u===null||u.return===null){vn=1,Ku=a,cn=null;break}e:{var v=s,T=u.return,C=u,M=a;if(a=zn,C.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var Y=M,ae=C,le=ae.tag;if((ae.mode&1)===0&&(le===0||le===11||le===15)){var se=ae.alternate;se?(ae.updateQueue=se.updateQueue,ae.memoizedState=se.memoizedState,ae.lanes=se.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Ie=Rw(T);if(Ie!==null){Ie.flags&=-257,Aw(Ie,T,C,v,a),Ie.mode&1&&bw(v,Y,a),a=Ie,M=Y;var xe=a.updateQueue;if(xe===null){var Oe=new Set;Oe.add(M),a.updateQueue=Oe}else xe.add(M);break e}else{if((a&1)===0){bw(v,Y,a),Lm();break e}M=Error(t(426))}}else if(Bt&&C.mode&1){var on=Rw(T);if(on!==null){(on.flags&65536)===0&&(on.flags|=256),Aw(on,T,C,v,a),Kp(yl(M,C));break e}}v=M=yl(M,C),vn!==4&&(vn=2),Gu===null?Gu=[v]:Gu.push(v),v=T;do{switch(v.tag){case 3:v.flags|=65536,a&=-a,v.lanes|=a;var H=Iw(v,M,a);Y_(v,H);break e;case 1:C=M;var B=v.type,Q=v.stateNode;if((v.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(oo===null||!oo.has(Q)))){v.flags|=65536,a&=-a,v.lanes|=a;var me=Sw(v,C,a);Y_(v,me);break e}}v=v.return}while(v!==null)}iE(u)}catch(Me){a=Me,cn===u&&u!==null&&(cn=u=u.return);continue}break}while(!0)}function nE(){var s=hh.current;return hh.current=oh,s===null?oh:s}function Lm(){(vn===0||vn===3||vn===2)&&(vn=4),Pn===null||(na&268435455)===0&&(fh&268435455)===0||uo(Pn,zn)}function _h(s,a){var u=gt;gt|=2;var f=nE();(Pn!==s||zn!==a)&&(Rs=null,ia(s,a));do try{Hk();break}catch(m){tE(s,m)}while(!0);if(Qp(),gt=u,hh.current=f,cn!==null)throw Error(t(261));return Pn=null,zn=0,vn}function Hk(){for(;cn!==null;)rE(cn)}function qk(){for(;cn!==null&&!lt();)rE(cn)}function rE(s){var a=aE(s.alternate,s,Wr);s.memoizedProps=s.pendingProps,a===null?iE(s):cn=a,Am.current=null}function iE(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=Mk(u,a,Wr),u!==null){cn=u;return}}else{if(u=Fk(u,a),u!==null){u.flags&=32767,cn=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{vn=6,cn=null;return}}if(a=a.sibling,a!==null){cn=a;return}cn=a=s}while(a!==null);vn===0&&(vn=5)}function sa(s,a,u){var f=dt,m=ui.transition;try{ui.transition=null,dt=1,Wk(s,a,u,f)}finally{ui.transition=m,dt=f}return null}function Wk(s,a,u,f){do El();while(ao!==null);if((gt&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(Tp(s,v),s===Pn&&(cn=Pn=null,zn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||mh||(mh=!0,lE(_i,function(){return El(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=ui.transition,ui.transition=null;var T=dt;dt=1;var C=gt;gt|=4,Am.current=null,Bk(s,u),Gw(u,s),hk(Lp),gs=!!Vp,Lp=Vp=null,s.current=u,zk(u),Jt(),gt=C,dt=T,ui.transition=v}else s.current=u;if(mh&&(mh=!1,ao=s,gh=m),v=s.pendingLanes,v===0&&(oo=null),rt(u.stateNode),Cr(s,pt()),a!==null)for(f=s.onRecoverableError,u=0;u<a.length;u++)m=a[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(ph)throw ph=!1,s=Cm,Cm=null,s;return(gh&1)!==0&&s.tag!==0&&El(),v=s.pendingLanes,(v&1)!==0?s===xm?Qu++:(Qu=0,xm=s):Qu=0,no(),null}function El(){if(ao!==null){var s=Li(gh),a=ui.transition,u=dt;try{if(ui.transition=null,dt=16>s?16:s,ao===null)var f=!1;else{if(s=ao,ao=null,gh=0,(gt&6)!==0)throw Error(t(331));var m=gt;for(gt|=4,ke=s.current;ke!==null;){var v=ke,T=v.child;if((ke.flags&16)!==0){var C=v.deletions;if(C!==null){for(var M=0;M<C.length;M++){var Y=C[M];for(ke=Y;ke!==null;){var ae=ke;switch(ae.tag){case 0:case 11:case 15:Wu(8,ae,v)}var le=ae.child;if(le!==null)le.return=ae,ke=le;else for(;ke!==null;){ae=ke;var se=ae.sibling,Ie=ae.return;if($w(ae),ae===Y){ke=null;break}if(se!==null){se.return=Ie,ke=se;break}ke=Ie}}}var xe=v.alternate;if(xe!==null){var Oe=xe.child;if(Oe!==null){xe.child=null;do{var on=Oe.sibling;Oe.sibling=null,Oe=on}while(Oe!==null)}}ke=v}}if((v.subtreeFlags&2064)!==0&&T!==null)T.return=v,ke=T;else e:for(;ke!==null;){if(v=ke,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Wu(9,v,v.return)}var H=v.sibling;if(H!==null){H.return=v.return,ke=H;break e}ke=v.return}}var B=s.current;for(ke=B;ke!==null;){T=ke;var Q=T.child;if((T.subtreeFlags&2064)!==0&&Q!==null)Q.return=T,ke=Q;else e:for(T=B;ke!==null;){if(C=ke,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:dh(9,C)}}catch(Me){Xt(C,C.return,Me)}if(C===T){ke=null;break e}var me=C.sibling;if(me!==null){me.return=C.return,ke=me;break e}ke=C.return}}if(gt=m,no(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(ii,s)}catch{}f=!0}return f}finally{dt=u,ui.transition=a}}return!1}function sE(s,a,u){a=yl(u,a),a=Iw(s,a,1),s=io(s,a,1),a=pr(),s!==null&&(Ho(s,1,a),Cr(s,a))}function Xt(s,a,u){if(s.tag===3)sE(s,s,u);else for(;a!==null;){if(a.tag===3){sE(a,s,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(oo===null||!oo.has(f))){s=yl(u,s),s=Sw(a,s,1),a=io(a,s,1),s=pr(),a!==null&&(Ho(a,1,s),Cr(a,s));break}}a=a.return}}function Kk(s,a,u){var f=s.pingCache;f!==null&&f.delete(a),a=pr(),s.pingedLanes|=s.suspendedLanes&u,Pn===s&&(zn&u)===u&&(vn===4||vn===3&&(zn&130023424)===zn&&500>pt()-km?ia(s,0):Pm|=u),Cr(s,a)}function oE(s,a){a===0&&((s.mode&1)===0?a=1:(a=Ei,Ei<<=1,(Ei&130023424)===0&&(Ei=4194304)));var u=pr();s=Is(s,a),s!==null&&(Ho(s,a,u),Cr(s,u))}function Gk(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),oE(s,u)}function Qk(s,a){var u=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(a),oE(s,u)}var aE;aE=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||Rr.current)Pr=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return Pr=!1,Lk(s,a,u);Pr=(s.flags&131072)!==0}else Pr=!1,Bt&&(a.flags&1048576)!==0&&B_(a,Gd,a.index);switch(a.lanes=0,a.tag){case 2:var f=a.type;uh(s,a),s=a.pendingProps;var m=ul(a,Yn.current);ml(a,u),m=om(null,a,f,s,m,u);var v=am();return a.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,Ar(f)?(v=!0,qd(a)):v=!1,a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Zp(a),m.updater=ah,a.stateNode=m,m._reactInternals=a,fm(a,f,s,u),a=ym(null,a,f,!0,v,u)):(a.tag=0,Bt&&v&&$p(a),fr(null,a,m,u),a=a.child),a;case 16:f=a.elementType;e:{switch(uh(s,a),s=a.pendingProps,m=f._init,f=m(f._payload),a.type=f,m=a.tag=Jk(f),s=bi(f,s),m){case 0:a=gm(null,a,f,s,u);break e;case 1:a=Nw(null,a,f,s,u);break e;case 11:a=Pw(null,a,f,s,u);break e;case 14:a=kw(null,a,f,bi(f.type,s),u);break e}throw Error(t(306,f,""))}return a;case 0:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:bi(f,m),gm(s,a,f,m,u);case 1:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:bi(f,m),Nw(s,a,f,m,u);case 3:e:{if(Ow(a),s===null)throw Error(t(387));f=a.pendingProps,v=a.memoizedState,m=v.element,Q_(s,a),eh(a,f,null,u);var T=a.memoizedState;if(f=T.element,v.isDehydrated)if(v={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){m=yl(Error(t(423)),a),a=Vw(s,a,f,u,m);break e}else if(f!==m){m=yl(Error(t(424)),a),a=Vw(s,a,f,u,m);break e}else for(qr=Zs(a.stateNode.containerInfo.firstChild),Hr=a,Bt=!0,Si=null,u=K_(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(hl(),f===m){a=bs(s,a,u);break e}fr(s,a,f,u)}a=a.child}return a;case 5:return X_(a),s===null&&Wp(a),f=a.type,m=a.pendingProps,v=s!==null?s.memoizedProps:null,T=m.children,Mp(f,m)?T=null:v!==null&&Mp(f,v)&&(a.flags|=32),Dw(s,a),fr(s,a,T,u),a.child;case 6:return s===null&&Wp(a),null;case 13:return Lw(s,a,u);case 4:return em(a,a.stateNode.containerInfo),f=a.pendingProps,s===null?a.child=fl(a,null,f,u):fr(s,a,f,u),a.child;case 11:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:bi(f,m),Pw(s,a,f,m,u);case 7:return fr(s,a,a.pendingProps,u),a.child;case 8:return fr(s,a,a.pendingProps.children,u),a.child;case 12:return fr(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(f=a.type._context,m=a.pendingProps,v=a.memoizedProps,T=m.value,xt(Jd,f._currentValue),f._currentValue=T,v!==null)if(Ii(v.value,T)){if(v.children===m.children&&!Rr.current){a=bs(s,a,u);break e}}else for(v=a.child,v!==null&&(v.return=a);v!==null;){var C=v.dependencies;if(C!==null){T=v.child;for(var M=C.firstContext;M!==null;){if(M.context===f){if(v.tag===1){M=Ss(-1,u&-u),M.tag=2;var Y=v.updateQueue;if(Y!==null){Y=Y.shared;var ae=Y.pending;ae===null?M.next=M:(M.next=ae.next,ae.next=M),Y.pending=M}}v.lanes|=u,M=v.alternate,M!==null&&(M.lanes|=u),Jp(v.return,u,a),C.lanes|=u;break}M=M.next}}else if(v.tag===10)T=v.type===a.type?null:v.child;else if(v.tag===18){if(T=v.return,T===null)throw Error(t(341));T.lanes|=u,C=T.alternate,C!==null&&(C.lanes|=u),Jp(T,u,a),T=v.sibling}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===a){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}fr(s,a,m.children,u),a=a.child}return a;case 9:return m=a.type,f=a.pendingProps.children,ml(a,u),m=ai(m),f=f(m),a.flags|=1,fr(s,a,f,u),a.child;case 14:return f=a.type,m=bi(f,a.pendingProps),m=bi(f.type,m),kw(s,a,f,m,u);case 15:return Cw(s,a,a.type,a.pendingProps,u);case 17:return f=a.type,m=a.pendingProps,m=a.elementType===f?m:bi(f,m),uh(s,a),a.tag=1,Ar(f)?(s=!0,qd(a)):s=!1,ml(a,u),Ew(a,f,m),fm(a,f,m,u),ym(null,a,f,!0,s,u);case 19:return Fw(s,a,u);case 22:return xw(s,a,u)}throw Error(t(156,a.tag))};function lE(s,a){return Ut(s,a)}function Yk(s,a,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(s,a,u,f){return new Yk(s,a,u,f)}function Mm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Jk(s){if(typeof s=="function")return Mm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===ze)return 14}return 2}function co(s,a){var u=s.alternate;return u===null?(u=ci(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function wh(s,a,u,f,m,v){var T=2;if(f=s,typeof s=="function")Mm(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case I:return oa(u.children,m,v,a);case S:T=8,m|=8;break;case A:return s=ci(12,u,a,m|2),s.elementType=A,s.lanes=v,s;case P:return s=ci(13,u,a,m),s.elementType=P,s.lanes=v,s;case Be:return s=ci(19,u,a,m),s.elementType=Be,s.lanes=v,s;case be:return Eh(u,m,v,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:T=10;break e;case N:T=9;break e;case F:T=11;break e;case ze:T=14;break e;case fe:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return a=ci(T,u,a,m),a.elementType=s,a.type=f,a.lanes=v,a}function oa(s,a,u,f){return s=ci(7,s,f,a),s.lanes=u,s}function Eh(s,a,u,f){return s=ci(22,s,f,a),s.elementType=be,s.lanes=u,s.stateNode={isHidden:!1},s}function Fm(s,a,u){return s=ci(6,s,null,a),s.lanes=u,s}function Um(s,a,u){return a=ci(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function Xk(s,a,u,f,m){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yu(0),this.expirationTimes=yu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yu(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function Bm(s,a,u,f,m,v,T,C,M){return s=new Xk(s,a,u,C,M),a===1?(a=1,v===!0&&(a|=8)):a=0,v=ci(3,null,null,a),s.current=v,v.stateNode=s,v.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zp(v),s}function Zk(s,a,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ue,key:f==null?null:""+f,children:s,containerInfo:a,implementation:u}}function uE(s){if(!s)return to;s=s._reactInternals;e:{if(Pe(s)!==s||s.tag!==1)throw Error(t(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(Ar(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(Ar(u))return M_(s,u,a)}return a}function cE(s,a,u,f,m,v,T,C,M){return s=Bm(u,f,!0,s,m,v,T,C,M),s.context=uE(null),u=s.current,f=pr(),m=lo(u),v=Ss(f,m),v.callback=a??null,io(u,v,m),s.current.lanes=m,Ho(s,m,f),Cr(s,f),s}function Th(s,a,u,f){var m=a.current,v=pr(),T=lo(m);return u=uE(u),a.context===null?a.context=u:a.pendingContext=u,a=Ss(v,T),a.payload={element:s},f=f===void 0?null:f,f!==null&&(a.callback=f),s=io(m,a,T),s!==null&&(Pi(s,m,T,v),Zd(s,m,T)),T}function Ih(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function dE(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function zm(s,a){dE(s,a),(s=s.alternate)&&dE(s,a)}function e1(){return null}var hE=typeof reportError=="function"?reportError:function(s){console.error(s)};function jm(s){this._internalRoot=s}Sh.prototype.render=jm.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(t(409));Th(s,a,null,null)},Sh.prototype.unmount=jm.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;ra(function(){Th(null,s,null,null)}),a[_s]=null}};function Sh(s){this._internalRoot=s}Sh.prototype.unstable_scheduleHydration=function(s){if(s){var a=Eu();s={blockedOn:null,target:s,priority:a};for(var u=0;u<Br.length&&a!==0&&a<Br[u].priority;u++);Br.splice(u,0,s),u===0&&Ka(s)}};function $m(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function bh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function fE(){}function t1(s,a,u,f,m){if(m){if(typeof f=="function"){var v=f;f=function(){var Y=Ih(T);v.call(Y)}}var T=cE(a,f,s,0,null,!1,!1,"",fE);return s._reactRootContainer=T,s[_s]=T.current,Nu(s.nodeType===8?s.parentNode:s),ra(),T}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var C=f;f=function(){var Y=Ih(M);C.call(Y)}}var M=Bm(s,0,!1,null,null,!1,!1,"",fE);return s._reactRootContainer=M,s[_s]=M.current,Nu(s.nodeType===8?s.parentNode:s),ra(function(){Th(a,M,u,f)}),M}function Rh(s,a,u,f,m){var v=u._reactRootContainer;if(v){var T=v;if(typeof m=="function"){var C=m;m=function(){var M=Ih(T);C.call(M)}}Th(a,T,s,m)}else T=t1(u,a,s,m,f);return Ih(T)}_u=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=mt(a.pendingLanes);u!==0&&(vu(a,u|1),Cr(a,pt()),(gt&6)===0&&(wl=pt()+500,no()))}break;case 13:ra(function(){var f=Is(s,1);if(f!==null){var m=pr();Pi(f,s,1,m)}}),zm(s,1)}},qa=function(s){if(s.tag===13){var a=Is(s,134217728);if(a!==null){var u=pr();Pi(a,s,134217728,u)}zm(s,134217728)}},wu=function(s){if(s.tag===13){var a=lo(s),u=Is(s,a);if(u!==null){var f=pr();Pi(u,s,a,f)}zm(s,a)}},Eu=function(){return dt},Tu=function(s,a){var u=dt;try{return dt=s,a()}finally{dt=u}},Kn=function(s,a,u){switch(a){case"input":if(ar(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==s&&f.form===s.form){var m=$d(f);if(!m)throw Error(t(90));_t(f),ar(f,m)}}}break;case"textarea":Tr(s,u);break;case"select":a=u.value,a!=null&&lr(s,!!u.multiple,a,!1)}},Ft=Om,Ht=ra;var n1={usingClientEntryPoint:!1,Events:[Lu,al,$d,je,St,Om]},Yu={findFiberByHostInstance:Qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},r1={bundleType:Yu.bundleType,version:Yu.version,rendererPackageName:Yu.rendererPackageName,rendererConfig:Yu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=et(s),s===null?null:s.stateNode},findFiberByHostInstance:Yu.findFiberByHostInstance||e1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{ii=Ah.inject(r1),Rn=Ah}catch{}}return xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n1,xr.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$m(a))throw Error(t(200));return Zk(s,a,null,u)},xr.createRoot=function(s,a){if(!$m(s))throw Error(t(299));var u=!1,f="",m=hE;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onRecoverableError!==void 0&&(m=a.onRecoverableError)),a=Bm(s,1,!1,null,null,u,!1,f,m),s[_s]=a.current,Nu(s.nodeType===8?s.parentNode:s),new jm(a)},xr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=et(a),s=s===null?null:s.stateNode,s},xr.flushSync=function(s){return ra(s)},xr.hydrate=function(s,a,u){if(!bh(a))throw Error(t(200));return Rh(null,s,a,!0,u)},xr.hydrateRoot=function(s,a,u){if(!$m(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,v="",T=hE;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),a=cE(a,null,s,1,u??null,m,!1,v,T),s[_s]=a.current,Nu(s),f)for(s=0;s<f.length;s++)u=f[s],m=u._getVersion,m=m(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,m]:a.mutableSourceEagerHydrationData.push(u,m);return new Sh(a)},xr.render=function(s,a,u){if(!bh(a))throw Error(t(200));return Rh(null,s,a,!1,u)},xr.unmountComponentAtNode=function(s){if(!bh(s))throw Error(t(40));return s._reactRootContainer?(ra(function(){Rh(null,null,s,!1,function(){s._reactRootContainer=null,s[_s]=null})}),!0):!1},xr.unstable_batchedUpdates=Om,xr.unstable_renderSubtreeIntoContainer=function(s,a,u,f){if(!bh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return Rh(s,a,u,!1,f)},xr.version="18.3.1-next-f1338f8080-20240426",xr}var EE;function $I(){if(EE)return Wm.exports;EE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Wm.exports=d1(),Wm.exports}var TE;function h1(){if(TE)return Ph;TE=1;var n=$I();return Ph.createRoot=n.createRoot,Ph.hydrateRoot=n.hydrateRoot,Ph}var f1=h1(),z=vy();const ve=jI(z),p1=s1({__proto__:null,default:ve},[z]);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var HI=n=>{throw TypeError(n)},m1=(n,e,t)=>e.has(n)||HI("Cannot "+t),Qm=(n,e,t)=>(m1(n,e,"read from private field"),t?t.call(n):e.get(n)),g1=(n,e,t)=>e.has(n)?HI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),IE="popstate";function y1(n={}){function e(r,i){let{pathname:o,search:l,hash:c}=r.location;return xc("",{pathname:o,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:ss(i)}return _1(e,t,null,n)}function st(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function v1(){return Math.random().toString(36).substring(2,10)}function SE(n,e){return{usr:n.state,key:n.key,idx:e}}function xc(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Fo(e):e,state:t,key:e&&e.key||r||v1()}}function ss({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Fo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function _1(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,l=i.history,c="POP",h=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function g(){c="POP";let D=y(),X=D==null?null:D-p;p=D,h&&h({action:c,location:L.location,delta:X})}function w(D,X){c="PUSH";let K=xc(L.location,D,X);p=y()+1;let Z=SE(K,p),oe=L.createHref(K);try{l.pushState(Z,"",oe)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;i.location.assign(oe)}o&&h&&h({action:c,location:L.location,delta:1})}function b(D,X){c="REPLACE";let K=xc(L.location,D,X);p=y();let Z=SE(K,p),oe=L.createHref(K);l.replaceState(Z,"",oe),o&&h&&h({action:c,location:L.location,delta:0})}function k(D){return qI(D)}let L={get action(){return c},get location(){return n(i,l)},listen(D){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(IE,g),h=D,()=>{i.removeEventListener(IE,g),h=null}},createHref(D){return e(i,D)},createURL:k,encodeLocation(D){let X=k(D);return{pathname:X.pathname,search:X.search,hash:X.hash}},push:w,replace:b,go(D){return l.go(D)}};return L}function qI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),st(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:ss(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var uc,bE=class{constructor(n){if(g1(this,uc,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Qm(this,uc).has(n))return Qm(this,uc).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Qm(this,uc).set(n,e)}};uc=new WeakMap;var w1=new Set(["lazy","caseSensitive","path","id","index","children"]);function E1(n){return w1.has(n)}var T1=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function I1(n){return T1.has(n)}function S1(n){return n.index===!0}function Dc(n,e,t=[],r={},i=!1){return n.map((o,l)=>{let c=[...t,String(l)],h=typeof o.id=="string"?o.id:c.join("-");if(st(o.index!==!0||!o.children,"Cannot specify children on an index route"),st(i||!r[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),S1(o)){let p={...o,id:h};return r[h]=RE(p,e(p)),p}else{let p={...o,id:h,children:void 0};return r[h]=RE(p,e(p)),o.children&&(p.children=Dc(o.children,e,c,r,i)),p}})}function RE(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function vo(n,e,t="/"){return cc(n,e,t,!1)}function cc(n,e,t,r){let i=typeof e=="string"?Fo(e):e,o=pi(i.pathname||"/",t);if(o==null)return null;let l=WI(n);R1(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=M1(o);c=V1(l[h],p,r)}return c}function b1(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function WI(n,e=[],t=[],r="",i=!1){let o=(l,c,h=i,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&h)return;st(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let g=ts([r,y.relativePath]),w=t.concat(y);l.children&&l.children.length>0&&(st(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),WI(l.children,e,w,g,h)),!(l.path==null&&!l.index)&&e.push({path:g,score:N1(g,l.index),routesMeta:w})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))o(l,c);else for(let p of KI(l.path))o(l,c,!0,p)}),e}function KI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let l=KI(r.join("/")),c=[];return c.push(...l.map(h=>h===""?o:[o,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function R1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:O1(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var A1=/^:[\w-]+$/,P1=3,k1=2,C1=1,x1=10,D1=-2,AE=n=>n==="*";function N1(n,e){let t=n.split("/"),r=t.length;return t.some(AE)&&(r+=D1),e&&(r+=k1),t.filter(i=>!AE(i)).reduce((i,o)=>i+(A1.test(o)?P1:o===""?C1:x1),r)}function O1(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function V1(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",g=df({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},y),w=h.route;if(!g&&p&&t&&!r[r.length-1].route.index&&(g=df({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:ts([o,g.pathname]),pathnameBase:B1(ts([o,g.pathnameBase])),route:w}),g.pathnameBase!=="/"&&(o=ts([o,g.pathnameBase]))}return l}function df(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=L1(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],l=o.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:g},w)=>{if(y==="*"){let k=c[w]||"";l=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=c[w];return g&&!b?p[y]=void 0:p[y]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:l,pattern:n}}function L1(n,e=!1,t=!0){mn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function M1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function pi(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function F1({basename:n,pathname:e}){return e==="/"?n:ts([n,e])}var GI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_y=n=>GI.test(n);function U1(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Fo(n):n,o;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?o=PE(t.substring(1),"/"):o=PE(t,e)):o=e,{pathname:o,search:z1(r),hash:j1(i)}}function PE(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Ym(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function wy(n){let e=QI(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Ey(n,e,t,r=!1){let i;typeof n=="string"?i=Fo(n):(i={...n},st(!i.pathname||!i.pathname.includes("?"),Ym("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),Ym("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),Ym("#","search","hash",i)));let o=n===""||i.pathname==="",l=o?"/":i.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let w=l.split("/");for(;w[0]==="..";)w.shift(),g-=1;i.pathname=w.join("/")}c=g>=0?e[g]:"/"}let h=U1(i,c),p=l&&l!=="/"&&l.endsWith("/"),y=(o||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||y)&&(h.pathname+="/"),h}var ts=n=>n.join("/").replace(/\/\/+/g,"/"),B1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),z1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,j1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,id=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Nc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function sd(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var YI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function JI(n,e){let t=n;if(typeof t!="string"||!GI.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(YI)try{let o=new URL(window.location.href),l=t.startsWith("//")?new URL(o.protocol+t):new URL(t),c=pi(l.pathname,e);l.origin===o.origin&&c!=null?t=c+l.search+l.hash:i=!0}catch{mn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}var bo=Symbol("Uninstrumented");function $1(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(o){let l=Object.keys(t);for(let c of l)o[c]&&t[c].push(o[c])}}));let r={};if(typeof e.lazy=="function"&&t.lazy.length>0){let i=Vl(t.lazy,e.lazy,()=>{});i&&(r.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(o=>{let l=i[o],c=t[`lazy.${o}`];if(typeof l=="function"&&c.length>0){let h=Vl(c,l,()=>{});h&&(r.lazy=Object.assign(r.lazy||{},{[o]:h}))}})}return["loader","action"].forEach(i=>{let o=e[i];if(typeof o=="function"&&t[i].length>0){let l=o[bo]??o,c=Vl(t[i],l,(...h)=>kE(h[0]));c&&(i==="loader"&&l.hydrate===!0&&(c.hydrate=!0),c[bo]=l,r[i]=c)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(r.middleware=e.middleware.map(i=>{let o=i[bo]??i,l=Vl(t.middleware,o,(...c)=>kE(c[0]));return l?(l[bo]=o,l):i})),r}function H1(n,e){let t={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(i){let o=Object.keys(i);for(let l of o)i[l]&&t[l].push(i[l])}})),t.navigate.length>0){let r=n.navigate[bo]??n.navigate,i=Vl(t.navigate,r,(...o)=>{let[l,c]=o;return{to:typeof l=="number"||typeof l=="string"?l:l?ss(l):".",...CE(n,c??{})}});i&&(i[bo]=r,n.navigate=i)}if(t.fetch.length>0){let r=n.fetch[bo]??n.fetch,i=Vl(t.fetch,r,(...o)=>{let[l,,c,h]=o;return{href:c??".",fetcherKey:l,...CE(n,h??{})}});i&&(i[bo]=r,n.fetch=i)}return n}function Vl(n,e,t){return n.length===0?null:async(...r)=>{let i=await XI(n,t(...r),()=>e(...r),n.length-1);if(i.type==="error")throw i.value;return i.value}}async function XI(n,e,t,r){let i=n[r],o;if(i){let l,c=async()=>(l?console.error("You cannot call instrumented handlers more than once"):l=XI(n,e,t,r-1),o=await l,st(o,"Expected a result"),o.type==="error"&&o.value instanceof Error?{status:"error",error:o.value}:{status:"success",error:void 0});try{await i(c,e)}catch(h){console.error("An instrumentation function threw an error:",h)}l||await c(),await l}else try{o={type:"success",value:await t()}}catch(l){o={type:"error",value:l}}return o||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function kE(n){let{request:e,context:t,params:r,unstable_pattern:i}=n;return{request:q1(e),params:{...r},unstable_pattern:i,context:W1(t)}}function CE(n,e){return{currentUrl:ss(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function q1(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function W1(n){if(G1(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var K1=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function G1(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===K1}var ZI=["POST","PUT","PATCH","DELETE"],Q1=new Set(ZI),Y1=["GET",...ZI],J1=new Set(Y1),eS=new Set([301,302,303,307,308]),X1=new Set([307,308]),Jm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Z1={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Xu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},eC=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),tS="remix-router-transitions",nS=Symbol("ResetLoaderData");function tC(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";st(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||eC,o=i;if(n.unstable_instrumentations){let x=n.unstable_instrumentations;o=U=>({...i(U),...$1(x.map(W=>W.route).filter(Boolean),U)})}let l={},c=Dc(n.routes,o,void 0,l),h,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||oC,g={...n.future},w=null,b=new Set,k=null,L=null,D=null,X=n.hydrationData!=null,K=vo(c,n.history.location,p),Z=!1,oe=null,ie;if(K==null&&!n.patchRoutesOnNavigation){let x=di(404,{pathname:n.history.location.pathname}),{matches:U,route:W}=kh(c);ie=!0,K=U,oe={[W.id]:x}}else if(K&&!n.hydrationData&&Ht(K,c,n.history.location.pathname).active&&(K=null),K)if(K.some(x=>x.route.lazy))ie=!1;else if(!K.some(x=>Ty(x.route)))ie=!0;else{let x=n.hydrationData?n.hydrationData.loaderData:null,U=n.hydrationData?n.hydrationData.errors:null;if(U){let W=K.findIndex(te=>U[te.route.id]!==void 0);ie=K.slice(0,W+1).every(te=>!Pg(te.route,x,U))}else ie=K.every(W=>!Pg(W.route,x,U))}else{ie=!1,K=[];let x=Ht(null,c,n.history.location.pathname);x.active&&x.matches&&(Z=!0,K=x.matches)}let ue,I={historyAction:n.history.action,location:n.history.location,matches:K,initialized:ie,navigation:Jm,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||oe,fetchers:new Map,blockers:new Map},S="POP",A=null,V=!1,N,F=!1,P=new Map,Be=null,ze=!1,fe=!1,be=new Set,$=new Map,pe=0,ne=-1,O=new Map,G=new Set,re=new Map,de=new Map,_e=new Set,we=new Map,Ce,qe=null;function Ze(){if(w=n.history.listen(({action:x,location:U,delta:W})=>{if(Ce){Ce(),Ce=void 0;return}mn(we.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=Sr({currentLocation:I.location,nextLocation:U,historyAction:x});if(te&&W!=null){let he=new Promise(Se=>{Ce=Se});n.history.go(W*-1),Kn(te,{state:"blocked",location:U,proceed(){Kn(te,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),he.then(()=>n.history.go(W))},reset(){let Se=new Map(I.blockers);Se.set(te,Xu),_t({blockers:Se})}}),A==null||A.resolve(),A=null;return}return On(x,U)}),t){SC(e,P);let x=()=>bC(e,P);e.addEventListener("pagehide",x),Be=()=>e.removeEventListener("pagehide",x)}return I.initialized||On("POP",I.location,{initialHydration:!0}),ue}function kt(){w&&w(),Be&&Be(),b.clear(),N&&N.abort(),I.fetchers.forEach((x,U)=>ur(U)),I.blockers.forEach((x,U)=>bn(U))}function wr(x){return b.add(x),()=>b.delete(x)}function _t(x,U={}){x.matches&&(x.matches=x.matches.map(he=>{let Se=l[he.route.id],Fe=he.route;return Fe.element!==Se.element||Fe.errorElement!==Se.errorElement||Fe.hydrateFallbackElement!==Se.hydrateFallbackElement?{...he,route:Se}:he})),I={...I,...x};let W=[],te=[];I.fetchers.forEach((he,Se)=>{he.state==="idle"&&(_e.has(Se)?W.push(Se):te.push(Se))}),_e.forEach(he=>{!I.fetchers.has(he)&&!$.has(he)&&W.push(he)}),[...b].forEach(he=>he(I,{deletedFetchers:W,newErrors:x.errors??null,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),W.forEach(he=>ur(he)),te.forEach(he=>I.fetchers.delete(he))}function Nn(x,U,{flushSync:W}={}){var Ke,Le;let te=I.actionData!=null&&I.navigation.formMethod!=null&&tr(I.navigation.formMethod)&&I.navigation.state==="loading"&&((Ke=x.state)==null?void 0:Ke._isRedirect)!==!0,he;U.actionData?Object.keys(U.actionData).length>0?he=U.actionData:he=null:te?he=I.actionData:he=null;let Se=U.loaderData?BE(I.loaderData,U.loaderData,U.matches||[],U.errors):I.loaderData,Fe=I.blockers;Fe.size>0&&(Fe=new Map(Fe),Fe.forEach((Ye,et)=>Fe.set(et,Xu)));let Te=ze?!1:Ft(x,U.matches||I.matches),Re=V===!0||I.navigation.formMethod!=null&&tr(I.navigation.formMethod)&&((Le=x.state)==null?void 0:Le._isRedirect)!==!0;h&&(c=h,h=void 0),ze||S==="POP"||(S==="PUSH"?n.history.push(x,x.state):S==="REPLACE"&&n.history.replace(x,x.state));let Pe;if(S==="POP"){let Ye=P.get(I.location.pathname);Ye&&Ye.has(x.pathname)?Pe={currentLocation:I.location,nextLocation:x}:P.has(x.pathname)&&(Pe={currentLocation:x,nextLocation:I.location})}else if(F){let Ye=P.get(I.location.pathname);Ye?Ye.add(x.pathname):(Ye=new Set([x.pathname]),P.set(I.location.pathname,Ye)),Pe={currentLocation:I.location,nextLocation:x}}_t({...U,actionData:he,loaderData:Se,historyAction:S,location:x,initialized:!0,navigation:Jm,revalidation:"idle",restoreScrollPosition:Te,preventScrollReset:Re,blockers:Fe},{viewTransitionOpts:Pe,flushSync:W===!0}),S="POP",V=!1,F=!1,ze=!1,fe=!1,A==null||A.resolve(),A=null,qe==null||qe.resolve(),qe=null}async function Mr(x,U){if(A==null||A.resolve(),A=null,typeof x=="number"){A||(A=HE());let et=A.promise;return n.history.go(x),et}let W=Ag(I.location,I.matches,p,x,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:te,submission:he,error:Se}=xE(!1,W,U),Fe=I.location,Te=xc(I.location,te,U&&U.state);Te={...Te,...n.history.encodeLocation(Te)};let Re=U&&U.replace!=null?U.replace:void 0,Pe="PUSH";Re===!0?Pe="REPLACE":Re===!1||he!=null&&tr(he.formMethod)&&he.formAction===I.location.pathname+I.location.search&&(Pe="REPLACE");let Ke=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,Le=(U&&U.flushSync)===!0,Ye=Sr({currentLocation:Fe,nextLocation:Te,historyAction:Pe});if(Ye){Kn(Ye,{state:"blocked",location:Te,proceed(){Kn(Ye,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),Mr(x,U)},reset(){let et=new Map(I.blockers);et.set(Ye,Xu),_t({blockers:et})}});return}await On(Pe,Te,{submission:he,pendingError:Se,preventScrollReset:Ke,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:Le,callSiteDefaultShouldRevalidate:U&&U.unstable_defaultShouldRevalidate})}function Ws(){qe||(qe=HE()),ni(),_t({revalidation:"loading"});let x=qe.promise;return I.navigation.state==="submitting"?x:I.navigation.state==="idle"?(On(I.historyAction,I.location,{startUninterruptedRevalidation:!0}),x):(On(S||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:F===!0}),x)}async function On(x,U,W){N&&N.abort(),N=null,S=x,ze=(W&&W.startUninterruptedRevalidation)===!0,St(I.location,I.matches),V=(W&&W.preventScrollReset)===!0,F=(W&&W.enableViewTransition)===!0;let te=h||c,he=W&&W.overrideNavigation,Se=W!=null&&W.initialHydration&&I.matches&&I.matches.length>0&&!Z?I.matches:vo(te,U,p),Fe=(W&&W.flushSync)===!0;if(Se&&I.initialized&&!fe&&pC(I.location,U)&&!(W&&W.submission&&tr(W.submission.formMethod))){Nn(U,{matches:Se},{flushSync:Fe});return}let Te=Ht(Se,te,U.pathname);if(Te.active&&Te.matches&&(Se=Te.matches),!Se){let{error:Ut,notFoundMatches:Yt,route:lt}=It(U.pathname);Nn(U,{matches:Yt,loaderData:{},errors:{[lt.id]:Ut}},{flushSync:Fe});return}N=new AbortController;let Re=kl(n.history,U,N.signal,W&&W.submission),Pe=n.getContext?await n.getContext():new bE,Ke;if(W&&W.pendingError)Ke=[_o(Se).route.id,{type:"error",error:W.pendingError}];else if(W&&W.submission&&tr(W.submission.formMethod)){let Ut=await ar(Re,U,W.submission,Se,Pe,Te.active,W&&W.initialHydration===!0,{replace:W.replace,flushSync:Fe});if(Ut.shortCircuited)return;if(Ut.pendingActionResult){let[Yt,lt]=Ut.pendingActionResult;if(Kr(lt)&&Nc(lt.error)&&lt.error.status===404){N=null,Nn(U,{matches:Ut.matches,loaderData:{},errors:{[Yt]:lt.error}});return}}Se=Ut.matches||Se,Ke=Ut.pendingActionResult,he=Xm(U,W.submission),Fe=!1,Te.active=!1,Re=kl(n.history,Re.url,Re.signal)}let{shortCircuited:Le,matches:Ye,loaderData:et,errors:Vt}=await Oi(Re,U,Se,Pe,Te.active,he,W&&W.submission,W&&W.fetcherSubmission,W&&W.replace,W&&W.initialHydration===!0,Fe,Ke,W&&W.callSiteDefaultShouldRevalidate);Le||(N=null,Nn(U,{matches:Ye||Se,...zE(Ke),loaderData:et,errors:Vt}))}async function ar(x,U,W,te,he,Se,Fe,Te={}){ni();let Re=TC(U,W);if(_t({navigation:Re},{flushSync:Te.flushSync===!0}),Se){let Le=await an(te,U.pathname,x.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){if(Le.partialMatches.length===0){let{matches:et,route:Vt}=kh(c);return{matches:et,pendingActionResult:[Vt.id,{type:"error",error:Le.error}]}}let Ye=_o(Le.partialMatches).route.id;return{matches:Le.partialMatches,pendingActionResult:[Ye,{type:"error",error:Le.error}]}}else if(Le.matches)te=Le.matches;else{let{notFoundMatches:Ye,error:et,route:Vt}=It(U.pathname);return{matches:Ye,pendingActionResult:[Vt.id,{type:"error",error:et}]}}}let Pe,Ke=qh(te,U);if(!Ke.route.action&&!Ke.route.lazy)Pe={type:"error",error:di(405,{method:x.method,pathname:U.pathname,routeId:Ke.route.id})};else{let Le=Ml(o,l,x,te,Ke,Fe?[]:r,he),Ye=await Wn(x,Le,he,null);if(Pe=Ye[Ke.route.id],!Pe){for(let et of te)if(Ye[et.route.id]){Pe=Ye[et.route.id];break}}if(x.signal.aborted)return{shortCircuited:!0}}if(ya(Pe)){let Le;return Te&&Te.replace!=null?Le=Te.replace:Le=ME(Pe.response.headers.get("Location"),new URL(x.url),p,n.history)===I.location.pathname+I.location.search,await Tr(x,Pe,!0,{submission:W,replace:Le}),{shortCircuited:!0}}if(Kr(Pe)){let Le=_o(te,Ke.route.id);return(Te&&Te.replace)!==!0&&(S="PUSH"),{matches:te,pendingActionResult:[Le.route.id,Pe,Ke.route.id]}}return{matches:te,pendingActionResult:[Ke.route.id,Pe]}}async function Oi(x,U,W,te,he,Se,Fe,Te,Re,Pe,Ke,Le,Ye){let et=Se||Xm(U,Fe),Vt=Fe||Te||$E(et),Ut=!ze&&!Pe;if(he){if(Ut){let wt=ft(Le);_t({navigation:et,...wt!==void 0?{actionData:wt}:{}},{flushSync:Ke})}let rt=await an(W,U.pathname,x.signal);if(rt.type==="aborted")return{shortCircuited:!0};if(rt.type==="error"){if(rt.partialMatches.length===0){let{matches:Mn,route:ln}=kh(c);return{matches:Mn,loaderData:{},errors:{[ln.id]:rt.error}}}let wt=_o(rt.partialMatches).route.id;return{matches:rt.partialMatches,loaderData:{},errors:{[wt]:rt.error}}}else if(rt.matches)W=rt.matches;else{let{error:wt,notFoundMatches:Mn,route:ln}=It(U.pathname);return{matches:Mn,loaderData:{},errors:{[ln.id]:wt}}}}let Yt=h||c,{dsMatches:lt,revalidatingFetchers:Jt}=DE(x,te,o,l,n.history,I,W,Vt,U,Pe?[]:r,Pe===!0,fe,be,_e,re,G,Yt,p,n.patchRoutesOnNavigation!=null,Le,Ye);if(ne=++pe,!n.dataStrategy&&!lt.some(rt=>rt.shouldLoad)&&!lt.some(rt=>rt.route.middleware&&rt.route.middleware.length>0)&&Jt.length===0){let rt=Ln();return Nn(U,{matches:W,loaderData:{},errors:Le&&Kr(Le[1])?{[Le[0]]:Le[1].error}:null,...zE(Le),...rt?{fetchers:new Map(I.fetchers)}:{}},{flushSync:Ke}),{shortCircuited:!0}}if(Ut){let rt={};if(!he){rt.navigation=et;let wt=ft(Le);wt!==void 0&&(rt.actionData=wt)}Jt.length>0&&(rt.fetchers=Nt(Jt)),_t(rt,{flushSync:Ke})}Jt.forEach(rt=>{Sn(rt.key),rt.controller&&$.set(rt.key,rt.controller)});let pt=()=>Jt.forEach(rt=>Sn(rt.key));N&&N.signal.addEventListener("abort",pt);let{loaderResults:hs,fetcherResults:dr}=await Fr(lt,Jt,x,te);if(x.signal.aborted)return{shortCircuited:!0};N&&N.signal.removeEventListener("abort",pt),Jt.forEach(rt=>$.delete(rt.key));let Gn=Ch(hs);if(Gn)return await Tr(x,Gn.result,!0,{replace:Re}),{shortCircuited:!0};if(Gn=Ch(dr),Gn)return G.add(Gn.key),await Tr(x,Gn.result,!0,{replace:Re}),{shortCircuited:!0};let{loaderData:_i,errors:wi}=UE(I,W,hs,Le,Jt,dr);Pe&&I.errors&&(wi={...I.errors,...wi});let br=Ln(),ii=vi(ne),Rn=br||ii||Jt.length>0;return{matches:W,loaderData:_i,errors:wi,...Rn?{fetchers:new Map(I.fetchers)}:{}}}function ft(x){if(x&&!Kr(x[1]))return{[x[0]]:x[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function Nt(x){return x.forEach(U=>{let W=I.fetchers.get(U.key),te=Zu(void 0,W?W.data:void 0);I.fetchers.set(U.key,te)}),new Map(I.fetchers)}async function lr(x,U,W,te){Sn(x);let he=(te&&te.flushSync)===!0,Se=h||c,Fe=Ag(I.location,I.matches,p,W,U,te==null?void 0:te.relative),Te=vo(Se,Fe,p),Re=Ht(Te,Se,Fe);if(Re.active&&Re.matches&&(Te=Re.matches),!Te){In(x,U,di(404,{pathname:Fe}),{flushSync:he});return}let{path:Pe,submission:Ke,error:Le}=xE(!0,Fe,te);if(Le){In(x,U,Le,{flushSync:he});return}let Ye=n.getContext?await n.getContext():new bE,et=(te&&te.preventScrollReset)===!0;if(Ke&&tr(Ke.formMethod)){await nn(x,U,Pe,Te,Ye,Re.active,he,et,Ke,te&&te.unstable_defaultShouldRevalidate);return}re.set(x,{routeId:U,path:Pe}),await Er(x,U,Pe,Te,Ye,Re.active,he,et,Ke)}async function nn(x,U,W,te,he,Se,Fe,Te,Re,Pe){ni(),re.delete(x);let Ke=I.fetchers.get(x);rn(x,IC(Re,Ke),{flushSync:Fe});let Le=new AbortController,Ye=kl(n.history,W,Le.signal,Re);if(Se){let Et=await an(te,new URL(Ye.url).pathname,Ye.signal,x);if(Et.type==="aborted")return;if(Et.type==="error"){In(x,U,Et.error,{flushSync:Fe});return}else if(Et.matches)te=Et.matches;else{In(x,U,di(404,{pathname:W}),{flushSync:Fe});return}}let et=qh(te,W);if(!et.route.action&&!et.route.lazy){let Et=di(405,{method:Re.formMethod,pathname:W,routeId:U});In(x,U,Et,{flushSync:Fe});return}$.set(x,Le);let Vt=pe,Ut=Ml(o,l,Ye,te,et,r,he),Yt=await Wn(Ye,Ut,he,x),lt=Yt[et.route.id];if(!lt){for(let Et of Ut)if(Yt[Et.route.id]){lt=Yt[Et.route.id];break}}if(Ye.signal.aborted){$.get(x)===Le&&$.delete(x);return}if(_e.has(x)){if(ya(lt)||Kr(lt)){rn(x,Ps(void 0));return}}else{if(ya(lt))if($.delete(x),ne>Vt){rn(x,Ps(void 0));return}else return G.add(x),rn(x,Zu(Re)),Tr(Ye,lt,!1,{fetcherSubmission:Re,preventScrollReset:Te});if(Kr(lt)){In(x,U,lt.error);return}}let Jt=I.navigation.location||I.location,pt=kl(n.history,Jt,Le.signal),hs=h||c,dr=I.navigation.state!=="idle"?vo(hs,I.navigation.location,p):I.matches;st(dr,"Didn't find any matches after fetcher action");let Gn=++pe;O.set(x,Gn);let _i=Zu(Re,lt.data);I.fetchers.set(x,_i);let{dsMatches:wi,revalidatingFetchers:br}=DE(pt,he,o,l,n.history,I,dr,Re,Jt,r,!1,fe,be,_e,re,G,hs,p,n.patchRoutesOnNavigation!=null,[et.route.id,lt],Pe);br.filter(Et=>Et.key!==x).forEach(Et=>{let hr=Et.key,Ei=I.fetchers.get(hr),mt=Zu(void 0,Ei?Ei.data:void 0);I.fetchers.set(hr,mt),Sn(hr),Et.controller&&$.set(hr,Et.controller)}),_t({fetchers:new Map(I.fetchers)});let ii=()=>br.forEach(Et=>Sn(Et.key));Le.signal.addEventListener("abort",ii);let{loaderResults:Rn,fetcherResults:rt}=await Fr(wi,br,pt,he);if(Le.signal.aborted)return;if(Le.signal.removeEventListener("abort",ii),O.delete(x),$.delete(x),br.forEach(Et=>$.delete(Et.key)),I.fetchers.has(x)){let Et=Ps(lt.data);I.fetchers.set(x,Et)}let wt=Ch(Rn);if(wt)return Tr(pt,wt.result,!1,{preventScrollReset:Te});if(wt=Ch(rt),wt)return G.add(wt.key),Tr(pt,wt.result,!1,{preventScrollReset:Te});let{loaderData:Mn,errors:ln}=UE(I,dr,Rn,void 0,br,rt);vi(Gn),I.navigation.state==="loading"&&Gn>ne?(st(S,"Expected pending action"),N&&N.abort(),Nn(I.navigation.location,{matches:dr,loaderData:Mn,errors:ln,fetchers:new Map(I.fetchers)})):(_t({errors:ln,loaderData:BE(I.loaderData,Mn,dr,ln),fetchers:new Map(I.fetchers)}),fe=!1)}async function Er(x,U,W,te,he,Se,Fe,Te,Re){let Pe=I.fetchers.get(x);rn(x,Zu(Re,Pe?Pe.data:void 0),{flushSync:Fe});let Ke=new AbortController,Le=kl(n.history,W,Ke.signal);if(Se){let lt=await an(te,new URL(Le.url).pathname,Le.signal,x);if(lt.type==="aborted")return;if(lt.type==="error"){In(x,U,lt.error,{flushSync:Fe});return}else if(lt.matches)te=lt.matches;else{In(x,U,di(404,{pathname:W}),{flushSync:Fe});return}}let Ye=qh(te,W);$.set(x,Ke);let et=pe,Vt=Ml(o,l,Le,te,Ye,r,he),Yt=(await Wn(Le,Vt,he,x))[Ye.route.id];if($.get(x)===Ke&&$.delete(x),!Le.signal.aborted){if(_e.has(x)){rn(x,Ps(void 0));return}if(ya(Yt))if(ne>et){rn(x,Ps(void 0));return}else{G.add(x),await Tr(Le,Yt,!1,{preventScrollReset:Te});return}if(Kr(Yt)){In(x,U,Yt.error);return}rn(x,Ps(Yt.data))}}async function Tr(x,U,W,{submission:te,fetcherSubmission:he,preventScrollReset:Se,replace:Fe}={}){W||(A==null||A.resolve(),A=null),U.response.headers.has("X-Remix-Revalidate")&&(fe=!0);let Te=U.response.headers.get("Location");st(Te,"Expected a Location header on the redirect Response"),Te=ME(Te,new URL(x.url),p,n.history);let Re=xc(I.location,Te,{_isRedirect:!0});if(t){let Vt=!1;if(U.response.headers.has("X-Remix-Reload-Document"))Vt=!0;else if(_y(Te)){const Ut=qI(Te,!0);Vt=Ut.origin!==e.location.origin||pi(Ut.pathname,p)==null}if(Vt){Fe?e.location.replace(Te):e.location.assign(Te);return}}N=null;let Pe=Fe===!0||U.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ke,formAction:Le,formEncType:Ye}=I.navigation;!te&&!he&&Ke&&Le&&Ye&&(te=$E(I.navigation));let et=te||he;if(X1.has(U.response.status)&&et&&tr(et.formMethod))await On(Pe,Re,{submission:{...et,formAction:Te},preventScrollReset:Se||V,enableViewTransition:W?F:void 0});else{let Vt=Xm(Re,te);await On(Pe,Re,{overrideNavigation:Vt,fetcherSubmission:he,preventScrollReset:Se||V,enableViewTransition:W?F:void 0})}}async function Wn(x,U,W,te){var Fe;let he,Se={};try{he=await lC(y,x,U,te,W,!1)}catch(Te){return U.filter(Re=>Re.shouldLoad).forEach(Re=>{Se[Re.route.id]={type:"error",error:Te}}),Se}if(x.signal.aborted)return Se;if(!tr(x.method))for(let Te of U){if(((Fe=he[Te.route.id])==null?void 0:Fe.type)==="error")break;!he.hasOwnProperty(Te.route.id)&&!I.loaderData.hasOwnProperty(Te.route.id)&&(!I.errors||!I.errors.hasOwnProperty(Te.route.id))&&Te.shouldCallHandler()&&(he[Te.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Te.route.id}`)})}for(let[Te,Re]of Object.entries(he))if(vC(Re)){let Pe=Re.result;Se[Te]={type:"redirect",response:hC(Pe,x,Te,U,p)}}else Se[Te]=await dC(Re);return Se}async function Fr(x,U,W,te){let he=Wn(W,x,te,null),Se=Promise.all(U.map(async Re=>{if(Re.matches&&Re.match&&Re.request&&Re.controller){let Ke=(await Wn(Re.request,Re.matches,te,Re.key))[Re.match.route.id];return{[Re.key]:Ke}}else return Promise.resolve({[Re.key]:{type:"error",error:di(404,{pathname:Re.path})}})})),Fe=await he,Te=(await Se).reduce((Re,Pe)=>Object.assign(Re,Pe),{});return{loaderResults:Fe,fetcherResults:Te}}function ni(){fe=!0,re.forEach((x,U)=>{$.has(U)&&be.add(U),Sn(U)})}function rn(x,U,W={}){I.fetchers.set(x,U),_t({fetchers:new Map(I.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function In(x,U,W,te={}){let he=_o(I.matches,U);ur(x),_t({errors:{[he.route.id]:W},fetchers:new Map(I.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Vn(x){return de.set(x,(de.get(x)||0)+1),_e.has(x)&&_e.delete(x),I.fetchers.get(x)||Z1}function Ur(x,U){Sn(x,U==null?void 0:U.reason),rn(x,Ps(null))}function ur(x){let U=I.fetchers.get(x);$.has(x)&&!(U&&U.state==="loading"&&O.has(x))&&Sn(x),re.delete(x),O.delete(x),G.delete(x),_e.delete(x),be.delete(x),I.fetchers.delete(x)}function ri(x){let U=(de.get(x)||0)-1;U<=0?(de.delete(x),_e.add(x)):de.set(x,U),_t({fetchers:new Map(I.fetchers)})}function Sn(x,U){let W=$.get(x);W&&(W.abort(U),$.delete(x))}function yi(x){for(let U of x){let W=Vn(U),te=Ps(W.data);I.fetchers.set(U,te)}}function Ln(){let x=[],U=!1;for(let W of G){let te=I.fetchers.get(W);st(te,`Expected fetcher: ${W}`),te.state==="loading"&&(G.delete(W),x.push(W),U=!0)}return yi(x),U}function vi(x){let U=[];for(let[W,te]of O)if(te<x){let he=I.fetchers.get(W);st(he,`Expected fetcher: ${W}`),he.state==="loading"&&(Sn(W),O.delete(W),U.push(W))}return yi(U),U.length>0}function Ir(x,U){let W=I.blockers.get(x)||Xu;return we.get(x)!==U&&we.set(x,U),W}function bn(x){I.blockers.delete(x),we.delete(x)}function Kn(x,U){let W=I.blockers.get(x)||Xu;st(W.state==="unblocked"&&U.state==="blocked"||W.state==="blocked"&&U.state==="blocked"||W.state==="blocked"&&U.state==="proceeding"||W.state==="blocked"&&U.state==="unblocked"||W.state==="proceeding"&&U.state==="unblocked",`Invalid blocker state transition: ${W.state} -> ${U.state}`);let te=new Map(I.blockers);te.set(x,U),_t({blockers:te})}function Sr({currentLocation:x,nextLocation:U,historyAction:W}){if(we.size===0)return;we.size>1&&mn(!1,"A router only supports one blocker at a time");let te=Array.from(we.entries()),[he,Se]=te[te.length-1],Fe=I.blockers.get(he);if(!(Fe&&Fe.state==="proceeding")&&Se({currentLocation:x,nextLocation:U,historyAction:W}))return he}function It(x){let U=di(404,{pathname:x}),W=h||c,{matches:te,route:he}=kh(W);return{notFoundMatches:te,route:he,error:U}}function Vi(x,U,W){if(k=x,D=U,L=W||null,!X&&I.navigation===Jm){X=!0;let te=Ft(I.location,I.matches);te!=null&&_t({restoreScrollPosition:te})}return()=>{k=null,D=null,L=null}}function je(x,U){return L&&L(x,U.map(te=>b1(te,I.loaderData)))||x.key}function St(x,U){if(k&&D){let W=je(x,U);k[W]=D()}}function Ft(x,U){if(k){let W=je(x,U),te=k[W];if(typeof te=="number")return te}return null}function Ht(x,U,W){if(n.patchRoutesOnNavigation)if(x){if(Object.keys(x[0].params).length>0)return{active:!0,matches:cc(U,W,p,!0)}}else return{active:!0,matches:cc(U,W,p,!0)||[]};return{active:!1,matches:null}}async function an(x,U,W,te){if(!n.patchRoutesOnNavigation)return{type:"success",matches:x};let he=x;for(;;){let Se=h==null,Fe=h||c,Te=l;try{await n.patchRoutesOnNavigation({signal:W,path:U,matches:he,fetcherKey:te,patch:(Ke,Le)=>{W.aborted||NE(Ke,Le,Fe,Te,o,!1)}})}catch(Ke){return{type:"error",error:Ke,partialMatches:he}}finally{Se&&!W.aborted&&(c=[...c])}if(W.aborted)return{type:"aborted"};let Re=vo(Fe,U,p),Pe=null;if(Re){if(Object.keys(Re[0].params).length===0)return{type:"success",matches:Re};if(Pe=cc(Fe,U,p,!0),!(Pe&&he.length<Pe.length&&Ot(he,Pe.slice(0,he.length))))return{type:"success",matches:Re}}if(Pe||(Pe=cc(Fe,U,p,!0)),!Pe||Ot(he,Pe))return{type:"success",matches:null};he=Pe}}function Ot(x,U){return x.length===U.length&&x.every((W,te)=>W.route.id===U[te].route.id)}function Qt(x){l={},h=Dc(x,o,void 0,l)}function cr(x,U,W=!1){let te=h==null;NE(x,U,h||c,l,o,W),te&&(c=[...c],_t({}))}return ue={get basename(){return p},get future(){return g},get state(){return I},get routes(){return c},get window(){return e},initialize:Ze,subscribe:wr,enableScrollRestoration:Vi,navigate:Mr,fetch:lr,revalidate:Ws,createHref:x=>n.history.createHref(x),encodeLocation:x=>n.history.encodeLocation(x),getFetcher:Vn,resetFetcher:Ur,deleteFetcher:ri,dispose:kt,getBlocker:Ir,deleteBlocker:bn,patchRoutes:cr,_internalFetchControllers:$,_internalSetRoutes:Qt,_internalSetStateDoNotUseOrYouWillBreakYourApp(x){_t(x)}},n.unstable_instrumentations&&(ue=H1(ue,n.unstable_instrumentations.map(x=>x.router).filter(Boolean))),ue}function nC(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function Ag(n,e,t,r,i,o){let l,c;if(i){l=[];for(let p of e)if(l.push(p),p.route.id===i){c=p;break}}else l=e,c=e[e.length-1];let h=Ey(r||".",wy(l),pi(n.pathname,t)||n.pathname,o==="path");if(r==null&&(h.search=n.search,h.hash=n.hash),(r==null||r===""||r===".")&&c){let p=Sy(h.search);if(c.route.index&&!p)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let y=new URLSearchParams(h.search),g=y.getAll("index");y.delete("index"),g.filter(b=>b).forEach(b=>y.append("index",b));let w=y.toString();h.search=w?`?${w}`:""}}return t!=="/"&&(h.pathname=F1({basename:t,pathname:h.pathname})),ss(h)}function xE(n,e,t){if(!t||!nC(t))return{path:e};if(t.formMethod&&!EC(t.formMethod))return{path:e,error:di(405,{method:t.formMethod})};let r=()=>({path:e,error:di(400,{type:"invalid-body"})}),o=(t.formMethod||"get").toUpperCase(),l=lS(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!tr(o))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((w,[b,k])=>`${w}${b}=${k}
`,""):String(t.body);return{path:e,submission:{formMethod:o,formAction:l,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!tr(o))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:o,formAction:l,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}st(typeof FormData=="function","FormData is not available in this environment");let c,h;if(t.formData)c=Cg(t.formData),h=t.formData;else if(t.body instanceof FormData)c=Cg(t.body),h=t.body;else if(t.body instanceof URLSearchParams)c=t.body,h=FE(c);else if(t.body==null)c=new URLSearchParams,h=new FormData;else try{c=new URLSearchParams(t.body),h=FE(c)}catch{return r()}let p={formMethod:o,formAction:l,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(tr(p.formMethod))return{path:e,submission:p};let y=Fo(e);return n&&y.search&&Sy(y.search)&&c.append("index",""),y.search=`?${c}`,{path:ss(y),submission:p}}function DE(n,e,t,r,i,o,l,c,h,p,y,g,w,b,k,L,D,X,K,Z,oe){var ze;let ie=Z?Kr(Z[1])?Z[1].error:Z[1].data:void 0,ue=i.createURL(o.location),I=i.createURL(h),S;if(y&&o.errors){let fe=Object.keys(o.errors)[0];S=l.findIndex(be=>be.route.id===fe)}else if(Z&&Kr(Z[1])){let fe=Z[0];S=l.findIndex(be=>be.route.id===fe)-1}let A=Z?Z[1].statusCode:void 0,V=A&&A>=400,N={currentUrl:ue,currentParams:((ze=o.matches[0])==null?void 0:ze.params)||{},nextUrl:I,nextParams:l[0].params,...c,actionResult:ie,actionStatus:A},F=sd(l),P=l.map((fe,be)=>{let{route:$}=fe,pe=null;if(S!=null&&be>S?pe=!1:$.lazy?pe=!0:Ty($)?y?pe=Pg($,o.loaderData,o.errors):rC(o.loaderData,o.matches[be],fe)&&(pe=!0):pe=!1,pe!==null)return kg(t,r,n,F,fe,p,e,pe);let ne=!1;typeof oe=="boolean"?ne=oe:V?ne=!1:(g||ue.pathname+ue.search===I.pathname+I.search||ue.search!==I.search||iC(o.matches[be],fe))&&(ne=!0);let O={...N,defaultShouldRevalidate:ne},G=_c(fe,O);return kg(t,r,n,F,fe,p,e,G,O,oe)}),Be=[];return k.forEach((fe,be)=>{if(y||!l.some(_e=>_e.route.id===fe.routeId)||b.has(be))return;let $=o.fetchers.get(be),pe=$&&$.state!=="idle"&&$.data===void 0,ne=vo(D,fe.path,X);if(!ne){if(K&&pe)return;Be.push({key:be,routeId:fe.routeId,path:fe.path,matches:null,match:null,request:null,controller:null});return}if(L.has(be))return;let O=qh(ne,fe.path),G=new AbortController,re=kl(i,fe.path,G.signal),de=null;if(w.has(be))w.delete(be),de=Ml(t,r,re,ne,O,p,e);else if(pe)g&&(de=Ml(t,r,re,ne,O,p,e));else{let _e;typeof oe=="boolean"?_e=oe:V?_e=!1:_e=g;let we={...N,defaultShouldRevalidate:_e};_c(O,we)&&(de=Ml(t,r,re,ne,O,p,e,we))}de&&Be.push({key:be,routeId:fe.routeId,path:fe.path,matches:de,match:O,request:re,controller:G})}),{dsMatches:P,revalidatingFetchers:Be}}function Ty(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function Pg(n,e,t){if(n.lazy)return!0;if(!Ty(n))return!1;let r=e!=null&&n.id in e,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function rC(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function iC(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function _c(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function NE(n,e,t,r,i,o){let l;if(n){let p=r[n];st(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),l=p.children}else l=t;let c=[],h=[];if(e.forEach(p=>{let y=l.find(g=>rS(p,g));y?h.push({existingRoute:y,newRoute:p}):c.push(p)}),c.length>0){let p=Dc(c,i,[n||"_","patch",String((l==null?void 0:l.length)||"0")],r);l.push(...p)}if(o&&h.length>0)for(let p=0;p<h.length;p++){let{existingRoute:y,newRoute:g}=h[p],w=y,[b]=Dc([g],i,[],{},!0);Object.assign(w,{element:b.element?b.element:w.element,errorElement:b.errorElement?b.errorElement:w.errorElement,hydrateFallbackElement:b.hydrateFallbackElement?b.hydrateFallbackElement:w.hydrateFallbackElement})}}function rS(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>rS(t,o))}):!1}var OE=new WeakMap,iS=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(st(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let o=i.lazy[n];if(!o)return;let l=OE.get(i);l||(l={},OE.set(i,l));let c=l[n];if(c)return c;let h=(async()=>{let p=E1(n),g=i[n]!==void 0&&n!=="hasErrorBoundary";if(p)mn(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),l[n]=Promise.resolve();else if(g)mn(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let w=await o();w!=null&&(Object.assign(i,{[n]:w}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(w=>w===void 0)&&(i.lazy=void 0))})();return l[n]=h,h},VE=new WeakMap;function sC(n,e,t,r,i){let o=t[n.id];if(st(o,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=VE.get(o);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let g=(async()=>{st(typeof n.lazy=="function","No lazy route function found");let w=await n.lazy(),b={};for(let k in w){let L=w[k];if(L===void 0)continue;let D=I1(k),K=o[k]!==void 0&&k!=="hasErrorBoundary";D?mn(!D,"Route property "+k+" is not a supported property to be returned from a lazy route function. This property will be ignored."):K?mn(!K,`Route "${o.id}" has a static property "${k}" defined but its lazy function is also returning a value for this property. The lazy route property "${k}" will be ignored.`):b[k]=L}Object.assign(o,b),Object.assign(o,{...r(o),lazy:void 0})})();return VE.set(o,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let l=Object.keys(n.lazy),c=[],h;for(let y of l){if(i&&i.includes(y))continue;let g=iS({key:y,route:n,manifest:t,mapRouteProperties:r});g&&(c.push(g),y===e&&(h=g))}let p=c.length>0?Promise.all(c).then(()=>{}):void 0;return p==null||p.catch(()=>{}),h==null||h.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:h}}async function LE(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,o)=>{t[e[o].route.id]=i}),t}async function oC(n){return n.matches.some(e=>e.route.middleware)?sS(n,()=>LE(n)):LE(n)}function sS(n,e){return aC(n,e,r=>{if(wC(r))throw r;return r},gC,t);function t(r,i,o){if(o)return Promise.resolve(Object.assign(o.value,{[i]:{type:"error",result:r}}));{let{matches:l}=n,c=Math.min(Math.max(l.findIndex(p=>p.route.id===i),0),Math.max(l.findIndex(p=>p.shouldCallHandler()),0)),h=_o(l,l[c].route.id).route.id;return Promise.resolve({[h]:{type:"error",result:r}})}}}async function aC(n,e,t,r,i){let{matches:o,request:l,params:c,context:h,unstable_pattern:p}=n,y=o.flatMap(w=>w.route.middleware?w.route.middleware.map(b=>[w.route.id,b]):[]);return await oS({request:l,params:c,context:h,unstable_pattern:p},y,e,t,r,i)}async function oS(n,e,t,r,i,o,l=0){let{request:c}=n;if(c.signal.aborted)throw c.signal.reason??new Error(`Request aborted: ${c.method} ${c.url}`);let h=e[l];if(!h)return await t();let[p,y]=h,g,w=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");try{return g={value:await oS(n,e,t,r,i,o,l+1)},g.value}catch(b){return g={value:await o(b,p,g)},g.value}};try{let b=await y(n,w),k=b!=null?r(b):void 0;return i(k)?k:g?k??g.value:(g={value:await w()},g.value)}catch(b){return await o(b,p,g)}}function aS(n,e,t,r,i){let o=iS({key:"middleware",route:r.route,manifest:e,mapRouteProperties:n}),l=sC(r.route,tr(t.method)?"action":"loader",e,n,i);return{middleware:o,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function kg(n,e,t,r,i,o,l,c,h=null,p){let y=!1,g=aS(n,e,t,i,o);return{...i,_lazyPromises:g,shouldLoad:c,shouldRevalidateArgs:h,shouldCallHandler(w){return y=!0,h?typeof p=="boolean"?_c(i,{...h,defaultShouldRevalidate:p}):typeof w=="boolean"?_c(i,{...h,defaultShouldRevalidate:w}):_c(i,h):c},resolve(w){let{lazy:b,loader:k,middleware:L}=i.route,D=y||c||w&&!tr(t.method)&&(b||k),X=L&&L.length>0&&!k&&!b;return D&&(tr(t.method)||!X)?uC({request:t,unstable_pattern:r,match:i,lazyHandlerPromise:g==null?void 0:g.handler,lazyRoutePromise:g==null?void 0:g.route,handlerOverride:w,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function Ml(n,e,t,r,i,o,l,c=null){return r.map(h=>h.route.id!==i.route.id?{...h,shouldLoad:!1,shouldRevalidateArgs:c,shouldCallHandler:()=>!1,_lazyPromises:aS(n,e,t,h,o),resolve:()=>Promise.resolve({type:"data",result:void 0})}:kg(n,e,t,sd(r),h,o,l,!0,c))}async function lC(n,e,t,r,i,o){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let l={request:e,unstable_pattern:sd(t),params:t[0].params,context:i,matches:t},h=await n({...l,fetcherKey:r,runClientMiddleware:p=>{let y=l;return sS(y,()=>p({...y,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,g;return[(y=p._lazyPromises)==null?void 0:y.handler,(g=p._lazyPromises)==null?void 0:g.route]}))}catch{}return h}async function uC({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:i,handlerOverride:o,scopedContext:l}){let c,h,p=tr(n.method),y=p?"action":"loader",g=w=>{let b,k=new Promise((X,K)=>b=K);h=()=>b(),n.signal.addEventListener("abort",h);let L=X=>typeof w!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):w({request:n,unstable_pattern:e,params:t.params,context:l},...X!==void 0?[X]:[]),D=(async()=>{try{return{type:"data",result:await(o?o(K=>L(K)):L())}}catch(X){return{type:"error",result:X}}})();return Promise.race([D,k])};try{let w=p?t.route.action:t.route.loader;if(r||i)if(w){let b,[k]=await Promise.all([g(w).catch(L=>{b=L}),r,i]);if(b!==void 0)throw b;c=k}else{await r;let b=p?t.route.action:t.route.loader;if(b)[c]=await Promise.all([g(b),i]);else if(y==="action"){let k=new URL(n.url),L=k.pathname+k.search;throw di(405,{method:n.method,pathname:L,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(w)c=await g(w);else{let b=new URL(n.url),k=b.pathname+b.search;throw di(404,{pathname:k})}}catch(w){return{type:"error",result:w}}finally{h&&n.signal.removeEventListener("abort",h)}return c}async function cC(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function dC(n){var r,i,o,l,c;let{result:e,type:t}=n;if(Iy(e)){let h;try{h=await cC(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new id(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:"data",data:h,statusCode:e.status,headers:e.headers}}return t==="error"?jE(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:mC(e),statusCode:Nc(e)?e.status:void 0,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Nc(e)?e.status:void 0}:jE(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function hC(n,e,t,r,i){let o=n.headers.get("Location");if(st(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!_y(o)){let l=r.slice(0,r.findIndex(c=>c.route.id===t)+1);o=Ag(new URL(e.url),l,i,o),n.headers.set("Location",o)}return n}function ME(n,e,t,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(_y(n)){let o=n,l=o.startsWith("//")?new URL(e.protocol+o):new URL(o);if(i.includes(l.protocol))throw new Error("Invalid redirect location");let c=pi(l.pathname,t)!=null;if(l.origin===e.origin&&c)return l.pathname+l.search+l.hash}try{let o=r.createURL(n);if(i.includes(o.protocol))throw new Error("Invalid redirect location")}catch{}return n}function kl(n,e,t,r){let i=n.createURL(lS(e)).toString(),o={signal:t};if(r&&tr(r.formMethod)){let{formMethod:l,formEncType:c}=r;o.method=l.toUpperCase(),c==="application/json"?(o.headers=new Headers({"Content-Type":c}),o.body=JSON.stringify(r.json)):c==="text/plain"?o.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?o.body=Cg(r.formData):o.body=r.formData}return new Request(i,o)}function Cg(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function FE(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function fC(n,e,t,r=!1,i=!1){let o={},l=null,c,h=!1,p={},y=t&&Kr(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let w=g.route.id,b=e[w];if(st(!ya(b),"Cannot handle redirect results in processLoaderData"),Kr(b)){let k=b.error;if(y!==void 0&&(k=y,y=void 0),l=l||{},i)l[w]=k;else{let L=_o(n,w);l[L.route.id]==null&&(l[L.route.id]=k)}r||(o[w]=nS),h||(h=!0,c=Nc(b.error)?b.error.status:500),b.headers&&(p[w]=b.headers)}else o[w]=b.data,b.statusCode&&b.statusCode!==200&&!h&&(c=b.statusCode),b.headers&&(p[w]=b.headers)}),y!==void 0&&t&&(l={[t[0]]:y},t[2]&&(o[t[2]]=void 0)),{loaderData:o,errors:l,statusCode:c||200,loaderHeaders:p}}function UE(n,e,t,r,i,o){let{loaderData:l,errors:c}=fC(e,t,r);return i.filter(h=>!h.matches||h.matches.some(p=>p.shouldLoad)).forEach(h=>{let{key:p,match:y,controller:g}=h;if(g&&g.signal.aborted)return;let w=o[p];if(st(w,"Did not find corresponding fetcher result"),Kr(w)){let b=_o(n.matches,y==null?void 0:y.route.id);c&&c[b.route.id]||(c={...c,[b.route.id]:w.error}),n.fetchers.delete(p)}else if(ya(w))st(!1,"Unhandled fetcher revalidation redirect");else{let b=Ps(w.data);n.fetchers.set(p,b)}}),{loaderData:l,errors:c}}function BE(n,e,t,r){let i=Object.entries(e).filter(([,o])=>o!==nS).reduce((o,[l,c])=>(o[l]=c,o),{});for(let o of t){let l=o.route.id;if(!e.hasOwnProperty(l)&&n.hasOwnProperty(l)&&o.route.loader&&(i[l]=n[l]),r&&r.hasOwnProperty(l))break}return i}function zE(n){return n?Kr(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function _o(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function kh(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function di(n,{pathname:e,routeId:t,method:r,type:i,message:o}={}){let l="Unknown Server Error",c="Unknown @remix-run/router error";return n===400?(l="Bad Request",r&&e&&t?c=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(c="Unable to encode submission body")):n===403?(l="Forbidden",c=`Route "${t}" does not match URL "${e}"`):n===404?(l="Not Found",c=`No route matches URL "${e}"`):n===405&&(l="Method Not Allowed",r&&e&&t?c=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(c=`Invalid request method "${r.toUpperCase()}"`)),new id(n||500,l,new Error(c),!0)}function Ch(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(ya(i))return{key:r,result:i}}}function lS(n){let e=typeof n=="string"?Fo(n):n;return ss({...e,hash:""})}function pC(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function mC(n){var e,t;return new id(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function gC(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&yC(t))}function yC(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function vC(n){return Iy(n.result)&&eS.has(n.result.status)}function Kr(n){return n.type==="error"}function ya(n){return(n&&n.type)==="redirect"}function jE(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Iy(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function _C(n){return eS.has(n)}function wC(n){return Iy(n)&&_C(n.status)&&n.headers.has("Location")}function EC(n){return J1.has(n.toUpperCase())}function tr(n){return Q1.has(n.toUpperCase())}function Sy(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function qh(n,e){let t=typeof e=="string"?Fo(e).search:e.search;if(n[n.length-1].route.index&&Sy(t||""))return n[n.length-1];let r=QI(n);return r[r.length-1]}function $E(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:o,json:l}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:t,formEncType:r,formData:o,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function Xm(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function TC(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Zu(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function IC(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Ps(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function SC(n,e){try{let t=n.sessionStorage.getItem(tS);if(t){let r=JSON.parse(t);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function bC(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(tS,JSON.stringify(t))}catch(r){mn(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function HE(){let n,e,t=new Promise((r,i)=>{n=async o=>{r(o);try{await t}catch{}},e=async o=>{i(o);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Ua=z.createContext(null);Ua.displayName="DataRouter";var od=z.createContext(null);od.displayName="DataRouterState";var uS=z.createContext(!1);function RC(){return z.useContext(uS)}var by=z.createContext({isTransitioning:!1});by.displayName="ViewTransition";var cS=z.createContext(new Map);cS.displayName="Fetchers";var AC=z.createContext(null);AC.displayName="Await";var gi=z.createContext(null);gi.displayName="Navigation";var Bf=z.createContext(null);Bf.displayName="Location";var ls=z.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var Ry=z.createContext(null);Ry.displayName="RouteError";var dS="REACT_ROUTER_ERROR",PC="REDIRECT",kC="ROUTE_ERROR_RESPONSE";function CC(n){if(n.startsWith(`${dS}:${PC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function xC(n){if(n.startsWith(`${dS}:${kC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new id(e.status,e.statusText,e.data)}catch{}}function DC(n,{relative:e}={}){st(ad(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(gi),{hash:i,pathname:o,search:l}=ld(n,{relative:e}),c=o;return t!=="/"&&(c=o==="/"?t:ts([t,o])),r.createHref({pathname:c,search:l,hash:i})}function ad(){return z.useContext(Bf)!=null}function Ba(){return st(ad(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Bf).location}var hS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fS(n){z.useContext(gi).static||z.useLayoutEffect(n)}function NC(){let{isDataRoute:n}=z.useContext(ls);return n?WC():OC()}function OC(){st(ad(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Ua),{basename:e,navigator:t}=z.useContext(gi),{matches:r}=z.useContext(ls),{pathname:i}=Ba(),o=JSON.stringify(wy(r)),l=z.useRef(!1);return fS(()=>{l.current=!0}),z.useCallback((h,p={})=>{if(mn(l.current,hS),!l.current)return;if(typeof h=="number"){t.go(h);return}let y=Ey(h,JSON.parse(o),i,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:ts([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,o,i,n])}z.createContext(null);function _B(){let{matches:n}=z.useContext(ls),e=n[n.length-1];return e?e.params:{}}function ld(n,{relative:e}={}){let{matches:t}=z.useContext(ls),{pathname:r}=Ba(),i=JSON.stringify(wy(t));return z.useMemo(()=>Ey(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function VC(n,e,t,r,i){st(ad(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=z.useContext(gi),{matches:l}=z.useContext(ls),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",y=c?c.pathnameBase:"/",g=c&&c.route;{let K=g&&g.path||"";mS(p,!g||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let w=Ba(),b;b=w;let k=b.pathname||"/",L=k;if(y!=="/"){let K=y.replace(/^\//,"").split("/");L="/"+k.replace(/^\//,"").split("/").slice(K.length).join("/")}let D=vo(n,{pathname:L});return mn(g||D!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),mn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),BC(D&&D.map(K=>Object.assign({},K,{params:Object.assign({},h,K.params),pathname:ts([y,o.encodeLocation?o.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:ts([y,o.encodeLocation?o.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),l,t,r,i)}function LC(){let n=qC(),e=Nc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:o},"ErrorBoundary")," or"," ",z.createElement("code",{style:o},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,l)}var MC=z.createElement(LC,null),pS=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=xC(n.digest);t&&(n=t)}let e=n!==void 0?z.createElement(ls.Provider,{value:this.props.routeContext},z.createElement(Ry.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?z.createElement(FC,{error:n},e):e}};pS.contextType=uS;var Zm=new WeakMap;function FC({children:n,error:e}){let{basename:t}=z.useContext(gi);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=CC(e.digest);if(r){let i=Zm.get(e);if(i)throw i;let o=JI(r.location,t);if(YI&&!Zm.get(e))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw Zm.set(e,l),l}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return n}function UC({routeContext:n,match:e,children:t}){let r=z.useContext(Ua);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(ls.Provider,{value:n},t)}function BC(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=t==null?void 0:t.errors;if(l!=null){let y=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);st(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,y+1))}let c=!1,h=-1;if(t)for(let y=0;y<o.length;y++){let g=o[y];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=y),g.route.id){let{loaderData:w,errors:b}=t,k=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||k){c=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let p=t&&r?(y,g)=>{var w,b;r(y,{location:t.location,params:((b=(w=t.matches)==null?void 0:w[0])==null?void 0:b.params)??{},unstable_pattern:sd(t.matches),errorInfo:g})}:void 0;return o.reduceRight((y,g,w)=>{let b,k=!1,L=null,D=null;t&&(b=l&&g.route.id?l[g.route.id]:void 0,L=g.route.errorElement||MC,c&&(h<0&&w===0?(mS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,D=null):h===w&&(k=!0,D=g.route.hydrateFallbackElement||null)));let X=e.concat(o.slice(0,w+1)),K=()=>{let Z;return b?Z=L:k?Z=D:g.route.Component?Z=z.createElement(g.route.Component,null):g.route.element?Z=g.route.element:Z=y,z.createElement(UC,{match:g,routeContext:{outlet:y,matches:X,isDataRoute:t!=null},children:Z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?z.createElement(pS,{location:t.location,revalidation:t.revalidation,component:L,error:b,children:K(),routeContext:{outlet:null,matches:X,isDataRoute:!0},onError:p}):K()},null)}function Ay(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zC(n){let e=z.useContext(Ua);return st(e,Ay(n)),e}function jC(n){let e=z.useContext(od);return st(e,Ay(n)),e}function $C(n){let e=z.useContext(ls);return st(e,Ay(n)),e}function Py(n){let e=$C(n),t=e.matches[e.matches.length-1];return st(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function HC(){return Py("useRouteId")}function qC(){var r;let n=z.useContext(Ry),e=jC("useRouteError"),t=Py("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function WC(){let{router:n}=zC("useNavigate"),e=Py("useNavigate"),t=z.useRef(!1);return fS(()=>{t.current=!0}),z.useCallback(async(i,o={})=>{mn(t.current,hS),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var qE={};function mS(n,e,t){!e&&!qE[n]&&(qE[n]=!0,mn(!1,t))}var WE={};function KE(n,e){!n&&!WE[e]&&(WE[e]=!0,console.warn(e))}var KC="useOptimistic",GE=p1[KC],GC=()=>{};function QC(n){return GE?GE(n):[n,GC]}function YC(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&mn(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:z.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&mn(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:z.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&mn(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:z.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var JC=["HydrateFallback","hydrateFallbackElement"],XC=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function ZC({router:n,flushSync:e,onError:t,unstable_useTransitions:r}){r=RC()||r;let[o,l]=z.useState(n.state),[c,h]=QC(o),[p,y]=z.useState(),[g,w]=z.useState({isTransitioning:!1}),[b,k]=z.useState(),[L,D]=z.useState(),[X,K]=z.useState(),Z=z.useRef(new Map),oe=z.useCallback((S,{deletedFetchers:A,newErrors:V,flushSync:N,viewTransitionOpts:F})=>{V&&t&&Object.values(V).forEach(Be=>{var ze;return t(Be,{location:S.location,params:((ze=S.matches[0])==null?void 0:ze.params)??{},unstable_pattern:sd(S.matches)})}),S.fetchers.forEach((Be,ze)=>{Be.data!==void 0&&Z.current.set(ze,Be.data)}),A.forEach(Be=>Z.current.delete(Be)),KE(N===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let P=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(KE(F==null||P,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!F||!P){e&&N?e(()=>l(S)):r===!1?l(S):z.startTransition(()=>{r===!0&&h(Be=>QE(Be,S)),l(S)});return}if(e&&N){e(()=>{L&&(b==null||b.resolve(),L.skipTransition()),w({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let Be=n.window.document.startViewTransition(()=>{e(()=>l(S))});Be.finished.finally(()=>{e(()=>{k(void 0),D(void 0),y(void 0),w({isTransitioning:!1})})}),e(()=>D(Be));return}L?(b==null||b.resolve(),L.skipTransition(),K({state:S,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(y(S),w({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[n.window,e,L,b,r,h,t]);z.useLayoutEffect(()=>n.subscribe(oe),[n,oe]),z.useEffect(()=>{g.isTransitioning&&!g.flushSync&&k(new XC)},[g]),z.useEffect(()=>{if(b&&p&&n.window){let S=p,A=b.promise,V=n.window.document.startViewTransition(async()=>{r===!1?l(S):z.startTransition(()=>{r===!0&&h(N=>QE(N,S)),l(S)}),await A});V.finished.finally(()=>{k(void 0),D(void 0),y(void 0),w({isTransitioning:!1})}),D(V)}},[p,b,n.window,r,h]),z.useEffect(()=>{b&&p&&c.location.key===p.location.key&&b.resolve()},[b,L,c.location,p]),z.useEffect(()=>{!g.isTransitioning&&X&&(y(X.state),w({isTransitioning:!0,flushSync:!1,currentLocation:X.currentLocation,nextLocation:X.nextLocation}),K(void 0))},[g.isTransitioning,X]);let ie=z.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:S=>n.navigate(S),push:(S,A,V)=>n.navigate(S,{state:A,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(S,A,V)=>n.navigate(S,{replace:!0,state:A,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),ue=n.basename||"/",I=z.useMemo(()=>({router:n,navigator:ie,static:!1,basename:ue,onError:t}),[n,ie,ue,t]);return z.createElement(z.Fragment,null,z.createElement(Ua.Provider,{value:I},z.createElement(od.Provider,{value:c},z.createElement(cS.Provider,{value:Z.current},z.createElement(by.Provider,{value:g},z.createElement(nx,{basename:ue,location:c.location,navigationType:c.historyAction,navigator:ie,unstable_useTransitions:r},z.createElement(ex,{routes:n.routes,future:n.future,state:c,onError:t})))))),null)}function QE(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var ex=z.memo(tx);function tx({routes:n,future:e,state:t,onError:r}){return VC(n,void 0,t,r,e)}function nx({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:l}){st(!ad(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:c,navigator:i,static:o,unstable_useTransitions:l,future:{}}),[c,i,o,l]);typeof t=="string"&&(t=Fo(t));let{pathname:p="/",search:y="",hash:g="",state:w=null,key:b="default"}=t,k=z.useMemo(()=>{let L=pi(p,c);return L==null?null:{location:{pathname:L,search:y,hash:g,state:w,key:b},navigationType:r}},[c,p,y,g,w,b,r]);return mn(k!=null,`<Router basename="${c}"> is not able to match the URL "${p}${y}${g}" because it does not start with the basename, so the <Router> won't render anything.`),k==null?null:z.createElement(gi.Provider,{value:h},z.createElement(Bf.Provider,{children:e,value:k}))}var Wh="get",Kh="application/x-www-form-urlencoded";function zf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function rx(n){return zf(n)&&n.tagName.toLowerCase()==="button"}function ix(n){return zf(n)&&n.tagName.toLowerCase()==="form"}function sx(n){return zf(n)&&n.tagName.toLowerCase()==="input"}function ox(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ax(n,e){return n.button===0&&(!e||e==="_self")&&!ox(n)}var xh=null;function lx(){if(xh===null)try{new FormData(document.createElement("form"),0),xh=!1}catch{xh=!0}return xh}var ux=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function eg(n){return n!=null&&!ux.has(n)?(mn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Kh}"`),null):n}function cx(n,e){let t,r,i,o,l;if(ix(n)){let c=n.getAttribute("action");r=c?pi(c,e):null,t=n.getAttribute("method")||Wh,i=eg(n.getAttribute("enctype"))||Kh,o=new FormData(n)}else if(rx(n)||sx(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?pi(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Wh,i=eg(n.getAttribute("formenctype"))||eg(c.getAttribute("enctype"))||Kh,o=new FormData(c,n),!lx()){let{name:p,type:y,value:g}=n;if(y==="image"){let w=p?`${p}.`:"";o.append(`${w}x`,"0"),o.append(`${w}y`,"0")}else p&&o.append(p,g)}}else{if(zf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Wh,r=null,i=Kh,l=n}return o&&i==="text/plain"&&(l=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ky(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dx(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&pi(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function hx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function px(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let l=await hx(o,t);return l.links?l.links():[]}return[]}));return vx(r.flat(1).filter(fx).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function YE(n,e,t,r,i,o){let l=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,c=(h,p)=>{var y;return t[p].pathname!==h.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return o==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):o==="data"?e.filter((h,p)=>{var g;let y=r.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let w=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function mx(n,e,{includeHydrateFallback:t}={}){return gx(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function gx(n){return[...new Set(n)]}function yx(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function vx(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let o=JSON.stringify(yx(i));return t.has(o)||(t.add(o),r.push({key:o,link:i})),r},[])}function gS(){let n=z.useContext(Ua);return ky(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _x(){let n=z.useContext(od);return ky(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Cy=z.createContext(void 0);Cy.displayName="FrameworkContext";function yS(){let n=z.useContext(Cy);return ky(n,"You must render this element inside a <HydratedRouter> element"),n}function wx(n,e){let t=z.useContext(Cy),[r,i]=z.useState(!1),[o,l]=z.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:y,onTouchStart:g}=e,w=z.useRef(null);z.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let L=X=>{X.forEach(K=>{l(K.isIntersecting)})},D=new IntersectionObserver(L,{threshold:.5});return w.current&&D.observe(w.current),()=>{D.disconnect()}}},[n]),z.useEffect(()=>{if(r){let L=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(L)}}},[r]);let b=()=>{i(!0)},k=()=>{i(!1),l(!1)};return t?n!=="intent"?[o,w,{}]:[o,w,{onFocus:ec(c,b),onBlur:ec(h,k),onMouseEnter:ec(p,b),onMouseLeave:ec(y,k),onTouchStart:ec(g,b)}]:[!1,w,{}]}function ec(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function Ex({page:n,...e}){let{router:t}=gS(),r=z.useMemo(()=>vo(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?z.createElement(Ix,{page:n,matches:r,...e}):null}function Tx(n){let{manifest:e,routeModules:t}=yS(),[r,i]=z.useState([]);return z.useEffect(()=>{let o=!1;return px(n,e,t).then(l=>{o||i(l)}),()=>{o=!0}},[n,e,t]),r}function Ix({page:n,matches:e,...t}){let r=Ba(),{future:i,manifest:o,routeModules:l}=yS(),{basename:c}=gS(),{loaderData:h,matches:p}=_x(),y=z.useMemo(()=>YE(n,e,p,o,r,"data"),[n,e,p,o,r]),g=z.useMemo(()=>YE(n,e,p,o,r,"assets"),[n,e,p,o,r]),w=z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let L=new Set,D=!1;if(e.forEach(K=>{var oe;let Z=o.routes[K.route.id];!Z||!Z.hasLoader||(!y.some(ie=>ie.route.id===K.route.id)&&K.route.id in h&&((oe=l[K.route.id])!=null&&oe.shouldRevalidate)||Z.hasClientLoader?D=!0:L.add(K.route.id))}),L.size===0)return[];let X=dx(n,c,i.unstable_trailingSlashAwareDataRequests,"data");return D&&L.size>0&&X.searchParams.set("_routes",e.filter(K=>L.has(K.route.id)).map(K=>K.route.id).join(",")),[X.pathname+X.search]},[c,i.unstable_trailingSlashAwareDataRequests,h,r,o,y,e,n,l]),b=z.useMemo(()=>mx(g,o),[g,o]),k=Tx(g);return z.createElement(z.Fragment,null,w.map(L=>z.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...t})),b.map(L=>z.createElement("link",{key:L,rel:"modulepreload",href:L,...t})),k.map(({key:L,link:D})=>z.createElement("link",{key:L,nonce:t.nonce,...D,crossOrigin:D.crossOrigin??t.crossOrigin})))}function Sx(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bx&&(window.__reactRouterVersion="7.13.0")}catch{}function Rx(n,e){return tC({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:y1({window:e==null?void 0:e.window}),hydrationData:Ax(),routes:n,mapRouteProperties:YC,hydrationRouteProperties:JC,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function Ax(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:Px(n.errors)}),n}function Px(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new id(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let l=new o(i.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let o=new Error(i.message);o.stack="",t[r]=o}}else t[r]=i;return t}var vS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_S=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:l,state:c,target:h,to:p,preventScrollReset:y,viewTransition:g,unstable_defaultShouldRevalidate:w,...b},k){let{basename:L,unstable_useTransitions:D}=z.useContext(gi),X=typeof p=="string"&&vS.test(p),K=JI(p,L);p=K.to;let Z=DC(p,{relative:i}),[oe,ie,ue]=wx(r,b),I=Dx(p,{replace:l,state:c,target:h,preventScrollReset:y,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:w,unstable_useTransitions:D});function S(V){e&&e(V),V.defaultPrevented||I(V)}let A=z.createElement("a",{...b,...ue,href:K.absoluteURL||Z,onClick:K.isExternal||o?e:S,ref:Sx(k,ie),target:h,"data-discover":!X&&t==="render"?"true":void 0});return oe&&!X?z.createElement(z.Fragment,null,A,z.createElement(Ex,{page:Z})):A});_S.displayName="Link";var kx=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:l,viewTransition:c,children:h,...p},y){let g=ld(l,{relative:p.relative}),w=Ba(),b=z.useContext(od),{navigator:k,basename:L}=z.useContext(gi),D=b!=null&&Mx(g)&&c===!0,X=k.encodeLocation?k.encodeLocation(g).pathname:g.pathname,K=w.pathname,Z=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(K=K.toLowerCase(),Z=Z?Z.toLowerCase():null,X=X.toLowerCase()),Z&&L&&(Z=pi(Z,L)||Z);const oe=X!=="/"&&X.endsWith("/")?X.length-1:X.length;let ie=K===X||!i&&K.startsWith(X)&&K.charAt(oe)==="/",ue=Z!=null&&(Z===X||!i&&Z.startsWith(X)&&Z.charAt(X.length)==="/"),I={isActive:ie,isPending:ue,isTransitioning:D},S=ie?e:void 0,A;typeof r=="function"?A=r(I):A=[r,ie?"active":null,ue?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let V=typeof o=="function"?o(I):o;return z.createElement(_S,{...p,"aria-current":S,className:A,ref:y,style:V,to:l,viewTransition:c},typeof h=="function"?h(I):h)});kx.displayName="NavLink";var Cx=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:l=Wh,action:c,onSubmit:h,relative:p,preventScrollReset:y,viewTransition:g,unstable_defaultShouldRevalidate:w,...b},k)=>{let{unstable_useTransitions:L}=z.useContext(gi),D=Vx(),X=Lx(c,{relative:p}),K=l.toLowerCase()==="get"?"get":"post",Z=typeof c=="string"&&vS.test(c),oe=ie=>{if(h&&h(ie),ie.defaultPrevented)return;ie.preventDefault();let ue=ie.nativeEvent.submitter,I=(ue==null?void 0:ue.getAttribute("formmethod"))||l,S=()=>D(ue||ie.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:o,relative:p,preventScrollReset:y,viewTransition:g,unstable_defaultShouldRevalidate:w});L&&t!==!1?z.startTransition(()=>S()):S()};return z.createElement("form",{ref:k,method:K,action:X,onSubmit:r?h:oe,...b,"data-discover":!Z&&n==="render"?"true":void 0})});Cx.displayName="Form";function xx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wS(n){let e=z.useContext(Ua);return st(e,xx(n)),e}function Dx(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let p=NC(),y=Ba(),g=ld(n,{relative:o});return z.useCallback(w=>{if(ax(w,e)){w.preventDefault();let b=t!==void 0?t:ss(y)===ss(g),k=()=>p(n,{replace:b,state:r,preventScrollReset:i,relative:o,viewTransition:l,unstable_defaultShouldRevalidate:c});h?z.startTransition(()=>k()):k()}},[y,p,g,t,r,e,n,i,o,l,c,h])}var Nx=0,Ox=()=>`__${String(++Nx)}__`;function Vx(){let{router:n}=wS("useSubmit"),{basename:e}=z.useContext(gi),t=HC(),r=n.fetch,i=n.navigate;return z.useCallback(async(o,l={})=>{let{action:c,method:h,encType:p,formData:y,body:g}=cx(o,e);if(l.navigate===!1){let w=l.fetcherKey||Ox();await r(w,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:g,formMethod:l.method||h,formEncType:l.encType||p,flushSync:l.flushSync})}else await i(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:g,formMethod:l.method||h,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,t])}function Lx(n,{relative:e}={}){let{basename:t}=z.useContext(gi),r=z.useContext(ls);st(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...ld(n||".",{relative:e})},l=Ba();if(n==null){o.search=l.search;let c=new URLSearchParams(o.search),h=c.getAll("index");if(h.some(y=>y==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let y=c.toString();o.search=y?`?${y}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:ts([t,o.pathname])),ss(o)}function Mx(n,{relative:e}={}){let t=z.useContext(by);st(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=wS("useViewTransitionState"),i=ld(n,{relative:e});if(!t.isTransitioning)return!1;let o=pi(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=pi(t.nextLocation.pathname,r)||t.nextLocation.pathname;return df(i.pathname,l)!=null||df(i.pathname,o)!=null}const Fx="modulepreload",Ux=function(n){return"/"+n},JE={},En=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=l(t.map(p=>{if(p=Ux(p),p in JE)return;JE[p]=!0;const y=p.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const w=document.createElement("link");if(w.rel=y?"stylesheet":Fx,y||(w.as="script"),w.crossOrigin="",w.href=p,h&&w.setAttribute("nonce",h),document.head.appendChild(w),y)return new Promise((b,k)=>{w.addEventListener("load",b),w.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${p}`)))})}))}function o(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},XE=z.lazy(()=>En(()=>import("./Login-RXVlXTsy.js"),__vite__mapDeps([0,1,2,3,4]))),ZE=z.lazy(()=>En(()=>import("./Dashboard-ChRlrKe4.js"),__vite__mapDeps([5,4,1,6,7,8,9,10]))),Bx=z.lazy(()=>En(()=>import("./LecturerDetails-QuGkwy4K.js"),__vite__mapDeps([11,4,12,13,8,9,10,14,7]))),zx=z.lazy(()=>En(()=>import("./BookClass-DCeCV5Fu.js"),__vite__mapDeps([15,4,2,3,16,17,18,19,8,1,20,13,7,21,22]))),jx=z.lazy(()=>En(()=>import("./MyBookings-BfoHQ1Ms.js"),__vite__mapDeps([23,4,12,24,17,18,3,25,13,8,7,14,10,21,26]))),eT=z.lazy(()=>En(()=>import("./Dashboard-BmRd4Cn9.js"),__vite__mapDeps([27,4,12,6,7,8,14,28,29]))),$x=z.lazy(()=>En(()=>import("./Availability-qaVplco3.js"),__vite__mapDeps([30,4,17,19,3,2,25,13,8,7,31,22]))),tT=z.lazy(()=>En(()=>import("./Dashboard-Itlqqtnw.js"),__vite__mapDeps([32,4,12,24,17,18,3,6,14,8,33,10,26]))),nT=z.lazy(()=>En(()=>import("./Dashboard-D66xU0qO.js"),__vite__mapDeps([34,4,12,24,17,18,3,20,19,8,22,6,28,29]))),rT=z.lazy(()=>En(()=>import("./Dashboard-Bhn-iYfx.js"),__vite__mapDeps([35,4,12,6,8,28]))),Hx=z.lazy(()=>En(()=>import("./NotFound-DnyeAxE8.js"),__vite__mapDeps([36,4,31,8]))),qx=z.lazy(()=>En(()=>import("./Register-11l6e-Db.js"),__vite__mapDeps([37,4,2,3,1]))),iT=z.lazy(()=>En(()=>import("./Onboarding-_iXvMQoH.js"),__vite__mapDeps([38,4,2,3,1,16,17,18,19,8]))),Wx=z.lazy(()=>En(()=>import("./Thread-BYVNX0sj.js"),__vite__mapDeps([39,4,1,13,8]))),Kx=z.lazy(()=>En(()=>import("./Analytics-CnyjjtnP.js"),__vite__mapDeps([40,4]))),Gx=z.lazy(()=>En(()=>import("./BookingDetails-FA5tLluU.js"),__vite__mapDeps([41,4,12,25,13,8,7,14,10]))),Qx=z.lazy(()=>En(()=>import("./KYCReview-Cc_oRg4b.js"),__vite__mapDeps([42,4,6,33,8]))),Yx=z.lazy(()=>En(()=>import("./SupportInbox-DE6k4jXh.js"),__vite__mapDeps([43,6,4]))),Jx=z.lazy(()=>En(()=>import("./Support-Cpy2Anx6.js"),__vite__mapDeps([44,4,6]))),Dt=n=>e=>hn.jsx(z.Suspense,{fallback:null,children:hn.jsx(n,{...e})}),Xx=Rx([{path:"/",Component:Dt(XE)},{path:"/login",Component:Dt(XE)},{path:"/register",Component:Dt(qx)},{path:"/onboarding",Component:Dt(iT)},{path:"/profile",Component:Dt(iT)},{path:"/chat/:bookingId",Component:Dt(Wx)},{path:"/admin/analytics",Component:Dt(Kx)},{path:"/student/booking/:id",Component:Dt(Gx)},{path:"/admin/kyc",Component:Dt(Qx)},{path:"/admin/support",Component:Dt(Yx)},{path:"/support",Component:Dt(Jx)},{path:"/student",children:[{index:!0,Component:Dt(ZE)},{path:"dashboard",Component:Dt(ZE)},{path:"lecturer/:id",Component:Dt(Bx)},{path:"book/:lecturerId",Component:Dt(zx)},{path:"bookings",Component:Dt(jx)}]},{path:"/lecturer",children:[{index:!0,Component:Dt(eT)},{path:"dashboard",Component:Dt(eT)},{path:"availability",Component:Dt($x)}]},{path:"/admin",children:[{index:!0,Component:Dt(tT)},{path:"dashboard",Component:Dt(tT)}]},{path:"/super-admin",children:[{index:!0,Component:Dt(nT)},{path:"dashboard",Component:Dt(nT)}]},{path:"/developer",children:[{index:!0,Component:Dt(rT)},{path:"dashboard",Component:Dt(rT)}]},{path:"*",Component:Dt(Hx)}]),Zx=()=>{};var sT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eD=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(o&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|l&63)}}return e.join("")},TS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,y=o>>2,g=(o&3)<<4|c>>4;let w=(c&15)<<2|p>>6,b=p&63;h||(b=64,l||(w=64)),r.push(t[y],t[g],t[w],t[b])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ES(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eD(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||p==null||g==null)throw new tD;const w=o<<2|c>>4;if(r.push(w),p!==64){const b=c<<4&240|p>>2;if(r.push(b),g!==64){const k=p<<6&192|g;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nD=function(n){const e=ES(n);return TS.encodeByteArray(e,!0)},hf=function(n){return nD(n).replace(/\./g,"")},IS=function(n){try{return TS.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=()=>SS().__FIREBASE_DEFAULTS__,iD=()=>{if(typeof process>"u"||typeof sT>"u")return;const n=sT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sD=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&IS(n[1]);return e&&JSON.parse(e)},jf=()=>{try{return Zx()||rD()||iD()||sD()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},bS=n=>{var e,t;return(t=(e=jf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},xy=n=>{const e=bS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},RS=()=>{var n;return(n=jf())==null?void 0:n.config},AS=n=>{var e;return(e=jf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $f(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...n};return[hf(JSON.stringify(t)),hf(JSON.stringify(l)),""].join(".")}const wc={};function aD(){const n={prod:[],emulator:[]};for(const e of Object.keys(wc))wc[e]?n.emulator.push(e):n.prod.push(e);return n}function lD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let oT=!1;function Hf(n,e){if(typeof window>"u"||typeof document>"u"||!us(window.location.host)||wc[n]===e||wc[n]||oT)return;wc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",o=aD().prod.length>0;function l(){const w=document.getElementById(r);w&&w.remove()}function c(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function h(w,b){w.setAttribute("width","24"),w.setAttribute("id",b),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{oT=!0,l()},w}function y(w,b){w.setAttribute("id",b),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function g(){const w=lD(r),b=t("text"),k=document.getElementById(b)||document.createElement("span"),L=t("learnmore"),D=document.getElementById(L)||document.createElement("a"),X=t("preprendIcon"),K=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Z=w.element;c(Z),y(D,L);const oe=p();h(K,X),Z.append(K,k,D,oe),document.body.appendChild(Z)}o?(k.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function kS(){var e;const n=(e=jf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CS(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hD(){const n=wn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function xS(){return!kS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function DS(){return!kS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function qf(){try{return typeof indexedDB=="object"}catch{return!1}}function Dy(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(t){e(t)}})}function NS(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD="FirebaseError";class ti extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=fD,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uo.prototype.create)}}class Uo{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],l=o?pD(o,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new ti(i,c,r)}}function pD(n,e){return n.replace(mD,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const mD=/\{\$([^}]+)}/g;function gD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Do(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],l=e[i];if(aT(o)&&aT(l)){if(!Do(o,l))return!1}else if(o!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function aT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function dc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function hc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function yD(n,e){const t=new vD(n,e);return t.subscribe.bind(t)}class vD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");_D(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=tg),i.error===void 0&&(i.error=tg),i.complete===void 0&&(i.complete=tg);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _D(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=1e3,ED=2,TD=14400*1e3,ID=.5;function lT(n,e=wD,t=ED){const r=e*Math.pow(t,n),i=Math.round(ID*r*(Math.random()-.5)*2);return Math.min(TD,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(n){return n&&n._delegate?n._delegate:n}class _r{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new oD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(RD(e))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ca){return this.instances.has(e)}getOptions(e=ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:bD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ca){return this.component?this.component.multipleInstances?e:ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function bD(n){return n===ca?void 0:n}function RD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new SD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ut||(ut={}));const PD={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},kD=ut.INFO,CD={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},xD=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=CD[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wf{constructor(e){this.name=e,this._logLevel=kD,this._logHandler=xD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...e),this._logHandler(this,ut.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...e),this._logHandler(this,ut.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ut.INFO,...e),this._logHandler(this,ut.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ut.WARN,...e),this._logHandler(this,ut.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...e),this._logHandler(this,ut.ERROR,...e)}}const DD=(n,e)=>e.some(t=>n instanceof t);let uT,cT;function ND(){return uT||(uT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OD(){return cT||(cT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OS=new WeakMap,xg=new WeakMap,VS=new WeakMap,ng=new WeakMap,Ny=new WeakMap;function VD(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",l)},o=()=>{t(Os(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&OS.set(t,n)}).catch(()=>{}),Ny.set(e,n),e}function LD(n){if(xg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",l),n.removeEventListener("abort",l)},o=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",l),n.addEventListener("abort",l)});xg.set(n,e)}let Dg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return xg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||VS.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Os(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MD(n){Dg=n(Dg)}function FD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(rg(this),e,...t);return VS.set(r,e.sort?e.sort():[e]),Os(r)}:OD().includes(n)?function(...e){return n.apply(rg(this),e),Os(OS.get(this))}:function(...e){return Os(n.apply(rg(this),e))}}function UD(n){return typeof n=="function"?FD(n):(n instanceof IDBTransaction&&LD(n),DD(n,ND())?new Proxy(n,Dg):n)}function Os(n){if(n instanceof IDBRequest)return VD(n);if(ng.has(n))return ng.get(n);const e=UD(n);return e!==n&&(ng.set(n,e),Ny.set(e,n)),e}const rg=n=>Ny.get(n);function Kf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const l=indexedDB.open(n,e),c=Os(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Os(l.result),h.oldVersion,h.newVersion,Os(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}function ig(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Os(t).then(()=>{})}const BD=["get","getKey","getAll","getAllKeys","count"],zD=["put","add","delete","clear"],sg=new Map;function dT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(sg.get(e))return sg.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=zD.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||BD.includes(t)))return;const o=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&h.done]))[0]};return sg.set(e,o),o}MD(n=>({...n,get:(e,t,r)=>dT(e,t)||n.get(e,t,r),has:(e,t)=>!!dT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if($D(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function $D(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",hT="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Wf("@firebase/app"),HD="@firebase/app-compat",qD="@firebase/analytics-compat",WD="@firebase/analytics",KD="@firebase/app-check-compat",GD="@firebase/app-check",QD="@firebase/auth",YD="@firebase/auth-compat",JD="@firebase/database",XD="@firebase/data-connect",ZD="@firebase/database-compat",eN="@firebase/functions",tN="@firebase/functions-compat",nN="@firebase/installations",rN="@firebase/installations-compat",iN="@firebase/messaging",sN="@firebase/messaging-compat",oN="@firebase/performance",aN="@firebase/performance-compat",lN="@firebase/remote-config",uN="@firebase/remote-config-compat",cN="@firebase/storage",dN="@firebase/storage-compat",hN="@firebase/firestore",fN="@firebase/ai",pN="@firebase/firestore-compat",mN="firebase",gN="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="[DEFAULT]",yN={[Ng]:"fire-core",[HD]:"fire-core-compat",[WD]:"fire-analytics",[qD]:"fire-analytics-compat",[GD]:"fire-app-check",[KD]:"fire-app-check-compat",[QD]:"fire-auth",[YD]:"fire-auth-compat",[JD]:"fire-rtdb",[XD]:"fire-data-connect",[ZD]:"fire-rtdb-compat",[eN]:"fire-fn",[tN]:"fire-fn-compat",[nN]:"fire-iid",[rN]:"fire-iid-compat",[iN]:"fire-fcm",[sN]:"fire-fcm-compat",[oN]:"fire-perf",[aN]:"fire-perf-compat",[lN]:"fire-rc",[uN]:"fire-rc-compat",[cN]:"fire-gcs",[dN]:"fire-gcs-compat",[hN]:"fire-fst",[pN]:"fire-fst-compat",[fN]:"fire-vertex","fire-js":"fire-js",[mN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc=new Map,vN=new Map,Vg=new Map;function fT(n,e){try{n.container.addComponent(e)}catch(t){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lr(n){const e=n.name;if(Vg.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,n);for(const t of Oc.values())fT(t,n);for(const t of vN.values())fT(t,n);return!0}function cs(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ao=new Uo("app","Firebase",_N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _r("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const za=gN;function LS(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Og,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Ao.create("bad-app-name",{appName:String(i)});if(t||(t=RS()),!t)throw Ao.create("no-options");const o=Oc.get(i);if(o){if(Do(t,o.options)&&Do(r,o.config))return o;throw Ao.create("duplicate-app",{appName:i})}const l=new AD(i);for(const h of Vg.values())l.addComponent(h);const c=new wN(t,r,l);return Oc.set(i,c),c}function au(n=Og){const e=Oc.get(n);if(!e&&n===Og&&RS())return LS();if(!e)throw Ao.create("no-app",{appName:n});return e}function pT(){return Array.from(Oc.values())}function xn(n,e,t){let r=yN[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(l.join(" "));return}Lr(new _r(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firebase-heartbeat-database",TN=1,Vc="firebase-heartbeat-store";let og=null;function MS(){return og||(og=Kf(EN,TN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Vc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ao.create("idb-open",{originalErrorMessage:n.message})})),og}async function IN(n){try{const t=(await MS()).transaction(Vc),r=await t.objectStore(Vc).get(FS(n));return await t.done,r}catch(e){if(e instanceof ti)Ms.warn(e.message);else{const t=Ao.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(t.message)}}}async function mT(n,e){try{const r=(await MS()).transaction(Vc,"readwrite");await r.objectStore(Vc).put(e,FS(n)),await r.done}catch(t){if(t instanceof ti)Ms.warn(t.message);else{const r=Ao.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ms.warn(r.message)}}}function FS(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=1024,bN=30;class RN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new PN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gT();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>bN){const l=kN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gT(),{heartbeatsToSend:r,unsentEntries:i}=AN(this._heartbeatsCache.heartbeats),o=hf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ms.warn(t),""}}}function gT(){return new Date().toISOString().substring(0,10)}function AN(n,e=SN){const t=[];let r=n.slice();for(const i of n){const o=t.find(l=>l.agent===i.agent);if(o){if(o.dates.push(i.date),yT(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class PN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qf()?Dy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await IN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yT(n){return hf(JSON.stringify({version:2,heartbeats:n})).length}function kN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n){Lr(new _r("platform-logger",e=>new jD(e),"PRIVATE")),Lr(new _r("heartbeat",e=>new RN(e),"PRIVATE")),xn(Ng,hT,n),xn(Ng,hT,"esm2020"),xn("fire-js","")}CN("");var xN="firebase",DN="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xn(xN,DN,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="type.googleapis.com/google.protobuf.Int64Value",ON="type.googleapis.com/google.protobuf.UInt64Value";function US(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function ff(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>ff(e));if(typeof n=="function"||typeof n=="object")return US(n,e=>ff(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Hl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case NN:case ON:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Hl(e)):typeof n=="function"||typeof n=="object"?US(n,e=>Hl(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Or extends ti{constructor(e,t,r){super(`${Oy}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Or.prototype)}}function VN(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function pf(n,e){let t=VN(n),r=t,i;try{const o=e&&e.error;if(o){const l=o.status;if(typeof l=="string"){if(!vT[l])return new Or("internal","internal");t=vT[l],r=l}const c=o.message;typeof c=="string"&&(r=c),i=o.details,i!==void 0&&(i=Hl(i))}}catch{}return t==="ok"?null:new Or(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,rr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lg="us-central1",MN=/^data: (.*?)(?:\n|$)/;function FN(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Or("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class UN{constructor(e,t,r,i,o=Lg,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new LN(e,t,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(o);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=Lg}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function BN(n,e,t){const r=us(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&($f(n.emulatorOrigin+"/backends"),Hf("Functions",!0))}function zN(n,e,t){const r=i=>$N(n,e,i,{});return r.stream=(i,o)=>qN(n,e,i,o),r}function BS(n){return n.emulatorOrigin&&us(n.emulatorOrigin)?"include":void 0}async function jN(n,e,t,r,i){t["Content-Type"]="application/json";let o;try{o=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:BS(i)})}catch{return{status:0,json:null}}let l=null;try{l=await o.json()}catch{}return{status:o.status,json:l}}async function zS(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function $N(n,e,t,r){const i=n._url(e);return HN(n,i,t,r)}async function HN(n,e,t,r){t=ff(t);const i={data:t},o=await zS(n,r),l=r.timeout||7e4,c=FN(l),h=await Promise.race([jN(e,i,o,n.fetchImpl,n),c.promise,n.cancelAllRequests]);if(c.cancel(),!h)throw new Or("cancelled","Firebase Functions instance was deleted.");const p=pf(h.status,h.json);if(p)throw p;if(!h.json)throw new Or("internal","Response is not valid JSON object.");let y=h.json.data;if(typeof y>"u"&&(y=h.json.result),typeof y>"u")throw new Or("internal","Response is missing data field.");return{data:Hl(y)}}function qN(n,e,t,r){const i=n._url(e);return WN(n,i,t,r||{})}async function WN(n,e,t,r){var w;t=ff(t);const i={data:t},o=await zS(n,r);o["Content-Type"]="application/json",o.Accept="text/event-stream";let l;try{l=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:o,signal:r==null?void 0:r.signal,credentials:BS(n)})}catch(b){if(b instanceof Error&&b.name==="AbortError"){const L=new Or("cancelled","Request was cancelled.");return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}const k=pf(0,null);return{data:Promise.reject(k),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(k)}}}}}}let c,h;const p=new Promise((b,k)=>{c=b,h=k});(w=r==null?void 0:r.signal)==null||w.addEventListener("abort",()=>{const b=new Or("cancelled","Request was cancelled.");h(b)});const y=l.body.getReader(),g=KN(y,c,h,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const b=g.getReader();return{async next(){const{value:k,done:L}=await b.read();return{value:k,done:L}},async return(){return await b.cancel(),{done:!0,value:void 0}}}}},data:p}}function KN(n,e,t,r){const i=(l,c)=>{const h=l.match(MN);if(!h)return;const p=h[1];try{const y=JSON.parse(p);if("result"in y){e(Hl(y.result));return}if("message"in y){c.enqueue(Hl(y.message));return}if("error"in y){const g=pf(0,y);c.error(g),t(g);return}}catch(y){if(y instanceof Or){c.error(y),t(y);return}}},o=new TextDecoder;return new ReadableStream({start(l){let c="";return h();async function h(){if(r!=null&&r.aborted){const p=new Or("cancelled","Request was cancelled");return l.error(p),t(p),Promise.resolve()}try{const{value:p,done:y}=await n.read();if(y){c.trim()&&i(c.trim(),l),l.close();return}if(r!=null&&r.aborted){const w=new Or("cancelled","Request was cancelled");l.error(w),t(w),await n.cancel();return}c+=o.decode(p,{stream:!0});const g=c.split(`
`);c=g.pop()||"";for(const w of g)w.trim()&&i(w.trim(),l);return h()}catch(p){const y=p instanceof Or?p:pf(0,null);l.error(y),t(y)}}},cancel(){return n.cancel()}})}const _T="@firebase/functions",wT="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="auth-internal",QN="app-check-internal",YN="messaging-internal";function JN(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),o=t.getProvider(GN),l=t.getProvider(YN),c=t.getProvider(QN);return new UN(i,o,l,c,r)};Lr(new _r(Oy,e,"PUBLIC").setMultipleInstances(!0)),xn(_T,wT,n),xn(_T,wT,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XN(n=au(),e=Lg){const r=cs(at(n),Oy).getImmediate({identifier:e}),i=xy("functions");return i&&ZN(r,...i),r}function ZN(n,e,t){BN(at(n),e,t)}function eO(n,e,t){return zN(at(n),e)}JN();function jS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tO=jS,$S=new Uo("auth","Firebase",jS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=new Wf("@firebase/auth");function nO(n,...e){mf.logLevel<=ut.WARN&&mf.warn(`Auth (${za}): ${n}`,...e)}function Gh(n,...e){mf.logLevel<=ut.ERROR&&mf.error(`Auth (${za}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mi(n,...e){throw Ly(n,...e)}function xi(n,...e){return Ly(n,...e)}function Vy(n,e,t){const r={...tO(),[e]:t};return new Uo("auth","Firebase",r).create(e,{appName:n.name})}function ns(n){return Vy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HS(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&mi(n,"argument-error"),Vy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ly(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return $S.create(n,...e)}function We(n,e,...t){if(!n)throw Ly(e,...t)}function xs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gh(e),new Error(e)}function Fs(n,e){n||xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function rO(){return ET()==="http:"||ET()==="https:"}function ET(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rO()||CS()||"connection"in navigator)?navigator.onLine:!0}function sO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fs(t>e,"Short delay should be less than long delay!"),this.isMobile=uD()||dD()}get(){return iO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(n,e){Fs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],lO=new cd(3e4,6e4);function zs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ds(n,e,t,r,i={}){return WS(n,i,async()=>{let o={},l={};r&&(e==="GET"?l=r:o={body:JSON.stringify(r)});const c=ud({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...o};return cD()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&us(n.emulatorConfig.host)&&(p.credentials="include"),qS.fetch()(await KS(n,n.config.apiHost,t,c),p)})}async function WS(n,e,t){n._canInitEmulator=!1;const r={...oO,...e};try{const i=new cO(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw Dh(n,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const c=o.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw Dh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw Dh(n,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Vy(n,y,p);mi(n,y)}}catch(i){if(i instanceof ti)throw i;mi(n,"network-request-failed",{message:String(i)})}}async function dd(n,e,t,r,i={}){const o=await ds(n,e,t,r,i);return"mfaPendingCredential"in o&&mi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function KS(n,e,t,r){const i=`${e}${t}?${r}`,o=n,l=o.config.emulator?My(n.config,i):`${n.config.apiScheme}://${i}`;return aO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(l).toString():l}function uO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(xi(this.auth,"network-request-failed")),lO.get())})}}function Dh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=xi(n,e,r);return i.customData._tokenResponse=t,i}function TT(n){return n!==void 0&&n.enterprise!==void 0}class dO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return uO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hO(n,e){return ds(n,"GET","/v2/recaptchaConfig",zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(n,e){return ds(n,"POST","/v1/accounts:delete",e)}async function gf(n,e){return ds(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pO(n,e=!1){const t=at(n),r=await t.getIdToken(e),i=Fy(r);We(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ec(ag(i.auth_time)),issuedAtTime:Ec(ag(i.iat)),expirationTime:Ec(ag(i.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ag(n){return Number(n)*1e3}function Fy(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const i=IS(t);return i?JSON.parse(i):(Gh("Failed to decode base64 JWT payload"),null)}catch(i){return Gh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function IT(n){const e=Fy(n);return We(e,"internal-error"),We(typeof e.exp<"u","internal-error"),We(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ql(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof ti&&mO(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function mO({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(n){var g;const e=n.auth,t=await n.getIdToken(),r=await ql(n,gf(e,{idToken:t}));We(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const o=(g=i.providerUserInfo)!=null&&g.length?GS(i.providerUserInfo):[],l=vO(n.providerData,o),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Fg(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function yO(n){const e=at(n);await yf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vO(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function GS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(n,e){const t=await WS(n,{},async()=>{const r=ud({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,l=await KS(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&us(n.emulatorConfig.host)&&(h.credentials="include"),qS.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wO(n,e){return ds(n,"POST","/v2/accounts:revokeToken",zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){We(e.idToken,"internal-error"),We(typeof e.idToken<"u","internal-error"),We(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):IT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){We(e.length!==0,"internal-error");const t=IT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(We(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:o}=await _O(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:o}=t,l=new Fl;return r&&(We(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(We(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),o&&(We(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Fl,this.toJSON())}_performRefresh(){return xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(n,e){We(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ci{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new gO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ql(this,this.stsTokenManager.getToken(this.auth,e));return We(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pO(this,e)}reload(){return yO(this)}_assign(e){this!==e&&(We(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ci({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){We(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await yf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(ns(this.auth));const e=await this.getIdToken();return await ql(this,fO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:g,emailVerified:w,isAnonymous:b,providerData:k,stsTokenManager:L}=t;We(g&&L,e,"internal-error");const D=Fl.fromJSON(this.name,L);We(typeof g=="string",e,"internal-error"),fo(r,e.name),fo(i,e.name),We(typeof w=="boolean",e,"internal-error"),We(typeof b=="boolean",e,"internal-error"),fo(o,e.name),fo(l,e.name),fo(c,e.name),fo(h,e.name),fo(p,e.name),fo(y,e.name);const X=new Ci({uid:g,auth:e,email:i,emailVerified:w,displayName:r,isAnonymous:b,photoURL:l,phoneNumber:o,tenantId:c,stsTokenManager:D,createdAt:p,lastLoginAt:y});return k&&Array.isArray(k)&&(X.providerData=k.map(K=>({...K}))),h&&(X._redirectEventId=h),X}static async _fromIdTokenResponse(e,t,r=!1){const i=new Fl;i.updateFromServerResponse(t);const o=new Ci({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yf(o),o}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];We(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?GS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),c=new Fl;c.updateFromIdToken(r);const h=new Ci({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Map;function Ds(n){Fs(n instanceof Function,"Expected a class definition");let e=ST.get(n);return e?(Fs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ST.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}QS.type="NONE";const bT=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(n,e,t){return`firebase:${n}:${e}:${t}`}class Ul{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Qh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Qh("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gf(this.auth,{idToken:e}).catch(()=>{});return t?Ci._fromGetAccountInfoResponse(this.auth,t,e):null}return Ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ul(Ds(bT),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Ds(bT);const l=Qh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const y=await p._get(l);if(y){let g;if(typeof y=="string"){const w=await gf(e,{idToken:y}).catch(()=>{});if(!w)break;g=await Ci._fromGetAccountInfoResponse(e,w,y)}else g=Ci._fromJSON(e,y);p!==o&&(c=g),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ul(o,e,r):(o=h[0],c&&await o._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==o)try{await p._remove(l)}catch{}})),new Ul(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tb(e))return"Blackberry";if(nb(e))return"Webos";if(JS(e))return"Safari";if((e.includes("chrome/")||XS(e))&&!e.includes("edge/"))return"Chrome";if(eb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YS(n=wn()){return/firefox\//i.test(n)}function JS(n=wn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function XS(n=wn()){return/crios\//i.test(n)}function ZS(n=wn()){return/iemobile/i.test(n)}function eb(n=wn()){return/android/i.test(n)}function tb(n=wn()){return/blackberry/i.test(n)}function nb(n=wn()){return/webos/i.test(n)}function Uy(n=wn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function EO(n=wn()){var e;return Uy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function TO(){return hD()&&document.documentMode===10}function rb(n=wn()){return Uy(n)||eb(n)||nb(n)||tb(n)||/windows phone/i.test(n)||ZS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(n,e=[]){let t;switch(n){case"Browser":t=RT(wn());break;case"Worker":t=`${RT(wn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${za}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=o=>new Promise((l,c)=>{try{const h=e(o);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(n,e={}){return ds(n,"GET","/v2/passwordPolicy",zs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=6;class RO{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??bO,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new AT(this),this.idTokenSubscription=new AT(this),this.beforeStateQueue=new IO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ds(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Ul.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gf(this,{idToken:e}),r=await Ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(rr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(o=this.redirectUser)==null?void 0:o._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return We(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(ns(this));const t=e?at(e):null;return t&&We(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&We(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(ns(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(ns(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SO(this),t=new RO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uo("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await wO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ds(e)||this._popupRedirectResolver;We(t,this,"argument-error"),this.redirectPersistenceManager=await Ul.create(this,[Ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(We(c,this,"internal-error"),c.then(()=>{l||o(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return We(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ib(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&nO(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function js(n){return at(n)}class AT{constructor(e){this.auth=e,this.observer=null,this.addObserver=yD(t=>this.observer=t)}get next(){return We(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PO(n){Gf=n}function sb(n){return Gf.loadJS(n)}function kO(){return Gf.recaptchaEnterpriseScript}function CO(){return Gf.gapiScript}function xO(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class DO{constructor(){this.enterprise=new NO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class NO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const OO="recaptcha-enterprise",ob="NO_RECAPTCHA";class VO{constructor(e){this.type=OO,this.auth=js(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,c)=>{hO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new dO(h);return o.tenantId==null?o._agentRecaptchaConfig=p:o._tenantRecaptchaConfigs[o.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function i(o,l,c){const h=window.grecaptcha;TT(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(p=>{l(p)}).catch(()=>{l(ob)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DO().execute("siteKey",{action:"verify"}):new Promise((o,l)=>{r(this.auth).then(c=>{if(!t&&TT(window.grecaptcha))i(c,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=kO();h.length!==0&&(h+=c),sb(h).then(()=>{i(c,o,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function PT(n,e,t,r=!1,i=!1){const o=new VO(n);let l;if(i)l=ob;else try{l=await o.verify(t)}catch{l=await o.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Ug(n,e,t,r,i){var o;if((o=n._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await PT(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await PT(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(n,e){const t=cs(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),o=t.getOptions();if(Do(o,e??{}))return i;mi(i,"already-initialized")}return t.initialize({options:e})}function MO(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function FO(n,e,t){const r=js(n);We(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=ab(e),{host:l,port:c}=UO(e),h=c===null?"":`:${c}`,p={url:`${o}//${l}${h}/`},y=Object.freeze({host:l,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){We(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),We(Do(p,r.config.emulator)&&Do(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,us(l)?($f(`${o}//${l}${h}`),Hf("Auth",!0)):BO()}function ab(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function UO(n){const e=ab(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:kT(r.substr(o.length+1))}}else{const[o,l]=r.split(":");return{host:o,port:kT(l)}}}function kT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function BO(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xs("not implemented")}_getIdTokenResponse(e){return xs("not implemented")}_linkToIdToken(e,t){return xs("not implemented")}_getReauthenticationResolver(e){return xs("not implemented")}}async function zO(n,e){return ds(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(n,e){return dd(n,"POST","/v1/accounts:signInWithPassword",zs(n,e))}async function $O(n,e){return ds(n,"POST","/v1/accounts:sendOobCode",zs(n,e))}async function HO(n,e){return $O(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(n,e){return dd(n,"POST","/v1/accounts:signInWithEmailLink",zs(n,e))}async function WO(n,e){return dd(n,"POST","/v1/accounts:signInWithEmailLink",zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc extends By{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Lc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Lc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,t,"signInWithPassword",jO);case"emailLink":return qO(e,{email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ug(e,r,"signUpPassword",zO);case"emailLink":return WO(e,{idToken:t,email:this._email,oobCode:this._password});default:mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(n,e){return dd(n,"POST","/v1/accounts:signInWithIdp",zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO="http://localhost";class ba extends By{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):mi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...o}=t;if(!r||!i)return null;const l=new ba(r,i);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Bl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Bl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bl(e,t)}buildRequest(){const e={requestUri:KO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ud(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QO(n){const e=dc(hc(n)).link,t=e?dc(hc(e)).deep_link_id:null,r=dc(hc(n)).deep_link_id;return(r?dc(hc(r)).link:null)||r||t||e||n}class zy{constructor(e){const t=dc(hc(e)),r=t.apiKey??null,i=t.oobCode??null,o=GO(t.mode??null);We(r&&i&&o,"argument-error"),this.apiKey=r,this.operation=o,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=QO(e);try{return new zy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(){this.providerId=lu.PROVIDER_ID}static credential(e,t){return Lc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=zy.parseLink(t);return We(r,"argument-error"),Lc._fromEmailAndCode(e,r.code,r.tenantId)}}lu.PROVIDER_ID="password";lu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";lu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd extends Qf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends hd{constructor(){super("facebook.com")}static credential(e){return ba._fromParams({providerId:wo.PROVIDER_ID,signInMethod:wo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wo.credentialFromTaggedObject(e)}static credentialFromError(e){return wo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wo.credential(e.oauthAccessToken)}catch{return null}}}wo.FACEBOOK_SIGN_IN_METHOD="facebook.com";wo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends hd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ba._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Cs.credential(t,r)}catch{return null}}}Cs.GOOGLE_SIGN_IN_METHOD="google.com";Cs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo extends hd{constructor(){super("github.com")}static credential(e){return ba._fromParams({providerId:Eo.PROVIDER_ID,signInMethod:Eo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Eo.credentialFromTaggedObject(e)}static credentialFromError(e){return Eo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Eo.credential(e.oauthAccessToken)}catch{return null}}}Eo.GITHUB_SIGN_IN_METHOD="github.com";Eo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To extends hd{constructor(){super("twitter.com")}static credential(e,t){return ba._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return To.credential(t,r)}catch{return null}}}To.TWITTER_SIGN_IN_METHOD="twitter.com";To.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YO(n,e){return dd(n,"POST","/v1/accounts:signUp",zs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const o=await Ci._fromIdTokenResponse(e,r,i),l=CT(r);return new Ra({user:o,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=CT(r);return new Ra({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function CT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends ti{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new vf(e,t,r,i)}}function lb(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(n,o,e,r):o})}async function JO(n,e,t=!1){const r=await ql(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ra._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n,e,t=!1){const{auth:r}=n;if(rr(r.app))return Promise.reject(ns(r));const i="reauthenticate";try{const o=await ql(n,lb(r,i,e,n),t);We(o.idToken,r,"internal-error");const l=Fy(o.idToken);We(l,r,"internal-error");const{sub:c}=l;return We(n.uid===c,r,"user-mismatch"),Ra._forOperation(n,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&mi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ub(n,e,t=!1){if(rr(n.app))return Promise.reject(ns(n));const r="signIn",i=await lb(n,r,e),o=await Ra._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function ZO(n,e){return ub(js(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cb(n){const e=js(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EB(n,e,t){if(rr(n.app))return Promise.reject(ns(n));const r=js(n),l=await Ug(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YO).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&cb(n),h}),c=await Ra._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function eV(n,e,t){return rr(n.app)?Promise.reject(ns(n)):ZO(at(n),lu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&cb(n),r})}async function TB(n,e){const t=at(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:o}=await HO(t.auth,i);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(n,e){return ds(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IB(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=at(n),o={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await ql(r,tV(r.auth,o));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(n,e){return at(n).setPersistence(e)}function rV(n,e,t,r){return at(n).onIdTokenChanged(e,t,r)}function iV(n,e,t){return at(n).beforeAuthStateChanged(e,t)}function sV(n,e,t,r){return at(n).onAuthStateChanged(e,t,r)}function oV(n){return at(n).signOut()}const _f="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_f,"1"),this.storage.removeItem(_f),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=1e3,lV=10;class hb extends db{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},o=this.storage.getItem(r);TO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,lV):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},aV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}hb.type="LOCAL";const fb=hb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends db{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}pb.type="SESSION";const mb=pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Yf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:o}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,o)),h=await uV(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,l;return new Promise((c,h)=>{const p=jy("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const w=g;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(y),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(w.data.response);break;default:clearTimeout(y),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(){return window}function dV(n){rs().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){return typeof rs().WorkerGlobalScope<"u"&&typeof rs().importScripts=="function"}async function hV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function pV(){return gb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb="firebaseLocalStorageDb",mV=1,wf="firebaseLocalStorage",vb="fbase_key";class fd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Jf(n,e){return n.transaction([wf],e?"readwrite":"readonly").objectStore(wf)}function gV(){const n=indexedDB.deleteDatabase(yb);return new fd(n).toPromise()}function Bg(){const n=indexedDB.open(yb,mV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(wf,{keyPath:vb})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(wf)?e(r):(r.close(),await gV(),e(await Bg()))})})}async function xT(n,e,t){const r=Jf(n,!0).put({[vb]:e,value:t});return new fd(r).toPromise()}async function yV(n,e){const t=Jf(n,!1).get(e),r=await new fd(t).toPromise();return r===void 0?null:r.value}function DT(n,e){const t=Jf(n,!0).delete(e);return new fd(t).toPromise()}const vV=800,_V=3;class _b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>_V)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yf._getInstance(pV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await hV(),!this.activeServiceWorker)return;this.sender=new cV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await xT(e,_f,"1"),await DT(e,_f),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>yV(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>DT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=Jf(i,!1).getAll();return new fd(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),vV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_b.type="LOCAL";const wV=_b;new cd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(n,e){return e?Ds(e):(We(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy extends By{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function EV(n){return ub(n.auth,new Hy(n),n.bypassAuthState)}function TV(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),XO(t,new Hy(n),n.bypassAuthState)}async function IV(n){const{auth:e,user:t}=n;return We(t,e,"internal-error"),JO(t,new Hy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return EV;case"linkViaPopup":case"linkViaRedirect":return IV;case"reauthViaPopup":case"reauthViaRedirect":return TV;default:mi(this.auth,"internal-error")}}resolve(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV=new cd(2e3,1e4);async function bV(n,e,t){if(rr(n.app))return Promise.reject(xi(n,"operation-not-supported-in-this-environment"));const r=js(n);HS(n,e,Qf);const i=$y(r,t);return new va(r,"signInViaPopup",e,i).executeNotNull()}class va extends wb{constructor(e,t,r,i,o){super(e,t,i,o),this.provider=r,this.authWindow=null,this.pollId=null,va.currentPopupAction&&va.currentPopupAction.cancel(),va.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return We(e,this.auth,"internal-error"),e}async onExecution(){Fs(this.filter.length===1,"Popup operations only handle one event");const e=jy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(xi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,va.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,SV.get())};e()}}va.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RV="pendingRedirect",Yh=new Map;class AV extends wb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yh.get(this.auth._key());if(!e){try{const r=await PV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yh.set(this.auth._key(),e)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PV(n,e){const t=Tb(e),r=Eb(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function kV(n,e){return Eb(n)._set(Tb(e),"true")}function CV(n,e){Yh.set(n._key(),e)}function Eb(n){return Ds(n._redirectPersistence)}function Tb(n){return Qh(RV,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(n,e,t){return DV(n,e,t)}async function DV(n,e,t){if(rr(n.app))return Promise.reject(ns(n));const r=js(n);HS(n,e,Qf),await r._initializationPromise;const i=$y(r,t);return await kV(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function NV(n,e,t=!1){if(rr(n.app))return Promise.reject(ns(n));const r=js(n),i=$y(r,e),l=await new AV(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=600*1e3;class VV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Ib(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(xi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=OV&&this.cachedEventUids.clear(),this.cachedEventUids.has(NT(e))}saveEventToCache(e){this.cachedEventUids.add(NT(e)),this.lastProcessedEventTime=Date.now()}}function NT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Ib({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function LV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ib(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(n,e={}){return ds(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UV=/^https?/;async function BV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await MV(n);for(const t of e)try{if(zV(t))return}catch{}mi(n,"unauthorized-domain")}function zV(n){const e=Mg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!UV.test(t))return!1;if(FV.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new cd(3e4,6e4);function OT(){const n=rs().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $V(n){return new Promise((e,t)=>{var i,o,l;function r(){OT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{OT(),t(xi(n,"network-request-failed"))},timeout:jV.get()})}if((o=(i=rs().gapi)==null?void 0:i.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((l=rs().gapi)!=null&&l.load)r();else{const c=xO("iframefcb");return rs()[c]=()=>{gapi.load?r():t(xi(n,"network-request-failed"))},sb(`${CO()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Jh=null,e})}let Jh=null;function HV(n){return Jh=Jh||$V(n),Jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=new cd(5e3,15e3),WV="__/auth/iframe",KV="emulator/auth/iframe",GV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YV(n){const e=n.config;We(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?My(e,KV):`https://${n.config.authDomain}/${WV}`,r={apiKey:e.apiKey,appName:n.name,v:za},i=QV.get(n.config.apiHost);i&&(r.eid=i);const o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${ud(r).slice(1)}`}async function JV(n){const e=await HV(n),t=rs().gapi;return We(t,n,"internal-error"),e.open({where:document.body,url:YV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:GV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const l=xi(n,"network-request-failed"),c=rs().setTimeout(()=>{o(l)},qV.get());function h(){rs().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ZV=500,eL=600,tL="_blank",nL="http://localhost";class VT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rL(n,e,t,r=ZV,i=eL){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...XV,width:r.toString(),height:i.toString(),top:o,left:l},p=wn().toLowerCase();t&&(c=XS(p)?tL:t),YS(p)&&(e=e||nL,h.scrollbars="yes");const y=Object.entries(h).reduce((w,[b,k])=>`${w}${b}=${k},`,"");if(EO(p)&&c!=="_self")return iL(e||"",c),new VT(null);const g=window.open(e||"",c,y);We(g,n,"popup-blocked");try{g.focus()}catch{}return new VT(g)}function iL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL="__/auth/handler",oL="emulator/auth/handler",aL=encodeURIComponent("fac");async function LT(n,e,t,r,i,o){We(n.config.authDomain,n,"auth-domain-config-required"),We(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:za,eventId:i};if(e instanceof Qf){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",gD(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,g]of Object.entries({}))l[y]=g}if(e instanceof hd){const y=e.getScopes().filter(g=>g!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await n._getAppCheckToken(),p=h?`#${aL}=${encodeURIComponent(h)}`:"";return`${lL(n)}?${ud(c).slice(1)}${p}`}function lL({config:n}){return n.emulator?My(n,oL):`https://${n.authDomain}/${sL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="webStorageSupport";class uL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mb,this._completeRedirectFn=NV,this._overrideRedirectResult=CV}async _openPopup(e,t,r,i){var l;Fs((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const o=await LT(e,t,r,Mg(),i);return rL(e,o,jy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const o=await LT(e,t,r,Mg(),i);return dV(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Fs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await JV(e),r=new VV(e);return t.register("authEvent",i=>(We(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lg,{type:lg},i=>{var l;const o=(l=i==null?void 0:i[0])==null?void 0:l[lg];o!==void 0&&t(!!o),mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rb()||JS()||Uy()}}const cL=uL;var MT="@firebase/auth",FT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){We(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fL(n){Lr(new _r("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;We(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ib(n)},p=new AO(r,i,o,h);return MO(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lr(new _r("auth-internal",e=>{const t=js(e.getProvider("auth").getImmediate());return(r=>new dL(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xn(MT,FT,hL(n)),xn(MT,FT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=300,mL=AS("authIdTokenMaxAge")||pL;let UT=null;const gL=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>mL)return;const i=t==null?void 0:t.token;UT!==i&&(UT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function yL(n=au()){const e=cs(n,"auth");if(e.isInitialized())return e.getImmediate();const t=LO(n,{popupRedirectResolver:cL,persistence:[wV,fb,mb]}),r=AS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const l=gL(o.toString());iV(t,l,()=>l(t.currentUser)),rV(t,c=>l(c))}}const i=bS("auth");return i&&FO(t,`http://${i}`),t}function vL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}PO({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const o=xi("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",vL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fL("Browser");var BT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,Sb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,S){function A(){}A.prototype=S.prototype,I.F=S.prototype,I.prototype=new A,I.prototype.constructor=I,I.D=function(V,N,F){for(var P=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)P[Be-2]=arguments[Be];return S.prototype[N].apply(V,P)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,S,A){A||(A=0);const V=Array(16);if(typeof S=="string")for(var N=0;N<16;++N)V[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;N<16;++N)V[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=I.g[0],A=I.g[1],N=I.g[2];let F=I.g[3],P;P=S+(F^A&(N^F))+V[0]+3614090360&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(N^S&(A^N))+V[1]+3905402710&4294967295,F=S+(P<<12&4294967295|P>>>20),P=N+(A^F&(S^A))+V[2]+606105819&4294967295,N=F+(P<<17&4294967295|P>>>15),P=A+(S^N&(F^S))+V[3]+3250441966&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(F^A&(N^F))+V[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(N^S&(A^N))+V[5]+1200080426&4294967295,F=S+(P<<12&4294967295|P>>>20),P=N+(A^F&(S^A))+V[6]+2821735955&4294967295,N=F+(P<<17&4294967295|P>>>15),P=A+(S^N&(F^S))+V[7]+4249261313&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(F^A&(N^F))+V[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(N^S&(A^N))+V[9]+2336552879&4294967295,F=S+(P<<12&4294967295|P>>>20),P=N+(A^F&(S^A))+V[10]+4294925233&4294967295,N=F+(P<<17&4294967295|P>>>15),P=A+(S^N&(F^S))+V[11]+2304563134&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(F^A&(N^F))+V[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(N^S&(A^N))+V[13]+4254626195&4294967295,F=S+(P<<12&4294967295|P>>>20),P=N+(A^F&(S^A))+V[14]+2792965006&4294967295,N=F+(P<<17&4294967295|P>>>15),P=A+(S^N&(F^S))+V[15]+1236535329&4294967295,A=N+(P<<22&4294967295|P>>>10),P=S+(N^F&(A^N))+V[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^N&(S^A))+V[6]+3225465664&4294967295,F=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(F^S))+V[11]+643717713&4294967295,N=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(N^F))+V[0]+3921069994&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(N^F&(A^N))+V[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^N&(S^A))+V[10]+38016083&4294967295,F=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(F^S))+V[15]+3634488961&4294967295,N=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(N^F))+V[4]+3889429448&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(N^F&(A^N))+V[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^N&(S^A))+V[14]+3275163606&4294967295,F=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(F^S))+V[3]+4107603335&4294967295,N=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(N^F))+V[8]+1163531501&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(N^F&(A^N))+V[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^N&(S^A))+V[2]+4243563512&4294967295,F=S+(P<<9&4294967295|P>>>23),P=N+(S^A&(F^S))+V[7]+1735328473&4294967295,N=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(N^F))+V[12]+2368359562&4294967295,A=N+(P<<20&4294967295|P>>>12),P=S+(A^N^F)+V[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^N)+V[8]+2272392833&4294967295,F=S+(P<<11&4294967295|P>>>21),P=N+(F^S^A)+V[11]+1839030562&4294967295,N=F+(P<<16&4294967295|P>>>16),P=A+(N^F^S)+V[14]+4259657740&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(A^N^F)+V[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^N)+V[4]+1272893353&4294967295,F=S+(P<<11&4294967295|P>>>21),P=N+(F^S^A)+V[7]+4139469664&4294967295,N=F+(P<<16&4294967295|P>>>16),P=A+(N^F^S)+V[10]+3200236656&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(A^N^F)+V[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^N)+V[0]+3936430074&4294967295,F=S+(P<<11&4294967295|P>>>21),P=N+(F^S^A)+V[3]+3572445317&4294967295,N=F+(P<<16&4294967295|P>>>16),P=A+(N^F^S)+V[6]+76029189&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(A^N^F)+V[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^N)+V[12]+3873151461&4294967295,F=S+(P<<11&4294967295|P>>>21),P=N+(F^S^A)+V[15]+530742520&4294967295,N=F+(P<<16&4294967295|P>>>16),P=A+(N^F^S)+V[2]+3299628645&4294967295,A=N+(P<<23&4294967295|P>>>9),P=S+(N^(A|~F))+V[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~N))+V[7]+1126891415&4294967295,F=S+(P<<10&4294967295|P>>>22),P=N+(S^(F|~A))+V[14]+2878612391&4294967295,N=F+(P<<15&4294967295|P>>>17),P=A+(F^(N|~S))+V[5]+4237533241&4294967295,A=N+(P<<21&4294967295|P>>>11),P=S+(N^(A|~F))+V[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~N))+V[3]+2399980690&4294967295,F=S+(P<<10&4294967295|P>>>22),P=N+(S^(F|~A))+V[10]+4293915773&4294967295,N=F+(P<<15&4294967295|P>>>17),P=A+(F^(N|~S))+V[1]+2240044497&4294967295,A=N+(P<<21&4294967295|P>>>11),P=S+(N^(A|~F))+V[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~N))+V[15]+4264355552&4294967295,F=S+(P<<10&4294967295|P>>>22),P=N+(S^(F|~A))+V[6]+2734768916&4294967295,N=F+(P<<15&4294967295|P>>>17),P=A+(F^(N|~S))+V[13]+1309151649&4294967295,A=N+(P<<21&4294967295|P>>>11),P=S+(N^(A|~F))+V[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~N))+V[11]+3174756917&4294967295,F=S+(P<<10&4294967295|P>>>22),P=N+(S^(F|~A))+V[2]+718787259&4294967295,N=F+(P<<15&4294967295|P>>>17),P=A+(F^(N|~S))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+S&4294967295,I.g[1]=I.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+F&4294967295}r.prototype.v=function(I,S){S===void 0&&(S=I.length);const A=S-this.blockSize,V=this.C;let N=this.h,F=0;for(;F<S;){if(N==0)for(;F<=A;)i(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<S;)if(V[N++]=I.charCodeAt(F++),N==this.blockSize){i(this,V),N=0;break}}else for(;F<S;)if(V[N++]=I[F++],N==this.blockSize){i(this,V),N=0;break}}this.h=N,this.o+=S},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var S=1;S<I.length-8;++S)I[S]=0;S=this.o*8;for(var A=I.length-8;A<I.length;++A)I[A]=S&255,S/=256;for(this.v(I),I=Array(16),S=0,A=0;A<4;++A)for(let V=0;V<32;V+=8)I[S++]=this.g[A]>>>V&255;return I};function o(I,S){var A=c;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=S(I)}function l(I,S){this.h=S;const A=[];let V=!0;for(let N=I.length-1;N>=0;N--){const F=I[N]|0;V&&F==S||(A[N]=F,V=!1)}this.g=A}var c={};function h(I){return-128<=I&&I<128?o(I,function(S){return new l([S|0],S<0?-1:0)}):new l([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return D(p(-I));const S=[];let A=1;for(let V=0;I>=A;V++)S[V]=I/A|0,A*=4294967296;return new l(S,0)}function y(I,S){if(I.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(I.charAt(0)=="-")return D(y(I.substring(1),S));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=p(Math.pow(S,8));let V=g;for(let F=0;F<I.length;F+=8){var N=Math.min(8,I.length-F);const P=parseInt(I.substring(F,F+N),S);N<8?(N=p(Math.pow(S,N)),V=V.j(N).add(p(P))):(V=V.j(A),V=V.add(p(P)))}return V}var g=h(0),w=h(1),b=h(16777216);n=l.prototype,n.m=function(){if(L(this))return-D(this).m();let I=0,S=1;for(let A=0;A<this.g.length;A++){const V=this.i(A);I+=(V>=0?V:4294967296+V)*S,S*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(L(this))return"-"+D(this).toString(I);const S=p(Math.pow(I,6));var A=this;let V="";for(;;){const N=oe(A,S).g;A=X(A,N.j(S));let F=((A.g.length>0?A.g[0]:A.h)>>>0).toString(I);if(A=N,k(A))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(let S=0;S<I.g.length;S++)if(I.g[S]!=0)return!1;return!0}function L(I){return I.h==-1}n.l=function(I){return I=X(this,I),L(I)?-1:k(I)?0:1};function D(I){const S=I.g.length,A=[];for(let V=0;V<S;V++)A[V]=~I.g[V];return new l(A,~I.h).add(w)}n.abs=function(){return L(this)?D(this):this},n.add=function(I){const S=Math.max(this.g.length,I.g.length),A=[];let V=0;for(let N=0;N<=S;N++){let F=V+(this.i(N)&65535)+(I.i(N)&65535),P=(F>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);V=P>>>16,F&=65535,P&=65535,A[N]=P<<16|F}return new l(A,A[A.length-1]&-2147483648?-1:0)};function X(I,S){return I.add(D(S))}n.j=function(I){if(k(this)||k(I))return g;if(L(this))return L(I)?D(this).j(D(I)):D(D(this).j(I));if(L(I))return D(this.j(D(I)));if(this.l(b)<0&&I.l(b)<0)return p(this.m()*I.m());const S=this.g.length+I.g.length,A=[];for(var V=0;V<2*S;V++)A[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<I.g.length;N++){const F=this.i(V)>>>16,P=this.i(V)&65535,Be=I.i(N)>>>16,ze=I.i(N)&65535;A[2*V+2*N]+=P*ze,K(A,2*V+2*N),A[2*V+2*N+1]+=F*ze,K(A,2*V+2*N+1),A[2*V+2*N+1]+=P*Be,K(A,2*V+2*N+1),A[2*V+2*N+2]+=F*Be,K(A,2*V+2*N+2)}for(I=0;I<S;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=S;I<2*S;I++)A[I]=0;return new l(A,0)};function K(I,S){for(;(I[S]&65535)!=I[S];)I[S+1]+=I[S]>>>16,I[S]&=65535,S++}function Z(I,S){this.g=I,this.h=S}function oe(I,S){if(k(S))throw Error("division by zero");if(k(I))return new Z(g,g);if(L(I))return S=oe(D(I),S),new Z(D(S.g),D(S.h));if(L(S))return S=oe(I,D(S)),new Z(D(S.g),S.h);if(I.g.length>30){if(L(I)||L(S))throw Error("slowDivide_ only works with positive integers.");for(var A=w,V=S;V.l(I)<=0;)A=ie(A),V=ie(V);var N=ue(A,1),F=ue(V,1);for(V=ue(V,2),A=ue(A,2);!k(V);){var P=F.add(V);P.l(I)<=0&&(N=N.add(A),F=P),V=ue(V,1),A=ue(A,1)}return S=X(I,N.j(S)),new Z(N,S)}for(N=g;I.l(S)>=0;){for(A=Math.max(1,Math.floor(I.m()/S.m())),V=Math.ceil(Math.log(A)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=p(A),P=F.j(S);L(P)||P.l(I)>0;)A-=V,F=p(A),P=F.j(S);k(F)&&(F=w),N=N.add(F),I=X(I,P)}return new Z(N,I)}n.B=function(I){return oe(this,I).h},n.and=function(I){const S=Math.max(this.g.length,I.g.length),A=[];for(let V=0;V<S;V++)A[V]=this.i(V)&I.i(V);return new l(A,this.h&I.h)},n.or=function(I){const S=Math.max(this.g.length,I.g.length),A=[];for(let V=0;V<S;V++)A[V]=this.i(V)|I.i(V);return new l(A,this.h|I.h)},n.xor=function(I){const S=Math.max(this.g.length,I.g.length),A=[];for(let V=0;V<S;V++)A[V]=this.i(V)^I.i(V);return new l(A,this.h^I.h)};function ie(I){const S=I.g.length+1,A=[];for(let V=0;V<S;V++)A[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(A,I.h)}function ue(I,S){const A=S>>5;S%=32;const V=I.g.length-A,N=[];for(let F=0;F<V;F++)N[F]=S>0?I.i(F+A)>>>S|I.i(F+A+1)<<32-S:I.i(F+A);return new l(N,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Sb=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,Po=l}).apply(typeof BT<"u"?BT:typeof self<"u"?self:typeof window<"u"?window:{});var Nh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bb,fc,Rb,Xh,zg,Ab,Pb,kb;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nh=="object"&&Nh];for(var _=0;_<d.length;++_){var E=d[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(d,_){if(_)e:{var E=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var q=d[R];if(!(q in E))break e;E=E[q]}d=d[d.length-1],R=E[d],_=_(R),_!=R&&_!=null&&e(E,d,{configurable:!0,writable:!0,value:_})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(_){var E=[],R;for(R in _)Object.prototype.hasOwnProperty.call(_,R)&&E.push([R,_[R]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function h(d,_,E){return d.call.apply(d.bind,arguments)}function p(d,_,E){return p=h,p.apply(null,arguments)}function y(d,_){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function g(d,_){function E(){}E.prototype=_.prototype,d.Z=_.prototype,d.prototype=new E,d.prototype.constructor=d,d.Ob=function(R,q,J){for(var ye=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)ye[Xe-2]=arguments[Xe];return _.prototype[q].apply(R,ye)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function b(d){const _=d.length;if(_>0){const E=Array(_);for(let R=0;R<_;R++)E[R]=d[R];return E}return[]}function k(d,_){for(let R=1;R<arguments.length;R++){const q=arguments[R];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=d.length||0;const J=q.length||0;d.length=E+J;for(let ye=0;ye<J;ye++)d[E+ye]=q[ye]}else d.push(q)}}class L{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function D(d){l.setTimeout(()=>{throw d},0)}function X(){var d=I;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class K{constructor(){this.h=this.g=null}add(_,E){const R=Z.get();R.set(_,E),this.h?this.h.next=R:this.g=R,this.h=R}}var Z=new L(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,ue=!1,I=new K,S=()=>{const d=Promise.resolve(void 0);ie=()=>{d.then(A)}};function A(){for(var d;d=X();){try{d.h.call(d.g)}catch(E){D(E)}var _=Z;_.j(d),_.h<100&&(_.h++,d.next=_.g,_.g=d)}ue=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,_),l.removeEventListener("test",E,_)}catch{}return d})();function P(d){return/^[\s\xa0]*$/.test(d)}function Be(d,_){N.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,_)}g(Be,N),Be.prototype.init=function(d,_){const E=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget,_||(E=="mouseover"?_=d.fromElement:E=="mouseout"&&(_=d.toElement)),this.relatedTarget=_,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ze="closure_listenable_"+(Math.random()*1e6|0),fe=0;function be(d,_,E,R,q){this.listener=d,this.proxy=null,this.src=_,this.type=E,this.capture=!!R,this.ha=q,this.key=++fe,this.da=this.fa=!1}function $(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function pe(d,_,E){for(const R in d)_.call(E,d[R],R,d)}function ne(d,_){for(const E in d)_.call(void 0,d[E],E,d)}function O(d){const _={};for(const E in d)_[E]=d[E];return _}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(d,_){let E,R;for(let q=1;q<arguments.length;q++){R=arguments[q];for(E in R)d[E]=R[E];for(let J=0;J<G.length;J++)E=G[J],Object.prototype.hasOwnProperty.call(R,E)&&(d[E]=R[E])}}function de(d){this.src=d,this.g={},this.h=0}de.prototype.add=function(d,_,E,R,q){const J=d.toString();d=this.g[J],d||(d=this.g[J]=[],this.h++);const ye=we(d,_,R,q);return ye>-1?(_=d[ye],E||(_.fa=!1)):(_=new be(_,this.src,J,!!R,q),_.fa=E,d.push(_)),_};function _e(d,_){const E=_.type;if(E in d.g){var R=d.g[E],q=Array.prototype.indexOf.call(R,_,void 0),J;(J=q>=0)&&Array.prototype.splice.call(R,q,1),J&&($(_),d.g[E].length==0&&(delete d.g[E],d.h--))}}function we(d,_,E,R){for(let q=0;q<d.length;++q){const J=d[q];if(!J.da&&J.listener==_&&J.capture==!!E&&J.ha==R)return q}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),qe={};function Ze(d,_,E,R,q){if(Array.isArray(_)){for(let J=0;J<_.length;J++)Ze(d,_[J],E,R,q);return null}return E=Oi(E),d&&d[ze]?d.J(_,E,c(R)?!!R.capture:!1,q):kt(d,_,E,!1,R,q)}function kt(d,_,E,R,q,J){if(!_)throw Error("Invalid event type");const ye=c(q)?!!q.capture:!!q;let Xe=On(d);if(Xe||(d[Ce]=Xe=new de(d)),E=Xe.add(_,E,R,ye,J),E.proxy)return E;if(R=wr(),E.proxy=R,R.src=d,R.listener=E,d.addEventListener)F||(q=ye),q===void 0&&(q=!1),d.addEventListener(_.toString(),R,q);else if(d.attachEvent)d.attachEvent(Mr(_.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function wr(){function d(E){return _.call(d.src,d.listener,E)}const _=Ws;return d}function _t(d,_,E,R,q){if(Array.isArray(_))for(var J=0;J<_.length;J++)_t(d,_[J],E,R,q);else R=c(R)?!!R.capture:!!R,E=Oi(E),d&&d[ze]?(d=d.i,J=String(_).toString(),J in d.g&&(_=d.g[J],E=we(_,E,R,q),E>-1&&($(_[E]),Array.prototype.splice.call(_,E,1),_.length==0&&(delete d.g[J],d.h--)))):d&&(d=On(d))&&(_=d.g[_.toString()],d=-1,_&&(d=we(_,E,R,q)),(E=d>-1?_[d]:null)&&Nn(E))}function Nn(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[ze])_e(_.i,d);else{var E=d.type,R=d.proxy;_.removeEventListener?_.removeEventListener(E,R,d.capture):_.detachEvent?_.detachEvent(Mr(E),R):_.addListener&&_.removeListener&&_.removeListener(R),(E=On(_))?(_e(E,d),E.h==0&&(E.src=null,_[Ce]=null)):$(d)}}}function Mr(d){return d in qe?qe[d]:qe[d]="on"+d}function Ws(d,_){if(d.da)d=!0;else{_=new Be(_,this);const E=d.listener,R=d.ha||d.src;d.fa&&Nn(d),d=E.call(R,_)}return d}function On(d){return d=d[Ce],d instanceof de?d:null}var ar="__closure_events_fn_"+(Math.random()*1e9>>>0);function Oi(d){return typeof d=="function"?d:(d[ar]||(d[ar]=function(_){return d.handleEvent(_)}),d[ar])}function ft(){V.call(this),this.i=new de(this),this.M=this,this.G=null}g(ft,V),ft.prototype[ze]=!0,ft.prototype.removeEventListener=function(d,_,E,R){_t(this,d,_,E,R)};function Nt(d,_){var E,R=d.G;if(R)for(E=[];R;R=R.G)E.push(R);if(d=d.M,R=_.type||_,typeof _=="string")_=new N(_,d);else if(_ instanceof N)_.target=_.target||d;else{var q=_;_=new N(R,d),re(_,q)}q=!0;let J,ye;if(E)for(ye=E.length-1;ye>=0;ye--)J=_.g=E[ye],q=lr(J,R,!0,_)&&q;if(J=_.g=d,q=lr(J,R,!0,_)&&q,q=lr(J,R,!1,_)&&q,E)for(ye=0;ye<E.length;ye++)J=_.g=E[ye],q=lr(J,R,!1,_)&&q}ft.prototype.N=function(){if(ft.Z.N.call(this),this.i){var d=this.i;for(const _ in d.g){const E=d.g[_];for(let R=0;R<E.length;R++)$(E[R]);delete d.g[_],d.h--}}this.G=null},ft.prototype.J=function(d,_,E,R){return this.i.add(String(d),_,!1,E,R)},ft.prototype.K=function(d,_,E,R){return this.i.add(String(d),_,!0,E,R)};function lr(d,_,E,R){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();let q=!0;for(let J=0;J<_.length;++J){const ye=_[J];if(ye&&!ye.da&&ye.capture==E){const Xe=ye.listener,sn=ye.ha||ye.src;ye.fa&&_e(d.i,ye),q=Xe.call(sn,R)!==!1&&q}}return q&&!R.defaultPrevented}function nn(d,_){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:l.setTimeout(d,_||0)}function Er(d){d.g=nn(()=>{d.g=null,d.i&&(d.i=!1,Er(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Tr extends V{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Er(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(d){V.call(this),this.h=d,this.g={}}g(Wn,V);var Fr=[];function ni(d){pe(d.g,function(_,E){this.g.hasOwnProperty(E)&&Nn(_)},d),d.g={}}Wn.prototype.N=function(){Wn.Z.N.call(this),ni(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rn=l.JSON.stringify,In=l.JSON.parse,Vn=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ur(){}function ur(){}var ri={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Sn(){N.call(this,"d")}g(Sn,N);function yi(){N.call(this,"c")}g(yi,N);var Ln={},vi=null;function Ir(){return vi=vi||new ft}Ln.Ia="serverreachability";function bn(d){N.call(this,Ln.Ia,d)}g(bn,N);function Kn(d){const _=Ir();Nt(_,new bn(_))}Ln.STAT_EVENT="statevent";function Sr(d,_){N.call(this,Ln.STAT_EVENT,d),this.stat=_}g(Sr,N);function It(d){const _=Ir();Nt(_,new Sr(_,d))}Ln.Ja="timingevent";function Vi(d,_){N.call(this,Ln.Ja,d),this.size=_}g(Vi,N);function je(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},_)}function St(){this.g=!0}St.prototype.ua=function(){this.g=!1};function Ft(d,_,E,R,q,J){d.info(function(){if(d.g)if(J){var ye="",Xe=J.split("&");for(let bt=0;bt<Xe.length;bt++){var sn=Xe[bt].split("=");if(sn.length>1){const un=sn[0];sn=sn[1];const $r=un.split("_");ye=$r.length>=2&&$r[1]=="type"?ye+(un+"="+sn+"&"):ye+(un+"=redacted&")}}}else ye=null;else ye=J;return"XMLHTTP REQ ("+R+") [attempt "+q+"]: "+_+`
`+E+`
`+ye})}function Ht(d,_,E,R,q,J,ye){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+q+"]: "+_+`
`+E+`
`+J+" "+ye})}function an(d,_,E,R){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+Qt(d,E)+(R?" "+R:"")})}function Ot(d,_){d.info(function(){return"TIMEOUT: "+_})}St.prototype.info=function(){};function Qt(d,_){if(!d.g)return _;if(!_)return null;try{const J=JSON.parse(_);if(J){for(d=0;d<J.length;d++)if(Array.isArray(J[d])){var E=J[d];if(!(E.length<2)){var R=E[1];if(Array.isArray(R)&&!(R.length<1)){var q=R[0];if(q!="noop"&&q!="stop"&&q!="close")for(let ye=1;ye<R.length;ye++)R[ye]=""}}}}return rn(J)}catch{return _}}var cr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},x={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},U;function W(){}g(W,Ur),W.prototype.g=function(){return new XMLHttpRequest},U=new W;function te(d){return encodeURIComponent(String(d))}function he(d){var _=1;d=d.split(":");const E=[];for(;_>0&&d.length;)E.push(d.shift()),_--;return d.length&&E.push(d.join(":")),E}function Se(d,_,E,R){this.j=d,this.i=_,this.l=E,this.S=R||1,this.V=new Wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Fe}function Fe(){this.i=null,this.g="",this.h=!1}var Te={},Re={};function Pe(d,_,E){d.M=1,d.A=fs(ln(_)),d.u=E,d.R=!0,Ke(d,null)}function Ke(d,_){d.F=Date.now(),Vt(d),d.B=ln(d.A);var E=d.B,R=d.S;Array.isArray(R)||(R=[String(R)]),Eu(E.i,"t",R),d.C=0,E=d.j.L,d.h=new Fe,d.g=Dd(d.j,E?_:null,!d.u),d.P>0&&(d.O=new Tr(p(d.Y,d,d.g),d.P)),_=d.V,E=d.g,R=d.ba;var q="readystatechange";Array.isArray(q)||(q&&(Fr[0]=q.toString()),q=Fr);for(let J=0;J<q.length;J++){const ye=Ze(E,q[J],R||_.handleEvent,!1,_.h||_);if(!ye)break;_.g[ye.key]=ye}_=d.J?O(d.J):{},d.u?(d.v||(d.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,_)):(d.v="GET",d.g.ea(d.B,d.v,null,_)),Kn(),Ft(d.i,d.v,d.B,d.l,d.S,d.u)}Se.prototype.ba=function(d){d=d.target;const _=this.O;_&&Bi(d)==3?_.j():this.Y(d)},Se.prototype.Y=function(d){try{if(d==this.g)e:{const Xe=Bi(this.g),sn=this.g.ya(),bt=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||Cd(this.g)))){this.K||Xe!=4||sn==7||(sn==8||bt<=0?Kn(3):Kn(2)),Yt(this);var _=this.g.ca();this.X=_;var E=Le(this);if(this.o=_==200,Ht(this.i,this.v,this.B,this.l,this.S,Xe,_),this.o){if(this.U&&!this.L){t:{if(this.g){var R,q=this.g;if((R=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(R)){var J=R;break t}}J=null}if(d=J)an(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,pt(this,d);else{this.o=!1,this.m=3,It(12),Jt(this),lt(this);break e}}if(this.R){d=!0;let un;for(;!this.K&&this.C<E.length;)if(un=et(this,E),un==Re){Xe==4&&(this.m=4,It(14),d=!1),an(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Te){this.m=4,It(15),an(this.i,this.l,E,"[Invalid Chunk]"),d=!1;break}else an(this.i,this.l,un,null),pt(this,un);if(Ye(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||E.length!=0||this.h.h||(this.m=1,It(16),d=!1),this.o=this.o&&d,!d)an(this.i,this.l,E,"[Invalid Chunked Response]"),Jt(this),lt(this);else if(E.length>0&&!this.W){this.W=!0;var ye=this.j;ye.g==this&&ye.aa&&!ye.P&&(ye.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Ko(ye),ye.P=!0,It(11))}}else an(this.i,this.l,E,null),pt(this,E);Xe==4&&Jt(this),this.o&&!this.K&&(Xe==4?Xa(this.j,this):(this.o=!1,Vt(this)))}else Iu(this.g),_==400&&E.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Jt(this),lt(this)}}}catch{}finally{}};function Le(d){if(!Ye(d))return d.g.la();const _=Cd(d.g);if(_==="")return"";let E="";const R=_.length,q=Bi(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Jt(d),lt(d),"";d.h.i=new l.TextDecoder}for(let J=0;J<R;J++)d.h.h=!0,E+=d.h.i.decode(_[J],{stream:!(q&&J==R-1)});return _.length=0,d.h.g+=E,d.C=0,d.h.g}function Ye(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function et(d,_){var E=d.C,R=_.indexOf(`
`,E);return R==-1?Re:(E=Number(_.substring(E,R)),isNaN(E)?Te:(R+=1,R+E>_.length?Re:(_=_.slice(R,R+E),d.C=R+E,_)))}Se.prototype.cancel=function(){this.K=!0,Jt(this)};function Vt(d){d.T=Date.now()+d.H,Ut(d,d.H)}function Ut(d,_){if(d.D!=null)throw Error("WatchDog timer not null");d.D=je(p(d.aa,d),_)}function Yt(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Se.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(Ot(this.i,this.B),this.M!=2&&(Kn(),It(17)),Jt(this),this.m=2,lt(this)):Ut(this,this.T-d)};function lt(d){d.j.I==0||d.K||Xa(d.j,d)}function Jt(d){Yt(d);var _=d.O;_&&typeof _.dispose=="function"&&_.dispose(),d.O=null,ni(d.V),d.g&&(_=d.g,d.g=null,_.abort(),_.dispose())}function pt(d,_){try{var E=d.j;if(E.I!=0&&(E.g==d||wi(E.h,d))){if(!d.L&&wi(E.h,d)&&E.I==3){try{var R=E.Ba.g.parse(_)}catch{R=null}if(Array.isArray(R)&&R.length==3){var q=R;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<d.F)Ja(E),zr(E);else break e;$i(E),It(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=je(p(E.Va,E),6e3));_i(E.h)<=1&&E.ta&&(E.ta=void 0)}else jr(E,11)}else if((d.L||E.g==d)&&Ja(E),!P(_))for(q=E.Ba.g.parse(_),_=0;_<q.length;_++){let bt=q[_];const un=bt[0];if(!(un<=E.K))if(E.K=un,bt=bt[1],E.I==2)if(bt[0]=="c"){E.M=bt[1],E.ba=bt[2];const $r=bt[3];$r!=null&&(E.ka=$r,E.j.info("VER="+E.ka));const vs=bt[4];vs!=null&&(E.za=vs,E.j.info("SVER="+E.za));const Hi=bt[5];Hi!=null&&typeof Hi=="number"&&Hi>0&&(R=1.5*Hi,E.O=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const qi=d.g;if(qi){const tl=qi.g?qi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var J=R.h;J.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(br(J,J.h),J.h=null))}if(R.G){const Ru=qi.g?qi.g.getResponseHeader("X-HTTP-Session-Id"):null;Ru&&(R.wa=Ru,mt(R.J,R.G,Ru))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-d.F,E.j.info("Handshake RTT: "+E.T+"ms")),R=E;var ye=d;if(R.na=bu(R,R.L?R.ba:null,R.W),ye.L){ii(R.h,ye);var Xe=ye,sn=R.O;sn&&(Xe.H=sn),Xe.D&&(Yt(Xe),Vt(Xe)),R.g=ye}else Qn(R);E.i.length>0&&ys(E)}else bt[0]!="stop"&&bt[0]!="close"||jr(E,7);else E.I==3&&(bt[0]=="stop"||bt[0]=="close"?bt[0]=="stop"?jr(E,7):Qa(E):bt[0]!="noop"&&E.l&&E.l.qa(bt),E.A=0)}}Kn(4)}catch{}}var hs=class{constructor(d,_){this.g=d,this.map=_}};function dr(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function _i(d){return d.h?1:d.g?d.g.size:0}function wi(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function br(d,_){d.g?d.g.add(_):d.h=_}function ii(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}dr.prototype.cancel=function(){if(this.i=Rn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Rn(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const E of d.g.values())_=_.concat(E.G);return _}return b(d.i)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wt(d,_){if(d){d=d.split("&");for(let E=0;E<d.length;E++){const R=d[E].indexOf("=");let q,J=null;R>=0?(q=d[E].substring(0,R),J=d[E].substring(R+1)):q=d[E],_(q,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Mn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;d instanceof Mn?(this.l=d.l,Et(this,d.j),this.o=d.o,this.g=d.g,hr(this,d.u),this.h=d.h,Ei(this,Tu(d.i)),this.m=d.m):d&&(_=String(d).match(rt))?(this.l=!1,Et(this,_[1]||"",!0),this.o=jo(_[2]||""),this.g=jo(_[3]||"",!0),hr(this,_[4]),this.h=jo(_[5]||"",!0),Ei(this,_[6]||"",!0),this.m=jo(_[7]||"")):(this.l=!1,this.i=new dt(null,this.l))}Mn.prototype.toString=function(){const d=[];var _=this.j;_&&d.push($o(_,gu,!0),":");var E=this.g;return(E||_=="file")&&(d.push("//"),(_=this.o)&&d.push($o(_,gu,!0),"@"),d.push(te(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&d.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push($o(E,E.charAt(0)=="/"?Ho:yu,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",$o(E,vu)),d.join("")},Mn.prototype.resolve=function(d){const _=ln(this);let E=!!d.j;E?Et(_,d.j):E=!!d.o,E?_.o=d.o:E=!!d.g,E?_.g=d.g:E=d.u!=null;var R=d.h;if(E)hr(_,d.u);else if(E=!!d.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var q=_.h.lastIndexOf("/");q!=-1&&(R=_.h.slice(0,q+1)+R)}if(q=R,q==".."||q==".")R="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){R=q.lastIndexOf("/",0)==0,q=q.split("/");const J=[];for(let ye=0;ye<q.length;){const Xe=q[ye++];Xe=="."?R&&ye==q.length&&J.push(""):Xe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),R&&ye==q.length&&J.push("")):(J.push(Xe),R=!0)}R=J.join("/")}else R=q}return E?_.h=R:E=d.i.toString()!=="",E?Ei(_,Tu(d.i)):E=!!d.m,E&&(_.m=d.m),_};function ln(d){return new Mn(d)}function Et(d,_,E){d.j=E?jo(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function hr(d,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);d.u=_}else d.u=null}function Ei(d,_,E){_ instanceof dt?(d.i=_,Wa(d.i,d.l)):(E||(_=$o(_,Tp)),d.i=new dt(_,d.l))}function mt(d,_,E){d.i.set(_,E)}function fs(d){return mt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function jo(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function $o(d,_,E){return typeof d=="string"?(d=encodeURI(d).replace(_,mu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function mu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var gu=/[#\/\?@]/g,yu=/[#\?:]/g,Ho=/[#\?]/g,Tp=/[#\?@]/g,vu=/#/g;function dt(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function Li(d){d.g||(d.g=new Map,d.h=0,d.i&&wt(d.i,function(_,E){d.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=dt.prototype,n.add=function(d,_){Li(this),this.i=null,d=Mi(this,d);let E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(_),this.h+=1,this};function _u(d,_){Li(d),_=Mi(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function qa(d,_){return Li(d),_=Mi(d,_),d.g.has(_)}n.forEach=function(d,_){Li(this),this.g.forEach(function(E,R){E.forEach(function(q){d.call(_,q,R,this)},this)},this)};function wu(d,_){Li(d);let E=[];if(typeof _=="string")qa(d,_)&&(E=E.concat(d.g.get(Mi(d,_))));else for(d=Array.from(d.g.values()),_=0;_<d.length;_++)E=E.concat(d[_]);return E}n.set=function(d,_){return Li(this),this.i=null,d=Mi(this,d),qa(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},n.get=function(d,_){return d?(d=wu(this,d),d.length>0?String(d[0]):_):_};function Eu(d,_,E){_u(d,_),E.length>0&&(d.i=null,d.g.set(Mi(d,_),b(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(let R=0;R<_.length;R++){var E=_[R];const q=te(E);E=wu(this,E);for(let J=0;J<E.length;J++){let ye=q;E[J]!==""&&(ye+="="+te(E[J])),d.push(ye)}}return this.i=d.join("&")};function Tu(d){const _=new dt;return _.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),_}function Mi(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Wa(d,_){_&&!d.j&&(Li(d),d.i=null,d.g.forEach(function(E,R){const q=R.toLowerCase();R!=q&&(_u(this,R),Eu(this,q,E))},d)),d.j=_}function Fi(d,_){const E=new St;if(l.Image){const R=new Image;R.onload=y(Fn,E,"TestLoadImage: loaded",!0,_,R),R.onerror=y(Fn,E,"TestLoadImage: error",!1,_,R),R.onabort=y(Fn,E,"TestLoadImage: abort",!1,_,R),R.ontimeout=y(Fn,E,"TestLoadImage: timeout",!1,_,R),l.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else _(!1)}function Ui(d,_){const E=new St,R=new AbortController,q=setTimeout(()=>{R.abort(),Fn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:R.signal}).then(J=>{clearTimeout(q),J.ok?Fn(E,"TestPingServer: ok",!0,_):Fn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(q),Fn(E,"TestPingServer: error",!1,_)})}function Fn(d,_,E,R,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),R(E)}catch{}}function qo(){this.g=new Vn}function ps(d){this.i=d.Sb||null,this.h=d.ab||!1}g(ps,Ur),ps.prototype.g=function(){return new Br(this.i,this.h)};function Br(d,_){ft.call(this),this.H=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Br,ft),n=Br.prototype,n.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=_,this.readyState=1,Ti(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(_.body=d),(this.H||l).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ks(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ad(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ad(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Ks(this):Ti(this),this.readyState==3&&Ad(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Ks(this))},n.Na=function(d){this.g&&(this.response=d,Ks(this))},n.ga=function(){this.g&&Ks(this)};function Ks(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ti(d)}n.setRequestHeader=function(d,_){this.A.append(d,_)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=_.next();return d.join(`\r
`)};function Ti(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Br.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Pd(d){let _="";return pe(d,function(E,R){_+=R,_+=":",_+=E,_+=`\r
`}),_}function Ka(d,_,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=Pd(E),typeof d=="string"?E!=null&&te(E):mt(d,_,E))}function Ct(d){ft.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Ct,ft);var kd=/^https?$/i,Ip=["POST","PUT"];n=Ct.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,_,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():U.g(),this.g.onreadystatechange=w(p(this.Ca,this));try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(J){Gs(this,J);return}if(d=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var q in R)E.set(q,R[q]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const J of R.keys())E.set(J,R.get(J));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(J=>J.toLowerCase()=="content-type"),q=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Ip,_,void 0)>=0)||R||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,ye]of E)this.g.setRequestHeader(J,ye);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(J){Gs(this,J)}};function Gs(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.o=5,Qs(d),gs(d)}function Qs(d){d.A||(d.A=!0,Nt(d,"complete"),Nt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Nt(this,"complete"),Nt(this,"abort"),gs(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),gs(this,!0)),Ct.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},n.Xa=function(){ms(this)};function ms(d){if(d.h&&typeof o<"u"){if(d.v&&Bi(d)==4)setTimeout(d.Ca.bind(d),0);else if(Nt(d,"readystatechange"),Bi(d)==4){d.h=!1;try{const J=d.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var R;if(R=J===0){let ye=String(d.D).match(rt)[1]||null;!ye&&l.self&&l.self.location&&(ye=l.self.location.protocol.slice(0,-1)),R=!kd.test(ye?ye.toLowerCase():"")}E=R}if(E)Nt(d,"complete"),Nt(d,"success");else{d.o=6;try{var q=Bi(d)>2?d.g.statusText:""}catch{q=""}d.l=q+" ["+d.ca()+"]",Qs(d)}}finally{gs(d)}}}}function gs(d,_){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const E=d.g;d.g=null,_||Nt(d,"ready");try{E.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Bi(d){return d.g?d.g.readyState:0}n.ca=function(){try{return Bi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),In(_)}};function Cd(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Iu(d){const _={};d=(d.g&&Bi(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(P(d[R]))continue;var E=he(d[R]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const J=_[q]||[];_[q]=J,J.push(E)}ne(_,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(d,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||_}function Ga(d){this.za=0,this.i=[],this.j=new St,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,d),this.Za=zi("retryDelaySeedMs",1e4,d),this.Ta=zi("forwardChannelMaxRetries",2,d),this.va=zi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new dr(d&&d.concurrentRequestLimit),this.Ba=new qo,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ga.prototype,n.ka=8,n.I=1,n.connect=function(d,_,E,R){It(0),this.W=d,this.H=_||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.J=bu(this,null,this.W),ys(this)};function Qa(d){if(Ya(d),d.I==3){var _=d.V++,E=ln(d.J);if(mt(E,"SID",d.M),mt(E,"RID",_),mt(E,"TYPE","terminate"),ji(d,E),_=new Se(d,d.j,_),_.M=2,_.A=fs(ln(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(_.A.toString(),"")}catch{}!E&&l.Image&&(new Image().src=_.A,E=!0),E||(_.g=Dd(_.j,null),_.g.ea(_.A)),_.F=Date.now(),Vt(_)}Go(d)}function zr(d){d.g&&(Ko(d),d.g.cancel(),d.g=null)}function Ya(d){zr(d),d.v&&(l.clearTimeout(d.v),d.v=null),Ja(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function ys(d){if(!Gn(d.h)&&!d.m){d.m=!0;var _=d.Ea;ie||S(),ue||(ie(),ue=!0),I.add(_,d),d.D=0}}function xd(d,_){return _i(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=_.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=je(p(d.Ea,d,_),Za(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const q=new Se(this,this.j,d);let J=this.o;if(this.U&&(J?(J=O(J),re(J,this.U)):J=this.U),this.u!==null||this.R||(q.J=J,J=null),this.S)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(_+=R,_>4096){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Su(this,q,_),E=ln(this.J),mt(E,"RID",d),mt(E,"CVER",22),this.G&&mt(E,"X-HTTP-Session-Id",this.G),ji(this,E),J&&(this.R?_="headers="+te(Pd(J))+"&"+_:this.u&&Ka(E,this.u,J)),br(this.h,q),this.Ra&&mt(E,"TYPE","init"),this.S?(mt(E,"$req",_),mt(E,"SID","null"),q.U=!0,Pe(q,E,null)):Pe(q,E,_),this.I=2}}else this.I==3&&(d?Wo(this,d):this.i.length==0||Gn(this.h)||Wo(this))};function Wo(d,_){var E;_?E=_.l:E=d.V++;const R=ln(d.J);mt(R,"SID",d.M),mt(R,"RID",E),mt(R,"AID",d.K),ji(d,R),d.u&&d.o&&Ka(R,d.u,d.o),E=new Se(d,d.j,E,d.D+1),d.u===null&&(E.J=d.o),_&&(d.i=_.G.concat(d.i)),_=Su(d,E,1e3),E.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),br(d.h,E),Pe(E,R,_)}function ji(d,_){d.H&&pe(d.H,function(E,R){mt(_,R,E)}),d.l&&pe({},function(E,R){mt(_,R,E)})}function Su(d,_,E){E=Math.min(d.i.length,E);const R=d.l?p(d.l.Ka,d.l,d):null;e:{var q=d.i;let Xe=-1;for(;;){const sn=["count="+E];Xe==-1?E>0?(Xe=q[0].g,sn.push("ofs="+Xe)):Xe=0:sn.push("ofs="+Xe);let bt=!0;for(let un=0;un<E;un++){var J=q[un].g;const $r=q[un].map;if(J-=Xe,J<0)Xe=Math.max(0,q[un].g-100),bt=!1;else try{J="req"+J+"_"||"";try{var ye=$r instanceof Map?$r:Object.entries($r);for(const[vs,Hi]of ye){let qi=Hi;c(Hi)&&(qi=rn(Hi)),sn.push(J+vs+"="+encodeURIComponent(qi))}}catch(vs){throw sn.push(J+"type="+encodeURIComponent("_badmap")),vs}}catch{R&&R($r)}}if(bt){ye=sn.join("&");break e}}ye=void 0}return d=d.i.splice(0,E),_.G=d,ye}function Qn(d){if(!d.g&&!d.v){d.Y=1;var _=d.Da;ie||S(),ue||(ie(),ue=!0),I.add(_,d),d.A=0}}function $i(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=je(p(d.Da,d),Za(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Ys(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=je(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),zr(this),Ys(this))};function Ko(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function Ys(d){d.g=new Se(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var _=ln(d.na);mt(_,"RID","rpc"),mt(_,"SID",d.M),mt(_,"AID",d.K),mt(_,"CI",d.F?"0":"1"),!d.F&&d.ia&&mt(_,"TO",d.ia),mt(_,"TYPE","xmlhttp"),ji(d,_),d.u&&d.o&&Ka(_,d.u,d.o),d.O&&(d.g.H=d.O);var E=d.g;d=d.ba,E.M=1,E.A=fs(ln(_)),E.u=null,E.R=!0,Ke(E,d)}n.Va=function(){this.C!=null&&(this.C=null,zr(this),$i(this),It(19))};function Ja(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Xa(d,_){var E=null;if(d.g==_){Ja(d),Ko(d),d.g=null;var R=2}else if(wi(d.h,_))E=_.G,ii(d.h,_),R=1;else return;if(d.I!=0){if(_.o)if(R==1){E=_.u?_.u.length:0,_=Date.now()-_.F;var q=d.D;R=Ir(),Nt(R,new Vi(R,E)),ys(d)}else Qn(d);else if(q=_.m,q==3||q==0&&_.X>0||!(R==1&&xd(d,_)||R==2&&$i(d)))switch(E&&E.length>0&&(_=d.h,_.i=_.i.concat(E)),q){case 1:jr(d,5);break;case 4:jr(d,10);break;case 3:jr(d,6);break;default:jr(d,2)}}}function Za(d,_){let E=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(E*=2),E*_}function jr(d,_){if(d.j.info("Error code "+_),_==2){var E=p(d.bb,d),R=d.Ua;const q=!R;R=new Mn(R||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Et(R,"https"),fs(R),q?Fi(R.toString(),E):Ui(R.toString(),E)}else It(2);d.I=0,d.l&&d.l.pa(_),Go(d),Ya(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function Go(d){if(d.I=0,d.ja=[],d.l){const _=Rn(d.h);(_.length!=0||d.i.length!=0)&&(k(d.ja,_),k(d.ja,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.oa()}}function bu(d,_,E){var R=E instanceof Mn?ln(E):new Mn(E);if(R.g!="")_&&(R.g=_+"."+R.g),hr(R,R.u);else{var q=l.location;R=q.protocol,_=_?_+"."+q.hostname:q.hostname,q=+q.port;const J=new Mn(null);R&&Et(J,R),_&&(J.g=_),q&&hr(J,q),E&&(J.h=E),R=J}return E=d.G,_=d.wa,E&&_&&mt(R,E,_),mt(R,"VER",d.ka),ji(d,R),R}function Dd(d,_,E){if(_&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Aa&&!d.ma?new Ct(new ps({ab:E})):new Ct(d.ma),_.Fa(d.L),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nd(){}n=Nd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function el(){}el.prototype.g=function(d,_){return new Un(d,_)};function Un(d,_){ft.call(this),this.g=new Ga(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(d?d["X-WebChannel-Client-Profile"]=_.sa:d={"X-WebChannel-Client-Profile":_.sa}),this.g.U=d,(d=_&&_.Qb)&&!P(d)&&(this.g.u=d),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!P(_)&&(this.g.G=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Js(this)}g(Un,ft),Un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Qa(this.g)},Un.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.v&&(E={},E.__data__=rn(d),d=E);_.i.push(new hs(_.Ya++,d)),_.I==3&&ys(_)},Un.prototype.N=function(){this.g.l=null,delete this.j,Qa(this.g),delete this.g,Un.Z.N.call(this)};function Od(d){Sn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const E in _){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}g(Od,Sn);function Vd(){yi.call(this),this.status=1}g(Vd,yi);function Js(d){this.g=d}g(Js,Nd),Js.prototype.ra=function(){Nt(this.g,"a")},Js.prototype.qa=function(d){Nt(this.g,new Od(d))},Js.prototype.pa=function(d){Nt(this.g,new Vd)},Js.prototype.oa=function(){Nt(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,kb=function(){return new el},Pb=function(){return Ir()},Ab=Ln,zg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},cr.NO_ERROR=0,cr.TIMEOUT=8,cr.HTTP_ERROR=6,Xh=cr,x.COMPLETE="complete",Rb=x,ur.EventType=ri,ri.OPEN="a",ri.CLOSE="b",ri.ERROR="c",ri.MESSAGE="d",ft.prototype.listen=ft.prototype.J,fc=ur,Ct.prototype.listenOnce=Ct.prototype.K,Ct.prototype.getLastError=Ct.prototype.Ha,Ct.prototype.getLastErrorCode=Ct.prototype.ya,Ct.prototype.getStatus=Ct.prototype.ca,Ct.prototype.getResponseJson=Ct.prototype.La,Ct.prototype.getResponseText=Ct.prototype.la,Ct.prototype.send=Ct.prototype.ea,Ct.prototype.setWithCredentials=Ct.prototype.Fa,bb=Ct}).apply(typeof Nh<"u"?Nh:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jn.UNAUTHENTICATED=new jn(null),jn.GOOGLE_CREDENTIALS=new jn("google-credentials-uid"),jn.FIRST_PARTY=new jn("first-party-uid"),jn.MOCK_USER=new jn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu="12.9.0";function _L(n){uu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new Wf("@firebase/firestore");function Cl(){return Aa.logLevel}function ce(n,...e){if(Aa.logLevel<=ut.DEBUG){const t=e.map(qy);Aa.debug(`Firestore (${uu}): ${n}`,...t)}}function gr(n,...e){if(Aa.logLevel<=ut.ERROR){const t=e.map(qy);Aa.error(`Firestore (${uu}): ${n}`,...t)}}function No(n,...e){if(Aa.logLevel<=ut.WARN){const t=e.map(qy);Aa.warn(`Firestore (${uu}): ${n}`,...t)}}function qy(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Cb(n,r,t)}function Cb(n,e,t){let r=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw gr(r),new Error(r)}function Ve(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Cb(e,i,r)}function Qe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ti{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jn.UNAUTHENTICATED)))}shutdown(){}}class EL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class TL{constructor(e){this.t=e,this.currentUser=jn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ve(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let o=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Di,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},c=h=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Di)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ve(typeof r.accessToken=="string",31837,{l:r}),new xb(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ve(e===null||typeof e=="string",2055,{h:e}),new jn(e)}}class IL{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=jn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class SL{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new IL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bL{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ve(this.o===void 0,3512);const r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const i=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>i(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new zT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=RL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}}function Je(n,e){return n<e?-1:n>e?1:0}function jg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),o=e.charAt(r);if(i!==o)return ug(i)===ug(o)?Je(i,o):ug(i)?1:-1}return Je(n.length,e.length)}const AL=55296,PL=57343;function ug(n){const e=n.charCodeAt(0);return e>=AL&&e<=PL}function Wl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function Db(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="__name__";class Ji{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ji.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ji?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=Ji.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Je(e.length,t.length)}static compareSegments(e,t){const r=Ji.isNumericId(e),i=Ji.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?Ji.extractNumericId(e).compare(Ji.extractNumericId(t)):jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class yt extends Ji{construct(e,t,r){return new yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new yt(t)}static emptyPath(){return new yt([])}}const kL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends Ji{construct(e,t,r){return new Kt(e,t,r)}static isValidIdentifier(e){return kL.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jT}static keyField(){return new Kt([jT])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(o(),i++)}if(o(),l)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(yt.fromString(e))}static fromName(e){return new Ee(yt.fromString(e).popFirst(5))}static empty(){return new Ee(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new yt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(n,e,t){if(!t)throw new ge(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function CL(n,e,t,r){if(e===!0&&r===!0)throw new ge(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function $T(n){if(!Ee.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HT(n){if(Ee.isDocumentKey(n))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ob(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Xf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function yr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xf(n);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(n,e){const t={typeString:n};return e&&(t.value=e),t}function pd(n,e){if(!Ob(n))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&l!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new ge(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=-62135596800,WT=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*WT);return new Rt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qT)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/WT}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pd(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-qT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:pn("string",Rt._jsonSchemaVersion),seconds:pn("number"),nanoseconds:pn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new Rt(0,0))}static max(){return new Ue(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=-1;class Ef{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function $g(n){return n.fields.find((e=>e.kind===2))}function da(n){return n.fields.filter((e=>e.kind!==2))}Ef.UNKNOWN_ID=-1;class Zh{constructor(e,t){this.fieldPath=e,this.kind=t}}class Fc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Fc(0,Zr.min())}}function xL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new Zr(i,Ee.empty(),e)}function Vb(n){return new Zr(n.readTime,n.key,Mc)}class Zr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zr(Ue.min(),Ee.empty(),Mc)}static max(){return new Zr(Ue.max(),Ee.empty(),Mc)}}function Ky(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Mb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ja(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==Lb)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let i=0,o=0,l=!1;e.forEach((c=>{++i,c.next((()=>{++o,l&&o===i&&t()}),(h=>r(h)))})),l=!0,o===i&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((i=>i?j.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,o)=>{r.push(t.call(this,i,o))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,i)=>{const o=e.length,l=new Array(o);let c=0;for(let h=0;h<o;h++){const p=h;t(e[p]).next((y=>{l[p]=y,++c,c===o&&r(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new j(((r,i)=>{const o=()=>{e()===!0?t().next((()=>{o()}),i):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="SimpleDb";class Zf{static open(e,t,r,i){try{return new Zf(t,e.transaction(i,r))}catch(o){throw new Tc(t,o)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Di,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Tc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=Gy(r.target.error);this.S.reject(new Tc(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(Gr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new NL(t)}}class ko{static delete(e){return ce(Gr,"Removing database:",e),fa(SS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!qf())return!1;if(ko.F())return!0;const e=wn(),t=ko.M(e),r=0<t&&t<10,i=Fb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,ko.M(wn())===12.2&&gr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(ce(Gr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const l=o.target.result;t(l)},i.onblocked=()=>{r(new Tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const l=o.target.error;l.name==="VersionError"?r(new ge(ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new ge(ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new Tc(e,l))},i.onupgradeneeded=o=>{ce(Gr,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const l=o.target.result;this.N.k(l,i.transaction,o.oldVersion,this.version).next((()=>{ce(Gr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const o=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=Zf.open(this.db,e,o?"readonly":"readwrite",r),h=i(c).next((p=>(c.C(),p))).catch((p=>(c.abort(p),j.reject(p)))).toPromise();return h.catch((()=>{})),await c.D,h}catch(c){const h=c,p=h.name!=="FirebaseError"&&l<3;if(ce(Gr,"Transaction failed with error:",h.message,"Retrying:",p),this.close(),!p)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Fb(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class DL{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return fa(this.U.delete())}}class Tc extends ge{constructor(e,t){super(ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Bo(n){return n.name==="IndexedDbTransactionError"}class NL{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(Gr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(Gr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fa(r)}add(e){return ce(Gr,"ADD",this.store.name,e,e),fa(this.store.add(e))}get(e){return fa(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(Gr,"GET",this.store.name,e,t),t)))}delete(e){return ce(Gr,"DELETE",this.store.name,e),fa(this.store.delete(e))}count(){return ce(Gr,"COUNT",this.store.name),fa(this.store.count())}H(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new j(((l,c)=>{o.onerror=h=>{c(h.target.error)},o.onsuccess=h=>{l(h.target.result)}}))}{const o=this.cursor(r),l=[];return this.J(o,((c,h)=>{l.push(h)})).next((()=>l))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j(((i,o)=>{r.onerror=l=>{o(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}X(e,t){ce(Gr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.J(i,((o,l,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.J(i,t)}te(e){const t=this.cursor({});return new j(((r,i)=>{t.onerror=o=>{const l=Gy(o.target.error);i(l)},t.onsuccess=o=>{const l=o.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():r()})):r()}}))}J(e,t){const r=[];return new j(((i,o)=>{e.onerror=l=>{o(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const h=new DL(c),p=t(c.primaryKey,c.value,h);if(p instanceof j){const y=p.catch((g=>(h.done(),j.reject(g))));r.push(y)}h.isDone?i():h.G===null?c.continue():c.continue(h.G)}})).next((()=>j.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fa(n){return new j(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=Gy(r.target.error);t(i)}}))}let KT=!1;function Gy(n){const e=ko.M(wn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KT||(KT=!0,setTimeout((()=>{throw r}),0)),r}}return n}const Ic="IndexBackfiller";class OL{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){ce(Ic,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();ce(Ic,`Documents written: ${t}`)}catch(t){Bo(t)?ce(Ic,"Ignoring IndexedDB error during index backfill: ",t):await ja(t)}await this.re(6e4)}))}}class VL{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,o=!0;return j.doWhile((()=>o===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return ce(Ic,`Processing collection: ${l}`),this.oe(e,l,i).next((c=>{i-=c,r.add(l)}));o=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((o=>{const l=o.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,o))).next((c=>(ce(Ic,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,o)=>{const l=Vb(o);Ky(l,r)>0&&(r=l)})),new Zr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}hi.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=-1;function md(n){return n==null}function Uc(n){return n===0&&1/n==-1/0}function LL(n){return typeof n=="number"&&Number.isInteger(n)&&!Uc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="";function ir(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=GT(e)),e=ML(n.get(t),e);return GT(e)}function ML(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case Tf:t+="";break;default:t+=o}}return t}function GT(n){return n+Tf+""}function Xi(n){const e=n.length;if(Ve(e>=2,64408,{path:n}),e===2)return Ve(n.charAt(0)===Tf&&n.charAt(1)==="",56145,{path:n}),yt.emptyPath();const t=e-2,r=[];let i="";for(let o=0;o<e;){const l=n.indexOf(Tf,o);switch((l<0||l>t)&&Ae(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(o,l);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(o,l),i+="\0";break;case"":i+=n.substring(o,l+1);break;default:Ae(61167,{path:n})}o=l+2}return new yt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="remoteDocuments",gd="owner",Tl="owner",Bc="mutationQueues",FL="userId",ki="mutations",QT="batchId",_a="userMutationsIndex",YT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n,e){return[n,ir(e)]}function Ub(n,e,t){return[n,ir(e),t]}const UL={},Kl="documentMutations",If="remoteDocumentsV14",BL=["prefixPath","collectionGroup","readTime","documentId"],tf="documentKeyIndex",zL=["prefixPath","collectionGroup","documentId"],Bb="collectionGroupIndex",jL=["collectionGroup","readTime","prefixPath","documentId"],zc="remoteDocumentGlobal",Hg="remoteDocumentGlobalKey",Gl="targets",zb="queryTargetsIndex",$L=["canonicalId","targetId"],Ql="targetDocuments",HL=["targetId","path"],Qy="documentTargetsIndex",qL=["path","targetId"],Sf="targetGlobalKey",Ta="targetGlobal",jc="collectionParents",WL=["collectionId","parent"],Yl="clientMetadata",KL="clientId",ep="bundles",GL="bundleId",tp="namedQueries",QL="name",Yy="indexConfiguration",YL="indexId",qg="collectionGroupIndex",JL="collectionGroup",Sc="indexState",XL=["indexId","uid"],jb="sequenceNumberIndex",ZL=["uid","sequenceNumber"],bc="indexEntries",eM=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$b="documentKeyIndex",tM=["indexId","uid","orderedDocumentKey"],np="documentOverlays",nM=["userId","collectionPath","documentId"],Wg="collectionPathOverlayIndex",rM=["userId","collectionPath","largestBatchId"],Hb="collectionGroupOverlayIndex",iM=["userId","collectionGroup","largestBatchId"],Jy="globals",sM="name",qb=[Bc,ki,Kl,ha,Gl,gd,Ta,Ql,Yl,zc,jc,ep,tp],oM=[...qb,np],Wb=[Bc,ki,Kl,If,Gl,gd,Ta,Ql,Yl,zc,jc,ep,tp,np],Kb=Wb,Xy=[...Kb,Yy,Sc,bc],aM=Xy,Gb=[...Xy,Jy],lM=Gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends Mb{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Tn(n,e){const t=Qe(n);return ko.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Qb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t){this.comparator=e,this.root=t||$n.EMPTY}insert(e,t){return new $t(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,$n.BLACK,null,null))}remove(e){return new $t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$n.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Oh(this.root,e,this.comparator,!0)}}class Oh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??$n.RED,this.left=i??$n.EMPTY,this.right=o??$n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new $n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return $n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}$n.EMPTY=null,$n.RED=!0,$n.BLACK=!1;$n.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new $n(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new $t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XT(this.data.getIterator())}getIteratorFrom(e){return new XT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Pt(this.comparator);return t.data=e,t}}class XT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Il(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Vr([])}unionWith(e){let t=new Pt(Kt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Yb("Invalid base64 string: "+o):o}})(e);return new gn(t)}static fromUint8Array(e){const t=(function(i){let o="";for(let l=0;l<i.length;++l)o+=String.fromCharCode(i[l]);return o})(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const uM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(n){if(Ve(!!n,39018),typeof n=="string"){let e=0;const t=uM.exec(n);if(Ve(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:zt(n.seconds),nanos:zt(n.nanos)}}function zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bs(n){return typeof n=="string"?gn.fromBase64String(n):gn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="server_timestamp",Xb="__type__",Zb="__previous_value__",eR="__local_write_time__";function Zy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Xb])==null?void 0:r.stringValue)===Jb}function rp(n){const e=n.mapValue.fields[Zb];return Zy(e)?rp(e):e}function $c(n){const e=Us(n.mapValue.fields[eR].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t,r,i,o,l,c,h,p,y,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=g}}const bf="(default)";class Pa{constructor(e,t){this.projectId=e,this.database=t||bf}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===bf}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}function dM(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="__type__",tR="__max__",Ro={mapValue:{fields:{__type__:{stringValue:tR}}}},tv="__vector__",Jl="value",nf={nullValue:"NULL_VALUE"};function Oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Zy(n)?4:nR(n)?9007199254740991:ip(n)?10:11:Ae(28295,{value:n})}function os(n,e){if(n===e)return!0;const t=Oo(n);if(t!==Oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $c(n).isEqual($c(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const l=Us(i.timestampValue),c=Us(o.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Bs(i.bytesValue).isEqual(Bs(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return zt(i.geoPointValue.latitude)===zt(o.geoPointValue.latitude)&&zt(i.geoPointValue.longitude)===zt(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return zt(i.integerValue)===zt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const l=zt(i.doubleValue),c=zt(o.doubleValue);return l===c?Uc(l)===Uc(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Wl(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:case 11:return(function(i,o){const l=i.mapValue.fields||{},c=o.mapValue.fields||{};if(JT(l)!==JT(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!os(l[h],c[h])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Hc(n,e){return(n.values||[]).find((t=>os(t,e)))!==void 0}function Vo(n,e){if(n===e)return 0;const t=Oo(n),r=Oo(e);if(t!==r)return Je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(o,l){const c=zt(o.integerValue||o.doubleValue),h=zt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return ZT(n.timestampValue,e.timestampValue);case 4:return ZT($c(n),$c(e));case 5:return jg(n.stringValue,e.stringValue);case 6:return(function(o,l){const c=Bs(o),h=Bs(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(o,l){const c=o.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Je(c[p],h[p]);if(y!==0)return y}return Je(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,l){const c=Je(zt(o.latitude),zt(l.latitude));return c!==0?c:Je(zt(o.longitude),zt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return e0(n.arrayValue,e.arrayValue);case 10:return(function(o,l){var w,b,k,L;const c=o.fields||{},h=l.fields||{},p=(w=c[Jl])==null?void 0:w.arrayValue,y=(b=h[Jl])==null?void 0:b.arrayValue,g=Je(((k=p==null?void 0:p.values)==null?void 0:k.length)||0,((L=y==null?void 0:y.values)==null?void 0:L.length)||0);return g!==0?g:e0(p,y)})(n.mapValue,e.mapValue);case 11:return(function(o,l){if(o===Ro.mapValue&&l===Ro.mapValue)return 0;if(o===Ro.mapValue)return 1;if(l===Ro.mapValue)return-1;const c=o.fields||{},h=Object.keys(c),p=l.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let g=0;g<h.length&&g<y.length;++g){const w=jg(h[g],y[g]);if(w!==0)return w;const b=Vo(c[h[g]],p[y[g]]);if(b!==0)return b}return Je(h.length,y.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function ZT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Us(n),r=Us(e),i=Je(t.seconds,r.seconds);return i!==0?i:Je(t.nanos,r.nanos)}function e0(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=Vo(t[i],r[i]);if(o)return o}return Je(t.length,r.length)}function Xl(n){return Gg(n)}function Gg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Us(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=Gg(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const l of r)o?o=!1:i+=",",i+=`${l}:${Gg(t.fields[l])}`;return i+"}"})(n.mapValue):Ae(61005,{value:n})}function rf(n){switch(Oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rp(n);return e?16+rf(e):16;case 5:return 2*n.stringValue.length;case 6:return Bs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,o)=>i+rf(o)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return zo(r.fields,((o,l)=>{i+=o.length+rf(l)})),i})(n.mapValue);default:throw Ae(13486,{value:n})}}function qc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qg(n){return!!n&&"integerValue"in n}function Wc(n){return!!n&&"arrayValue"in n}function t0(n){return!!n&&"nullValue"in n}function n0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sf(n){return!!n&&"mapValue"in n}function ip(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[ev])==null?void 0:r.stringValue)===tv}function Rc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Rc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return{...n}}function nR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===tR}const rR={mapValue:{fields:{[ev]:{stringValue:tv},[Jl]:{arrayValue:{}}}}};function hM(n){return"nullValue"in n?nf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?qc(Pa.empty(),Ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?ip(n)?rR:{mapValue:{}}:Ae(35942,{value:n})}function fM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?qc(Pa.empty(),Ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?rR:"mapValue"in n?ip(n)?{mapValue:{}}:Ro:Ae(61959,{value:n})}function r0(n,e){const t=Vo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function i0(n,e){const t=Vo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.value=e}static empty(){return new Hn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=Kt.emptyPath(),r={},i=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=Rc(l):i.push(c.lastSegment())}));const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());sf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sf(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){zo(t,((i,o)=>e[i]=o));for(const i of r)delete e[i]}clone(){return new Hn(Rc(this.value))}}function iR(n){const e=[];return zo(n.fields,((t,r)=>{const i=new Kt([t]);if(sf(r)){const o=iR(r.mapValue).fields;if(o.length===0)e.push(i);else for(const l of o)e.push(i.child(l))}else e.push(i)})),new Vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,t,r,i,o,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=l,this.documentState=c}static newInvalidDocument(e){return new jt(e,0,Ue.min(),Ue.min(),Ue.min(),Hn.empty(),0)}static newFoundDocument(e,t,r,i){return new jt(e,1,t,Ue.min(),r,i,0)}static newNoDocument(e,t){return new jt(e,2,t,Ue.min(),Ue.min(),Hn.empty(),0)}static newUnknownDocument(e,t){return new jt(e,3,t,Ue.min(),Ue.min(),Hn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,t){this.position=e,this.inclusive=t}}function s0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],l=n.position[i];if(o.field.isKeyField()?r=Ee.comparator(Ee.fromName(l.referenceValue),t.key):r=Vo(l,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function o0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t="asc"){this.field=e,this.dir=t}}function pM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{}class ct extends sR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new mM(e,t,r):t==="array-contains"?new vM(e,r):t==="in"?new dR(e,r):t==="not-in"?new _M(e,r):t==="array-contains-any"?new wM(e,r):new ct(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gM(e,r):new yM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Vo(t,this.value)):t!==null&&Oo(this.value)===Oo(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class At extends sR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new At(e,t)}matches(e){return eu(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function eu(n){return n.op==="and"}function Yg(n){return n.op==="or"}function nv(n){return oR(n)&&eu(n)}function oR(n){for(const e of n.filters)if(e instanceof At)return!1;return!0}function Jg(n){if(n instanceof ct)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(nv(n))return n.filters.map((e=>Jg(e))).join(",");{const e=n.filters.map((t=>Jg(t))).join(",");return`${n.op}(${e})`}}function aR(n,e){return n instanceof ct?(function(r,i){return i instanceof ct&&r.op===i.op&&r.field.isEqual(i.field)&&os(r.value,i.value)})(n,e):n instanceof At?(function(r,i){return i instanceof At&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((o,l,c)=>o&&aR(l,i.filters[c])),!0):!1})(n,e):void Ae(19439)}function lR(n,e){const t=n.filters.concat(e);return At.create(t,n.op)}function uR(n){return n instanceof ct?(function(t){return`${t.field.canonicalString()} ${t.op} ${Xl(t.value)}`})(n):n instanceof At?(function(t){return t.op.toString()+" {"+t.getFilters().map(uR).join(" ,")+"}"})(n):"Filter"}class mM extends ct{constructor(e,t,r){super(e,t,r),this.key=Ee.fromName(r.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class gM extends ct{constructor(e,t){super(e,"in",t),this.keys=cR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yM extends ct{constructor(e,t){super(e,"not-in",t),this.keys=cR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function cR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Ee.fromName(r.referenceValue)))}class vM extends ct{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wc(t)&&Hc(t.arrayValue,this.value)}}class dR extends ct{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Hc(this.value.arrayValue,t)}}class _M extends ct{constructor(e,t){super(e,"not-in",t)}matches(e){if(Hc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Hc(this.value.arrayValue,t)}}class wM extends ct{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Hc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(e,t=null,r=[],i=[],o=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=l,this.endAt=c,this.Te=null}}function Xg(n,e=null,t=[],r=[],i=null,o=null,l=null){return new EM(n,e,t,r,i,o,l)}function ka(n){const e=Qe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Jg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Xl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Xl(r))).join(",")),e.Te=t}return e.Te}function yd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!pM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!aR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!o0(n.startAt,e.startAt)&&o0(n.endAt,e.endAt)}function Rf(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Af(n,e){return n.filters.filter((t=>t instanceof ct&&t.field.isEqual(e)))}function a0(n,e,t){let r=nf,i=!0;for(const o of Af(n,e)){let l=nf,c=!0;switch(o.op){case"<":case"<=":l=hM(o.value);break;case"==":case"in":case">=":l=o.value;break;case">":l=o.value,c=!1;break;case"!=":case"not-in":l=nf}r0({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];r0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function l0(n,e,t){let r=Ro,i=!0;for(const o of Af(n,e)){let l=Ro,c=!0;switch(o.op){case">=":case">":l=fM(o.value),c=!1;break;case"==":case"in":case"<=":l=o.value;break;case"<":l=o.value,c=!1;break;case"!=":case"not-in":l=Ro}i0({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){const l=t.position[o];i0({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,t=null,r=[],i=[],o=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function TM(n,e,t,r,i,o,l,c){return new cu(n,e,t,r,i,o,l,c)}function vd(n){return new cu(n)}function u0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function IM(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function hR(n){return n.collectionGroup!==null}function Ac(n){const e=Qe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Pt(Kt.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Kc(o,r))})),t.has(Kt.keyField().canonicalString())||e.Ie.push(new Kc(Kt.keyField(),r))}return e.Ie}function fi(n){const e=Qe(n);return e.Ee||(e.Ee=SM(e,Ac(n))),e.Ee}function SM(n,e){if(n.limitType==="F")return Xg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const o=i.dir==="desc"?"asc":"desc";return new Kc(i.field,o)}));const t=n.endAt?new Zl(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Zl(n.startAt.position,n.startAt.inclusive):null;return Xg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Zg(n,e){const t=n.filters.concat([e]);return new cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function bM(n,e){const t=n.explicitOrderBy.concat([e]);return new cu(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Pf(n,e,t){return new cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sp(n,e){return yd(fi(n),fi(e))&&n.limitType===e.limitType}function fR(n){return`${ka(fi(n))}|lt:${n.limitType}`}function xl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>uR(i))).join(", ")}]`),md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Xl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Xl(i))).join(",")),`Target(${r})`})(fi(n))}; limitType=${n.limitType})`}function _d(n,e){return e.isFoundDocument()&&(function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ee.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(const o of Ac(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,c,h){const p=s0(l,c,h);return l.inclusive?p<=0:p<0})(r.startAt,Ac(r),i)||r.endAt&&!(function(l,c,h){const p=s0(l,c,h);return l.inclusive?p>=0:p>0})(r.endAt,Ac(r),i))})(n,e)}function RM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function pR(n){return(e,t)=>{let r=!1;for(const i of Ac(n)){const o=AM(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function AM(n,e,t){const r=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(o,l,c){const h=l.data.field(o),p=c.data.field(o);return h!==null&&p!==null?Vo(h,p):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,((t,r)=>{for(const[i,o]of r)e(i,o)}))}isEmpty(){return Qb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM=new $t(Ee.comparator);function Yr(){return PM}const mR=new $t(Ee.comparator);function pc(...n){let e=mR;for(const t of n)e=e.insert(t.key,t);return e}function gR(n){let e=mR;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Zi(){return Pc()}function yR(){return Pc()}function Pc(){return new $s((n=>n.toString()),((n,e)=>n.isEqual(e)))}const kM=new $t(Ee.comparator),CM=new Pt(Ee.comparator);function nt(...n){let e=CM;for(const t of n)e=e.add(t);return e}const xM=new Pt(Je);function DM(){return xM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uc(e)?"-0":e}}function vR(n){return{integerValue:""+n}}function NM(n,e){return LL(e)?vR(e):rv(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(){this._=void 0}}function OM(n,e,t){return n instanceof Gc?(function(i,o){const l={fields:{[Xb]:{stringValue:Jb},[eR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Zy(o)&&(o=rp(o)),o&&(l.fields[Zb]=o),{mapValue:l}})(t,e):n instanceof tu?wR(n,e):n instanceof nu?ER(n,e):(function(i,o){const l=_R(i,o),c=c0(l)+c0(i.Ae);return Qg(l)&&Qg(i.Ae)?vR(c):rv(i.serializer,c)})(n,e)}function VM(n,e,t){return n instanceof tu?wR(n,e):n instanceof nu?ER(n,e):t}function _R(n,e){return n instanceof Qc?(function(r){return Qg(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Gc extends op{}class tu extends op{constructor(e){super(),this.elements=e}}function wR(n,e){const t=TR(e);for(const r of n.elements)t.some((i=>os(i,r)))||t.push(r);return{arrayValue:{values:t}}}class nu extends op{constructor(e){super(),this.elements=e}}function ER(n,e){let t=TR(e);for(const r of n.elements)t=t.filter((i=>!os(i,r)));return{arrayValue:{values:t}}}class Qc extends op{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function c0(n){return zt(n.integerValue||n.doubleValue)}function TR(n){return Wc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t){this.field=e,this.transform=t}}function MM(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof tu&&i instanceof tu||r instanceof nu&&i instanceof nu?Wl(r.elements,i.elements,os):r instanceof Qc&&i instanceof Qc?os(r.Ae,i.Ae):r instanceof Gc&&i instanceof Gc})(n.transform,e.transform)}class FM{constructor(e,t){this.version=e,this.transformResults=t}}class fn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function of(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class ap{}function IR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lp(n.key,fn.none()):new du(n.key,n.data,fn.none());{const t=n.data,r=Hn.empty();let i=new Pt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let l=t.field(o);l===null&&o.length>1&&(o=o.popLast(),l=t.field(o)),l===null?r.delete(o):r.set(o,l),i=i.add(o)}return new Hs(n.key,r,new Vr(i.toArray()),fn.none())}}function UM(n,e,t){n instanceof du?(function(i,o,l){const c=i.value.clone(),h=h0(i.fieldTransforms,o,l.transformResults);c.setAll(h),o.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Hs?(function(i,o,l){if(!of(i.precondition,o))return void o.convertToUnknownDocument(l.version);const c=h0(i.fieldTransforms,o,l.transformResults),h=o.data;h.setAll(SR(i)),h.setAll(c),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(i,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function kc(n,e,t,r){return n instanceof du?(function(o,l,c,h){if(!of(o.precondition,l))return c;const p=o.value.clone(),y=f0(o.fieldTransforms,h,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Hs?(function(o,l,c,h){if(!of(o.precondition,l))return c;const p=f0(o.fieldTransforms,h,l),y=l.data;return y.setAll(SR(o)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(o,l,c){return of(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function BM(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=_R(r.transform,i||null);o!=null&&(t===null&&(t=Hn.empty()),t.set(r.field,o))}return t||null}function d0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wl(r,i,((o,l)=>MM(o,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class du extends ap{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hs extends ap{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function SR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function h0(n,e,t){const r=new Map;Ve(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const o=n[i],l=o.transform,c=e.data.field(o.field);r.set(o.field,VM(l,c,t[i]))}return r}function f0(n,e,t){const r=new Map;for(const i of n){const o=i.transform,l=t.data.field(i.field);r.set(i.field,OM(o,l,e))}return r}class lp extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iv extends ap{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&UM(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=kc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=kc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yR();return this.mutations.forEach((i=>{const o=e.get(i.key),l=o.overlayedDocument;let c=this.applyToLocalView(l,o.mutatedFields);c=t.has(i.key)?null:c;const h=IR(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),nt())}isEqual(e){return this.batchId===e.batchId&&Wl(this.mutations,e.mutations,((t,r)=>d0(t,r)))&&Wl(this.baseMutations,e.baseMutations,((t,r)=>d0(t,r)))}}class ov{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ve(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return kM})();const o=e.mutations;for(let l=0;l<o.length;l++)i=i.insert(o[l].key,r[l].version);return new ov(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dn,ht;function bR(n){switch(n){case ee.OK:return Ae(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function RR(n){if(n===void 0)return gr("GRPC error has no .code"),ee.UNKNOWN;switch(n){case dn.OK:return ee.OK;case dn.CANCELLED:return ee.CANCELLED;case dn.UNKNOWN:return ee.UNKNOWN;case dn.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case dn.INTERNAL:return ee.INTERNAL;case dn.UNAVAILABLE:return ee.UNAVAILABLE;case dn.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case dn.NOT_FOUND:return ee.NOT_FOUND;case dn.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case dn.ABORTED:return ee.ABORTED;case dn.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case dn.DATA_LOSS:return ee.DATA_LOSS;default:return Ae(39323,{code:n})}}(ht=dn||(dn={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=new Po([4294967295,4294967295],0);function p0(n){const e=jM().encode(n),t=new Sb;return t.update(e),new Uint8Array(t.digest())}function m0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([t,r],0),new Po([i,o],0)]}class lv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new mc(`Invalid padding: ${t}`);if(r<0)throw new mc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new mc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Po.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Po.fromNumber(r)));return i.compare($M)===1&&(i=new Po([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=p0(e),[r,i]=m0(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new lv(o,i,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=p0(e),[r,i]=m0(t);for(let o=0;o<this.hashCount;o++){const l=this.ye(r,i,o);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class mc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new up(Ue.min(),i,new $t(Je),Yr(),nt())}}class wd{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new wd(r,t,nt(),nt(),nt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}}class AR{constructor(e,t){this.targetId=e,this.Ce=t}}class PR{constructor(e,t,r=gn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class g0{constructor(){this.ve=0,this.Fe=y0(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=nt(),t=nt(),r=nt();return this.Fe.forEach(((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae(38017,{changeType:o})}})),new wd(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=y0()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ve(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class HM{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yr(),this.He=Vh(),this.Je=Vh(),this.Ze=new $t(Je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const o=i.target;if(Rf(o))if(r===0){const l=new Ee(o.path);this.et(t,l,jt.newNoDocument(l,Ue.min()))}else Ve(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let l,c;try{l=Bs(r).toUint8Array()}catch(h){if(h instanceof Yb)return No("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new lv(l,i,o)}catch(h){return No(h instanceof mc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((o=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((o,l)=>{const c=this.ot(l);if(c){if(o.current&&Rf(c.target)){const h=new Ee(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,jt.newNoDocument(h,e))}o.Be&&(t.set(l,o.ke()),o.Ke())}}));let r=nt();this.Je.forEach(((o,l)=>{let c=!0;l.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(o))})),this.je.forEach(((o,l)=>l.setReadTime(e)));const i=new up(e,t,this.Ze,this.je,r);return this.je=Yr(),this.He=Vh(),this.Je=Vh(),this.Ze=new $t(Je),i}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new g0,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Pt(Je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Pt(Je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new g0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vh(){return new $t(Ee.comparator)}function y0(){return new $t(Ee.comparator)}const qM={asc:"ASCENDING",desc:"DESCENDING"},WM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KM={and:"AND",or:"OR"};class GM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ey(n,e){return n.useProto3Json||md(e)?e:{value:e}}function ru(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function QM(n,e){return ru(n,e.toTimestamp())}function Dn(n){return Ve(!!n,49232),Ue.fromTimestamp((function(t){const r=Us(t);return new Rt(r.seconds,r.nanos)})(n))}function uv(n,e){return ty(n,e).canonicalString()}function ty(n,e){const t=(function(i){return new yt(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function CR(n){const e=yt.fromString(n);return Ve(UR(e),10190,{key:e.toString()}),e}function Yc(n,e){return uv(n.databaseId,e.path)}function Vs(n,e){const t=CR(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(NR(t))}function xR(n,e){return uv(n.databaseId,e)}function DR(n){const e=CR(n);return e.length===4?yt.emptyPath():NR(e)}function ny(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function NR(n){return Ve(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function v0(n,e,t){return{name:Yc(n,e),fields:t.value.mapValue.fields}}function YM(n,e,t){const r=Vs(n,e.name),i=Dn(e.updateTime),o=e.createTime?Dn(e.createTime):Ue.min(),l=new Hn({mapValue:{fields:e.fields}}),c=jt.newFoundDocument(r,i,o,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function JM(n,e){return"found"in e?(function(r,i){Ve(!!i.found,43571),i.found.name,i.found.updateTime;const o=Vs(r,i.found.name),l=Dn(i.found.updateTime),c=i.found.createTime?Dn(i.found.createTime):Ue.min(),h=new Hn({mapValue:{fields:i.found.fields}});return jt.newFoundDocument(o,l,c,h)})(n,e):"missing"in e?(function(r,i){Ve(!!i.missing,3894),Ve(!!i.readTime,22933);const o=Vs(r,i.missing),l=Dn(i.readTime);return jt.newNoDocument(o,l)})(n,e):Ae(7234,{result:e})}function XM(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(p,y){return p.useProto3Json?(Ve(y===void 0||typeof y=="string",58123),gn.fromBase64String(y||"")):(Ve(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),gn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const y=p.code===void 0?ee.UNKNOWN:RR(p.code);return new ge(y,p.message||"")})(l);t=new PR(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vs(n,r.document.name),o=Dn(r.document.updateTime),l=r.document.createTime?Dn(r.document.createTime):Ue.min(),c=new Hn({mapValue:{fields:r.document.fields}}),h=jt.newFoundDocument(i,o,l,c),p=r.targetIds||[],y=r.removedTargetIds||[];t=new af(p,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Vs(n,r.document),o=r.readTime?Dn(r.readTime):Ue.min(),l=jt.newNoDocument(i,o),c=r.removedTargetIds||[];t=new af([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Vs(n,r.document),o=r.removedTargetIds||[];t=new af([],o,i,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,l=new zM(i,o),c=r.targetId;t=new AR(c,l)}}return t}function Jc(n,e){let t;if(e instanceof du)t={update:v0(n,e.key,e.value)};else if(e instanceof lp)t={delete:Yc(n,e.key)};else if(e instanceof Hs)t={update:v0(n,e.key,e.data),updateMask:i2(e.fieldMask)};else{if(!(e instanceof iv))return Ae(16599,{dt:e.type});t={verify:Yc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(o,l){const c=l.transform;if(c instanceof Gc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof tu)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof nu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Qc)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ae(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:QM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)})(n,e.precondition)),t}function ry(n,e){const t=e.currentDocument?(function(o){return o.updateTime!==void 0?fn.updateTime(Dn(o.updateTime)):o.exists!==void 0?fn.exists(o.exists):fn.none()})(e.currentDocument):fn.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,c){let h=null;if("setToServerValue"in c)Ve(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),h=new Gc;else if("appendMissingElements"in c){const y=c.appendMissingElements.values||[];h=new tu(y)}else if("removeAllFromArray"in c){const y=c.removeAllFromArray.values||[];h=new nu(y)}else"increment"in c?h=new Qc(l,c.increment):Ae(16584,{proto:c});const p=Kt.fromServerFormat(c.fieldPath);return new LM(p,h)})(n,i))):[];if(e.update){e.update.name;const i=Vs(n,e.update.name),o=new Hn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const p=h.fieldPaths||[];return new Vr(p.map((y=>Kt.fromServerFormat(y))))})(e.updateMask);return new Hs(i,o,l,t,r)}return new du(i,o,t,r)}if(e.delete){const i=Vs(n,e.delete);return new lp(i,t)}if(e.verify){const i=Vs(n,e.verify);return new iv(i,t)}return Ae(1463,{proto:e})}function ZM(n,e){return n&&n.length>0?(Ve(e!==void 0,14353),n.map((t=>(function(i,o){let l=i.updateTime?Dn(i.updateTime):Dn(o);return l.isEqual(Ue.min())&&(l=Dn(o)),new FM(l,i.transformResults||[])})(t,e)))):[]}function OR(n,e){return{documents:[xR(n,e.path)]}}function VR(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=xR(n,i);const o=(function(p){if(p.length!==0)return FR(At.create(p,"and"))})(e.filters);o&&(t.structuredQuery.where=o);const l=(function(p){if(p.length!==0)return p.map((y=>(function(w){return{field:Dl(w.field),direction:t2(w.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=ey(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:i}}function LR(n){let e=DR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ve(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=(function(g){const w=MR(g);return w instanceof At&&nv(w)?w.getFilters():[w]})(t.where));let l=[];t.orderBy&&(l=(function(g){return g.map((w=>(function(k){return new Kc(Nl(k.field),(function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(w)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let w;return w=typeof g=="object"?g.value:g,md(w)?null:w})(t.limit));let h=null;t.startAt&&(h=(function(g){const w=!!g.before,b=g.values||[];return new Zl(b,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(g){const w=!g.before,b=g.values||[];return new Zl(b,w)})(t.endAt)),TM(e,i,l,o,c,"F",h,p)}function e2(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Nl(t.unaryFilter.field);return ct.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(t.unaryFilter.field);return ct.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Nl(t.unaryFilter.field);return ct.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Nl(t.unaryFilter.field);return ct.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ct.create(Nl(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return At.create(t.compositeFilter.filters.map((r=>MR(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function t2(n){return qM[n]}function n2(n){return WM[n]}function r2(n){return KM[n]}function Dl(n){return{fieldPath:n.canonicalString()}}function Nl(n){return Kt.fromServerFormat(n.fieldPath)}function FR(n){return n instanceof ct?(function(t){if(t.op==="=="){if(n0(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NAN"}};if(t0(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(n0(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NAN"}};if(t0(t.value))return{unaryFilter:{field:Dl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(t.field),op:n2(t.op),value:t.value}}})(n):n instanceof At?(function(t){const r=t.getFilters().map((i=>FR(i)));return r.length===1?r[0]:{compositeFilter:{op:r2(t.op),filters:r}}})(n):Ae(54877,{filter:n})}function i2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function UR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function BR(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r,i,o=Ue.min(),l=Ue.min(),c=gn.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Ns(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.yt=e}}function s2(n,e){let t;if(e.document)t=YM(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ee.fromSegments(e.noDocument.path),i=xa(e.noDocument.readTime);t=jt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const r=Ee.fromSegments(e.unknownDocument.path),i=xa(e.unknownDocument.version);t=jt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const o=new Rt(i[0],i[1]);return Ue.fromTimestamp(o)})(e.readTime)),t}function _0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:kf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(o,l){return{name:Yc(o,l.key),fields:l.data.value.mapValue.fields,updateTime:ru(o,l.version.toTimestamp()),createTime:ru(o,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ca(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:Ca(e.version)}}return r}function kf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ca(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function xa(n){const e=new Rt(n.seconds,n.nanoseconds);return Ue.fromTimestamp(e)}function pa(n,e){const t=(e.baseMutations||[]).map((o=>ry(n.yt,o)));for(let o=0;o<e.mutations.length-1;++o){const l=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const c=e.mutations[o+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map((o=>ry(n.yt,o))),i=Rt.fromMillis(e.localWriteTimeMs);return new sv(e.batchId,i,t,r)}function gc(n){const e=xa(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?xa(n.lastLimboFreeSnapshotVersion):Ue.min();let r;return r=(function(o){return o.documents!==void 0})(n.query)?(function(o){const l=o.documents.length;return Ve(l===1,1966,{count:l}),fi(vd(DR(o.documents[0])))})(n.query):(function(o){return fi(LR(o))})(n.query),new Ns(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,gn.fromBase64String(n.resumeToken))}function jR(n,e){const t=Ca(e.snapshotVersion),r=Ca(e.lastLimboFreeSnapshotVersion);let i;i=Rf(e.target)?OR(n.yt,e.target):VR(n.yt,e.target).ft;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ka(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $R(n){const e=LR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Pf(e,e.limit,"L"):e}function cg(n,e){return new av(e.largestBatchId,ry(n.yt,e.overlayMutation))}function w0(n,e){const t=e.path.lastSegment();return[n,ir(e.path.popLast()),t]}function E0(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Ca(r.readTime),documentKey:ir(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{getBundleMetadata(e,t){return T0(e).get(t).next((r=>{if(r)return(function(o){return{id:o.bundleId,createTime:xa(o.createTime),version:o.version}})(r)}))}saveBundleMetadata(e,t){return T0(e).put((function(i){return{bundleId:i.id,createTime:Ca(Dn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return I0(e).get(t).next((r=>{if(r)return(function(o){return{name:o.name,query:$R(o.bundledQuery),readTime:xa(o.readTime)}})(r)}))}saveNamedQuery(e,t){return I0(e).put((function(i){return{name:i.name,readTime:Ca(Dn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function T0(n){return Tn(n,ep)}function I0(n){return Tn(n,tp)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new cp(e,r)}getOverlay(e,t){return tc(e).get(w0(this.userId,t)).next((r=>r?cg(this.serializer,r):null))}getOverlays(e,t){const r=Zi();return j.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((o,l)=>{const c=new av(t,l);i.push(this.bt(e,c))})),j.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((l=>i.add(ir(l.getCollectionPath()))));const o=[];return i.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);o.push(tc(e).X(Wg,c))})),j.waitFor(o)}getOverlaysForCollection(e,t,r){const i=Zi(),o=ir(t),l=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return tc(e).H(Wg,l).next((c=>{for(const h of c){const p=cg(this.serializer,h);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const o=Zi();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return tc(e).ee({index:Hb,range:c},((h,p,y)=>{const g=cg(this.serializer,p);o.size()<i||g.largestBatchId===l?(o.set(g.getKey(),g),l=g.largestBatchId):y.done()})).next((()=>o))}bt(e,t){return tc(e).put((function(i,o,l){const[c,h,p]=w0(o,l.mutation.key);return{userId:o,collectionPath:h,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Jc(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function tc(n){return Tn(n,np)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{St(e){return Tn(e,Jy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?gn.fromUint8Array(r):gn.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(zt(e.integerValue));else if("doubleValue"in e){const r=zt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Uc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Us(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Bs(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?nR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ip(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var l,c;const r=e.fields||{};this.Ft(t,53);const i=Jl,o=((c=(l=r[i].arrayValue)==null?void 0:l.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(zt(o)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Ee.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ma.Wt=new ma;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=255;function l2(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function S0(n){const e=64-(function(r){let i=0;for(let o=0;o<8;++o){const l=l2(255&r[o]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class u2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=t.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const t=this.en(e),r=S0(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=S0(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Sl),this.sn(255)}_n(){this.an(Sl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(o){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,o,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Sl?(this.sn(Sl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Sl?(this.an(Sl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class c2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class d2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class nc{constructor(){this.cn=new u2,this.ascending=new c2(this.cn),this.descending=new d2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,t,r,i){this.hn=e,this.Pn=t,this.Tn=r,this.In=i}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new ga(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:lf(this.Tn),directionalValue:lf(this.In),orderedDocumentKey:lf(t),documentKey:r.path.toArray()}}An(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function po(n,e){let t=n.hn-e.hn;return t!==0?t:(t=b0(n.Tn,e.Tn),t!==0?t:(t=b0(n.In,e.In),t!==0?t:Ee.comparator(n.Pn,e.Pn)))}function b0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function lf(n){return DS()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function R0(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class A0{constructor(e){this.Vn=new Pt(((t,r)=>Kt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(Ve(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=$g(e);if(t!==void 0&&!this.pn(t))return!1;const r=da(e);let i=new Set,o=0,l=0;for(;o<r.length&&this.pn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Vn.size>0){const c=this.Vn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[o];if(!this.yn(c,h)||!this.wn(this.dn[l++],h))return!1}++o}for(;o<r.length;++o){const c=r[o];if(l>=this.dn.length||!this.wn(this.dn[l++],c))return!1}return!0}bn(){if(this.fn)return null;let e=new Pt(Kt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Zh(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Zh(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Zh(r.field,r.dir==="asc"?0:1)));return new Ef(Ef.UNKNOWN_ID,this.collectionId,t,Fc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(n){var t,r;if(Ve(n instanceof ct||n instanceof At,20012),n instanceof ct){if(n instanceof dR){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((o=>ct.create(n.field,"==",o))))||[];return At.create(i,"or")}return n}const e=n.filters.map((i=>HR(i)));return At.create(e,n.op)}function h2(n){if(n.getFilters().length===0)return[];const e=oy(HR(n));return Ve(qR(e),7391),iy(e)||sy(e)?[e]:e.getFilters()}function iy(n){return n instanceof ct}function sy(n){return n instanceof At&&nv(n)}function qR(n){return iy(n)||sy(n)||(function(t){if(t instanceof At&&Yg(t)){for(const r of t.getFilters())if(!iy(r)&&!sy(r))return!1;return!0}return!1})(n)}function oy(n){if(Ve(n instanceof ct||n instanceof At,34018),n instanceof ct)return n;if(n.filters.length===1)return oy(n.filters[0]);const e=n.filters.map((r=>oy(r)));let t=At.create(e,n.op);return t=Cf(t),qR(t)?t:(Ve(t instanceof At,64498),Ve(eu(t),40251),Ve(t.filters.length>1,57927),t.filters.reduce(((r,i)=>cv(r,i))))}function cv(n,e){let t;return Ve(n instanceof ct||n instanceof At,38388),Ve(e instanceof ct||e instanceof At,25473),t=n instanceof ct?e instanceof ct?(function(i,o){return At.create([i,o],"and")})(n,e):P0(n,e):e instanceof ct?P0(e,n):(function(i,o){if(Ve(i.filters.length>0&&o.filters.length>0,48005),eu(i)&&eu(o))return lR(i,o.getFilters());const l=Yg(i)?i:o,c=Yg(i)?o:i,h=l.filters.map((p=>cv(p,c)));return At.create(h,"or")})(n,e),Cf(t)}function P0(n,e){if(eu(e))return lR(e,n.getFilters());{const t=e.filters.map((r=>cv(n,r)));return At.create(t,"or")}}function Cf(n){if(Ve(n instanceof ct||n instanceof At,11850),n instanceof ct)return n;const e=n.getFilters();if(e.length===1)return Cf(e[0]);if(oR(n))return n;const t=e.map((i=>Cf(i))),r=[];return t.forEach((i=>{i instanceof ct?r.push(i):i instanceof At&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:At.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.Sn=new dv}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(Zr.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class dv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pt(yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="IndexedDbIndexManager",Lh=new Uint8Array(0);class p2{constructor(e,t){this.databaseId=t,this.Dn=new dv,this.Cn=new $s((r=>ka(r)),((r,i)=>yd(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const o={collectionId:r,parent:ir(i)};return C0(e).put(o)}return j.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Db(t),""],!1,!0);return C0(e).H(i).next((o=>{for(const l of o){if(l.collectionId!==t)break;r.push(Xi(l.parent))}return r}))}addFieldIndex(e,t){const r=rc(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const o=r.add(i);if(t.indexState){const l=Rl(e);return o.next((c=>{l.put(E0(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return o.next()}deleteFieldIndex(e,t){const r=rc(e),i=Rl(e),o=bl(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=rc(e),r=bl(e),i=Rl(e);return t.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,t){return j.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const o=new A0(r).bn();if(o!=null)return this.addFieldIndex(e,o)}}))))}getDocumentsMatchingTarget(e,t){const r=bl(e);let i=!0;const o=new Map;return j.forEach(this.vn(t),(l=>this.Fn(e,l).next((c=>{i&&(i=!!c),o.set(l,c)})))).next((()=>{if(i){let l=nt();const c=[];return j.forEach(o,((h,p)=>{ce(k0,`Using index ${(function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map((oe=>`${oe.fieldPath}:${oe.kind}`)).join(",")}`})(h)} to execute ${ka(t)}`);const y=(function(Z,oe){const ie=$g(oe);if(ie===void 0)return null;for(const ue of Af(Z,ie.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null})(p,h),g=(function(Z,oe){const ie=new Map;for(const ue of da(oe))for(const I of Af(Z,ue.fieldPath))switch(I.op){case"==":case"in":ie.set(ue.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return ie.set(ue.fieldPath.canonicalString(),I.value),Array.from(ie.values())}return null})(p,h),w=(function(Z,oe){const ie=[];let ue=!0;for(const I of da(oe)){const S=I.kind===0?a0(Z,I.fieldPath,Z.startAt):l0(Z,I.fieldPath,Z.startAt);ie.push(S.value),ue&&(ue=S.inclusive)}return new Zl(ie,ue)})(p,h),b=(function(Z,oe){const ie=[];let ue=!0;for(const I of da(oe)){const S=I.kind===0?l0(Z,I.fieldPath,Z.endAt):a0(Z,I.fieldPath,Z.endAt);ie.push(S.value),ue&&(ue=S.inclusive)}return new Zl(ie,ue)})(p,h),k=this.Mn(h,p,w),L=this.Mn(h,p,b),D=this.xn(h,p,g),X=this.On(h.indexId,y,k,w.inclusive,L,b.inclusive,D);return j.forEach(X,(K=>r.Z(K,t.limit).next((Z=>{Z.forEach((oe=>{const ie=Ee.fromSegments(oe.documentKey);l.has(ie)||(l=l.add(ie),c.push(ie))}))}))))})).next((()=>c))}return j.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=h2(At.create(e.filters,"and")).map((r=>Xg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,i,o,l,c){const h=(t!=null?t.length:1)*Math.max(r.length,o.length),p=h/(t!=null?t.length:1),y=[];for(let g=0;g<h;++g){const w=t?this.Nn(t[g/p]):Lh,b=this.Bn(e,w,r[g%p],i),k=this.Ln(e,w,o[g%p],l),L=c.map((D=>this.Bn(e,w,D,!0)));y.push(...this.createRange(b,k,L))}return y}Bn(e,t,r,i){const o=new ga(e,Ee.empty(),t,r);return i?o:o.En()}Ln(e,t,r,i){const o=new ga(e,Ee.empty(),t,r);return i?o.En():o}Fn(e,t){const r=new A0(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((o=>{let l=null;for(const c of o)r.gn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let r=2;const i=this.vn(t);return j.forEach(i,(o=>this.Fn(e,o).next((l=>{l?r!==0&&l.fields.length<(function(h){let p=new Pt(Kt.comparator),y=!1;for(const g of h.filters)for(const w of g.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?y=!0:p=p.add(w.field));for(const g of h.orderBy)g.field.isKeyField()||(p=p.add(g.field));return p.size+(y?1:0)})(o)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&r===2?1:r))}kn(e,t){const r=new nc;for(const i of da(e)){const o=t.data.field(i.fieldPath);if(o==null)return null;const l=r.ln(i.kind);ma.Wt.Dt(o,l)}return r.un()}Nn(e){const t=new nc;return ma.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new nc;return ma.Wt.Dt(qc(this.databaseId,t),r.ln((function(o){const l=da(o);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let i=[];i.push(new nc);let o=0;for(const l of da(e)){const c=r[o++];for(const h of i)if(this.qn(t,l.fieldPath)&&Wc(c))i=this.Un(i,l,c);else{const p=h.ln(l.kind);ma.Wt.Dt(c,p)}}return this.$n(i)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const i=[...e],o=[];for(const l of r.arrayValue.values||[])for(const c of i){const h=new nc;h.seed(c.un()),ma.Wt.Dt(l,h.ln(t.kind)),o.push(h)}return o}qn(e,t){return!!e.filters.find((r=>r instanceof ct&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=rc(e),i=Rl(e);return(t?r.H(qg,IDBKeyRange.bound(t,t)):r.H()).next((o=>{const l=[];return j.forEach(o,(c=>i.get([c.indexId,this.uid]).next((h=>{l.push((function(y,g){const w=g?new Fc(g.sequenceNumber,new Zr(xa(g.readTime),new Ee(Xi(g.documentKey)),g.largestBatchId)):Fc.empty(),b=y.fields.map((([k,L])=>new Zh(Kt.fromServerFormat(k),L)));return new Ef(y.indexId,y.collectionGroup,b,w)})(c,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Je(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=rc(e),o=Rl(e);return this.Wn(e).next((l=>i.H(qg,IDBKeyRange.bound(t,t)).next((c=>j.forEach(c,(h=>o.put(E0(h.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,((i,o)=>{const l=r.get(i.collectionGroup);return(l?j.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),j.forEach(c,(h=>this.Qn(e,i,h).next((p=>{const y=this.Gn(o,h);return p.isEqual(y)?j.resolve():this.zn(e,o,h,p,y)})))))))}))}jn(e,t,r,i){return bl(e).put(i.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,i){return bl(e).delete(i.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const i=bl(e);let o=new Pt(po);return i.ee({index:$b,range:IDBKeyRange.only([r.indexId,this.uid,lf(this.Kn(r,t))])},((l,c)=>{o=o.add(new ga(r.indexId,t,R0(c.arrayValue),R0(c.directionalValue)))})).next((()=>o))}Gn(e,t){let r=new Pt(po);const i=this.kn(t,e);if(i==null)return r;const o=$g(t);if(o!=null){const l=e.data.field(o.fieldPath);if(Wc(l))for(const c of l.arrayValue.values||[])r=r.add(new ga(t.indexId,e.key,this.Nn(c),i))}else r=r.add(new ga(t.indexId,e.key,Lh,i));return r}zn(e,t,r,i,o){ce(k0,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,p,y,g,w){const b=h.getIterator(),k=p.getIterator();let L=Il(b),D=Il(k);for(;L||D;){let X=!1,K=!1;if(L&&D){const Z=y(L,D);Z<0?K=!0:Z>0&&(X=!0)}else L!=null?K=!0:X=!0;X?(g(D),D=Il(k)):K?(w(L),L=Il(b)):(L=Il(b),D=Il(k))}})(i,o,po,(c=>{l.push(this.jn(e,t,r,c))}),(c=>{l.push(this.Hn(e,t,r,c))})),j.waitFor(l)}Wn(e){let t=1;return Rl(e).ee({index:jb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,o)=>{o.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,c)=>po(l,c))).filter(((l,c,h)=>!c||po(l,h[c-1])!==0));const i=[];i.push(e);for(const l of r){const c=po(l,e),h=po(l,t);if(c===0)i[0]=e.En();else if(c>0&&h<0)i.push(l),i.push(l.En());else if(h>0)break}i.push(t);const o=[];for(let l=0;l<i.length;l+=2){if(this.Jn(i[l],i[l+1]))return[];const c=i[l].An(this.uid,Lh,Ee.empty()),h=i[l+1].An(this.uid,Lh,Ee.empty());o.push(IDBKeyRange.bound(c,h))}return o}Jn(e,t){return po(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(x0)}getMinOffset(e,t){return j.mapArray(this.vn(t),(r=>this.Fn(e,r).next((i=>i||Ae(44426))))).next(x0)}}function C0(n){return Tn(n,jc)}function bl(n){return Tn(n,bc)}function rc(n){return Tn(n,Yy)}function Rl(n){return Tn(n,Sc)}function x0(n){Ve(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;Ky(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Zr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WR=41943040;class nr{static withCacheSize(e){return new nr(e,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(n,e,t){const r=n.store(ki),i=n.store(Kl),o=[],l=IDBKeyRange.only(t.batchId);let c=0;const h=r.ee({range:l},((y,g,w)=>(c++,w.delete())));o.push(h.next((()=>{Ve(c===1,47070,{batchId:t.batchId})})));const p=[];for(const y of t.mutations){const g=Ub(e,y.key.path,t.batchId);o.push(i.delete(g)),p.push(y.key)}return j.waitFor(o).next((()=>p))}function xf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ae(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.DEFAULT_COLLECTION_PERCENTILE=10,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nr.DEFAULT=new nr(WR,nr.DEFAULT_COLLECTION_PERCENTILE,nr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nr.DISABLED=new nr(-1,0,0);class dp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,t,r,i){Ve(e.uid!=="",64387);const o=e.isAuthenticated()?e.uid:"";return new dp(o,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mo(e).ee({index:_a,range:r},((i,o,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const o=Ol(e),l=mo(e);return l.add({}).next((c=>{Ve(typeof c=="number",49019);const h=new sv(c,t,r,i),p=(function(b,k,L){const D=L.baseMutations.map((K=>Jc(b.yt,K))),X=L.mutations.map((K=>Jc(b.yt,K)));return{userId:k,batchId:L.batchId,localWriteTimeMs:L.localWriteTime.toMillis(),baseMutations:D,mutations:X}})(this.serializer,this.userId,h),y=[];let g=new Pt(((w,b)=>Je(w.canonicalString(),b.canonicalString())));for(const w of i){const b=Ub(this.userId,w.key.path,c);g=g.add(w.key.path.popLast()),y.push(l.put(p)),y.push(o.put(b,UL))}return g.forEach((w=>{y.push(this.indexManager.addToCollectionParentIndex(e,w))})),e.addOnCommittedListener((()=>{this.Zn[c]=h.keys()})),j.waitFor(y).next((()=>h))}))}lookupMutationBatch(e,t){return mo(e).get(t).next((r=>r?(Ve(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),pa(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?j.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Zn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return mo(e).ee({index:_a,range:i},((l,c,h)=>{c.userId===this.userId&&(Ve(c.batchId>=r,47524,{Yn:r}),o=pa(this.serializer,c)),h.done()})).next((()=>o))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ea;return mo(e).ee({index:_a,range:t,reverse:!0},((i,o,l)=>{r=o.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ea],[this.userId,Number.POSITIVE_INFINITY]);return mo(e).H(_a,t).next((r=>r.map((i=>pa(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ef(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ol(e).ee({range:i},((l,c,h)=>{const[p,y,g]=l,w=Xi(y);if(p===this.userId&&t.path.isEqual(w))return mo(e).get(g).next((b=>{if(!b)throw Ae(61480,{er:l,batchId:g});Ve(b.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:b.userId,batchId:g}),o.push(pa(this.serializer,b))}));h.done()})).next((()=>o))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Je);const i=[];return t.forEach((o=>{const l=ef(this.userId,o.path),c=IDBKeyRange.lowerBound(l),h=Ol(e).ee({range:c},((p,y,g)=>{const[w,b,k]=p,L=Xi(b);w===this.userId&&o.path.isEqual(L)?r=r.add(k):g.done()}));i.push(h)})),j.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,o=ef(this.userId,r),l=IDBKeyRange.lowerBound(o);let c=new Pt(Je);return Ol(e).ee({range:l},((h,p,y)=>{const[g,w,b]=h,k=Xi(w);g===this.userId&&r.isPrefixOf(k)?k.length===i&&(c=c.add(b)):y.done()})).next((()=>this.tr(e,c)))}tr(e,t){const r=[],i=[];return t.forEach((o=>{i.push(mo(e).get(o).next((l=>{if(l===null)throw Ae(35274,{batchId:o});Ve(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:o}),r.push(pa(this.serializer,l))})))})),j.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return KR(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),j.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return Ol(e).ee({range:r},((o,l,c)=>{if(o[0]===this.userId){const h=Xi(o[1]);i.push(h)}else c.done()})).next((()=>{Ve(i.length===0,56720,{rr:i.map((o=>o.canonicalString()))})}))}))}containsKey(e,t){return GR(e,this.userId,t)}ir(e){return QR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ea,lastStreamToken:""}))}}function GR(n,e,t){const r=ef(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r);let l=!1;return Ol(n).ee({range:o,Y:!0},((c,h,p)=>{const[y,g,w]=c;y===e&&g===i&&(l=!0),p.done()})).next((()=>l))}function mo(n){return Tn(n,ki)}function Ol(n){return Tn(n,Kl)}function QR(n){return Tn(n,Bc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Da(0)}static ar(){return new Da(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new Da(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Ue.fromTimestamp(new Rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.cr(e,i))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Al(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(Ve(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let i=0;const o=[];return Al(e).ee(((l,c)=>{const h=gc(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,o.push(this.removeTargetData(e,h)))})).next((()=>j.waitFor(o))).next((()=>i))}forEachTarget(e,t){return Al(e).ee(((r,i)=>{const o=gc(i);t(o)}))}ur(e){return N0(e).get(Sf).next((t=>(Ve(t!==null,2888),t)))}cr(e,t){return N0(e).put(Sf,t)}lr(e,t){return Al(e).put(jR(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=ka(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return Al(e).ee({range:i,index:zb},((l,c,h)=>{const p=gc(c);yd(t,p.target)&&(o=p,h.done())})).next((()=>o))}addMatchingKeys(e,t,r){const i=[],o=Io(e);return t.forEach((l=>{const c=ir(l.path);i.push(o.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))})),j.waitFor(i)}removeMatchingKeys(e,t,r){const i=Io(e);return j.forEach(t,(o=>{const l=ir(o.path);return j.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,o)])}))}removeMatchingKeysForTargetId(e,t){const r=Io(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Io(e);let o=nt();return i.ee({range:r,Y:!0},((l,c,h)=>{const p=Xi(l[1]),y=new Ee(p);o=o.add(y)})).next((()=>o))}containsKey(e,t){const r=ir(t.path),i=IDBKeyRange.bound([r],[Db(r)],!1,!0);let o=0;return Io(e).ee({index:Qy,Y:!0,range:i},(([l,c],h,p)=>{l!==0&&(o++,p.done())})).next((()=>o>0))}At(e,t){return Al(e).get(t).next((r=>r?gc(r):null))}}function Al(n){return Tn(n,Gl)}function N0(n){return Tn(n,Ta)}function Io(n){return Tn(n,Ql)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0="LruGarbageCollector",g2=1048576;function V0([n,e],[t,r]){const i=Je(n,t);return i===0?Je(e,r):i}class y2{constructor(e){this.Pr=e,this.buffer=new Pt(V0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();V0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class YR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ce(O0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Bo(t)?ce(O0,"Ignoring IndexedDB error during garbage collection: ",t):await ja(t)}await this.Ar(3e5)}))}}class v2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(hi.ce);const r=new y2(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(D0)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),D0):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,o,l,c,h,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(p=Date.now(),Cl()<=ut.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${o} targets in `+(h-c)+`ms
	Removed ${g} documents in `+(p-h)+`ms
Total Duration: ${p-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:g}))))}}function JR(n,e){return new v2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,t){this.db=e,this.garbageCollector=JR(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,i)=>t(i)))}addReference(e,t,r){return Mh(e,r)}removeReference(e,t,r){return Mh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mh(e,t)}wr(e,t){return(function(i,o){let l=!1;return QR(i).te((c=>GR(i,c,o).next((h=>(h&&(l=!0),j.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.yr(e,((l,c)=>{if(c<=t){const h=this.wr(e,l).next((p=>{if(!p)return o++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Ue.min()),Io(e).delete((function(g){return[0,ir(g.path)]})(l)))))}));i.push(h)}})).next((()=>j.waitFor(i))).next((()=>r.apply(e))).next((()=>o))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mh(e,t)}yr(e,t){const r=Io(e);let i,o=hi.ce;return r.ee({index:Qy},(([l,c],{path:h,sequenceNumber:p})=>{l===0?(o!==hi.ce&&t(new Ee(Xi(i)),o),o=p,i=h):o=hi.ce})).next((()=>{o!==hi.ce&&t(new Ee(Xi(i)),o)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mh(n,e){return Io(n).put((function(r,i){return{targetId:0,path:ir(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.changes=new $s((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return aa(e).put(r)}removeEntry(e,t,r){return aa(e).delete((function(o,l){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],kf(l),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=jt.newInvalidDocument(t);return aa(e).ee({index:tf,range:IDBKeyRange.only(ic(t))},((i,o)=>{r=this.Sr(t,o)})).next((()=>r))}Dr(e,t){let r={size:0,document:jt.newInvalidDocument(t)};return aa(e).ee({index:tf,range:IDBKeyRange.only(ic(t))},((i,o)=>{r={document:this.Sr(t,o),size:xf(o)}})).next((()=>r))}getEntries(e,t){let r=Yr();return this.Cr(e,t,((i,o)=>{const l=this.Sr(i,o);r=r.insert(i,l)})).next((()=>r))}vr(e,t){let r=Yr(),i=new $t(Ee.comparator);return this.Cr(e,t,((o,l)=>{const c=this.Sr(o,l);r=r.insert(o,c),i=i.insert(o,xf(l))})).next((()=>({documents:r,Fr:i})))}Cr(e,t,r){if(t.isEmpty())return j.resolve();let i=new Pt(F0);t.forEach((h=>i=i.add(h)));const o=IDBKeyRange.bound(ic(i.first()),ic(i.last())),l=i.getIterator();let c=l.getNext();return aa(e).ee({index:tf,range:o},((h,p,y)=>{const g=Ee.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&F0(c,g)<0;)r(c,null),c=l.getNext();c&&c.isEqual(g)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?y.j(ic(c)):y.done()})).next((()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,o){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),kf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return aa(e).H(IDBKeyRange.bound(c,h,!0)).next((p=>{o==null||o.incrementDocumentReadCount(p.length);let y=Yr();for(const g of p){const w=this.Sr(Ee.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);w.isFoundDocument()&&(_d(t,w)||i.has(w.key))&&(y=y.insert(w.key,w))}return y}))}getAllFromCollectionGroup(e,t,r,i){let o=Yr();const l=M0(t,r),c=M0(t,Zr.max());return aa(e).ee({index:Bb,range:IDBKeyRange.bound(l,c,!0)},((h,p,y)=>{const g=this.Sr(Ee.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);o=o.insert(g.key,g),o.size===i&&y.done()})).next((()=>o))}newChangeBuffer(e){return new E2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return L0(e).get(Hg).next((t=>(Ve(!!t,20021),t)))}br(e,t){return L0(e).put(Hg,t)}Sr(e,t){if(t){const r=s2(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ue.min())))return r}return jt.newInvalidDocument(e)}}function ZR(n){return new w2(n)}class E2 extends XR{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new $s((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Pt(((o,l)=>Je(o.canonicalString(),l.canonicalString())));return this.changes.forEach(((o,l)=>{const c=this.Or.get(o);if(t.push(this.Mr.removeEntry(e,o,c.readTime)),l.isValidDocument()){const h=_0(this.Mr.serializer,l);i=i.add(o.path.popLast());const p=xf(h);r+=p-c.size,t.push(this.Mr.addEntry(e,o,h))}else if(r-=c.size,this.trackRemovals){const h=_0(this.Mr.serializer,l.convertToNoDocument(Ue.min()));t.push(this.Mr.addEntry(e,o,h))}})),i.forEach((o=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,o))})),t.push(this.Mr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:i})=>(i.forEach(((o,l)=>{this.Or.set(o,{size:l,readTime:r.get(o).readTime})})),r)))}}function L0(n){return Tn(n,zc)}function aa(n){return Tn(n,If)}function ic(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function M0(n,e){const t=e.documentKey.path.toArray();return[n,kf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function F0(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=Je(t[o],r[o]),i)return i;return i=Je(t.length,r.length),i||(i=Je(t[t.length-2],r[r.length-2]),i||Je(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&kc(r.mutation,i,Vr.empty(),Rt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,nt()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=nt()){const i=Zi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((o=>{let l=pc();return o.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Zi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,nt())))}populateOverlays(e,t,r){const i=[];return r.forEach((o=>{t.has(o)||i.push(o)})),this.documentOverlayCache.getOverlays(e,i).next((o=>{o.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,i){let o=Yr();const l=Pc(),c=(function(){return Pc()})();return t.forEach(((h,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof Hs)?o=o.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),kc(y.mutation,p,y.mutation.getFieldMask(),Rt.now())):l.set(p.key,Vr.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((p,y)=>l.set(p,y))),t.forEach(((p,y)=>c.set(p,new T2(y,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=Pc();let i=new $t(((l,c)=>l-c)),o=nt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let y=r.get(h)||Vr.empty();y=c.applyToLocalView(p,y),r.set(h,y);const g=(i.get(c.batchId)||nt()).add(h);i=i.insert(c.batchId,g)}))})).next((()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,y=h.value,g=yR();y.forEach((w=>{if(!o.has(w)){const b=IR(t.get(w),r.get(w));b!==null&&g.set(w,b),o=o.add(w)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,g))}return j.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return IM(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):hR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((o=>{const l=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):j.resolve(Zi());let c=Mc,h=o;return l.next((p=>j.forEach(p,((y,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),o.get(y)?j.resolve():this.remoteDocumentCache.getEntry(e,y).next((w=>{h=h.insert(y,w)}))))).next((()=>this.populateOverlays(e,p,o))).next((()=>this.computeViews(e,h,p,nt()))).next((y=>({batchId:c,changes:gR(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((r=>{let i=pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let l=pc();return this.indexManager.getCollectionParents(e,o).next((c=>j.forEach(c,(h=>{const p=(function(g,w){return new cu(w,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((y=>{y.forEach(((g,w)=>{l=l.insert(g,w)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i)))).next((l=>{o.forEach(((h,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,jt.newInvalidDocument(y)))}));let c=pc();return l.forEach(((h,p)=>{const y=o.get(h);y!==void 0&&kc(y.mutation,p,Vr.empty(),Rt.now()),_d(t,p)&&(c=c.insert(h,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Dn(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:$R(i.bundledQuery),readTime:Dn(i.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.overlays=new $t(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Zi();return j.forEach(t,(i=>this.getOverlay(e,i).next((o=>{o!==null&&r.set(i,o)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,o)=>{this.bt(e,t,o)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((o=>this.overlays=this.overlays.remove(o))),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const i=Zi(),o=t.length+1,l=new Ee(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new $t(((p,y)=>p-y));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=o.get(p.largestBatchId);y===null&&(y=Zi(),o=o.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const c=Zi(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,y)=>c.set(p,y))),!(c.size()>=i)););return j.resolve(c)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new av(t,r));let o=this.Lr.get(t);o===void 0&&(o=nt(),this.Lr.set(t,o)),this.Lr.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.kr=new Pt(Cn.Kr),this.qr=new Pt(Cn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Cn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Cn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new Ee(new yt([])),r=new Cn(t,e),i=new Cn(t,e+1),o=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),o.push(l.key)})),o}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new yt([])),r=new Cn(t,e),i=new Cn(t,e+1);let o=nt();return this.qr.forEachInRange([r,i],(l=>{o=o.add(l.key)})),o}containsKey(e){const t=new Cn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Cn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Pt(Cn.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new sv(o,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Jr=this.Jr.add(new Cn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return j.resolve(l)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),o=i<0?0:i;return j.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?Ea:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Cn(t,0),i=new Cn(t,Number.POSITIVE_INFINITY),o=[];return this.Jr.forEachInRange([r,i],(l=>{const c=this.Zr(l.Hr);o.push(c)})),j.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pt(Je);return t.forEach((i=>{const o=new Cn(i,0),l=new Cn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([o,l],(c=>{r=r.add(c.Hr)}))})),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ee.isDocumentKey(o)||(o=o.child(""));const l=new Cn(new Ee(o),0);let c=new Pt(Je);return this.Jr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.Hr)),!0)}),l),j.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){Ve(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,(i=>{const o=new Cn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Cn(t,0),i=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.ti=e,this.docs=(function(){return new $t(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():jt.newInvalidDocument(t))}getEntries(e,t){let r=Yr();return t.forEach((i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():jt.newInvalidDocument(i))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Yr();const l=t.path,c=new Ee(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:y}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||Ky(Vb(y),r)<=0||(i.has(y.key)||_d(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return j.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Ae(9500)}ni(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new P2(this)}getSize(e){return j.resolve(this.size)}}class P2 extends XR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.persistence=e,this.ri=new $s((t=>ka(t)),yd),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new hv,this.targetCount=0,this.oi=Da._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Da(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(l),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),j.waitFor(o).next((()=>i))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach((l=>{o.push(i.markPotentiallyOrphaned(e,l))})),j.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this._i={},this.overlays={},this.ai=new hi(0),this.ui=!1,this.ui=!0,this.ci=new b2,this.referenceDelegate=e(this),this.li=new k2(this),this.indexManager=new f2,this.remoteDocumentCache=(function(i){return new A2(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new zR(t),this.Pi=new I2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new R2(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const i=new C2(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((o=>this.referenceDelegate.Ii(i).next((()=>o)))).toPromise().then((o=>(i.raiseOnCommittedEvent(),o)))}Ei(e,t){return j.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class C2 extends Mb{constructor(e){super(),this.currentSequenceNumber=e}}class hp{constructor(e){this.persistence=e,this.Ri=new hv,this.Ai=null}static Vi(e){return new hp(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((o=>this.di.add(o.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,(r=>{const i=Ee.fromPath(r);return this.mi(e,i).next((o=>{o||t.removeEntry(i,Ue.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Df{constructor(e,t){this.persistence=e,this.fi=new $s((r=>ir(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=JR(this,t)}static Vi(e,t){return new Df(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return j.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((o=>o?j.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(r++,o.removeEntry(l,Ue.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rf(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.serializer=e}k(e,t,r,i){const o=new Zf("createOrUpgrade",t);r<1&&i>=1&&((function(h){h.createObjectStore(gd)})(e),(function(h){h.createObjectStore(Bc,{keyPath:FL}),h.createObjectStore(ki,{keyPath:QT,autoIncrement:!0}).createIndex(_a,YT,{unique:!0}),h.createObjectStore(Kl)})(e),U0(e),(function(h){h.createObjectStore(ha)})(e));let l=j.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore(Ql),h.deleteObjectStore(Gl),h.deleteObjectStore(Ta)})(e),U0(e)),l=l.next((()=>(function(h){const p=h.store(Ta),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ue.min().toTimestamp(),targetCount:0};return p.put(Sf,y)})(o)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(h,p){return p.store(ki).H().next((g=>{h.deleteObjectStore(ki),h.createObjectStore(ki,{keyPath:QT,autoIncrement:!0}).createIndex(_a,YT,{unique:!0});const w=p.store(ki),b=g.map((k=>w.put(k)));return j.waitFor(b)}))})(e,o)))),l=l.next((()=>{(function(h){h.createObjectStore(Yl,{keyPath:KL})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.gi(o)))),r<6&&i>=6&&(l=l.next((()=>((function(h){h.createObjectStore(zc)})(e),this.pi(o))))),r<7&&i>=7&&(l=l.next((()=>this.yi(o)))),r<8&&i>=8&&(l=l.next((()=>this.wi(e,o)))),r<9&&i>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.bi(o)))),r<11&&i>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(ep,{keyPath:GL})})(e),(function(h){h.createObjectStore(tp,{keyPath:QL})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(h){const p=h.createObjectStore(np,{keyPath:nM});p.createIndex(Wg,rM,{unique:!1}),p.createIndex(Hb,iM,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(h){const p=h.createObjectStore(If,{keyPath:BL});p.createIndex(tf,zL),p.createIndex(Bb,jL)})(e))).next((()=>this.Si(e,o))).next((()=>e.deleteObjectStore(ha)))),r<14&&i>=14&&(l=l.next((()=>this.Di(e,o)))),r<15&&i>=15&&(l=l.next((()=>(function(h){h.createObjectStore(Yy,{keyPath:YL,autoIncrement:!0}).createIndex(qg,JL,{unique:!1}),h.createObjectStore(Sc,{keyPath:XL}).createIndex(jb,ZL,{unique:!1}),h.createObjectStore(bc,{keyPath:eM}).createIndex($b,tM,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{t.objectStore(Sc).clear()})).next((()=>{t.objectStore(bc).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(Jy,{keyPath:sM})})(e)}))),r<18&&i>=18&&DS()&&(l=l.next((()=>{t.objectStore(Sc).clear()})).next((()=>{t.objectStore(bc).clear()}))),l}pi(e){let t=0;return e.store(ha).ee(((r,i)=>{t+=xf(i)})).next((()=>{const r={byteSize:t};return e.store(zc).put(Hg,r)}))}gi(e){const t=e.store(Bc),r=e.store(ki);return t.H().next((i=>j.forEach(i,(o=>{const l=IDBKeyRange.bound([o.userId,Ea],[o.userId,o.lastAcknowledgedBatchId]);return r.H(_a,l).next((c=>j.forEach(c,(h=>{Ve(h.userId===o.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const p=pa(this.serializer,h);return KR(e,o.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(Ql),r=e.store(ha);return e.store(Ta).get(Sf).next((i=>{const o=[];return r.ee(((l,c)=>{const h=new yt(l),p=(function(g){return[0,ir(g)]})(h);o.push(t.get(p).next((y=>y?j.resolve():(g=>t.put({targetId:0,path:ir(g),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>j.waitFor(o)))}))}wi(e,t){e.createObjectStore(jc,{keyPath:WL});const r=t.store(jc),i=new dv,o=l=>{if(i.add(l)){const c=l.lastSegment(),h=l.popLast();return r.put({collectionId:c,parent:ir(h)})}};return t.store(ha).ee({Y:!0},((l,c)=>{const h=new yt(l);return o(h.popLast())})).next((()=>t.store(Kl).ee({Y:!0},(([l,c,h],p)=>{const y=Xi(c);return o(y.popLast())}))))}bi(e){const t=e.store(Gl);return t.ee(((r,i)=>{const o=gc(i),l=jR(this.serializer,o);return t.put(l)}))}Si(e,t){const r=t.store(ha),i=[];return r.ee(((o,l)=>{const c=t.store(If),h=(function(g){return g.document?new Ee(yt.fromString(g.document.name).popFirst(5)):g.noDocument?Ee.fromSegments(g.noDocument.path):g.unknownDocument?Ee.fromSegments(g.unknownDocument.path):Ae(36783)})(l).path.toArray(),p={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))})).next((()=>j.waitFor(i)))}Di(e,t){const r=t.store(ki),i=ZR(this.serializer),o=new fv(hp.Vi,this.serializer.yt);return r.H().next((l=>{const c=new Map;return l.forEach((h=>{let p=c.get(h.userId)??nt();pa(this.serializer,h).keys().forEach((y=>p=p.add(y))),c.set(h.userId,p)})),j.forEach(c,((h,p)=>{const y=new jn(p),g=cp.wt(this.serializer,y),w=o.getIndexManager(y),b=dp.wt(y,this.serializer,w,o.referenceDelegate);return new eA(i,b,g,w).recalculateAndSaveOverlaysForDocumentKeys(new Kg(t,hi.ce),h).next()}))}))}}function U0(n){n.createObjectStore(Ql,{keyPath:HL}).createIndex(Qy,qL,{unique:!0}),n.createObjectStore(Gl,{keyPath:"targetId"}).createIndex(zb,$L,{unique:!0}),n.createObjectStore(Ta)}const go="IndexedDbPersistence",dg=18e5,hg=5e3,fg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",D2="main";class pv{constructor(e,t,r,i,o,l,c,h,p,y,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=o,this.window=l,this.document=c,this.Fi=p,this.Mi=y,this.xi=g,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=w=>Promise.resolve(),!pv.v())throw new ge(ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _2(this,i),this.Ki=t+D2,this.serializer=new zR(h),this.qi=new ko(this.Ki,this.xi,new x2(this.serializer)),this.ci=new a2,this.li=new m2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ZR(this.serializer),this.Pi=new o2,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&gr(go,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ee.FAILED_PRECONDITION,fg);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new hi(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Fh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Bo(e))return ce(go,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(go,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return sc(e).get(Tl).next((t=>j.resolve(this.Xi(t))))}Yi(e){return Fh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,dg)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Tn(t,Yl);return r.H().next((i=>{const o=this.ns(i,dg),l=i.filter((c=>o.indexOf(c)===-1));return j.forEach(l,(c=>r.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?j.resolve(!0):sc(e).get(Tl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,hg)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ge(ee.FAILED_PRECONDITION,fg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Fh(e).H().next((r=>this.ns(r,hg).find((i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(o||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(go,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[gd,Yl],(e=>{const t=new Kg(e,hi.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>Fh(e).H().next((t=>this.ns(t,dg).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return dp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new p2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return cp.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){ce(go,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",o=(function(h){return h===18?lM:h===17?Gb:h===16?aM:h===15?Xy:h===14?Kb:h===13?Wb:h===12?oM:h===11?qb:void Ae(60245)})(this.xi);let l;return this.qi.runTransaction(e,i,o,(c=>(l=new Kg(c,this.ai?this.ai.next():hi.ce),t==="readwrite-primary"?this.ji(l).next((h=>!!h||this.Hi(l))).next((h=>{if(!h)throw gr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ge(ee.FAILED_PRECONDITION,Lb);return r(l)})).next((h=>this.Zi(l).next((()=>h)))):this.Ps(l).next((()=>r(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Ps(e){return sc(e).get(Tl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,hg)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(ee.FAILED_PRECONDITION,fg)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sc(e).put(Tl,t)}static v(){return ko.v()}Ji(e){const t=sc(e);return t.get(Tl).next((r=>this.Xi(r)?(ce(go,"Releasing primary lease."),t.delete(Tl)):j.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(gr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;xS()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return ce(go,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return gr(go,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){gr("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sc(n){return Tn(n,gd)}function Fh(n){return Tn(n,Yl)}function N2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=nt(),i=nt();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new mv(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return xS()?8:Fb(wn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.gs(e,t).next((l=>{o.result=l})).next((()=>{if(!o.result)return this.ps(e,t,i,r).next((l=>{o.result=l}))})).next((()=>{if(o.result)return;const l=new O2;return this.ys(e,t,l).next((c=>{if(o.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>o.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(Cl()<=ut.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(Cl()<=ut.DEBUG&&ce("QueryEngine","Query:",xl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Cl()<=ut.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fi(t))):j.resolve())}gs(e,t){if(u0(t))return j.resolve(null);let r=fi(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Pf(t,null,"F"),r=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const l=nt(...o);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.bs(t,c);return this.Ss(t,p,l,h.readTime)?this.gs(e,Pf(t,null,"F")):this.Ds(e,p,t,h)}))))})))))}ps(e,t,r,i){return u0(t)||i.isEqual(Ue.min())?j.resolve(null):this.fs.getDocuments(e,r).next((o=>{const l=this.bs(t,o);return this.Ss(t,l,r,i)?j.resolve(null):(Cl()<=ut.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xl(t)),this.Ds(e,l,t,xL(i,Mc)).next((c=>c)))}))}bs(e,t){let r=new Pt(pR(e));return t.forEach(((i,o)=>{_d(e,o)&&(r=r.add(o))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ys(e,t,r){return Cl()<=ut.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",xl(t)),this.fs.getDocumentsMatchingQuery(e,t,Zr.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((o=>(t.forEach((l=>{o=o.insert(l.key,l)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="LocalStore",V2=3e8;class L2{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new $t(Je),this.Fs=new $s((o=>ka(o)),yd),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function nA(n,e,t,r){return new L2(n,e,t,r)}async function rA(n,e){const t=Qe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((o=>(i=o,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((o=>{const l=[],c=[];let h=nt();for(const p of i){l.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}for(const p of o){c.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(r,h).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function M2(n,e){const t=Qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),o=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,p,y){const g=p.batch,w=g.keys();let b=j.resolve();return w.forEach((k=>{b=b.next((()=>y.getEntry(h,k))).next((L=>{const D=p.docVersions.get(k);Ve(D!==null,48541),L.version.compareTo(D)<0&&(g.applyToRemoteDocument(L,p),L.isValidDocument()&&(L.setReadTime(p.commitVersion),y.addEntry(L)))}))})),b.next((()=>c.mutationQueue.removeMutationBatch(h,g)))})(t,r,e,o).next((()=>o.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=nt();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function iA(n){const e=Qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function F2(n,e){const t=Qe(n),r=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const c=[];e.targetChanges.forEach(((y,g)=>{const w=i.get(g);if(!w)return;c.push(t.li.removeMatchingKeys(o,y.removedDocuments,g).next((()=>t.li.addMatchingKeys(o,y.addedDocuments,g))));let b=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(g)!==null?b=b.withResumeToken(gn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,r)),i=i.insert(g,b),(function(L,D,X){return L.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=V2?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(w,b,y)&&c.push(t.li.updateTargetData(o,b))}));let h=Yr(),p=nt();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,y))})),c.push(U2(o,l,e.documentUpdates).next((y=>{h=y.Bs,p=y.Ls}))),!r.isEqual(Ue.min())){const y=t.li.getLastRemoteSnapshotVersion(o).next((g=>t.li.setTargetsMetadata(o,o.currentSequenceNumber,r)));c.push(y)}return j.waitFor(c).next((()=>l.apply(o))).next((()=>t.localDocuments.getLocalViewOfDocuments(o,h,p))).next((()=>h))})).then((o=>(t.vs=i,o)))}function U2(n,e,t){let r=nt(),i=nt();return t.forEach((o=>r=r.add(o))),e.getEntries(n,r).next((o=>{let l=Yr();return t.forEach(((c,h)=>{const p=o.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Ue.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):ce(gv,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)})),{Bs:l,Ls:i}}))}function B2(n,e){const t=Qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ea),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function z2(n,e){const t=Qe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.li.getTargetData(r,e).next((o=>o?(i=o,j.resolve(i)):t.li.allocateTargetId(r).next((l=>(i=new Ns(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function ay(n,e,t){const r=Qe(n),i=r.vs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Bo(l))throw l;ce(gv,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function B0(n,e,t){const r=Qe(n);let i=Ue.min(),o=nt();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,p,y){const g=Qe(h),w=g.Fs.get(y);return w!==void 0?j.resolve(g.vs.get(w)):g.li.getTargetData(p,y)})(r,l,fi(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{o=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?i:Ue.min(),t?o:nt()))).next((c=>(j2(r,RM(e),c),{documents:c,ks:o})))))}function j2(n,e,t){let r=n.Ms.get(e)||Ue.min();t.forEach(((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),n.Ms.set(e,r)}class z0{constructor(){this.activeTargetIds=DM()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sA{constructor(){this.vo=new z0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new z0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="ConnectivityMonitor";class $0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ce(j0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ce(j0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=null;function ly(){return Uh===null?Uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uh++,"0x"+Uh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="RestConnection",H2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class q2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===bf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){const l=ly(),c=this.Qo(e,t.toUriEncodedString());ce(pg,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,o);const{host:p}=new URL(c),y=us(p);return this.zo(e,c,h,r,y).then((g=>(ce(pg,`Received RPC '${e}' ${l}: `,g),g)),(g=>{throw No(pg,`RPC '${e}' ${l} failed with error: `,g,"url: ",c,"request:",r),g}))}jo(e,t,r,i,o,l){return this.Wo(e,t,r,i,o)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+uu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,o)=>e[o]=i)),r&&r.headers.forEach(((i,o)=>e[o]=i))}Qo(e,t){const r=H2[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="WebChannelConnection",oc=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class zl extends q2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!zl.c_){const e=Pb();oc(e,Ab.STAT_EVENT,(t=>{t.stat===zg.PROXY?ce(er,"STAT_EVENT: detected buffering proxy"):t.stat===zg.NOPROXY&&ce(er,"STAT_EVENT: detected no buffering proxy")})),zl.c_=!0}}zo(e,t,r,i,o){const l=ly();return new Promise(((c,h)=>{const p=new bb;p.setWithCredentials(!0),p.listenOnce(Rb.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Xh.NO_ERROR:const g=p.getResponseJson();ce(er,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),c(g);break;case Xh.TIMEOUT:ce(er,`RPC '${e}' ${l} timed out`),h(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Xh.HTTP_ERROR:const w=p.getStatus();if(ce(er,`RPC '${e}' ${l} failed with status:`,w,"response text:",p.getResponseText()),w>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const k=b==null?void 0:b.error;if(k&&k.status&&k.message){const L=(function(X){const K=X.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(K)>=0?K:ee.UNKNOWN})(k.status);h(new ge(L,k.message))}else h(new ge(ee.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ce(er,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(i);ce(er,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=ly(),o=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=o.join("");ce(er,`Creating RPC '${e}' stream ${i}: ${p}`,c);const y=l.createWebChannel(p,c);this.I_(y);let g=!1,w=!1;const b=new W2({Ho:k=>{w?ce(er,`Not sending because RPC '${e}' stream ${i} is closed:`,k):(g||(ce(er,`Opening RPC '${e}' stream ${i} transport.`),y.open(),g=!0),ce(er,`RPC '${e}' stream ${i} sending:`,k),y.send(k))},Jo:()=>y.close()});return oc(y,fc.EventType.OPEN,(()=>{w||(ce(er,`RPC '${e}' stream ${i} transport opened.`),b.i_())})),oc(y,fc.EventType.CLOSE,(()=>{w||(w=!0,ce(er,`RPC '${e}' stream ${i} transport closed`),b.o_(),this.E_(y))})),oc(y,fc.EventType.ERROR,(k=>{w||(w=!0,No(er,`RPC '${e}' stream ${i} transport errored. Name:`,k.name,"Message:",k.message),b.o_(new ge(ee.UNAVAILABLE,"The operation could not be completed")))})),oc(y,fc.EventType.MESSAGE,(k=>{var L;if(!w){const D=k.data[0];Ve(!!D,16349);const X=D,K=(X==null?void 0:X.error)||((L=X[0])==null?void 0:L.error);if(K){ce(er,`RPC '${e}' stream ${i} received error:`,K);const Z=K.status;let oe=(function(I){const S=dn[I];if(S!==void 0)return RR(S)})(Z),ie=K.message;Z==="NOT_FOUND"&&ie.includes("database")&&ie.includes("does not exist")&&ie.includes(this.databaseId.database)&&No(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),oe===void 0&&(oe=ee.INTERNAL,ie="Unknown error status: "+Z+" with message "+K.message),w=!0,b.o_(new ge(oe,ie)),y.close()}else ce(er,`RPC '${e}' stream ${i} received:`,D),b.__(D)}})),zl.u_(),setTimeout((()=>{b.s_()}),0),b}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return kb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(n){return new zl(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(){return typeof window<"u"?window:null}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(n){return new GM(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zl.c_=!1;class yv{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=o,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="PersistentStream";class oA{constructor(e,t,r,i,o,l,c,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yv(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(gr(t.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(H0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ce(H0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q2 extends oA{constructor(e,t,r,i,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=XM(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Ue.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?Dn(l.readTime):Ue.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=ny(this.serializer),t.addTarget=(function(o,l){let c;const h=l.target;if(c=Rf(h)?{documents:OR(o,h)}:{query:VR(o,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=kR(o,l.resumeToken);const p=ey(o,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ue.min())>0){c.readTime=ru(o,l.snapshotVersion.toTimestamp());const p=ey(o,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=e2(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=ny(this.serializer),t.removeTarget=e,this.K_(t)}}class Y2 extends oA{constructor(e,t,r,i,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=o}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ZM(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=ny(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Jc(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{}class X2 extends J2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,l])=>this.connection.Wo(e,ty(t,r),i,o,l))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ee.UNKNOWN,o.toString())}))}jo(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,ty(t,r),i,l,c,o))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ee.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function Z2(n,e,t,r){return new X2(n,e,t,r)}class eF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class tF{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=o,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{$a(this)&&(ce(Na,"Restarting streams for network reachability change."),await(async function(h){const p=Qe(h);p.Ea.add(4),await Ed(p),p.Va.set("Unknown"),p.Ea.delete(4),await pp(p)})(this))}))})),this.Va=new eF(r,i)}}async function pp(n){if($a(n))for(const e of n.Ra)await e(!0)}async function Ed(n){for(const e of n.Ra)await e(!1)}function aA(n,e){const t=Qe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Ev(t)?wv(t):hu(t).O_()&&_v(t,e))}function vv(n,e){const t=Qe(n),r=hu(t);t.Ia.delete(e),r.O_()&&lA(t,e),t.Ia.size===0&&(r.O_()?r.L_():$a(t)&&t.Va.set("Unknown"))}function _v(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hu(n).Z_(e)}function lA(n,e){n.da.$e(e),hu(n).X_(e)}function wv(n){n.da=new HM({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),hu(n).start(),n.Va.ua()}function Ev(n){return $a(n)&&!hu(n).x_()&&n.Ia.size>0}function $a(n){return Qe(n).Ea.size===0}function uA(n){n.da=void 0}async function nF(n){n.Va.set("Online")}async function rF(n){n.Ia.forEach(((e,t)=>{_v(n,e)}))}async function iF(n,e){uA(n),Ev(n)?(n.Va.ha(e),wv(n)):n.Va.set("Unknown")}async function sF(n,e,t){if(n.Va.set("Online"),e instanceof PR&&e.state===2&&e.cause)try{await(async function(i,o){const l=o.cause;for(const c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.da.removeTarget(c))})(n,e)}catch(r){ce(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Nf(n,r)}else if(e instanceof af?n.da.Xe(e):e instanceof AR?n.da.st(e):n.da.tt(e),!t.isEqual(Ue.min()))try{const r=await iA(n.localStore);t.compareTo(r)>=0&&await(function(o,l){const c=o.da.Tt(l);return c.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=o.Ia.get(p);y&&o.Ia.set(p,y.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,p)=>{const y=o.Ia.get(h);if(!y)return;o.Ia.set(h,y.withResumeToken(gn.EMPTY_BYTE_STRING,y.snapshotVersion)),lA(o,h);const g=new Ns(y.target,h,p,y.sequenceNumber);_v(o,g)})),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){ce(Na,"Failed to raise snapshot:",r),await Nf(n,r)}}async function Nf(n,e,t){if(!Bo(e))throw e;n.Ea.add(1),await Ed(n),n.Va.set("Offline"),t||(t=()=>iA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(Na,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await pp(n)}))}function cA(n,e){return e().catch((t=>Nf(n,t,e)))}async function Td(n){const e=Qe(n),t=Lo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ea;for(;oF(e);)try{const i=await B2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,aF(e,i)}catch(i){await Nf(e,i)}dA(e)&&hA(e)}function oF(n){return $a(n)&&n.Ta.length<10}function aF(n,e){n.Ta.push(e);const t=Lo(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function dA(n){return $a(n)&&!Lo(n).x_()&&n.Ta.length>0}function hA(n){Lo(n).start()}async function lF(n){Lo(n).ra()}async function uF(n){const e=Lo(n);for(const t of n.Ta)e.ea(t.mutations)}async function cF(n,e,t){const r=n.Ta.shift(),i=ov.from(r,e,t);await cA(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Td(n)}async function dF(n,e){e&&Lo(n).Y_&&await(async function(r,i){if((function(l){return bR(l)&&l!==ee.ABORTED})(i.code)){const o=r.Ta.shift();Lo(r).B_(),await cA(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i))),await Td(r)}})(n,e),dA(n)&&hA(n)}async function q0(n,e){const t=Qe(n);t.asyncQueue.verifyOperationInProgress(),ce(Na,"RemoteStore received new credentials");const r=$a(t);t.Ea.add(3),await Ed(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await pp(t)}async function hF(n,e){const t=Qe(n);e?(t.Ea.delete(2),await pp(t)):e||(t.Ea.add(2),await Ed(t),t.Va.set("Unknown"))}function hu(n){return n.ma||(n.ma=(function(t,r,i){const o=Qe(t);return o.sa(),new Q2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:nF.bind(null,n),Yo:rF.bind(null,n),t_:iF.bind(null,n),J_:sF.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Ev(n)?wv(n):n.Va.set("Unknown")):(await n.ma.stop(),uA(n))}))),n.ma}function Lo(n){return n.fa||(n.fa=(function(t,r,i){const o=Qe(t);return o.sa(),new Y2(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:lF.bind(null,n),t_:dF.bind(null,n),ta:uF.bind(null,n),na:cF.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Td(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const l=Date.now()+r,c=new Tv(e,t,l,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iv(n,e){if(gr("AsyncQueue",`${e}: ${n}`),Bo(n))return new ge(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{static emptySet(e){return new jl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ee.comparator(t.key,r.key):(t,r)=>Ee.comparator(t.key,r.key),this.keyedMap=pc(),this.sortedSet=new $t(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new jl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ga=new $t(Ee.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class iu{constructor(e,t,r,i,o,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,o){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new iu(e,t,jl.emptySet(t),l,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class pF{constructor(){this.queries=K0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Qe(t),o=i.queries;i.queries=K0(),o.forEach(((l,c)=>{for(const h of c.ba)h.onError(r)}))})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function K0(){return new $s((n=>fR(n)),sp)}async function Sv(n,e){const t=Qe(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Sa()&&e.Da()&&(r=2):(o=new fF,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Iv(l,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.ba.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&Rv(t)}async function bv(n,e){const t=Qe(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const l=o.ba.indexOf(e);l>=0&&(o.ba.splice(l,1),o.ba.length===0?i=e.Da()?0:1:!o.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function mF(n,e){const t=Qe(n);let r=!1;for(const i of e){const o=i.query,l=t.queries.get(o);if(l){for(const c of l.ba)c.Fa(i)&&(r=!0);l.wa=i}}r&&Rv(t)}function gF(n,e,t){const r=Qe(n),i=r.queries.get(e);if(i)for(const o of i.ba)o.onError(t);r.queries.delete(e)}function Rv(n){n.Ca.forEach((e=>{e.next()}))}var uy,G0;(G0=uy||(uy={})).Ma="default",G0.Cache="cache";class Av{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new iu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=iu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.key=e}}class pA{constructor(e){this.key=e}}class yF{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=nt(),this.mutatedKeys=nt(),this.eu=pR(e),this.tu=new jl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new W0,i=t?t.tu:this.tu;let o=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,g)=>{const w=i.get(y),b=_d(this.query,g)?g:null,k=!!w&&this.mutatedKeys.has(w.key),L=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let D=!1;w&&b?w.data.isEqual(b.data)?k!==L&&(r.track({type:3,doc:b}),D=!0):this.su(w,b)||(r.track({type:2,doc:b}),D=!0,(h&&this.eu(b,h)>0||p&&this.eu(b,p)<0)&&(c=!0)):!w&&b?(r.track({type:0,doc:b}),D=!0):w&&!b&&(r.track({type:1,doc:w}),D=!0,(h||p)&&(c=!0)),D&&(b?(l=l.add(b),o=L?o.add(y):o.delete(y)):(l=l.delete(y),o=o.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),o=o.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Ss:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,g)=>(function(b,k){const L=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:D})}};return L(b)-L(k)})(y.type,g.type)||this.eu(y.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,p=h!==this.Xa;return this.Xa=h,l.length!==0||p?{snapshot:new iu(this.query,e.tu,o,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=nt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new pA(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new fA(r))})),t}cu(e){this.Za=e.ks,this.Ya=nt();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return iu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Pv="SyncEngine";class vF{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class _F{constructor(e){this.key=e,this.hu=!1}}class wF{constructor(e,t,r,i,o,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new $s((c=>fR(c)),sp),this.Iu=new Map,this.Eu=new Set,this.Ru=new $t(Ee.comparator),this.Au=new Map,this.Vu=new hv,this.du={},this.mu=new Map,this.fu=Da.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EF(n,e,t=!0){const r=wA(n);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await mA(r,e,t,!0),i}async function TF(n,e){const t=wA(n);await mA(t,e,!0,!1)}async function mA(n,e,t,r){const i=await z2(n.localStore,fi(e)),o=i.targetId,l=n.sharedClientState.addLocalQueryTarget(o,t);let c;return r&&(c=await IF(n,e,o,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&aA(n.remoteStore,i),c}async function IF(n,e,t,r,i){n.pu=(g,w,b)=>(async function(L,D,X,K){let Z=D.view.ru(X);Z.Ss&&(Z=await B0(L.localStore,D.query,!1).then((({documents:I})=>D.view.ru(I,Z))));const oe=K&&K.targetChanges.get(D.targetId),ie=K&&K.targetMismatches.get(D.targetId)!=null,ue=D.view.applyChanges(Z,L.isPrimaryClient,oe,ie);return Y0(L,D.targetId,ue.au),ue.snapshot})(n,g,w,b);const o=await B0(n.localStore,e,!0),l=new yF(e,o.ks),c=l.ru(o.documents),h=wd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,h);Y0(n,t,p.au);const y=new vF(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function SF(n,e,t){const r=Qe(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter((l=>!sp(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ay(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&vv(r.remoteStore,i.targetId),cy(r,i.targetId)})).catch(ja)):(cy(r,i.targetId),await ay(r.localStore,i.targetId,!0))}async function bF(n,e){const t=Qe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),vv(t.remoteStore,r.targetId))}async function RF(n,e,t){const r=EA(n);try{const i=await(function(l,c){const h=Qe(l),p=Rt.now(),y=c.reduce(((b,k)=>b.add(k.key)),nt());let g,w;return h.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let k=Yr(),L=nt();return h.xs.getEntries(b,y).next((D=>{k=D,k.forEach(((X,K)=>{K.isValidDocument()||(L=L.add(X))}))})).next((()=>h.localDocuments.getOverlayedDocuments(b,k))).next((D=>{g=D;const X=[];for(const K of c){const Z=BM(K,g.get(K.key).overlayedDocument);Z!=null&&X.push(new Hs(K.key,Z,iR(Z.value.mapValue),fn.exists(!0)))}return h.mutationQueue.addMutationBatch(b,p,X,c)})).next((D=>{w=D;const X=D.applyToLocalDocumentSet(g,L);return h.documentOverlayCache.saveOverlays(b,D.batchId,X)}))})).then((()=>({batchId:w.batchId,changes:gR(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,c,h){let p=l.du[l.currentUser.toKey()];p||(p=new $t(Je)),p=p.insert(c,h),l.du[l.currentUser.toKey()]=p})(r,i.batchId,t),await Id(r,i.changes),await Td(r.remoteStore)}catch(i){const o=Iv(i,"Failed to persist write");t.reject(o)}}async function gA(n,e){const t=Qe(n);try{const r=await F2(t.localStore,e);e.targetChanges.forEach(((i,o)=>{const l=t.Au.get(o);l&&(Ve(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?Ve(l.hu,14607):i.removedDocuments.size>0&&(Ve(l.hu,42227),l.hu=!1))})),await Id(t,r,e)}catch(r){await ja(r)}}function Q0(n,e,t){const r=Qe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((o,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(l,c){const h=Qe(l);h.onlineState=c;let p=!1;h.queries.forEach(((y,g)=>{for(const w of g.ba)w.va(c)&&(p=!0)})),p&&Rv(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AF(n,e,t){const r=Qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),o=i&&i.key;if(o){let l=new $t(Ee.comparator);l=l.insert(o,jt.newNoDocument(o,Ue.min()));const c=nt().add(o),h=new up(Ue.min(),new Map,new $t(Je),l,c);await gA(r,h),r.Ru=r.Ru.remove(o),r.Au.delete(e),kv(r)}else await ay(r.localStore,e,!1).then((()=>cy(r,e,t))).catch(ja)}async function PF(n,e){const t=Qe(n),r=e.batch.batchId;try{const i=await M2(t.localStore,e);vA(t,r,null),yA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Id(t,i)}catch(i){await ja(i)}}async function kF(n,e,t){const r=Qe(n);try{const i=await(function(l,c){const h=Qe(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next((g=>(Ve(g!==null,37113),y=g.keys(),h.mutationQueue.removeMutationBatch(p,g)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>h.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);vA(r,e,t),yA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Id(r,i)}catch(i){await ja(i)}}function yA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function vA(n,e,t){const r=Qe(n);let i=r.du[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function cy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||_A(n,r)}))}function _A(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(vv(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),kv(n))}function Y0(n,e,t){for(const r of t)r instanceof fA?(n.Vu.addReference(r.key,e),CF(n,r)):r instanceof pA?(ce(Pv,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||_A(n,r.key)):Ae(19791,{wu:r})}function CF(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(ce(Pv,"New document in limbo: "+t),n.Eu.add(r),kv(n))}function kv(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(yt.fromString(e)),r=n.fu.next();n.Au.set(r,new _F(t)),n.Ru=n.Ru.insert(t,r),aA(n.remoteStore,new Ns(fi(vd(t.path)),r,"TargetPurposeLimboResolution",hi.ce))}}async function Id(n,e,t){const r=Qe(n),i=[],o=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,t).then((p=>{var y;if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(p){i.push(p);const g=mv.Es(h.targetId,p);o.push(g)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(h,p){const y=Qe(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>j.forEach(p,(w=>j.forEach(w.Ts,(b=>y.persistence.referenceDelegate.addReference(g,w.targetId,b))).next((()=>j.forEach(w.Is,(b=>y.persistence.referenceDelegate.removeReference(g,w.targetId,b)))))))))}catch(g){if(!Bo(g))throw g;ce(gv,"Failed to update sequence numbers: "+g)}for(const g of p){const w=g.targetId;if(!g.fromCache){const b=y.vs.get(w),k=b.snapshotVersion,L=b.withLastLimboFreeSnapshotVersion(k);y.vs=y.vs.insert(w,L)}}})(r.localStore,o))}async function xF(n,e){const t=Qe(n);if(!t.currentUser.isEqual(e)){ce(Pv,"User change. New user:",e.toKey());const r=await rA(t.localStore,e);t.currentUser=e,(function(o,l){o.mu.forEach((c=>{c.forEach((h=>{h.reject(new ge(ee.CANCELLED,l))}))})),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Id(t,r.Ns)}}function DF(n,e){const t=Qe(n),r=t.Au.get(e);if(r&&r.hu)return nt().add(r.key);{let i=nt();const o=t.Iu.get(e);if(!o)return i;for(const l of o){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function wA(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AF.bind(null,e),e.Pu.J_=mF.bind(null,e.eventManager),e.Pu.yu=gF.bind(null,e.eventManager),e}function EA(n){const e=Qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kF.bind(null,e),e}class Xc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return nA(this.persistence,new tA,e.initialUser,this.serializer)}Cu(e){return new fv(hp.Vi,this.serializer)}Du(e){return new sA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xc.provider={build:()=>new Xc};class NF extends Xc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ve(this.persistence.referenceDelegate instanceof Df,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new YR(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new fv((r=>Df.Vi(r,t)),this.serializer)}}class OF extends Xc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await EA(this.xu.syncEngine),await Td(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return nA(this.persistence,new tA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new YR(r,e.asyncQueue,t)}Mu(e,t){const r=new VL(t,this.persistence);return new OL(e.asyncQueue,r)}Cu(e){const t=N2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nr.withCacheSize(this.cacheSizeBytes):nr.DEFAULT;return new pv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,G2(),uf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new sA}}class Of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=xF.bind(null,this.syncEngine),await hF(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new pF})()}createDatastore(e){const t=fp(e.databaseInfo.databaseId),r=K2(e.databaseInfo);return Z2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,o,l,c){return new tF(r,i,o,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>Q0(this.syncEngine,t,0)),(function(){return $0.v()?new $0:new $2})())}createSyncEngine(e,t){return(function(i,o,l,c,h,p,y){const g=new wF(i,o,l,c,h,p);return y&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const o=Qe(i);ce(Na,"RemoteStore shutting down."),o.Ea.add(5),await Ed(o),o.Aa.shutdown(),o.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VF=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ge(ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,o){const l=Qe(i),c={documents:o.map((g=>Yc(l.serializer,g)))},h=await l.jo("BatchGetDocuments",l.serializer.databaseId,yt.emptyPath(),c,o.length),p=new Map;h.forEach((g=>{const w=JM(l.serializer,g);p.set(w.key.toString(),w)}));const y=[];return o.forEach((g=>{const w=p.get(g.toString());Ve(!!w,55234,{key:g}),y.push(w)})),y})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=Ee.fromPath(r);this.mutations.push(new iv(i,this.precondition(i)))})),await(async function(r,i){const o=Qe(r),l={writes:i.map((c=>Jc(o.serializer,c)))};await o.Wo("Commit",o.serializer.databaseId,yt.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});t=Ue.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ge(ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ue.min())?fn.exists(!1):fn.updateTime(t):fn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ue.min()))throw new ge(ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return fn.updateTime(t)}return fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this.zu=r.maxAttempts,this.M_=new yv(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new VF(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!md(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!bR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="FirestoreClient";class MF{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=jn.UNAUTHENTICATED,this.clientId=Wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async l=>{ce(Mo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(ce(Mo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Iv(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function mg(n,e){n.asyncQueue.verifyOperationInProgress(),ce(Mo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await rA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function J0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await FF(n);ce(Mo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>q0(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>q0(e.remoteStore,i))),n._onlineComponents=e}async function FF(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Mo,"Using user provided OfflineComponentProvider");try{await mg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ee.FAILED_PRECONDITION||i.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;No("Error using user provided cache. Falling back to memory cache: "+t),await mg(n,new Xc)}}else ce(Mo,"Using default OfflineComponentProvider"),await mg(n,new NF(void 0));return n._offlineComponents}async function xv(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Mo,"Using user provided OnlineComponentProvider"),await J0(n,n._uninitializedComponentsProvider._online)):(ce(Mo,"Using default OnlineComponentProvider"),await J0(n,new Of))),n._onlineComponents}function UF(n){return xv(n).then((e=>e.syncEngine))}function BF(n){return xv(n).then((e=>e.datastore))}async function Vf(n){const e=await xv(n),t=e.eventManager;return t.onListen=EF.bind(null,e.syncEngine),t.onUnlisten=SF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bF.bind(null,e.syncEngine),t}function zF(n,e,t,r){const i=new Cv(r),o=new Av(e,i,t);return n.asyncQueue.enqueueAndForget((async()=>Sv(await Vf(n),o))),()=>{i.Nu(),n.asyncQueue.enqueueAndForget((async()=>bv(await Vf(n),o)))}}function jF(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,p){const y=new Cv({next:w=>{y.Nu(),l.enqueueAndForget((()=>bv(o,g)));const b=w.docs.has(c);!b&&w.fromCache?p.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&w.fromCache&&h&&h.source==="server"?p.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),g=new Av(vd(c.path),y,{includeMetadataChanges:!0,Ka:!0});return Sv(o,g)})(await Vf(n),n.asyncQueue,e,t,r))),r.promise}function $F(n,e,t={}){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>(function(o,l,c,h,p){const y=new Cv({next:w=>{y.Nu(),l.enqueueAndForget((()=>bv(o,g))),w.fromCache&&h.source==="server"?p.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),g=new Av(c,y,{includeMetadataChanges:!0,Ka:!0});return Sv(o,g)})(await Vf(n),n.asyncQueue,e,t,r))),r.promise}function HF(n,e){const t=new Di;return n.asyncQueue.enqueueAndForget((async()=>RF(await UF(n),e,t))),t.promise}function qF(n,e,t){const r=new Di;return n.asyncQueue.enqueueAndForget((async()=>{const i=await BF(n);new LF(n.asyncQueue,i,t,e,r).ju()})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="ComponentProvider",X0=new Map;function KF(n,e,t,r,i){return new cM(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,TA(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="firestore.googleapis.com",Z0=!0;class eI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=IA,this.ssl=Z0}else this.host=e.host,this.ssl=e.ssl??Z0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g2)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}CL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new wL;switch(r.type){case"firstParty":return new SL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=X0.get(t);r&&(ce(WF,"Removing Datastore"),X0.delete(t),r.terminate())})(this),Promise.resolve()}}function GF(n,e,t,r={}){var p;n=yr(n,mp);const i=us(e),o=n._getSettings(),l={...o,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&($f(`https://${c}`),Hf("Firestore",!0)),o.host!==IA&&o.host!==c&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:c,ssl:i,emulatorOptions:r};if(!Do(h,l)&&(n._setSettings(h),r.mockUserToken)){let y,g;if(typeof r.mockUserToken=="string")y=r.mockUserToken,g=jn.MOCK_USER;else{y=PS(r.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new jn(w)}n._authCredentials=new EL(new xb(y,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qs(this.firestore,e,this._query)}}class Gt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gt(this.firestore,e,this._key)}toJSON(){return{type:Gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(pd(t,Gt._jsonSchema))return new Gt(e,r||null,new Ee(yt.fromString(t.referencePath)))}}Gt._jsonSchemaVersion="firestore/documentReference/1.0",Gt._jsonSchema={type:pn("string",Gt._jsonSchemaVersion),referencePath:pn("string")};class Co extends qs{constructor(e,t,r){super(e,t,vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gt(this.firestore,null,new Ee(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function Zt(n,e,...t){if(n=at(n),Nb("collection","path",e),n instanceof mp){const r=yt.fromString(e,...t);return HT(r),new Co(n,null,r)}{if(!(n instanceof Gt||n instanceof Co))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return HT(r),new Co(n.firestore,null,r)}}function qn(n,e,...t){if(n=at(n),arguments.length===1&&(e=Wy.newId()),Nb("doc","path",e),n instanceof mp){const r=yt.fromString(e,...t);return $T(r),new Gt(n,null,new Ee(r))}{if(!(n instanceof Gt||n instanceof Co))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return $T(r),new Gt(n.firestore,n instanceof Co?n.converter:null,new Ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="AsyncQueue";class nI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yv(this,"async_queue_retry"),this._c=()=>{const r=uf();r&&ce(tI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=uf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Bo(e))throw e;ce(tI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",rI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Tv.createAndSchedule(this,e,t,r,(o=>this.hc(o)));return this.tc.push(i),i}uc(){this.nc&&Ae(47125,{Pc:rI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rI(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class as extends mp{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new nI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nI(e),this._firestoreClient=void 0,await e}}}function QF(n,e){const t=typeof n=="object"?n:au(),r=typeof n=="string"?n:bf,i=cs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=xy("firestore");o&&GF(i,...o)}return i}function Sd(n){if(n._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SA(n),n._firestoreClient}function SA(n){var r,i,o,l;const e=n._freezeSettings(),t=KF(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(i=n._app)==null?void 0:i.options.apiKey,e);n._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new MF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}function YF(n,e){No("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return JF(n,Of.provider,{build:r=>new OF(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function JF(n,e,t){if((n=yr(n,as))._firestoreClient||n._terminated)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new ge(ee.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},SA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qr(gn.fromBase64String(e))}catch(t){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qr(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pd(e,Qr._jsonSchema))return Qr.fromBase64String(e.bytes)}}Qr._jsonSchemaVersion="firestore/bytes/1.0",Qr._jsonSchema={type:pn("string",Qr._jsonSchemaVersion),bytes:pn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:is._jsonSchemaVersion}}static fromJSON(e){if(pd(e,is._jsonSchema))return new is(e.latitude,e.longitude)}}is._jsonSchemaVersion="firestore/geoPoint/1.0",is._jsonSchema={type:pn("string",is._jsonSchemaVersion),latitude:pn("number"),longitude:pn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ni._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pd(e,Ni._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ni(e.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ni._jsonSchemaVersion="firestore/vectorValue/1.0",Ni._jsonSchema={type:pn("string",Ni._jsonSchemaVersion),vectorValues:pn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=/^__.*__$/;class ZF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms):new du(e,this.data,t,this.fieldTransforms)}}class bA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function RA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:n})}}class Nv{constructor(e,t,r,i,o,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.validatePath(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Nv({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Lf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(RA(this.dataSource)&&XF.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class e4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fp(e)}createContext(e,t,r,i=!1){return new Nv({dataSource:e,methodName:t,targetDoc:r,path:Kt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bd(n){const e=n._freezeSettings(),t=fp(n._databaseId);return new e4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ov(n,e,t,r,i,o={}){const l=n.createContext(o.merge||o.mergeFields?2:0,e,t,i);Vv("Data must be an object, but it was:",l,r);const c=kA(r,l);let h,p;if(o.merge)h=new Vr(l.fieldMask),p=l.fieldTransforms;else if(o.mergeFields){const y=[];for(const g of o.mergeFields){const w=Oa(e,g,t);if(!l.contains(w))throw new ge(ee.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);DA(y,w)||y.push(w)}h=new Vr(y),p=l.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,p=l.fieldTransforms;return new ZF(new Hn(c),h,p)}class yp extends Dv{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yp}}function AA(n,e,t,r){const i=n.createContext(1,e,t);Vv("Data must be an object, but it was:",i,r);const o=[],l=Hn.empty();zo(r,((h,p)=>{const y=xA(e,h,t);p=at(p);const g=i.childContextForFieldPath(y);if(p instanceof yp)o.push(y);else{const w=Rd(p,g);w!=null&&(o.push(y),l.set(y,w))}}));const c=new Vr(o);return new bA(l,c,i.fieldTransforms)}function PA(n,e,t,r,i,o){const l=n.createContext(1,e,t),c=[Oa(e,r,t)],h=[i];if(o.length%2!=0)throw new ge(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(Oa(e,o[w])),h.push(o[w+1]);const p=[],y=Hn.empty();for(let w=c.length-1;w>=0;--w)if(!DA(p,c[w])){const b=c[w];let k=h[w];k=at(k);const L=l.childContextForFieldPath(b);if(k instanceof yp)p.push(b);else{const D=Rd(k,L);D!=null&&(p.push(b),y.set(b,D))}}const g=new Vr(p);return new bA(y,g,l.fieldTransforms)}function t4(n,e,t,r=!1){return Rd(t,n.createContext(r?4:3,e))}function Rd(n,e){if(CA(n=at(n)))return Vv("Unsupported field value:",e,n),kA(n,e);if(n instanceof Dv)return(function(r,i){if(!RA(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const o=[];let l=0;for(const c of r){let h=Rd(c,i.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),l++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Rt.fromDate(r);return{timestampValue:ru(i.serializer,o)}}if(r instanceof Rt){const o=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(i.serializer,o)}}if(r instanceof is)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qr)return{bytesValue:kR(i.serializer,r._byteString)};if(r instanceof Gt){const o=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(o))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ni)return(function(l,c){const h=l instanceof Ni?l.toArray():l;return{mapValue:{fields:{[ev]:{stringValue:tv},[Jl]:{arrayValue:{values:h.map((y=>{if(typeof y!="number")throw c.createError("VectorValues must only contain numeric values.");return rv(c.serializer,y)}))}}}}}})(r,i);if(BR(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Xf(r)}`)})(n,e)}function kA(n,e){const t={};return Qb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(n,((r,i)=>{const o=Rd(i,e.childContextForField(r));o!=null&&(t[r]=o)})),{mapValue:{fields:t}}}function CA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof is||n instanceof Qr||n instanceof Gt||n instanceof Dv||n instanceof Ni||BR(n))}function Vv(n,e,t){if(!CA(t)||!Ob(t)){const r=Xf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function Oa(n,e,t){if((e=at(e))instanceof gp)return e._internalPath;if(typeof e=="string")return xA(n,e);throw Lf("Field path arguments must be of type string or ",n,!1,void 0,t)}const n4=new RegExp("[~\\*/\\[\\]]");function xA(n,e,t){if(e.search(n4)>=0)throw Lf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new gp(...e.split("."))._internalPath}catch{throw Lf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lf(n,e,t,r,i){const o=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(o||l)&&(h+=" (found",o&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new ge(ee.INVALID_ARGUMENT,c+n+h)}function DA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{convertValue(e,t="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zo(e,((i,o)=>{r[i]=this.convertValue(o,t)})),r}convertVectorValue(e){var r,i,o;const t=(o=(i=(r=e.fields)==null?void 0:r[Jl].arrayValue)==null?void 0:i.values)==null?void 0:o.map((l=>zt(l.doubleValue)));return new Ni(t)}convertGeoPoint(e){return new is(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=rp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($c(e));default:return null}}convertTimestamp(e){const t=Us(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yt.fromString(e);Ve(UR(r),9688,{name:e});const i=new Pa(r.get(1),r.get(3)),o=new Ee(r.popFirst(5));return i.isEqual(t)||gr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}const iI="@firebase/firestore",sI="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new r4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Oa("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class r4 extends Mf{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lv{}class Mv extends Lv{}function Va(n,e,...t){let r=[];e instanceof Lv&&r.push(e),r=r.concat(t),(function(o){const l=o.filter((h=>h instanceof Fv)).length,c=o.filter((h=>h instanceof _p)).length;if(l>1||l>0&&c>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class _p extends Mv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _p(e,t,r)}_apply(e){const t=this._parse(e);return VA(e._query,t),new qs(e.firestore,e.converter,Zg(e._query,t))}_parse(e){const t=bd(e.firestore);return(function(o,l,c,h,p,y,g){let w;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){lI(g,y);const k=[];for(const L of g)k.push(aI(h,o,L));w={arrayValue:{values:k}}}else w=aI(h,o,g)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||lI(g,y),w=t4(c,l,g,y==="in"||y==="not-in");return ct.create(p,y,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function su(n,e,t){const r=e,i=Oa("where",n);return _p._create(i,r,t)}class Fv extends Lv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Fv(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:At.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let l=i;const c=o.getFlattenedFilters();for(const h of c)VA(l,h),l=Zg(l,h)})(e._query,t),new qs(e.firestore,e.converter,Zg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Uv extends Mv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Uv(e,t)}_apply(e){const t=(function(i,o,l){if(i.startAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Kc(o,l)})(e._query,this._field,this._direction);return new qs(e.firestore,e.converter,bM(e._query,t))}}function Zc(n,e="asc"){const t=e,r=Oa("orderBy",n);return Uv._create(r,t)}class Bv extends Mv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Bv(e,t,r)}_apply(e){return new qs(e.firestore,e.converter,Pf(e._query,this._limit,this._limitType))}}function i4(n){return Bv._create("limit",n,"F")}function aI(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hR(e)&&t.indexOf("/")!==-1)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(yt.fromString(t));if(!Ee.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qc(n,new Ee(r))}if(t instanceof Gt)return qc(n,t._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xf(t)}.`)}function lI(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VA(n,e){const t=(function(i,o){for(const l of i)for(const c of l.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function zv(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class s4 extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gt(this.firestore,null,t)}}class Ll{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xo extends Mf{constructor(e,t,r,i,o,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Oa("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=xo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}xo._jsonSchemaVersion="firestore/documentSnapshot/1.0",xo._jsonSchema={type:pn("string",xo._jsonSchemaVersion),bundleSource:pn("string","DocumentSnapshot"),bundleName:pn("string"),bundle:pn("string")};class cf extends xo{data(e={}){return super.data(e)}}class Ia{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ll(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new cf(this._firestore,this._userDataWriter,r.key,r,new Ll(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((c=>{const h=new cf(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ll(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>o||c.type!==3)).map((c=>{const h=new cf(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ll(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:o4(c.type),doc:h,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ia._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Wy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function o4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ia._jsonSchemaVersion="firestore/querySnapshot/1.0",Ia._jsonSchema={type:pn("string",Ia._jsonSchemaVersion),bundleSource:pn("string","QuerySnapshot"),bundleName:pn("string"),bundle:pn("string")};const a4={maxAttempts:5};function yc(n,e){if((n=at(n)).firestore!==e)throw new ge(ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bd(e)}get(e){const t=yc(e,this._firestore),r=new s4(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ae(24041);const o=i[0];if(o.isFoundDocument())return new Mf(this._firestore,r,o.key,o,t.converter);if(o.isNoDocument())return new Mf(this._firestore,r,t._key,null,t.converter);throw Ae(18433,{doc:o})}))}set(e,t,r){const i=yc(e,this._firestore),o=zv(i.converter,t,r),l=Ov(this._dataReader,"Transaction.set",i._key,o,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const o=yc(e,this._firestore);let l;return l=typeof(t=at(t))=="string"||t instanceof gp?PA(this._dataReader,"Transaction.update",o._key,t,r,i):AA(this._dataReader,"Transaction.update",o._key,t),this._transaction.update(o._key,l),this}delete(e){const t=yc(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4 extends l4{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=yc(e,this._firestore),r=new vp(this._firestore);return super.get(e).then((i=>new xo(this._firestore,r,t._key,i._document,new Ll(!1,!1),t.converter)))}}function LA(n,e,t){n=yr(n,as);const r={...a4,...t};(function(l){if(l.maxAttempts<1)throw new ge(ee.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=Sd(n);return qF(i,(o=>e(new u4(n,o))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(n){n=yr(n,Gt);const e=yr(n.firestore,as),t=Sd(e);return jF(t,n._key).then((r=>FA(e,n,r)))}function ei(n){n=yr(n,qs);const e=yr(n.firestore,as),t=Sd(e),r=new vp(e);return OA(n._query),$F(t,n._query).then((i=>new Ia(e,r,n,i)))}function MA(n,e,t){n=yr(n,Gt);const r=yr(n.firestore,as),i=zv(n.converter,e,t),o=bd(r);return $v(r,[Ov(o,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,fn.none())])}function Ha(n,e,t,...r){n=yr(n,Gt);const i=yr(n.firestore,as),o=bd(i);let l;return l=typeof(e=at(e))=="string"||e instanceof gp?PA(o,"updateDoc",n._key,e,t,r):AA(o,"updateDoc",n._key,e),$v(i,[l.toMutation(n._key,fn.exists(!0))])}function Ls(n,e){const t=yr(n.firestore,as),r=qn(n),i=zv(n.converter,e),o=bd(n.firestore);return $v(t,[Ov(o,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then((()=>r))}function c4(n,...e){var p,y,g;n=at(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||oI(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(oI(e[r])){const w=e[r];e[r]=(p=w.next)==null?void 0:p.bind(w),e[r+1]=(y=w.error)==null?void 0:y.bind(w),e[r+2]=(g=w.complete)==null?void 0:g.bind(w)}let o,l,c;if(n instanceof Gt)l=yr(n.firestore,as),c=vd(n._key.path),o={next:w=>{e[r]&&e[r](FA(l,n,w))},error:e[r+1],complete:e[r+2]};else{const w=yr(n,qs);l=yr(w.firestore,as),c=w._query;const b=new vp(l);o={next:k=>{e[r]&&e[r](new Ia(l,b,w,k))},error:e[r+1],complete:e[r+2]},OA(n._query)}const h=Sd(l);return zF(h,c,i,o)}function $v(n,e){const t=Sd(n);return HF(t,e)}function FA(n,e,t){const r=t.docs.get(e._key),i=new vp(n);return new xo(n,i,e._key,r,new Ll(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){_L(za),Lr(new _r("firestore",((r,{instanceIdentifier:i,options:o})=>{const l=r.getProvider("app").getImmediate(),c=new as(new TL(r.getProvider("auth-internal")),new bL(l,r.getProvider("app-check-internal")),dM(l,i),l);return o={useFetchStreams:t,...o},c._setSettings(o),c}),"PUBLIC").setMultipleInstances(!0)),xn(iI,sI,e),xn(iI,sI,"esm2020")})();const UA="@firebase/installations",Hv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=1e4,zA=`w:${Hv}`,jA="FIS_v2",d4="https://firebaseinstallations.googleapis.com/v1",h4=3600*1e3,f4="installations",p4="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},La=new Uo(f4,p4,m4);function $A(n){return n instanceof ti&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA({projectId:n}){return`${d4}/projects/${n}/installations`}function qA(n){return{token:n.token,requestStatus:2,expiresIn:y4(n.expiresIn),creationTime:Date.now()}}async function WA(n,e){const r=(await e.json()).error;return La.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function KA({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function g4(n,{refreshToken:e}){const t=KA(n);return t.append("Authorization",v4(e)),t}async function GA(n){const e=await n();return e.status>=500&&e.status<600?n():e}function y4(n){return Number(n.replace("s","000"))}function v4(n){return`${jA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=HA(n),i=KA(n),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={fid:t,authVersion:jA,appId:n.appId,sdkVersion:zA},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await GA(()=>fetch(r,c));if(h.ok){const p=await h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:qA(p.authToken)}}else throw await WA("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=/^[cdef][\w-]{21}$/,dy="";function T4(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=I4(n);return E4.test(t)?t:dy}catch{return dy}}function I4(n){return w4(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=new Map;function JA(n,e){const t=wp(n);XA(t,e),S4(t,e)}function XA(n,e){const t=YA.get(n);if(t)for(const r of t)r(e)}function S4(n,e){const t=b4();t&&t.postMessage({key:n,fid:e}),R4()}let wa=null;function b4(){return!wa&&"BroadcastChannel"in self&&(wa=new BroadcastChannel("[Firebase] FID Change"),wa.onmessage=n=>{XA(n.data.key,n.data.fid)}),wa}function R4(){YA.size===0&&wa&&(wa.close(),wa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4="firebase-installations-database",P4=1,Ma="firebase-installations-store";let gg=null;function qv(){return gg||(gg=Kf(A4,P4,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ma)}}})),gg}async function Ff(n,e){const t=wp(n),i=(await qv()).transaction(Ma,"readwrite"),o=i.objectStore(Ma),l=await o.get(t);return await o.put(e,t),await i.done,(!l||l.fid!==e.fid)&&JA(n,e.fid),e}async function ZA(n){const e=wp(n),r=(await qv()).transaction(Ma,"readwrite");await r.objectStore(Ma).delete(e),await r.done}async function Ep(n,e){const t=wp(n),i=(await qv()).transaction(Ma,"readwrite"),o=i.objectStore(Ma),l=await o.get(t),c=e(l);return c===void 0?await o.delete(t):await o.put(c,t),await i.done,c&&(!l||l.fid!==c.fid)&&JA(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(n){let e;const t=await Ep(n.appConfig,r=>{const i=k4(r),o=C4(n,i);return e=o.registrationPromise,o.installationEntry});return t.fid===dy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function k4(n){const e=n||{fid:T4(),registrationStatus:0};return eP(e)}function C4(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(La.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=x4(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:D4(n)}:{installationEntry:e}}async function x4(n,e){try{const t=await _4(n,e);return Ff(n.appConfig,t)}catch(t){throw $A(t)&&t.customData.serverCode===409?await ZA(n.appConfig):await Ff(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function D4(n){let e=await uI(n.appConfig);for(;e.registrationStatus===1;)await QA(100),e=await uI(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Wv(n);return r||t}return e}function uI(n){return Ep(n,e=>{if(!e)throw La.create("installation-not-found");return eP(e)})}function eP(n){return N4(n)?{fid:n.fid,registrationStatus:0}:n}function N4(n){return n.registrationStatus===1&&n.registrationTime+BA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O4({appConfig:n,heartbeatServiceProvider:e},t){const r=V4(n,t),i=g4(n,t),o=e.getImmediate({optional:!0});if(o){const p=await o.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={installation:{sdkVersion:zA,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await GA(()=>fetch(r,c));if(h.ok){const p=await h.json();return qA(p)}else throw await WA("Generate Auth Token",h)}function V4(n,{fid:e}){return`${HA(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kv(n,e=!1){let t;const r=await Ep(n.appConfig,o=>{if(!tP(o))throw La.create("not-registered");const l=o.authToken;if(!e&&F4(l))return o;if(l.requestStatus===1)return t=L4(n,e),o;{if(!navigator.onLine)throw La.create("app-offline");const c=B4(o);return t=M4(n,c),c}});return t?await t:r.authToken}async function L4(n,e){let t=await cI(n.appConfig);for(;t.authToken.requestStatus===1;)await QA(100),t=await cI(n.appConfig);const r=t.authToken;return r.requestStatus===0?Kv(n,e):r}function cI(n){return Ep(n,e=>{if(!tP(e))throw La.create("not-registered");const t=e.authToken;return z4(t)?{...e,authToken:{requestStatus:0}}:e})}async function M4(n,e){try{const t=await O4(n,e),r={...e,authToken:t};return await Ff(n.appConfig,r),t}catch(t){if($A(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await ZA(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Ff(n.appConfig,r)}throw t}}function tP(n){return n!==void 0&&n.registrationStatus===2}function F4(n){return n.requestStatus===2&&!U4(n)}function U4(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+h4}function B4(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function z4(n){return n.requestStatus===1&&n.requestTime+BA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(n){const e=n,{installationEntry:t,registrationPromise:r}=await Wv(e);return r?r.catch(console.error):Kv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(n,e=!1){const t=n;return await H4(t),(await Kv(t,e)).token}async function H4(n){const{registrationPromise:e}=await Wv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){if(!n||!n.options)throw yg("App Configuration");if(!n.name)throw yg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw yg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function yg(n){return La.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="installations",W4="installations-internal",K4=n=>{const e=n.getProvider("app").getImmediate(),t=q4(e),r=cs(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},G4=n=>{const e=n.getProvider("app").getImmediate(),t=cs(e,nP).getImmediate();return{getId:()=>j4(t),getToken:i=>$4(t,i)}};function Q4(){Lr(new _r(nP,K4,"PUBLIC")),Lr(new _r(W4,G4,"PRIVATE"))}Q4();xn(UA,Hv);xn(UA,Hv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf="analytics",Y4="firebase_id",J4="origin",X4=60*1e3,Z4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new Wf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eU={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Xr=new Uo("analytics","Analytics",eU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tU(n){if(!n.startsWith(Gv)){const e=Xr.create("invalid-gtag-resource",{gtagURL:n});return vr.warn(e.message),""}return n}function rP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function nU(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function rU(n,e){const t=nU("firebase-js-sdk-policy",{createScriptURL:tU}),r=document.createElement("script"),i=`${Gv}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function iU(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function sU(n,e,t,r,i,o){const l=r[i];try{if(l)await e[l];else{const h=(await rP(t)).find(p=>p.measurementId===i);h&&await e[h.appId]}}catch(c){vr.error(c)}n("config",i,o)}async function oU(n,e,t,r,i){try{let o=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const c=await rP(t);for(const h of l){const p=c.find(g=>g.measurementId===h),y=p&&e[p.appId];if(y)o.push(y);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),n("event",r,i||{})}catch(o){vr.error(o)}}function aU(n,e,t,r){async function i(o,...l){try{if(o==="event"){const[c,h]=l;await oU(n,e,t,c,h)}else if(o==="config"){const[c,h]=l;await sU(n,e,t,r,c,h)}else if(o==="consent"){const[c,h]=l;n("consent",c,h)}else if(o==="get"){const[c,h,p]=l;n("get",c,h,p)}else if(o==="set"){const[c]=l;n("set",c)}else n(o,...l)}catch(c){vr.error(c)}}return i}function lU(n,e,t,r,i){let o=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=aU(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function uU(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Gv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cU=30,dU=1e3;class hU{constructor(e={},t=dU){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const iP=new hU;function fU(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function pU(n){var l;const{appId:e,apiKey:t}=n,r={method:"GET",headers:fU(t)},i=Z4.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let c="";try{const h=await o.json();(l=h.error)!=null&&l.message&&(c=h.error.message)}catch{}throw Xr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()}async function mU(n,e=iP,t){const{appId:r,apiKey:i,measurementId:o}=n.options;if(!r)throw Xr.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw Xr.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new vU;return setTimeout(async()=>{c.abort()},X4),sP({appId:r,apiKey:i,measurementId:o},l,c,e)}async function sP(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=iP){var c;const{appId:o,measurementId:l}=n;try{await gU(r,e)}catch(h){if(l)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:l};throw h}try{const h=await pU(n);return i.deleteThrottleMetadata(o),h}catch(h){const p=h;if(!yU(p)){if(i.deleteThrottleMetadata(o),l)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:o,measurementId:l};throw h}const y=Number((c=p==null?void 0:p.customData)==null?void 0:c.httpStatus)===503?lT(t,i.intervalMillis,cU):lT(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(o,g),vr.debug(`Calling attemptFetch again in ${y} millis`),sP(n,g,r,i)}}function gU(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Xr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function yU(n){if(!(n instanceof ti)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class vU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function _U(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const o=await e,l={...r,send_to:o};n("event",t,l)}}async function wU(n,e,t,r){if(r&&r.global){const i={};for(const o of Object.keys(t))i[`user_properties.${o}`]=t[o];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(){if(qf())try{await Dy()}catch(n){return vr.warn(Xr.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return vr.warn(Xr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function TU(n,e,t,r,i,o,l){const c=mU(n);c.then(w=>{t[w.measurementId]=w.appId,n.options.measurementId&&w.measurementId!==n.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${w.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(w=>vr.error(w)),e.push(c);const h=EU().then(w=>{if(w)return r.getId()}),[p,y]=await Promise.all([c,h]);uU(o)||rU(o,p.measurementId),i("js",new Date);const g=(l==null?void 0:l.config)??{};return g[J4]="firebase",g.update=!0,y!=null&&(g[Y4]=y),i("config",p.measurementId,g),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU{constructor(e){this.app=e}_delete(){return delete $l[this.app.options.appId],Promise.resolve()}}let $l={},dI=[];const hI={};let vg="dataLayer",SU="gtag",fI,Qv,pI=!1;function bU(){const n=[];if(CS()&&n.push("This is a browser extension environment."),NS()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Xr.create("invalid-analytics-context",{errorInfo:e});vr.warn(t.message)}}function RU(n,e,t){bU();const r=n.options.appId;if(!r)throw Xr.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Xr.create("no-api-key");if($l[r]!=null)throw Xr.create("already-exists",{id:r});if(!pI){iU(vg);const{wrappedGtag:o,gtagCore:l}=lU($l,dI,hI,vg,SU);Qv=o,fI=l,pI=!0}return $l[r]=TU(n,dI,hI,e,fI,vg,t),new IU(n)}function AU(n=au()){n=at(n);const e=cs(n,Uf);return e.isInitialized()?e.getImmediate():PU(n)}function PU(n,e={}){const t=cs(n,Uf);if(t.isInitialized()){const i=t.getImmediate();if(Do(e,t.getOptions()))return i;throw Xr.create("already-initialized")}return t.initialize({options:e})}function kU(n,e,t){n=at(n),wU(Qv,$l[n.app.options.appId],e,t).catch(r=>vr.error(r))}function CU(n,e,t,r){n=at(n),_U(Qv,$l[n.app.options.appId],e,t,r).catch(i=>vr.error(i))}const mI="@firebase/analytics",gI="0.10.19";function xU(){Lr(new _r(Uf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return RU(r,i,t)},"PUBLIC")),Lr(new _r("analytics-internal",n,"PRIVATE")),xn(mI,gI),xn(mI,gI,"esm2020");function n(e){try{const t=e.getProvider(Uf).getImmediate();return{logEvent:(r,i,o)=>CU(t,r,i,o),setUserProperties:(r,i)=>kU(t,r,i)}}catch(t){throw Xr.create("interop-component-reg-failed",{reason:t})}}}xU();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP="firebasestorage.googleapis.com",aP="storageBucket",DU=120*1e3,NU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends ti{constructor(e,t,r=0){super(_g(e),`Firebase Storage: ${t} (${_g(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _g(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var en;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(en||(en={}));function _g(n){return"storage/"+n}function Yv(){const n="An unknown error occurred, please check the error payload for server response.";return new tn(en.UNKNOWN,n)}function OU(n){return new tn(en.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function VU(n){return new tn(en.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LU(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tn(en.UNAUTHENTICATED,n)}function MU(){return new tn(en.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function FU(n){return new tn(en.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function UU(){return new tn(en.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BU(){return new tn(en.CANCELED,"User canceled the upload/download.")}function zU(n){return new tn(en.INVALID_URL,"Invalid URL '"+n+"'.")}function jU(n){return new tn(en.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function $U(){return new tn(en.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+aP+"' property when initializing the app?")}function HU(){return new tn(en.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qU(){return new tn(en.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function WU(n){return new tn(en.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function hy(n){return new tn(en.INVALID_ARGUMENT,n)}function lP(){return new tn(en.APP_DELETED,"The Firebase app was deleted.")}function KU(n){return new tn(en.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cc(n,e){return new tn(en.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function ac(n){throw new tn(en.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Jr.makeFromUrl(e,t)}catch{return new Jr(e,"")}if(r.path==="")return r;throw jU(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(oe){oe.path.charAt(oe.path.length-1)==="/"&&(oe.path_=oe.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function p(oe){oe.path_=decodeURIComponent(oe.path)}const y="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",b=new RegExp(`^https?://${g}/${y}/b/${i}/o${w}`,"i"),k={bucket:1,path:3},L=t===oP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,D="([^?#]*)",X=new RegExp(`^https?://${L}/${i}/${D}`,"i"),Z=[{regex:c,indices:h,postModify:o},{regex:b,indices:k,postModify:p},{regex:X,indices:{bucket:1,path:2},postModify:p}];for(let oe=0;oe<Z.length;oe++){const ie=Z[oe],ue=ie.regex.exec(e);if(ue){const I=ue[ie.indices.bucket];let S=ue[ie.indices.path];S||(S=""),r=new Jr(I,S),ie.postModify(r);break}}if(r==null)throw zU(e);return r}}class GU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n,e,t){let r=1,i=null,o=null,l=!1,c=0;function h(){return c===2}let p=!1;function y(...D){p||(p=!0,e.apply(null,D))}function g(D){i=setTimeout(()=>{i=null,n(b,h())},D)}function w(){o&&clearTimeout(o)}function b(D,...X){if(p){w();return}if(D){w(),y.call(null,D,...X);return}if(h()||l){w(),y.call(null,D,...X);return}r<64&&(r*=2);let Z;c===1?(c=2,Z=0):Z=(r+Math.random())*1e3,g(Z)}let k=!1;function L(D){k||(k=!0,w(),!p&&(i!==null?(D||(c=2),clearTimeout(i),g(0)):D||(c=1)))}return g(0),o=setTimeout(()=>{l=!0,L(!0)},t),L}function YU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JU(n){return n!==void 0}function XU(n){return typeof n=="object"&&!Array.isArray(n)}function Jv(n){return typeof n=="string"||n instanceof String}function yI(n){return Xv()&&n instanceof Blob}function Xv(){return typeof Blob<"u"}function vI(n,e,t,r){if(r<e)throw hy(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw hy(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function uP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Sa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Sa||(Sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t,r,i,o,l,c,h,p,y,g,w=!0,b=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=g,this.retry=w,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,L)=>{this.resolve_=k,this.reject_=L,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Bh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(l),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(l),this.pendingConnection_=null;const c=o.getErrorCode()===Sa.NO_ERROR,h=o.getStatus();if(!c||ZU(h,this.additionalRetryCodes_)&&this.retry){const y=o.getErrorCode()===Sa.ABORT;r(!1,new Bh(!1,null,y));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new Bh(p,o))})},t=(r,i)=>{const o=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());JU(h)?o(h):o()}catch(h){l(h)}else if(c!==null){const h=Yv();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?lP():BU();l(h)}else{const h=UU();l(h)}};this.canceled_?t(!1,new Bh(!1,null,!0)):this.backoffId_=QU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function t6(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function n6(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function r6(n,e){e&&(n["X-Firebase-GMPID"]=e)}function i6(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function s6(n,e,t,r,i,o,l=!0,c=!1){const h=uP(n.urlParams),p=n.url+h,y=Object.assign({},n.headers);return r6(y,e),t6(y,t),n6(y,o),i6(y,r),new e6(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o6(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function a6(...n){const e=o6();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Xv())return new Blob(n);throw new tn(en.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function l6(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u6(n){if(typeof atob>"u")throw WU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wg{constructor(e,t){this.data=e,this.contentType=t||null}}function c6(n,e){switch(n){case es.RAW:return new wg(cP(e));case es.BASE64:case es.BASE64URL:return new wg(dP(n,e));case es.DATA_URL:return new wg(h6(e),f6(e))}throw Yv()}function cP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,l=n.charCodeAt(++t);r=65536|(o&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function d6(n){let e;try{e=decodeURIComponent(n)}catch{throw Cc(es.DATA_URL,"Malformed data URL.")}return cP(e)}function dP(n,e){switch(n){case es.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Cc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case es.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Cc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=u6(e)}catch(i){throw i.message.includes("polyfill")?i:Cc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class hP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Cc(es.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=p6(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function h6(n){const e=new hP(n);return e.base64?dP(es.BASE64,e.rest):d6(e.rest)}function f6(n){return new hP(n).contentType}function p6(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,t){let r=0,i="";yI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(yI(this.data_)){const r=this.data_,i=l6(r,e,t);return i===null?null:new So(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new So(r,!0)}}static getBlob(...e){if(Xv()){const t=e.map(r=>r instanceof So?r.data_:r);return new So(a6.apply(null,t))}else{const t=e.map(l=>Jv(l)?c6(es.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[o++]=l[c]}),new So(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fP(n){let e;try{e=JSON.parse(n)}catch{return null}return XU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function g6(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function pP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(n,e){return e}class mr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||y6}}let zh=null;function v6(n){return!Jv(n)||n.length<2?n:pP(n)}function mP(){if(zh)return zh;const n=[];n.push(new mr("bucket")),n.push(new mr("generation")),n.push(new mr("metageneration")),n.push(new mr("name","fullPath",!0));function e(o,l){return v6(l)}const t=new mr("name");t.xform=e,n.push(t);function r(o,l){return l!==void 0?Number(l):l}const i=new mr("size");return i.xform=r,n.push(i),n.push(new mr("timeCreated")),n.push(new mr("updated")),n.push(new mr("md5Hash",null,!0)),n.push(new mr("cacheControl",null,!0)),n.push(new mr("contentDisposition",null,!0)),n.push(new mr("contentEncoding",null,!0)),n.push(new mr("contentLanguage",null,!0)),n.push(new mr("contentType",null,!0)),n.push(new mr("metadata","customMetadata",!0)),zh=n,zh}function _6(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new Jr(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function w6(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const l=t[o];r[l.local]=l.xform(r,e[l.server])}return _6(r,n),r}function gP(n,e,t){const r=fP(e);return r===null?null:w6(n,r,t)}function E6(n,e,t,r){const i=fP(e);if(i===null||!Jv(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const l=encodeURIComponent;return o.split(",").map(p=>{const y=n.bucket,g=n.fullPath,w="/b/"+l(y)+"/o/"+l(g),b=Zv(w,t,r),k=uP({alt:"media",token:p});return b+k})[0]}function T6(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class yP{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n){if(!n)throw Yv()}function I6(n,e){function t(r,i){const o=gP(n,i,e);return vP(o!==null),o}return t}function S6(n,e){function t(r,i){const o=gP(n,i,e);return vP(o!==null),E6(o,i,n.host,n._protocol)}return t}function _P(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=MU():i=LU():t.getStatus()===402?i=VU(n.bucket):t.getStatus()===403?i=FU(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function b6(n){const e=_P(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=OU(n.path)),o.serverResponse=i.serverResponse,o}return t}function R6(n,e,t){const r=e.fullServerUrl(),i=Zv(r,n.host,n._protocol),o="GET",l=n.maxOperationRetryTime,c=new yP(i,o,S6(n,t),l);return c.errorHandler=b6(e),c}function A6(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function P6(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=A6(null,e)),r}function k6(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let Z="";for(let oe=0;oe<2;oe++)Z=Z+Math.random().toString().slice(2);return Z}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const p=P6(e,r,i),y=T6(p,t),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+h+"--",b=So.getBlob(g,r,w);if(b===null)throw HU();const k={name:p.fullPath},L=Zv(o,n.host,n._protocol),D="POST",X=n.maxUploadRetryTime,K=new yP(L,D,I6(n,t),X);return K.urlParams=k,K.headers=l,K.body=b.uploadData(),K.errorHandler=_P(e),K}class C6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,o){if(this.sent_)throw ac("cannot .send() more than once");if(us(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),o!==void 0)for(const l in o)o.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,o[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ac("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ac("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ac("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ac("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class x6 extends C6{initXhr(){this.xhr_.responseType="text"}}function wP(){return new x6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t){this._service=e,t instanceof Jr?this._location=t:this._location=Jr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fa(e,t)}get root(){const e=new Jr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pP(this._location.path)}get storage(){return this._service}get parent(){const e=m6(this._location.path);if(e===null)return null;const t=new Jr(this._location.bucket,e);return new Fa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw KU(e)}}function D6(n,e,t){n._throwIfRoot("uploadBytes");const r=k6(n.storage,n._location,mP(),new So(e,!0),t);return n.storage.makeRequestWithTokens(r,wP).then(i=>({metadata:i,ref:n}))}function N6(n){n._throwIfRoot("getDownloadURL");const e=R6(n.storage,n._location,mP());return n.storage.makeRequestWithTokens(e,wP).then(t=>{if(t===null)throw qU();return t})}function O6(n,e){const t=g6(n._location.path,e),r=new Jr(n._location.bucket,t);return new Fa(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V6(n){return/^[A-Za-z]+:\/\//.test(n)}function L6(n,e){return new Fa(n,e)}function EP(n,e){if(n instanceof e_){const t=n;if(t._bucket==null)throw $U();const r=new Fa(t,t._bucket);return e!=null?EP(r,e):r}else return e!==void 0?O6(n,e):n}function M6(n,e){if(e&&V6(e)){if(n instanceof e_)return L6(n,e);throw hy("To use ref(service, url), the first argument must be a Storage instance.")}else return EP(n,e)}function _I(n,e){const t=e==null?void 0:e[aP];return t==null?null:Jr.makeFromBucketSpec(t,n)}function F6(n,e,t,r={}){n.host=`${e}:${t}`;const i=us(e);i&&($f(`https://${n.host}/b`),Hf("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(n._overrideAuthToken=typeof o=="string"?o:PS(o,n.app.options.projectId))}class e_{constructor(e,t,r,i,o,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=l,this._bucket=null,this._host=oP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DU,this._maxUploadRetryTime=NU,this._requests=new Set,i!=null?this._bucket=Jr.makeFromBucketSpec(i,this._host):this._bucket=_I(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jr.makeFromBucketSpec(this._url,e):this._bucket=_I(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){vI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){vI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fa(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new GU(lP());{const l=s6(e,this._appId,r,i,t,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const wI="@firebase/storage",EI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TP="storage";function U6(n,e,t){return n=at(n),D6(n,e,t)}function B6(n){return n=at(n),N6(n)}function z6(n,e){return n=at(n),M6(n,e)}function j6(n=au(),e){n=at(n);const r=cs(n,TP).getImmediate({identifier:e}),i=xy("storage");return i&&$6(r,...i),r}function $6(n,e,t,r={}){F6(n,e,t,r)}function H6(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new e_(t,r,i,e,za)}function q6(){Lr(new _r(TP,H6,"PUBLIC").setMultipleInstances(!0)),xn(wI,EI,""),xn(wI,EI,"esm2020")}q6();const vc={apiKey:"AIzaSyA2W9m7u415haZwLdIidqNMYbP3rJF_J2k",authDomain:"vosl12.firebaseapp.com",projectId:"vosl12",storageBucket:"vosl12.firebasestorage.app",messagingSenderId:"23089939460",appId:"1:23089939460:web:fc0efbea5db8290f6be151"},IP=!!(vc.apiKey&&vc.authDomain&&vc.projectId&&vc.appId),Tt=IP;let or;IP&&(or=pT().length?pT()[0]:LS(vc));const Nr=or?yL(or):void 0,ot=or?QF(or):void 0,TI=or?new Cs:void 0;let W6;const K6=or?j6(or):void 0,G6=or?XN(or):void 0;if(or){nV(Nr,fb).catch(()=>{});try{typeof window<"u"&&(W6=AU(or))}catch{}try{YF(ot).catch(()=>{})}catch{}}/*! Capacitor: https://capacitorjs.com/ - MIT License */const Q6=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(o,l)=>{t.platforms.set(o,l)},i=o=>{t.platforms.has(o)&&(t.currentPlatform=t.platforms.get(o))};return t.addPlatform=r,t.setPlatform=i,t},Y6=n=>n.CapacitorPlatforms=Q6(n),SP=Y6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});SP.addPlatform;SP.setPlatform;var ou;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(ou||(ou={}));class Eg extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const J6=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},X6=n=>{var e,t,r,i,o;const l=n.CapacitorCustomPlatform||null,c=n.Capacitor||{},h=c.Plugins=c.Plugins||{},p=n.CapacitorPlatforms,y=()=>l!==null?l.name:J6(n),g=((e=p==null?void 0:p.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||y,w=()=>g()!=="web",b=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||w,k=I=>{const S=oe.get(I);return!!(S!=null&&S.platforms.has(g())||X(I))},L=((r=p==null?void 0:p.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||k,D=I=>{var S;return(S=c.PluginHeaders)===null||S===void 0?void 0:S.find(A=>A.name===I)},X=((i=p==null?void 0:p.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||D,K=I=>n.console.error(I),Z=(I,S,A)=>Promise.reject(`${A} does not have an implementation of "${S}".`),oe=new Map,ie=(I,S={})=>{const A=oe.get(I);if(A)return console.warn(`Capacitor plugin "${I}" already registered. Cannot register plugins twice.`),A.proxy;const V=g(),N=X(I);let F;const P=async()=>(!F&&V in S?F=typeof S[V]=="function"?F=await S[V]():F=S[V]:l!==null&&!F&&"web"in S&&(F=typeof S.web=="function"?F=await S.web():F=S.web),F),Be=(ne,O)=>{var G,re;if(N){const de=N==null?void 0:N.methods.find(_e=>O===_e.name);if(de)return de.rtype==="promise"?_e=>c.nativePromise(I,O.toString(),_e):(_e,we)=>c.nativeCallback(I,O.toString(),_e,we);if(ne)return(G=ne[O])===null||G===void 0?void 0:G.bind(ne)}else{if(ne)return(re=ne[O])===null||re===void 0?void 0:re.bind(ne);throw new Eg(`"${I}" plugin is not implemented on ${V}`,ou.Unimplemented)}},ze=ne=>{let O;const G=(...re)=>{const de=P().then(_e=>{const we=Be(_e,ne);if(we){const Ce=we(...re);return O=Ce==null?void 0:Ce.remove,Ce}else throw new Eg(`"${I}.${ne}()" is not implemented on ${V}`,ou.Unimplemented)});return ne==="addListener"&&(de.remove=async()=>O()),de};return G.toString=()=>`${ne.toString()}() { [capacitor code] }`,Object.defineProperty(G,"name",{value:ne,writable:!1,configurable:!1}),G},fe=ze("addListener"),be=ze("removeListener"),$=(ne,O)=>{const G=fe({eventName:ne},O),re=async()=>{const _e=await G;be({eventName:ne,callbackId:_e},O)},de=new Promise(_e=>G.then(()=>_e({remove:re})));return de.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await re()},de},pe=new Proxy({},{get(ne,O){switch(O){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return N?$:fe;case"removeListener":return be;default:return ze(O)}}});return h[I]=pe,oe.set(I,{name:I,proxy:pe,platforms:new Set([...Object.keys(S),...N?[V]:[]])}),pe},ue=((o=p==null?void 0:p.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||ie;return c.convertFileSrc||(c.convertFileSrc=I=>I),c.getPlatform=g,c.handleError=K,c.isNativePlatform=b,c.isPluginAvailable=L,c.pluginMethodNoop=Z,c.registerPlugin=ue,c.Exception=Eg,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},Z6=n=>n.Capacitor=X6(n),ed=Z6(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),bP=ed.registerPlugin;ed.Plugins;class RP{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(t),this.retainedEventArguments[e]=o}return}i.forEach(o=>o(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new ed.Exception(e,ou.Unimplemented)}unavailable(e="not available"){return new ed.Exception(e,ou.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const II=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),SI=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class e3 extends RP{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=SI(i).trim(),o=SI(o).trim(),t[i]=o}),t}async setCookie(e){try{const t=II(e.key),r=II(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${o}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}bP("CapacitorCookies",{web:()=>new e3});const t3=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),n3=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,o,l)=>(i[o]=n[e[l]],i),{})},r3=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[o,l]=i;let c,h;return Array.isArray(l)?(h="",l.forEach(p=>{c=e?encodeURIComponent(p):p,h+=`${o}=${c}&`}),h.slice(0,-1)):(c=e?encodeURIComponent(l):l,h=`${o}=${c}`),`${r}&${h}`},"").substr(1):null,i3=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=n3(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[l,c]of Object.entries(n.data||{}))o.set(l,c);t.body=o.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const o=new FormData;if(n.data instanceof FormData)n.data.forEach((c,h)=>{o.append(h,c)});else for(const c of Object.keys(n.data))o.append(c,n.data[c]);t.body=o;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class s3 extends RP{async request(e){const t=i3(e,e.webFetchExtra),r=r3(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,o=await fetch(i,t),l=o.headers.get("content-type")||"";let{responseType:c="text"}=o.ok?e:{};l.includes("application/json")&&(c="json");let h,p;switch(c){case"arraybuffer":case"blob":p=await o.blob(),h=await t3(p);break;case"json":h=await o.json();break;case"document":case"text":default:h=await o.text()}const y={};return o.headers.forEach((g,w)=>{y[w]=g}),{data:h,headers:y,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}bP("CapacitorHttp",{web:()=>new s3});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3="/firebase-messaging-sw.js",a3="/firebase-cloud-messaging-push-scope",AP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",l3="https://fcmregistrations.googleapis.com/v1",PP="google.c.a.c_id",u3="google.c.a.c_l",c3="google.c.a.ts",d3="google.c.a.e",bI=1e4;var RI;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(RI||(RI={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var td;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(td||(td={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function h3(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg="fcm_token_details_db",f3=5,AI="fcm_token_object_Store";async function p3(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(o=>o.name).includes(Tg))return null;let e=null;return(await Kf(Tg,f3,{upgrade:async(r,i,o,l)=>{if(i<2||!r.objectStoreNames.contains(AI))return;const c=l.objectStore(AI),h=await c.index("fcmSenderId").get(n);if(await c.clear(),!!h){if(i===2){const p=h;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:p.createTime??Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:ks(p.vapidKey)}}}else if(i===3){const p=h;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:ks(p.auth),p256dh:ks(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:ks(p.vapidKey)}}}else if(i===4){const p=h;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:ks(p.auth),p256dh:ks(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:ks(p.vapidKey)}}}}}})).close(),await ig(Tg),await ig("fcm_vapid_details_db"),await ig("undefined"),m3(e)?e:null}function m3(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3="firebase-messaging-database",y3=1,nd="firebase-messaging-store";let Ig=null;function kP(){return Ig||(Ig=Kf(g3,y3,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(nd)}}})),Ig}async function v3(n){const e=CP(n),r=await(await kP()).transaction(nd).objectStore(nd).get(e);if(r)return r;{const i=await p3(n.appConfig.senderId);if(i)return await t_(n,i),i}}async function t_(n,e){const t=CP(n),i=(await kP()).transaction(nd,"readwrite");return await i.objectStore(nd).put(e,t),await i.done,e}function CP({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},sr=new Uo("messaging","Messaging",_3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w3(n,e){const t=await r_(n),r=xP(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let o;try{o=await(await fetch(n_(n.appConfig),i)).json()}catch(l){throw sr.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(o.error){const l=o.error.message;throw sr.create("token-subscribe-failed",{errorInfo:l})}if(!o.token)throw sr.create("token-subscribe-no-token");return o.token}async function E3(n,e){const t=await r_(n),r=xP(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let o;try{o=await(await fetch(`${n_(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw sr.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(o.error){const l=o.error.message;throw sr.create("token-update-failed",{errorInfo:l})}if(!o.token)throw sr.create("token-update-no-token");return o.token}async function T3(n,e){const r={method:"DELETE",headers:await r_(n)};try{const o=await(await fetch(`${n_(n.appConfig)}/${e}`,r)).json();if(o.error){const l=o.error.message;throw sr.create("token-unsubscribe-failed",{errorInfo:l})}}catch(i){throw sr.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function n_({projectId:n}){return`${l3}/projects/${n}/registrations`}async function r_({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function xP({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==AP&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I3=10080*60*1e3;async function S3(n){const e=await R3(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ks(e.getKey("auth")),p256dh:ks(e.getKey("p256dh"))},r=await v3(n.firebaseDependencies);if(r){if(A3(r.subscriptionOptions,t))return Date.now()>=r.createTime+I3?b3(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await T3(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return PI(n.firebaseDependencies,t)}else return PI(n.firebaseDependencies,t)}async function b3(n,e){try{const t=await E3(n.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await t_(n.firebaseDependencies,r),t}catch(t){throw t}}async function PI(n,e){const r={token:await w3(n,e),createTime:Date.now(),subscriptionOptions:e};return await t_(n,r),r.token}async function R3(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:h3(e)})}function A3(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return P3(e,n),k3(e,n),C3(e,n),e}function P3(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const o=e.notification.icon;o&&(n.notification.icon=o)}function k3(n,e){e.data&&(n.data=e.data)}function C3(n,e){var i,o,l,c;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const t=((o=e.fcmOptions)==null?void 0:o.link)??((l=e.notification)==null?void 0:l.click_action);t&&(n.fcmOptions.link=t);const r=(c=e.fcmOptions)==null?void 0:c.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(n){return typeof n=="object"&&!!n&&PP in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D3(n){if(!n||!n.options)throw Sg("App Configuration Object");if(!n.name)throw Sg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Sg(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Sg(n){return sr.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=D3(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O3(n){try{n.swRegistration=await navigator.serviceWorker.register(o3,{scope:a3}),n.swRegistration.update().catch(()=>{}),await V3(n.swRegistration)}catch(e){throw sr.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function V3(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${bI} ms`)),bI),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var l;((l=o.target)==null?void 0:l.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L3(n,e){if(!e&&!n.swRegistration&&await O3(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw sr.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M3(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=AP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DP(n,e){if(!navigator)throw sr.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw sr.create("permission-blocked");return await M3(n,e==null?void 0:e.vapidKey),await L3(n,e==null?void 0:e.serviceWorkerRegistration),S3(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F3(n,e,t){const r=U3(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[PP],message_name:t[u3],message_time:t[c3],message_device_time:Math.floor(Date.now()/1e3)})}function U3(n){switch(n){case td.NOTIFICATION_CLICKED:return"notification_open";case td.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B3(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===td.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(kI(t)):n.onMessageHandler.next(kI(t)));const r=t.data;x3(r)&&r[d3]==="1"&&await F3(n,t.messageType,r)}const CI="@firebase/messaging",xI="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=n=>{const e=new N3(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>B3(e,t)),e},j3=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>DP(e,r)}};function $3(){Lr(new _r("messaging",z3,"PUBLIC")),Lr(new _r("messaging-internal",j3,"PRIVATE")),xn(CI,xI),xn(CI,xI,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i_(){try{await Dy()}catch{return!1}return typeof window<"u"&&qf()&&NS()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n,e){if(!navigator)throw sr.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n=au()){return i_().then(e=>{if(!e)throw sr.create("unsupported-browser")},e=>{throw sr.create("indexed-db-unsupported")}),cs(at(n),"messaging").getImmediate()}async function OP(n,e){return n=at(n),DP(n,e)}function q3(n,e){return n=at(n),H3(n,e)}$3();const rd=[{id:"l1",userId:"2",name:"Dr. Sarah Johnson",subject:"Mathematics",price:45,bio:"PhD in Mathematics with 10+ years of teaching experience. Specialized in Calculus and Linear Algebra.",rating:4.8,totalReviews:124,avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150",availability:["Mon","Wed","Fri"]},{id:"l2",userId:"6",name:"Prof. Michael Chen",subject:"Physics",price:50,bio:"Expert in Quantum Physics and Mechanics. Published researcher and passionate educator.",rating:4.9,totalReviews:98,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150",availability:["Tue","Thu","Sat"]},{id:"l3",userId:"7",name:"Dr. Emily Davis",subject:"Chemistry",price:40,bio:"Organic Chemistry specialist with hands-on lab experience. Making chemistry fun and easy!",rating:4.7,totalReviews:156,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150",availability:["Mon","Tue","Thu"]},{id:"l4",userId:"8",name:"James Wilson",subject:"Computer Science",price:55,bio:"Full-stack developer and CS educator. Specializing in Python, JavaScript, and Data Structures.",rating:4.9,totalReviews:203,avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150",availability:["Mon","Wed","Fri","Sat"]},{id:"l5",userId:"9",name:"Dr. Maria Garcia",subject:"Biology",price:42,bio:"Molecular Biology PhD. Passionate about genetics and cell biology. Patient and thorough teaching style.",rating:4.6,totalReviews:87,avatar:"https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=150",availability:["Tue","Wed","Fri"]},{id:"l6",userId:"10",name:"David Brown",subject:"English Literature",price:38,bio:"MA in English Literature. Specializing in Shakespeare, Poetry, and Essay Writing.",rating:4.8,totalReviews:142,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150",availability:["Mon","Tue","Thu","Sat"]}],W3=()=>["09:00 AM","10:00 AM","11:00 AM","01:00 PM","02:00 PM","03:00 PM","04:00 PM"].map((e,t)=>({id:`slot-${t}`,time:e,available:Math.random()>.3})),DI=rd.flatMap(n=>{const e=[];for(let t=0;t<14;t++){const r=new Date;r.setDate(r.getDate()+t),e.push({id:`avail-${n.id}-${t}`,lecturerId:n.id,date:r.toISOString().split("T")[0],timeSlots:W3()})}return e}),RB=n=>{switch(n){case"STUDENT":return"/student/dashboard";case"LECTURER":return"/lecturer/dashboard";case"ADMIN":return"/admin/dashboard";case"SUPER_ADMIN":return"/super-admin/dashboard";case"DEVELOPER":return"/developer/dashboard";default:return"/login"}},AB=async()=>{if(!Tt)return rd;const n=await ei(Zt(ot,"lecturers"));if(n.empty){for(const t of rd)await MA(qn(Zt(ot,"lecturers"),t.id),t);return(await ei(Zt(ot,"lecturers"))).docs.map(t=>({id:t.id,...t.data()}))}return n.docs.map(e=>({id:e.id,...e.data()}))},PB=async n=>{if(!Tt)return rd.find(r=>r.id===n)||null;const e=await jv(qn(ot,"lecturers",n));return e.exists()?{id:e.id,...e.data()}:null},kB=async n=>{if(!Tt)return rd.find(o=>o.userId===n)||null;const e=Va(Zt(ot,"lecturers"),su("userId","==",n),i4(1)),t=await ei(e);if(t.empty)return null;const r=t.docs[0];return{id:r.id,...r.data()}},CB=async(n,e)=>{Tt&&await Ha(qn(ot,"lecturers",n),{calendarIcsUrl:e})},xB=async(n,e)=>{Tt&&await Ha(qn(ot,"lecturers",n),{weeklyTemplate:e})},DB=async(n,e=7)=>{if(!Tt)return;await eO(G6,"publishAvailability")({lecturerId:n,days:e})},NB=async n=>{if(!Tt)return DI.filter(i=>i.lecturerId===n);const e=Zt(ot,"availability"),t=Va(e,su("lecturerId","==",n),Zc("date","asc")),r=await ei(t);if(r.empty){const i=DI.filter(l=>l.lecturerId===n);for(const l of i)await Ls(e,l);return(await ei(Va(e,su("lecturerId","==",n),Zc("date","asc")))).docs.map(l=>({id:l.id,...l.data()}))}return r.docs.map(i=>({id:i.id,...i.data()}))},OB=async(n,e,t)=>{if(!Tt)return;const r=qn(ot,"availability",n);await LA(ot,async i=>{const o=await i.get(r);if(!o.exists())throw new Error("Availability not found");const l=o.data(),c=(l.timeSlots||[]).findIndex(p=>p.id===e&&p.available);if(c===-1)throw new Error("Slot unavailable");l.timeSlots[c].available=!1,i.update(r,{timeSlots:l.timeSlots});const h=qn(Zt(ot,"bookings"));i.set(h,{...t,availabilityId:n,slotId:e,createdAt:new Date().toISOString()})})},VB=async(n,e)=>{if(!Tt)return"";const t=z6(K6,`receipts/${n}/${Date.now()}-${e.name}`);return await U6(t,e),await B6(t)},LB=async n=>{if(!Tt)return[];const e=Va(Zt(ot,"bookings"),su("studentId","==",n),Zc("date","asc"));return(await ei(e)).docs.map(r=>({id:r.id,...r.data()}))},MB=async()=>{if(!Tt)return[];const n=Va(Zt(ot,"bookings"),su("paymentStatus","==","PENDING"));return(await ei(n)).docs.map(t=>({id:t.id,...t.data()}))},FB=async(n,e)=>{if(!Tt)return;const t=qn(ot,"bookings",n);await Ha(t,e);try{await Ls(Zt(t,"activity"),{type:"STATUS_UPDATE",patch:e,at:new Date().toISOString()}),await Ls(Zt(ot,"notificationEvents"),{type:"BOOKING_UPDATED",bookingId:n,at:new Date().toISOString(),patch:e}),await Ls(Zt(ot,"emailOutbox"),{type:"BOOKING_UPDATED",bookingId:n,at:new Date().toISOString(),patch:e})}catch{}},UB=async n=>{if(!Tt)return[];const e=Va(Zt(ot,"bookings"),su("lecturerId","==",n),Zc("date","asc"));return(await ei(e)).docs.map(r=>({id:r.id,...r.data()}))},BB=async()=>Tt?(await ei(Zt(ot,"users"))).docs.map(e=>({id:e.id,...e.data()})):[],zB=async(n,e)=>{Tt&&await Ha(qn(ot,"users",n),{role:e})},jB=async()=>Tt?(await ei(Zt(ot,"bookings"))).docs.map(e=>({id:e.id,...e.data()})):[],$B=async(n,e,t,r,i,o,l)=>{if(!Tt)return;const c=qn(ot,"availability",r),h=qn(ot,"bookings",n);await LA(ot,async p=>{const y=await p.get(c);if(!y.exists())throw new Error("New availability not found");const g=y.data(),w=(g.timeSlots||[]).findIndex(b=>b.id===i&&b.available);if(w===-1)throw new Error("New slot unavailable");if(g.timeSlots[w].available=!1,p.update(c,{timeSlots:g.timeSlots}),e&&t){const b=qn(ot,"availability",e),k=await p.get(b);if(k.exists()){const L=k.data(),D=(L.timeSlots||[]).findIndex(X=>X.id===t);D!==-1&&(L.timeSlots[D].available=!0,p.update(b,{timeSlots:L.timeSlots}))}}p.update(h,{date:o,time:l,availabilityId:r,slotId:i,status:"CONFIRMED"})});try{await Ls(Zt(h,"activity"),{type:"RESCHEDULE",newDate:o,newTime:l,at:new Date().toISOString()})}catch{}},VP=async(n,e)=>{if(Tt)try{await Ha(qn(ot,"users",n),{fcmTokens:{[e]:!0},lastTokenAt:new Date().toISOString()})}catch{}},HB=async n=>{if(!Tt)return null;const e=await jv(qn(ot,"bookings",n));return e.exists()?{id:e.id,...e.data()}:null},qB=async n=>Tt?(await ei(Va(Zt(ot,"bookings",n,"activity"),Zc("at","asc")))).docs.map(t=>({id:t.id,...t.data()})):[],WB=async()=>Tt?(await ei(Zt(ot,"users"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>!!e.kycStatus):[],KB=async(n,e,t)=>{if(Tt){await Ha(qn(ot,"users",n),{kycStatus:e});try{await Ls(Zt(ot,"users",n,"kycAudit"),{status:e,reason:t||null,at:new Date().toISOString()}),await Ls(Zt(ot,"emailOutbox"),{type:"KYC_"+e,toUserId:n,at:new Date().toISOString(),reason:t||null})}catch{}}},GB=async(n,e,t)=>{Tt&&await Ls(Zt(ot,"support"),{userId:n,subject:e,message:t,status:"OPEN",tags:[],assignedTo:null,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})},QB=async()=>Tt?(await ei(Zt(ot,"support"))).docs.map(e=>({id:e.id,...e.data()})):[],YB=async(n,e)=>{Tt&&await Ha(qn(ot,"support",n),{...e,updatedAt:new Date().toISOString()})},JB=async(n,e="Test notification",t="Push delivery test")=>{Tt&&await Ls(Zt(ot,"notificationEvents"),{type:"TEST_NOTIFICATION",toUserId:n,title:e,body:t,at:new Date().toISOString()})};var K3=$I();const G3=jI(K3);function Q3(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const Y3=n=>{switch(n){case"success":return Z3;case"info":return t5;case"warning":return e5;case"error":return n5;default:return null}},J3=Array(12).fill(0),X3=({visible:n,className:e})=>ve.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ve.createElement("div",{className:"sonner-spinner"},J3.map((t,r)=>ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Z3=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),e5=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),t5=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),n5=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),r5=ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),i5=()=>{const[n,e]=ve.useState(document.hidden);return ve.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let fy=1;class s5{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,o=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:fy++,l=this.toasts.find(h=>h.id===o),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(h=>h.id===o?(this.publish({...h,...e,id:o,title:r}),{...h,...e,id:o,dismissible:c,title:r}):h):this.addToast({title:r,...i,dismissible:c,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let o=r!==void 0,l;const c=i.then(async p=>{if(l=["resolve",p],ve.isValidElement(p))o=!1,this.create({id:r,type:"default",message:p});else if(a5(p)&&!p.ok){o=!1;const g=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,w=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,k=typeof g=="object"&&!ve.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:w,...k})}else if(p instanceof Error){o=!1;const g=typeof t.error=="function"?await t.error(p):t.error,w=typeof t.description=="function"?await t.description(p):t.description,k=typeof g=="object"&&!ve.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:w,...k})}else if(t.success!==void 0){o=!1;const g=typeof t.success=="function"?await t.success(p):t.success,w=typeof t.description=="function"?await t.description(p):t.description,k=typeof g=="object"&&!ve.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:w,...k})}}).catch(async p=>{if(l=["reject",p],t.error!==void 0){o=!1;const y=typeof t.error=="function"?await t.error(p):t.error,g=typeof t.description=="function"?await t.description(p):t.description,b=typeof y=="object"&&!ve.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:g,...b})}}).finally(()=>{o&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,y)=>c.then(()=>l[0]==="reject"?y(l[1]):p(l[1])).catch(y));return typeof r!="string"&&typeof r!="number"?{unwrap:h}:Object.assign(r,{unwrap:h})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||fy++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Dr=new s5,o5=(n,e)=>{const t=(e==null?void 0:e.id)||fy++;return Dr.addToast({title:n,...e,id:t}),t},a5=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",l5=o5,u5=()=>Dr.toasts,c5=()=>Dr.getActiveToasts(),la=Object.assign(l5,{success:Dr.success,info:Dr.info,warning:Dr.warning,error:Dr.error,custom:Dr.custom,message:Dr.message,promise:Dr.promise,dismiss:Dr.dismiss,loading:Dr.loading},{getHistory:u5,getToasts:c5});Q3("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function jh(n){return n.label!==void 0}const d5=3,h5="24px",f5="16px",NI=4e3,p5=356,m5=14,g5=45,y5=200;function Yi(...n){return n.filter(Boolean).join(" ")}function v5(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const _5=n=>{var e,t,r,i,o,l,c,h,p;const{invert:y,toast:g,unstyled:w,interacting:b,setHeights:k,visibleToasts:L,heights:D,index:X,toasts:K,expanded:Z,removeToast:oe,defaultRichColors:ie,closeButton:ue,style:I,cancelButtonStyle:S,actionButtonStyle:A,className:V="",descriptionClassName:N="",duration:F,position:P,gap:Be,expandByDefault:ze,classNames:fe,icons:be,closeButtonAriaLabel:$="Close toast"}=n,[pe,ne]=ve.useState(null),[O,G]=ve.useState(null),[re,de]=ve.useState(!1),[_e,we]=ve.useState(!1),[Ce,qe]=ve.useState(!1),[Ze,kt]=ve.useState(!1),[wr,_t]=ve.useState(!1),[Nn,Mr]=ve.useState(0),[Ws,On]=ve.useState(0),ar=ve.useRef(g.duration||F||NI),Oi=ve.useRef(null),ft=ve.useRef(null),Nt=X===0,lr=X+1<=L,nn=g.type,Er=g.dismissible!==!1,Tr=g.className||"",Wn=g.descriptionClassName||"",Fr=ve.useMemo(()=>D.findIndex(je=>je.toastId===g.id)||0,[D,g.id]),ni=ve.useMemo(()=>{var je;return(je=g.closeButton)!=null?je:ue},[g.closeButton,ue]),rn=ve.useMemo(()=>g.duration||F||NI,[g.duration,F]),In=ve.useRef(0),Vn=ve.useRef(0),Ur=ve.useRef(0),ur=ve.useRef(null),[ri,Sn]=P.split("-"),yi=ve.useMemo(()=>D.reduce((je,St,Ft)=>Ft>=Fr?je:je+St.height,0),[D,Fr]),Ln=i5(),vi=g.invert||y,Ir=nn==="loading";Vn.current=ve.useMemo(()=>Fr*Be+yi,[Fr,yi]),ve.useEffect(()=>{ar.current=rn},[rn]),ve.useEffect(()=>{de(!0)},[]),ve.useEffect(()=>{const je=ft.current;if(je){const St=je.getBoundingClientRect().height;return On(St),k(Ft=>[{toastId:g.id,height:St,position:g.position},...Ft]),()=>k(Ft=>Ft.filter(Ht=>Ht.toastId!==g.id))}},[k,g.id]),ve.useLayoutEffect(()=>{if(!re)return;const je=ft.current,St=je.style.height;je.style.height="auto";const Ft=je.getBoundingClientRect().height;je.style.height=St,On(Ft),k(Ht=>Ht.find(Ot=>Ot.toastId===g.id)?Ht.map(Ot=>Ot.toastId===g.id?{...Ot,height:Ft}:Ot):[{toastId:g.id,height:Ft,position:g.position},...Ht])},[re,g.title,g.description,k,g.id]);const bn=ve.useCallback(()=>{we(!0),Mr(Vn.current),k(je=>je.filter(St=>St.toastId!==g.id)),setTimeout(()=>{oe(g)},y5)},[g,oe,k,Vn]);ve.useEffect(()=>{if(g.promise&&nn==="loading"||g.duration===1/0||g.type==="loading")return;let je;return Z||b||Ln?(()=>{if(Ur.current<In.current){const Ht=new Date().getTime()-In.current;ar.current=ar.current-Ht}Ur.current=new Date().getTime()})():(()=>{ar.current!==1/0&&(In.current=new Date().getTime(),je=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),bn()},ar.current))})(),()=>clearTimeout(je)},[Z,b,g,nn,Ln,bn]),ve.useEffect(()=>{g.delete&&bn()},[bn,g.delete]);function Kn(){var je;if(be!=null&&be.loading){var St;return ve.createElement("div",{className:Yi(fe==null?void 0:fe.loader,g==null||(St=g.classNames)==null?void 0:St.loader,"sonner-loader"),"data-visible":nn==="loading"},be.loading)}return ve.createElement(X3,{className:Yi(fe==null?void 0:fe.loader,g==null||(je=g.classNames)==null?void 0:je.loader),visible:nn==="loading"})}const Sr=g.icon||(be==null?void 0:be[nn])||Y3(nn);var It,Vi;return ve.createElement("li",{tabIndex:0,ref:ft,className:Yi(V,Tr,fe==null?void 0:fe.toast,g==null||(e=g.classNames)==null?void 0:e.toast,fe==null?void 0:fe.default,fe==null?void 0:fe[nn],g==null||(t=g.classNames)==null?void 0:t[nn]),"data-sonner-toast":"","data-rich-colors":(It=g.richColors)!=null?It:ie,"data-styled":!(g.jsx||g.unstyled||w),"data-mounted":re,"data-promise":!!g.promise,"data-swiped":wr,"data-removed":_e,"data-visible":lr,"data-y-position":ri,"data-x-position":Sn,"data-index":X,"data-front":Nt,"data-swiping":Ce,"data-dismissible":Er,"data-type":nn,"data-invert":vi,"data-swipe-out":Ze,"data-swipe-direction":O,"data-expanded":!!(Z||ze&&re),style:{"--index":X,"--toasts-before":X,"--z-index":K.length-X,"--offset":`${_e?Nn:Vn.current}px`,"--initial-height":ze?"auto":`${Ws}px`,...I,...g.style},onDragEnd:()=>{qe(!1),ne(null),ur.current=null},onPointerDown:je=>{Ir||!Er||(Oi.current=new Date,Mr(Vn.current),je.target.setPointerCapture(je.pointerId),je.target.tagName!=="BUTTON"&&(qe(!0),ur.current={x:je.clientX,y:je.clientY}))},onPointerUp:()=>{var je,St,Ft;if(Ze||!Er)return;ur.current=null;const Ht=Number(((je=ft.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),an=Number(((St=ft.current)==null?void 0:St.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ot=new Date().getTime()-((Ft=Oi.current)==null?void 0:Ft.getTime()),Qt=pe==="x"?Ht:an,cr=Math.abs(Qt)/Ot;if(Math.abs(Qt)>=g5||cr>.11){Mr(Vn.current),g.onDismiss==null||g.onDismiss.call(g,g),G(pe==="x"?Ht>0?"right":"left":an>0?"down":"up"),bn(),kt(!0);return}else{var x,U;(x=ft.current)==null||x.style.setProperty("--swipe-amount-x","0px"),(U=ft.current)==null||U.style.setProperty("--swipe-amount-y","0px")}_t(!1),qe(!1),ne(null)},onPointerMove:je=>{var St,Ft,Ht;if(!ur.current||!Er||((St=window.getSelection())==null?void 0:St.toString().length)>0)return;const Ot=je.clientY-ur.current.y,Qt=je.clientX-ur.current.x;var cr;const x=(cr=n.swipeDirections)!=null?cr:v5(P);!pe&&(Math.abs(Qt)>1||Math.abs(Ot)>1)&&ne(Math.abs(Qt)>Math.abs(Ot)?"x":"y");let U={x:0,y:0};const W=te=>1/(1.5+Math.abs(te)/20);if(pe==="y"){if(x.includes("top")||x.includes("bottom"))if(x.includes("top")&&Ot<0||x.includes("bottom")&&Ot>0)U.y=Ot;else{const te=Ot*W(Ot);U.y=Math.abs(te)<Math.abs(Ot)?te:Ot}}else if(pe==="x"&&(x.includes("left")||x.includes("right")))if(x.includes("left")&&Qt<0||x.includes("right")&&Qt>0)U.x=Qt;else{const te=Qt*W(Qt);U.x=Math.abs(te)<Math.abs(Qt)?te:Qt}(Math.abs(U.x)>0||Math.abs(U.y)>0)&&_t(!0),(Ft=ft.current)==null||Ft.style.setProperty("--swipe-amount-x",`${U.x}px`),(Ht=ft.current)==null||Ht.style.setProperty("--swipe-amount-y",`${U.y}px`)}},ni&&!g.jsx&&nn!=="loading"?ve.createElement("button",{"aria-label":$,"data-disabled":Ir,"data-close-button":!0,onClick:Ir||!Er?()=>{}:()=>{bn(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Yi(fe==null?void 0:fe.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(Vi=be==null?void 0:be.close)!=null?Vi:r5):null,(nn||g.icon||g.promise)&&g.icon!==null&&((be==null?void 0:be[nn])!==null||g.icon)?ve.createElement("div",{"data-icon":"",className:Yi(fe==null?void 0:fe.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Kn():null,g.type!=="loading"?Sr:null):null,ve.createElement("div",{"data-content":"",className:Yi(fe==null?void 0:fe.content,g==null||(o=g.classNames)==null?void 0:o.content)},ve.createElement("div",{"data-title":"",className:Yi(fe==null?void 0:fe.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ve.createElement("div",{"data-description":"",className:Yi(N,Wn,fe==null?void 0:fe.description,g==null||(c=g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),ve.isValidElement(g.cancel)?g.cancel:g.cancel&&jh(g.cancel)?ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||S,onClick:je=>{jh(g.cancel)&&Er&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,je),bn())},className:Yi(fe==null?void 0:fe.cancelButton,g==null||(h=g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,ve.isValidElement(g.action)?g.action:g.action&&jh(g.action)?ve.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||A,onClick:je=>{jh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,je),!je.defaultPrevented&&bn())},className:Yi(fe==null?void 0:fe.actionButton,g==null||(p=g.classNames)==null?void 0:p.actionButton)},g.action.label):null)};function OI(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function w5(n,e){const t={};return[n,e].forEach((r,i)=>{const o=i===1,l=o?"--mobile-offset":"--offset",c=o?f5:h5;function h(p){["top","right","bottom","left"].forEach(y=>{t[`${l}-${y}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?h(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?t[`${l}-${p}`]=c:t[`${l}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):h(c)}),t}const E5=ve.forwardRef(function(e,t){const{invert:r,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:h,offset:p,mobileOffset:y,theme:g="light",richColors:w,duration:b,style:k,visibleToasts:L=d5,toastOptions:D,dir:X=OI(),gap:K=m5,icons:Z,containerAriaLabel:oe="Notifications"}=e,[ie,ue]=ve.useState([]),I=ve.useMemo(()=>Array.from(new Set([i].concat(ie.filter(O=>O.position).map(O=>O.position)))),[ie,i]),[S,A]=ve.useState([]),[V,N]=ve.useState(!1),[F,P]=ve.useState(!1),[Be,ze]=ve.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),fe=ve.useRef(null),be=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),$=ve.useRef(null),pe=ve.useRef(!1),ne=ve.useCallback(O=>{ue(G=>{var re;return(re=G.find(de=>de.id===O.id))!=null&&re.delete||Dr.dismiss(O.id),G.filter(({id:de})=>de!==O.id)})},[]);return ve.useEffect(()=>Dr.subscribe(O=>{if(O.dismiss){requestAnimationFrame(()=>{ue(G=>G.map(re=>re.id===O.id?{...re,delete:!0}:re))});return}setTimeout(()=>{G3.flushSync(()=>{ue(G=>{const re=G.findIndex(de=>de.id===O.id);return re!==-1?[...G.slice(0,re),{...G[re],...O},...G.slice(re+1)]:[O,...G]})})})}),[ie]),ve.useEffect(()=>{if(g!=="system"){ze(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ze("dark"):ze("light")),typeof window>"u")return;const O=window.matchMedia("(prefers-color-scheme: dark)");try{O.addEventListener("change",({matches:G})=>{ze(G?"dark":"light")})}catch{O.addListener(({matches:re})=>{try{ze(re?"dark":"light")}catch(de){console.error(de)}})}},[g]),ve.useEffect(()=>{ie.length<=1&&N(!1)},[ie]),ve.useEffect(()=>{const O=G=>{var re;if(o.every(we=>G[we]||G.code===we)){var _e;N(!0),(_e=fe.current)==null||_e.focus()}G.code==="Escape"&&(document.activeElement===fe.current||(re=fe.current)!=null&&re.contains(document.activeElement))&&N(!1)};return document.addEventListener("keydown",O),()=>document.removeEventListener("keydown",O)},[o]),ve.useEffect(()=>{if(fe.current)return()=>{$.current&&($.current.focus({preventScroll:!0}),$.current=null,pe.current=!1)}},[fe.current]),ve.createElement("section",{ref:t,"aria-label":`${oe} ${be}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((O,G)=>{var re;const[de,_e]=O.split("-");return ie.length?ve.createElement("ol",{key:O,dir:X==="auto"?OI():X,tabIndex:-1,ref:fe,className:h,"data-sonner-toaster":!0,"data-sonner-theme":Be,"data-y-position":de,"data-lifted":V&&ie.length>1&&!l,"data-x-position":_e,style:{"--front-toast-height":`${((re=S[0])==null?void 0:re.height)||0}px`,"--width":`${p5}px`,"--gap":`${K}px`,...k,...w5(p,y)},onBlur:we=>{pe.current&&!we.currentTarget.contains(we.relatedTarget)&&(pe.current=!1,$.current&&($.current.focus({preventScroll:!0}),$.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||pe.current||(pe.current=!0,$.current=we.relatedTarget)},onMouseEnter:()=>N(!0),onMouseMove:()=>N(!0),onMouseLeave:()=>{F||N(!1)},onDragEnd:()=>N(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},ie.filter(we=>!we.position&&G===0||we.position===O).map((we,Ce)=>{var qe,Ze;return ve.createElement(_5,{key:we.id,icons:Z,index:Ce,toast:we,defaultRichColors:w,duration:(qe=D==null?void 0:D.duration)!=null?qe:b,className:D==null?void 0:D.className,descriptionClassName:D==null?void 0:D.descriptionClassName,invert:r,visibleToasts:L,closeButton:(Ze=D==null?void 0:D.closeButton)!=null?Ze:c,interacting:F,position:O,style:D==null?void 0:D.style,unstyled:D==null?void 0:D.unstyled,classNames:D==null?void 0:D.classNames,cancelButtonStyle:D==null?void 0:D.cancelButtonStyle,actionButtonStyle:D==null?void 0:D.actionButtonStyle,closeButtonAriaLabel:D==null?void 0:D.closeButtonAriaLabel,removeToast:ne,toasts:ie.filter(kt=>kt.position==we.position),heights:S.filter(kt=>kt.position==we.position),setHeights:A,expandByDefault:l,gap:K,expanded:V,swipeDirections:e.swipeDirections})})):null}))}),LP=async()=>{if(!(typeof window>"u")&&"serviceWorker"in navigator)try{return await navigator.serviceWorker.register("/firebase-messaging-sw.js")}catch{return}},T5=async()=>{var e;if(!or||!await i_())return;const n=NP(or);try{if(typeof Notification<"u"&&Notification.permission==="granted"){const t=await LP(),r=await OP(n,{vapidKey:"BOSysDDcsobULoNKSBKPGD4BlMcoCZSwvNnKaLjqlRbFpEd9Jan-yzZIjwM5hcMJnTQGr9wV_2xKEq6GewjFIv8",serviceWorkerRegistration:t});r&&((e=Nr==null?void 0:Nr.currentUser)!=null&&e.uid)&&await VP(Nr.currentUser.uid,r)}q3(n,()=>{})}catch{}},MP=async()=>{var n;if(!or){la.error("App not initialized");return}if(!await i_()){la.error("Notifications not supported in this browser");return}try{if(typeof Notification<"u"&&await Notification.requestPermission()!=="granted"){la.error("Notifications permission denied");return}const e=NP(or),t=await LP(),r=await OP(e,{vapidKey:"BOSysDDcsobULoNKSBKPGD4BlMcoCZSwvNnKaLjqlRbFpEd9Jan-yzZIjwM5hcMJnTQGr9wV_2xKEq6GewjFIv8",serviceWorkerRegistration:t});if(!r){la.error("Failed to get device token");return}(n=Nr==null?void 0:Nr.currentUser)!=null&&n.uid?(await VP(Nr.currentUser.uid,r),la.success("Notifications enabled")):la.success("Notifications enabled for this device")}catch{la.error("Failed to enable notifications")}},FP=z.createContext(void 0),I5=({children:n})=>{const[e,t]=z.useState(null);z.useEffect(()=>{if(!Tt)return;let l=null;const c=sV(Nr,async h=>{if(!h){if(t(null),l)try{l()}catch{}return}const p=qn(ot,"users",h.uid),y=await jv(p);let g="STUDENT",w=h.displayName||h.email||"User",b=h.photoURL||void 0;if(y.exists()){const k=y.data();g=k.role||"STUDENT",w=k.name||w,b=k.avatarUrl||b}else await MA(p,{email:h.email,name:w,role:g});if(t({id:h.uid,email:h.email||"",name:w,role:g,password:"",avatar:b}),l)try{l()}catch{}l=c4(p,k=>{const L=k.data();L&&t(D=>D&&{...D,name:L.name||D.name,role:L.role||D.role,avatar:L.avatarUrl||D.avatar})});try{typeof Notification<"u"&&Notification.permission!=="granted"&&await MP()}catch{}});return()=>{if(l)try{l()}catch{}c&&c()}},[]);const r=async(l,c)=>{if(!Tt)throw new Error("Firebase is not configured. Add env vars.");await eV(Nr,l,c)},i=async()=>{if(!Tt)throw new Error("Firebase is not configured. Add env vars.");ed.isNativePlatform()?await xV(Nr,TI):await bV(Nr,TI)},o=()=>{Tt&&oV(Nr).catch(()=>{}),t(null)};return hn.jsx(FP.Provider,{value:{user:e,loginWithEmail:r,loginWithGoogle:i,logout:o,isAuthenticated:!!e},children:n})},XB=()=>{const n=z.useContext(FP);if(!n)throw new Error("useAuth must be used within AuthProvider");return n};var S5=(n,e,t,r,i,o,l,c)=>{let h=document.documentElement,p=["light","dark"];function y(b){(Array.isArray(n)?n:[n]).forEach(k=>{let L=k==="class",D=L&&o?i.map(X=>o[X]||X):i;L?(h.classList.remove(...D),h.classList.add(o&&o[b]?o[b]:b)):h.setAttribute(k,b)}),g(b)}function g(b){c&&p.includes(b)&&(h.style.colorScheme=b)}function w(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)y(r);else try{let b=localStorage.getItem(e)||t,k=l&&b==="system"?w():b;y(k)}catch{}},b5=z.createContext(void 0),R5={setTheme:n=>{},themes:[]},A5=()=>{var n;return(n=z.useContext(b5))!=null?n:R5};z.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:o,value:l,themes:c,nonce:h,scriptProps:p})=>{let y=JSON.stringify([t,e,o,n,c,l,r,i]).slice(1,-1);return z.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${S5.toString()})(${y})`}})});const P5=({...n})=>{const{theme:e="system"}=A5();return hn.jsx(E5,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...n})};function VI(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function UP(...n){return e=>{let t=!1;const r=n.map(i=>{const o=VI(i,e);return!t&&typeof o=="function"&&(t=!0),o});if(t)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():VI(n[i],null)}}}}function ZB(...n){return z.useCallback(UP(...n),n)}var BP=z.forwardRef((n,e)=>{const{children:t,...r}=n,i=z.Children.toArray(t),o=i.find(C5);if(o){const l=o.props.children,c=i.map(h=>h===o?z.Children.count(l)>1?z.Children.only(null):z.isValidElement(l)?l.props.children:null:h);return hn.jsx(py,{...r,ref:e,children:z.isValidElement(l)?z.cloneElement(l,void 0,c):null})}return hn.jsx(py,{...r,ref:e,children:t})});BP.displayName="Slot";var py=z.forwardRef((n,e)=>{const{children:t,...r}=n;if(z.isValidElement(t)){const i=D5(t),o=x5(r,t.props);return t.type!==z.Fragment&&(o.ref=e?UP(e,i):i),z.cloneElement(t,o)}return z.Children.count(t)>1?z.Children.only(null):null});py.displayName="SlotClone";var k5=({children:n})=>hn.jsx(hn.Fragment,{children:n});function C5(n){return z.isValidElement(n)&&n.type===k5}function x5(n,e){const t={...e};for(const r in e){const i=n[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?t[r]=(...c)=>{o(...c),i(...c)}:i&&(t[r]=i):r==="style"?t[r]={...i,...o}:r==="className"&&(t[r]=[i,o].filter(Boolean).join(" "))}return{...n,...t}}function D5(n){var r,i;let e=(r=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:r.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=(i=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:i.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function zP(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var i=n.length;for(e=0;e<i;e++)n[e]&&(t=zP(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function jP(){for(var n,e,t=0,r="",i=arguments.length;t<i;t++)(n=arguments[t])&&(e=zP(n))&&(r&&(r+=" "),r+=e);return r}const LI=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,MI=jP,N5=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return MI(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:i,defaultVariants:o}=e,l=Object.keys(i).map(p=>{const y=t==null?void 0:t[p],g=o==null?void 0:o[p];if(y===null)return null;const w=LI(y)||LI(g);return i[p][w]}),c=t&&Object.entries(t).reduce((p,y)=>{let[g,w]=y;return w===void 0||(p[g]=w),p},{}),h=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((p,y)=>{let{class:g,className:w,...b}=y;return Object.entries(b).every(k=>{let[L,D]=k;return Array.isArray(D)?D.includes({...o,...c}[L]):{...o,...c}[L]===D})?[...p,g,w]:p},[]);return MI(n,l,h,t==null?void 0:t.class,t==null?void 0:t.className)},s_="-",O5=n=>{const e=L5(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:r}=n;return{getClassGroupId:l=>{const c=l.split(s_);return c[0]===""&&c.length!==1&&c.shift(),$P(c,e)||V5(l)},getConflictingClassGroupIds:(l,c)=>{const h=t[l]||[];return c&&r[l]?[...h,...r[l]]:h}}},$P=(n,e)=>{var l;if(n.length===0)return e.classGroupId;const t=n[0],r=e.nextPart.get(t),i=r?$P(n.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=n.join(s_);return(l=e.validators.find(({validator:c})=>c(o)))==null?void 0:l.classGroupId},FI=/^\[(.+)\]$/,V5=n=>{if(FI.test(n)){const e=FI.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},L5=n=>{const{theme:e,classGroups:t}=n,r={nextPart:new Map,validators:[]};for(const i in t)my(t[i],r,i,e);return r},my=(n,e,t,r)=>{n.forEach(i=>{if(typeof i=="string"){const o=i===""?e:UI(e,i);o.classGroupId=t;return}if(typeof i=="function"){if(M5(i)){my(i(r),e,t,r);return}e.validators.push({validator:i,classGroupId:t});return}Object.entries(i).forEach(([o,l])=>{my(l,UI(e,o),t,r)})})},UI=(n,e)=>{let t=n;return e.split(s_).forEach(r=>{t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t},M5=n=>n.isThemeGetter,F5=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,r=new Map;const i=(o,l)=>{t.set(o,l),e++,e>n&&(e=0,r=t,t=new Map)};return{get(o){let l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return i(o,l),l},set(o,l){t.has(o)?t.set(o,l):i(o,l)}}},gy="!",yy=":",U5=yy.length,B5=n=>{const{prefix:e,experimentalParseClassName:t}=n;let r=i=>{const o=[];let l=0,c=0,h=0,p;for(let k=0;k<i.length;k++){let L=i[k];if(l===0&&c===0){if(L===yy){o.push(i.slice(h,k)),h=k+U5;continue}if(L==="/"){p=k;continue}}L==="["?l++:L==="]"?l--:L==="("?c++:L===")"&&c--}const y=o.length===0?i:i.substring(h),g=z5(y),w=g!==y,b=p&&p>h?p-h:void 0;return{modifiers:o,hasImportantModifier:w,baseClassName:g,maybePostfixModifierPosition:b}};if(e){const i=e+yy,o=r;r=l=>l.startsWith(i)?o(l.substring(i.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(t){const i=r;r=o=>t({className:o,parseClassName:i})}return r},z5=n=>n.endsWith(gy)?n.substring(0,n.length-1):n.startsWith(gy)?n.substring(1):n,j5=n=>{const e=Object.fromEntries(n.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const i=[];let o=[];return r.forEach(l=>{l[0]==="["||e[l]?(i.push(...o.sort(),l),o=[]):o.push(l)}),i.push(...o.sort()),i}},$5=n=>({cache:F5(n.cacheSize),parseClassName:B5(n),sortModifiers:j5(n),...O5(n)}),H5=/\s+/,q5=(n,e)=>{const{parseClassName:t,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:o}=e,l=[],c=n.trim().split(H5);let h="";for(let p=c.length-1;p>=0;p-=1){const y=c[p],{isExternal:g,modifiers:w,hasImportantModifier:b,baseClassName:k,maybePostfixModifierPosition:L}=t(y);if(g){h=y+(h.length>0?" "+h:h);continue}let D=!!L,X=r(D?k.substring(0,L):k);if(!X){if(!D){h=y+(h.length>0?" "+h:h);continue}if(X=r(k),!X){h=y+(h.length>0?" "+h:h);continue}D=!1}const K=o(w).join(":"),Z=b?K+gy:K,oe=Z+X;if(l.includes(oe))continue;l.push(oe);const ie=i(X,D);for(let ue=0;ue<ie.length;++ue){const I=ie[ue];l.push(Z+I)}h=y+(h.length>0?" "+h:h)}return h};function W5(){let n=0,e,t,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=HP(e))&&(r&&(r+=" "),r+=t);return r}const HP=n=>{if(typeof n=="string")return n;let e,t="";for(let r=0;r<n.length;r++)n[r]&&(e=HP(n[r]))&&(t&&(t+=" "),t+=e);return t};function K5(n,...e){let t,r,i,o=l;function l(h){const p=e.reduce((y,g)=>g(y),n());return t=$5(p),r=t.cache.get,i=t.cache.set,o=c,c(h)}function c(h){const p=r(h);if(p)return p;const y=q5(h,t);return i(h,y),y}return function(){return o(W5.apply(null,arguments))}}const _n=n=>{const e=t=>t[n]||[];return e.isThemeGetter=!0,e},qP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,WP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,G5=/^\d+\/\d+$/,Q5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Y5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,J5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,X5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Z5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pl=n=>G5.test(n),tt=n=>!!n&&!Number.isNaN(Number(n)),yo=n=>!!n&&Number.isInteger(Number(n)),bg=n=>n.endsWith("%")&&tt(n.slice(0,-1)),As=n=>Q5.test(n),eB=()=>!0,tB=n=>Y5.test(n)&&!J5.test(n),KP=()=>!1,nB=n=>X5.test(n),rB=n=>Z5.test(n),iB=n=>!De(n)&&!Ne(n),sB=n=>fu(n,YP,KP),De=n=>qP.test(n),ua=n=>fu(n,JP,tB),Rg=n=>fu(n,cB,tt),BI=n=>fu(n,GP,KP),oB=n=>fu(n,QP,rB),$h=n=>fu(n,XP,nB),Ne=n=>WP.test(n),lc=n=>pu(n,JP),aB=n=>pu(n,dB),zI=n=>pu(n,GP),lB=n=>pu(n,YP),uB=n=>pu(n,QP),Hh=n=>pu(n,XP,!0),fu=(n,e,t)=>{const r=qP.exec(n);return r?r[1]?e(r[1]):t(r[2]):!1},pu=(n,e,t=!1)=>{const r=WP.exec(n);return r?r[1]?e(r[1]):t:!1},GP=n=>n==="position"||n==="percentage",QP=n=>n==="image"||n==="url",YP=n=>n==="length"||n==="size"||n==="bg-size",JP=n=>n==="length",cB=n=>n==="number",dB=n=>n==="family-name",XP=n=>n==="shadow",hB=()=>{const n=_n("color"),e=_n("font"),t=_n("text"),r=_n("font-weight"),i=_n("tracking"),o=_n("leading"),l=_n("breakpoint"),c=_n("container"),h=_n("spacing"),p=_n("radius"),y=_n("shadow"),g=_n("inset-shadow"),w=_n("text-shadow"),b=_n("drop-shadow"),k=_n("blur"),L=_n("perspective"),D=_n("aspect"),X=_n("ease"),K=_n("animate"),Z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],oe=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ie=()=>[...oe(),Ne,De],ue=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],S=()=>[Ne,De,h],A=()=>[Pl,"full","auto",...S()],V=()=>[yo,"none","subgrid",Ne,De],N=()=>["auto",{span:["full",yo,Ne,De]},yo,Ne,De],F=()=>[yo,"auto",Ne,De],P=()=>["auto","min","max","fr",Ne,De],Be=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ze=()=>["start","end","center","stretch","center-safe","end-safe"],fe=()=>["auto",...S()],be=()=>[Pl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...S()],$=()=>[n,Ne,De],pe=()=>[...oe(),zI,BI,{position:[Ne,De]}],ne=()=>["no-repeat",{repeat:["","x","y","space","round"]}],O=()=>["auto","cover","contain",lB,sB,{size:[Ne,De]}],G=()=>[bg,lc,ua],re=()=>["","none","full",p,Ne,De],de=()=>["",tt,lc,ua],_e=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ce=()=>[tt,bg,zI,BI],qe=()=>["","none",k,Ne,De],Ze=()=>["none",tt,Ne,De],kt=()=>["none",tt,Ne,De],wr=()=>[tt,Ne,De],_t=()=>[Pl,"full",...S()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[As],breakpoint:[As],color:[eB],container:[As],"drop-shadow":[As],ease:["in","out","in-out"],font:[iB],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[As],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[As],shadow:[As],spacing:["px",tt],text:[As],"text-shadow":[As],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Pl,De,Ne,D]}],container:["container"],columns:[{columns:[tt,De,Ne,c]}],"break-after":[{"break-after":Z()}],"break-before":[{"break-before":Z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ie()}],overflow:[{overflow:ue()}],"overflow-x":[{"overflow-x":ue()}],"overflow-y":[{"overflow-y":ue()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:A()}],"inset-x":[{"inset-x":A()}],"inset-y":[{"inset-y":A()}],start:[{start:A()}],end:[{end:A()}],top:[{top:A()}],right:[{right:A()}],bottom:[{bottom:A()}],left:[{left:A()}],visibility:["visible","invisible","collapse"],z:[{z:[yo,"auto",Ne,De]}],basis:[{basis:[Pl,"full","auto",c,...S()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[tt,Pl,"auto","initial","none",De]}],grow:[{grow:["",tt,Ne,De]}],shrink:[{shrink:["",tt,Ne,De]}],order:[{order:[yo,"first","last","none",Ne,De]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:N()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:N()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":P()}],"auto-rows":[{"auto-rows":P()}],gap:[{gap:S()}],"gap-x":[{"gap-x":S()}],"gap-y":[{"gap-y":S()}],"justify-content":[{justify:[...Be(),"normal"]}],"justify-items":[{"justify-items":[...ze(),"normal"]}],"justify-self":[{"justify-self":["auto",...ze()]}],"align-content":[{content:["normal",...Be()]}],"align-items":[{items:[...ze(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ze(),{baseline:["","last"]}]}],"place-content":[{"place-content":Be()}],"place-items":[{"place-items":[...ze(),"baseline"]}],"place-self":[{"place-self":["auto",...ze()]}],p:[{p:S()}],px:[{px:S()}],py:[{py:S()}],ps:[{ps:S()}],pe:[{pe:S()}],pt:[{pt:S()}],pr:[{pr:S()}],pb:[{pb:S()}],pl:[{pl:S()}],m:[{m:fe()}],mx:[{mx:fe()}],my:[{my:fe()}],ms:[{ms:fe()}],me:[{me:fe()}],mt:[{mt:fe()}],mr:[{mr:fe()}],mb:[{mb:fe()}],ml:[{ml:fe()}],"space-x":[{"space-x":S()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":S()}],"space-y-reverse":["space-y-reverse"],size:[{size:be()}],w:[{w:[c,"screen",...be()]}],"min-w":[{"min-w":[c,"screen","none",...be()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...be()]}],h:[{h:["screen",...be()]}],"min-h":[{"min-h":["screen","none",...be()]}],"max-h":[{"max-h":["screen",...be()]}],"font-size":[{text:["base",t,lc,ua]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,Ne,Rg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",bg,De]}],"font-family":[{font:[aB,De,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,Ne,De]}],"line-clamp":[{"line-clamp":[tt,"none",Ne,Rg]}],leading:[{leading:[o,...S()]}],"list-image":[{"list-image":["none",Ne,De]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ne,De]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:$()}],"text-color":[{text:$()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:[tt,"from-font","auto",Ne,ua]}],"text-decoration-color":[{decoration:$()}],"underline-offset":[{"underline-offset":[tt,"auto",Ne,De]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:S()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ne,De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ne,De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:pe()}],"bg-repeat":[{bg:ne()}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},yo,Ne,De],radial:["",Ne,De],conic:[yo,Ne,De]},uB,oB]}],"bg-color":[{bg:$()}],"gradient-from-pos":[{from:G()}],"gradient-via-pos":[{via:G()}],"gradient-to-pos":[{to:G()}],"gradient-from":[{from:$()}],"gradient-via":[{via:$()}],"gradient-to":[{to:$()}],rounded:[{rounded:re()}],"rounded-s":[{"rounded-s":re()}],"rounded-e":[{"rounded-e":re()}],"rounded-t":[{"rounded-t":re()}],"rounded-r":[{"rounded-r":re()}],"rounded-b":[{"rounded-b":re()}],"rounded-l":[{"rounded-l":re()}],"rounded-ss":[{"rounded-ss":re()}],"rounded-se":[{"rounded-se":re()}],"rounded-ee":[{"rounded-ee":re()}],"rounded-es":[{"rounded-es":re()}],"rounded-tl":[{"rounded-tl":re()}],"rounded-tr":[{"rounded-tr":re()}],"rounded-br":[{"rounded-br":re()}],"rounded-bl":[{"rounded-bl":re()}],"border-w":[{border:de()}],"border-w-x":[{"border-x":de()}],"border-w-y":[{"border-y":de()}],"border-w-s":[{"border-s":de()}],"border-w-e":[{"border-e":de()}],"border-w-t":[{"border-t":de()}],"border-w-r":[{"border-r":de()}],"border-w-b":[{"border-b":de()}],"border-w-l":[{"border-l":de()}],"divide-x":[{"divide-x":de()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":de()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[..._e(),"hidden","none"]}],"divide-style":[{divide:[..._e(),"hidden","none"]}],"border-color":[{border:$()}],"border-color-x":[{"border-x":$()}],"border-color-y":[{"border-y":$()}],"border-color-s":[{"border-s":$()}],"border-color-e":[{"border-e":$()}],"border-color-t":[{"border-t":$()}],"border-color-r":[{"border-r":$()}],"border-color-b":[{"border-b":$()}],"border-color-l":[{"border-l":$()}],"divide-color":[{divide:$()}],"outline-style":[{outline:[..._e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[tt,Ne,De]}],"outline-w":[{outline:["",tt,lc,ua]}],"outline-color":[{outline:$()}],shadow:[{shadow:["","none",y,Hh,$h]}],"shadow-color":[{shadow:$()}],"inset-shadow":[{"inset-shadow":["none",g,Hh,$h]}],"inset-shadow-color":[{"inset-shadow":$()}],"ring-w":[{ring:de()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:$()}],"ring-offset-w":[{"ring-offset":[tt,ua]}],"ring-offset-color":[{"ring-offset":$()}],"inset-ring-w":[{"inset-ring":de()}],"inset-ring-color":[{"inset-ring":$()}],"text-shadow":[{"text-shadow":["none",w,Hh,$h]}],"text-shadow-color":[{"text-shadow":$()}],opacity:[{opacity:[tt,Ne,De]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[tt]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ce()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ce()}],"mask-image-linear-from-color":[{"mask-linear-from":$()}],"mask-image-linear-to-color":[{"mask-linear-to":$()}],"mask-image-t-from-pos":[{"mask-t-from":Ce()}],"mask-image-t-to-pos":[{"mask-t-to":Ce()}],"mask-image-t-from-color":[{"mask-t-from":$()}],"mask-image-t-to-color":[{"mask-t-to":$()}],"mask-image-r-from-pos":[{"mask-r-from":Ce()}],"mask-image-r-to-pos":[{"mask-r-to":Ce()}],"mask-image-r-from-color":[{"mask-r-from":$()}],"mask-image-r-to-color":[{"mask-r-to":$()}],"mask-image-b-from-pos":[{"mask-b-from":Ce()}],"mask-image-b-to-pos":[{"mask-b-to":Ce()}],"mask-image-b-from-color":[{"mask-b-from":$()}],"mask-image-b-to-color":[{"mask-b-to":$()}],"mask-image-l-from-pos":[{"mask-l-from":Ce()}],"mask-image-l-to-pos":[{"mask-l-to":Ce()}],"mask-image-l-from-color":[{"mask-l-from":$()}],"mask-image-l-to-color":[{"mask-l-to":$()}],"mask-image-x-from-pos":[{"mask-x-from":Ce()}],"mask-image-x-to-pos":[{"mask-x-to":Ce()}],"mask-image-x-from-color":[{"mask-x-from":$()}],"mask-image-x-to-color":[{"mask-x-to":$()}],"mask-image-y-from-pos":[{"mask-y-from":Ce()}],"mask-image-y-to-pos":[{"mask-y-to":Ce()}],"mask-image-y-from-color":[{"mask-y-from":$()}],"mask-image-y-to-color":[{"mask-y-to":$()}],"mask-image-radial":[{"mask-radial":[Ne,De]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ce()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ce()}],"mask-image-radial-from-color":[{"mask-radial-from":$()}],"mask-image-radial-to-color":[{"mask-radial-to":$()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":oe()}],"mask-image-conic-pos":[{"mask-conic":[tt]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ce()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ce()}],"mask-image-conic-from-color":[{"mask-conic-from":$()}],"mask-image-conic-to-color":[{"mask-conic-to":$()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:pe()}],"mask-repeat":[{mask:ne()}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ne,De]}],filter:[{filter:["","none",Ne,De]}],blur:[{blur:qe()}],brightness:[{brightness:[tt,Ne,De]}],contrast:[{contrast:[tt,Ne,De]}],"drop-shadow":[{"drop-shadow":["","none",b,Hh,$h]}],"drop-shadow-color":[{"drop-shadow":$()}],grayscale:[{grayscale:["",tt,Ne,De]}],"hue-rotate":[{"hue-rotate":[tt,Ne,De]}],invert:[{invert:["",tt,Ne,De]}],saturate:[{saturate:[tt,Ne,De]}],sepia:[{sepia:["",tt,Ne,De]}],"backdrop-filter":[{"backdrop-filter":["","none",Ne,De]}],"backdrop-blur":[{"backdrop-blur":qe()}],"backdrop-brightness":[{"backdrop-brightness":[tt,Ne,De]}],"backdrop-contrast":[{"backdrop-contrast":[tt,Ne,De]}],"backdrop-grayscale":[{"backdrop-grayscale":["",tt,Ne,De]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[tt,Ne,De]}],"backdrop-invert":[{"backdrop-invert":["",tt,Ne,De]}],"backdrop-opacity":[{"backdrop-opacity":[tt,Ne,De]}],"backdrop-saturate":[{"backdrop-saturate":[tt,Ne,De]}],"backdrop-sepia":[{"backdrop-sepia":["",tt,Ne,De]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":S()}],"border-spacing-x":[{"border-spacing-x":S()}],"border-spacing-y":[{"border-spacing-y":S()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ne,De]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[tt,"initial",Ne,De]}],ease:[{ease:["linear","initial",X,Ne,De]}],delay:[{delay:[tt,Ne,De]}],animate:[{animate:["none",K,Ne,De]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[L,Ne,De]}],"perspective-origin":[{"perspective-origin":ie()}],rotate:[{rotate:Ze()}],"rotate-x":[{"rotate-x":Ze()}],"rotate-y":[{"rotate-y":Ze()}],"rotate-z":[{"rotate-z":Ze()}],scale:[{scale:kt()}],"scale-x":[{"scale-x":kt()}],"scale-y":[{"scale-y":kt()}],"scale-z":[{"scale-z":kt()}],"scale-3d":["scale-3d"],skew:[{skew:wr()}],"skew-x":[{"skew-x":wr()}],"skew-y":[{"skew-y":wr()}],transform:[{transform:[Ne,De,"","none","gpu","cpu"]}],"transform-origin":[{origin:ie()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:_t()}],"translate-x":[{"translate-x":_t()}],"translate-y":[{"translate-y":_t()}],"translate-z":[{"translate-z":_t()}],"translate-none":["translate-none"],accent:[{accent:$()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:$()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ne,De]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":S()}],"scroll-mx":[{"scroll-mx":S()}],"scroll-my":[{"scroll-my":S()}],"scroll-ms":[{"scroll-ms":S()}],"scroll-me":[{"scroll-me":S()}],"scroll-mt":[{"scroll-mt":S()}],"scroll-mr":[{"scroll-mr":S()}],"scroll-mb":[{"scroll-mb":S()}],"scroll-ml":[{"scroll-ml":S()}],"scroll-p":[{"scroll-p":S()}],"scroll-px":[{"scroll-px":S()}],"scroll-py":[{"scroll-py":S()}],"scroll-ps":[{"scroll-ps":S()}],"scroll-pe":[{"scroll-pe":S()}],"scroll-pt":[{"scroll-pt":S()}],"scroll-pr":[{"scroll-pr":S()}],"scroll-pb":[{"scroll-pb":S()}],"scroll-pl":[{"scroll-pl":S()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ne,De]}],fill:[{fill:["none",...$()]}],"stroke-w":[{stroke:[tt,lc,ua,Rg]}],stroke:[{stroke:["none",...$()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},fB=K5(hB);function pB(...n){return fB(jP(n))}const mB=N5("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive shadow-sm",{variants:{variant:{default:"bg-[#0066FF] text-white hover:bg-[#0053cc]",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border border-white/50 bg-white/40 text-foreground hover:bg-white/60 backdrop-blur-md dark:bg-white/10 dark:border-white/20",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-lg gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-lg px-6 has-[>svg]:px-4",icon:"size-9 rounded-lg"}},defaultVariants:{variant:"default",size:"default"}});function gB({className:n,variant:e,size:t,asChild:r=!1,...i}){const o=r?BP:"button";return hn.jsx(o,{"data-slot":"button",className:pB(mB({variant:e,size:t,className:n})),...i})}function yB(){const[n,e]=z.useState(!1),t=z.useMemo(()=>{try{return typeof Notification<"u"}catch{return!1}},[]);return z.useEffect(()=>{T5();try{t&&e(Notification.permission!=="granted")}catch{}},[]),hn.jsxs(I5,{children:[hn.jsxs("div",{className:"min-h-screen flex flex-col",children:[n&&hn.jsxs("div",{className:"w-full px-4 py-2 text-sm flex items-center justify-between",style:{backgroundColor:"#fff7ed",color:"#9a3412"},children:[hn.jsx("div",{className:"pr-3",children:"Enable notifications to receive booking updates, reminders, and messages."}),hn.jsx("div",{className:"flex items-center gap-2",children:hn.jsx(gB,{variant:"outline",onClick:async()=>{await MP();try{e(typeof Notification<"u"&&Notification.permission!=="granted")}catch{e(!1)}},children:"Enable Notifications"})})]}),hn.jsx("div",{className:"flex-1",children:hn.jsx(ZC,{router:Xx})}),hn.jsx("footer",{className:"text-center text-gray-500 text-xs py-3",children:"Developed by esystemlk"})]}),hn.jsx(P5,{})]})}f1.createRoot(document.getElementById("root")).render(hn.jsx(yB,{}));export{jP as $,K3 as A,gB as B,JB as C,EB as D,Nr as E,IB as F,TB as G,MA as H,qn as I,ot as J,Tt as K,jv as L,z6 as M,K6 as N,U6 as O,B6 as P,ve as Q,G3 as R,BP as S,p1 as T,Va as U,Zc as V,Zt as W,c4 as X,Ls as Y,vB as Z,jI as _,NC as a,HB as a0,qB as a1,N5 as a2,WB as a3,KB as a4,QB as a5,YB as a6,GB as a7,MP as a8,_B as b,PB as c,ZB as d,pB as e,NB as f,RB as g,OB as h,VB as i,hn as j,LB as k,AB as l,$B as m,UB as n,kB as o,xB as p,DB as q,z as r,CB as s,la as t,XB as u,MB as v,BB as w,jB as x,FB as y,zB as z};
