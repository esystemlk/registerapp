const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Login-B_WD1EjS.js","assets/card-DYsbf8uQ.js","assets/input-DoI17m8q.js","assets/label-OoaYls16.js","assets/index-BX3OAG78.js","assets/Dashboard-DtTBhg6I.js","assets/db-B2ZkU-j2.js","assets/HeaderBar-DEc0Xlyh.js","assets/calendar-Bxj2ymvc.js","assets/createLucideIcon-DNKxwa87.js","assets/star-C-8BJpJU.js","assets/dollar-sign-Bo5Ri-VE.js","assets/LecturerDetails-Clmk3W24.js","assets/badge-CY3m3KkQ.js","assets/arrow-left-Dr6MJ2FG.js","assets/clock-Df2R-iJr.js","assets/BookClass-v9mx71-k.js","assets/radio-group-Ch5wC0xM.js","assets/index-2VhTRSM0.js","assets/index-DWz7MnQj.js","assets/index-AenXN0Yu.js","assets/index-BVt5JVkr.js","assets/credit-card-A3mCZbhI.js","assets/check-CstK9hop.js","assets/MyBookings-CLyIhO1R.js","assets/tabs-Dor33Kqg.js","assets/calendar-CpbuF6B_.js","assets/file-text-OCqEWJGm.js","assets/Dashboard-Dkc6oTsD.js","assets/users-6ZoiafKq.js","assets/settings-HEQhktYv.js","assets/Availability-B1RdTPBj.js","assets/circle-alert-Dae7U4By.js","assets/Dashboard-BA2RgVy6.js","assets/circle-x-Bb8paBPg.js","assets/Dashboard-CjRFM4g6.js","assets/Dashboard-_W6XJ96v.js","assets/NotFound-BCVXMiNk.js","assets/Register-Daf7frDJ.js","assets/Onboarding-blVlBRdp.js","assets/Thread-CklALgdq.js","assets/Analytics-7hQrEFzq.js","assets/BookingDetails-C2LdmEPL.js","assets/KYCReview-CAm2V-Se.js","assets/SupportInbox-BOUUV6NC.js","assets/Support-U-FF-c0F.js"])))=>i.map(i=>d[i]);
function X1(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in n)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(n,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var _3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vm={exports:{}},ku={},wm={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ow;function Z1(){if(Ow)return et;Ow=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),g=Symbol.iterator;function E(N){return N===null||typeof N!="object"?null:(N=g&&N[g]||N["@@iterator"],typeof N=="function"?N:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,M={};function O(N,K,he){this.props=N,this.context=K,this.refs=M,this.updater=he||S}O.prototype.isReactComponent={},O.prototype.setState=function(N,K){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,K,"setState")},O.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function J(){}J.prototype=O.prototype;function G(N,K,he){this.props=N,this.context=K,this.refs=M,this.updater=he||S}var Z=G.prototype=new J;Z.constructor=G,D(Z,O.prototype),Z.isPureReactComponent=!0;var ae=Array.isArray,se=Object.prototype.hasOwnProperty,fe={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(N,K,he){var ve,Ee={},we=null,Ke=null;if(K!=null)for(ve in K.ref!==void 0&&(Ke=K.ref),K.key!==void 0&&(we=""+K.key),K)se.call(K,ve)&&!I.hasOwnProperty(ve)&&(Ee[ve]=K[ve]);var je=arguments.length-2;if(je===1)Ee.children=he;else if(1<je){for(var st=Array(je),Ft=0;Ft<je;Ft++)st[Ft]=arguments[Ft+2];Ee.children=st}if(N&&N.defaultProps)for(ve in je=N.defaultProps,je)Ee[ve]===void 0&&(Ee[ve]=je[ve]);return{$$typeof:n,type:N,key:we,ref:Ke,props:Ee,_owner:fe.current}}function P(N,K){return{$$typeof:n,type:N.type,key:K,ref:N.ref,props:N.props,_owner:N._owner}}function V(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function x(N){var K={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return K[he]})}var F=/\/+/g;function b(N,K){return typeof N=="object"&&N!==null&&N.key!=null?x(""+N.key):K.toString(36)}function Me(N,K,he,ve,Ee){var we=typeof N;(we==="undefined"||we==="boolean")&&(N=null);var Ke=!1;if(N===null)Ke=!0;else switch(we){case"string":case"number":Ke=!0;break;case"object":switch(N.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=N,Ee=Ee(Ke),N=ve===""?"."+b(Ke,0):ve,ae(Ee)?(he="",N!=null&&(he=N.replace(F,"$&/")+"/"),Me(Ee,K,he,"",function(Ft){return Ft})):Ee!=null&&(V(Ee)&&(Ee=P(Ee,he+(!Ee.key||Ke&&Ke.key===Ee.key?"":(""+Ee.key).replace(F,"$&/")+"/")+N)),K.push(Ee)),1;if(Ke=0,ve=ve===""?".":ve+":",ae(N))for(var je=0;je<N.length;je++){we=N[je];var st=ve+b(we,je);Ke+=Me(we,K,he,st,Ee)}else if(st=E(N),typeof st=="function")for(N=st.call(N),je=0;!(we=N.next()).done;)we=we.value,st=ve+b(we,je++),Ke+=Me(we,K,he,st,Ee);else if(we==="object")throw K=String(N),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ke}function He(N,K,he){if(N==null)return N;var ve=[],Ee=0;return Me(N,ve,"","",function(we){return K.call(he,we,Ee++)}),ve}function ye(N){if(N._status===-1){var K=N._result;K=K(),K.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=K)}if(N._status===1)return N._result.default;throw N._result}var Ne={current:null},ee={transition:null},pe={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:ee,ReactCurrentOwner:fe};function ne(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:He,forEach:function(N,K,he){He(N,function(){K.apply(this,arguments)},he)},count:function(N){var K=0;return He(N,function(){K++}),K},toArray:function(N){return He(N,function(K){return K})||[]},only:function(N){if(!V(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},et.Component=O,et.Fragment=t,et.Profiler=i,et.PureComponent=G,et.StrictMode=r,et.Suspense=h,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,et.act=ne,et.cloneElement=function(N,K,he){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var ve=D({},N.props),Ee=N.key,we=N.ref,Ke=N._owner;if(K!=null){if(K.ref!==void 0&&(we=K.ref,Ke=fe.current),K.key!==void 0&&(Ee=""+K.key),N.type&&N.type.defaultProps)var je=N.type.defaultProps;for(st in K)se.call(K,st)&&!I.hasOwnProperty(st)&&(ve[st]=K[st]===void 0&&je!==void 0?je[st]:K[st])}var st=arguments.length-2;if(st===1)ve.children=he;else if(1<st){je=Array(st);for(var Ft=0;Ft<st;Ft++)je[Ft]=arguments[Ft+2];ve.children=je}return{$$typeof:n,type:N.type,key:Ee,ref:we,props:ve,_owner:Ke}},et.createContext=function(N){return N={$$typeof:l,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:a,_context:N},N.Consumer=N},et.createElement=R,et.createFactory=function(N){var K=R.bind(null,N);return K.type=N,K},et.createRef=function(){return{current:null}},et.forwardRef=function(N){return{$$typeof:c,render:N}},et.isValidElement=V,et.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:ye}},et.memo=function(N,K){return{$$typeof:p,type:N,compare:K===void 0?null:K}},et.startTransition=function(N){var K=ee.transition;ee.transition={};try{N()}finally{ee.transition=K}},et.unstable_act=ne,et.useCallback=function(N,K){return Ne.current.useCallback(N,K)},et.useContext=function(N){return Ne.current.useContext(N)},et.useDebugValue=function(){},et.useDeferredValue=function(N){return Ne.current.useDeferredValue(N)},et.useEffect=function(N,K){return Ne.current.useEffect(N,K)},et.useId=function(){return Ne.current.useId()},et.useImperativeHandle=function(N,K,he){return Ne.current.useImperativeHandle(N,K,he)},et.useInsertionEffect=function(N,K){return Ne.current.useInsertionEffect(N,K)},et.useLayoutEffect=function(N,K){return Ne.current.useLayoutEffect(N,K)},et.useMemo=function(N,K){return Ne.current.useMemo(N,K)},et.useReducer=function(N,K,he){return Ne.current.useReducer(N,K,he)},et.useRef=function(N){return Ne.current.useRef(N)},et.useState=function(N){return Ne.current.useState(N)},et.useSyncExternalStore=function(N,K,he){return Ne.current.useSyncExternalStore(N,K,he)},et.useTransition=function(){return Ne.current.useTransition()},et.version="18.3.1",et}var Vw;function zg(){return Vw||(Vw=1,wm.exports=Z1()),wm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lw;function eb(){if(Lw)return ku;Lw=1;var n=zg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(c,h,p){var y,g={},E=null,S=null;p!==void 0&&(E=""+p),h.key!==void 0&&(E=""+h.key),h.ref!==void 0&&(S=h.ref);for(y in h)r.call(h,y)&&!a.hasOwnProperty(y)&&(g[y]=h[y]);if(c&&c.defaultProps)for(y in h=c.defaultProps,h)g[y]===void 0&&(g[y]=h[y]);return{$$typeof:e,type:c,key:E,ref:S,props:g,_owner:i.current}}return ku.Fragment=t,ku.jsx=l,ku.jsxs=l,ku}var Mw;function tb(){return Mw||(Mw=1,vm.exports=eb()),vm.exports}var _i=tb(),sh={},Em={exports:{}},vr={},Tm={exports:{}},Im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fw;function nb(){return Fw||(Fw=1,(function(n){function e(ee,pe){var ne=ee.length;ee.push(pe);e:for(;0<ne;){var N=ne-1>>>1,K=ee[N];if(0<i(K,pe))ee[N]=pe,ee[ne]=K,ne=N;else break e}}function t(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var pe=ee[0],ne=ee.pop();if(ne!==pe){ee[0]=ne;e:for(var N=0,K=ee.length,he=K>>>1;N<he;){var ve=2*(N+1)-1,Ee=ee[ve],we=ve+1,Ke=ee[we];if(0>i(Ee,ne))we<K&&0>i(Ke,Ee)?(ee[N]=Ke,ee[we]=ne,N=we):(ee[N]=Ee,ee[ve]=ne,N=ve);else if(we<K&&0>i(Ke,ne))ee[N]=Ke,ee[we]=ne,N=we;else break e}}return pe}function i(ee,pe){var ne=ee.sortIndex-pe.sortIndex;return ne!==0?ne:ee.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],p=[],y=1,g=null,E=3,S=!1,D=!1,M=!1,O=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,G=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Z(ee){for(var pe=t(p);pe!==null;){if(pe.callback===null)r(p);else if(pe.startTime<=ee)r(p),pe.sortIndex=pe.expirationTime,e(h,pe);else break;pe=t(p)}}function ae(ee){if(M=!1,Z(ee),!D)if(t(h)!==null)D=!0,ye(se);else{var pe=t(p);pe!==null&&Ne(ae,pe.startTime-ee)}}function se(ee,pe){D=!1,M&&(M=!1,J(R),R=-1),S=!0;var ne=E;try{for(Z(pe),g=t(h);g!==null&&(!(g.expirationTime>pe)||ee&&!x());){var N=g.callback;if(typeof N=="function"){g.callback=null,E=g.priorityLevel;var K=N(g.expirationTime<=pe);pe=n.unstable_now(),typeof K=="function"?g.callback=K:g===t(h)&&r(h),Z(pe)}else r(h);g=t(h)}if(g!==null)var he=!0;else{var ve=t(p);ve!==null&&Ne(ae,ve.startTime-pe),he=!1}return he}finally{g=null,E=ne,S=!1}}var fe=!1,I=null,R=-1,P=5,V=-1;function x(){return!(n.unstable_now()-V<P)}function F(){if(I!==null){var ee=n.unstable_now();V=ee;var pe=!0;try{pe=I(!0,ee)}finally{pe?b():(fe=!1,I=null)}}else fe=!1}var b;if(typeof G=="function")b=function(){G(F)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,He=Me.port2;Me.port1.onmessage=F,b=function(){He.postMessage(null)}}else b=function(){O(F,0)};function ye(ee){I=ee,fe||(fe=!0,b())}function Ne(ee,pe){R=O(function(){ee(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){D||S||(D=!0,ye(se))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(ee){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var ne=E;E=pe;try{return ee()}finally{E=ne}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,pe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ne=E;E=ee;try{return pe()}finally{E=ne}},n.unstable_scheduleCallback=function(ee,pe,ne){var N=n.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?N+ne:N):ne=N,ee){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=ne+K,ee={id:y++,callback:pe,priorityLevel:ee,startTime:ne,expirationTime:K,sortIndex:-1},ne>N?(ee.sortIndex=ne,e(p,ee),t(h)===null&&ee===t(p)&&(M?(J(R),R=-1):M=!0,Ne(ae,ne-N))):(ee.sortIndex=K,e(h,ee),D||S||(D=!0,ye(se))),ee},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(ee){var pe=E;return function(){var ne=E;E=pe;try{return ee.apply(this,arguments)}finally{E=ne}}}})(Im)),Im}var Uw;function rb(){return Uw||(Uw=1,Tm.exports=nb()),Tm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bw;function ib(){if(Bw)return vr;Bw=1;var n=zg(),e=rb();function t(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},g={};function E(s){return h.call(g,s)?!0:h.call(y,s)?!1:p.test(s)?g[s]=!0:(y[s]=!0,!1)}function S(s,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,o,u,f){if(o===null||typeof o>"u"||S(s,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function M(s,o,u,f,m,_,T){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=_,this.removeEmptyString=T}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){O[s]=new M(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];O[o]=new M(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){O[s]=new M(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){O[s]=new M(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){O[s]=new M(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){O[s]=new M(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){O[s]=new M(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){O[s]=new M(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){O[s]=new M(s,5,!1,s.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function G(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(J,G);O[o]=new M(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(J,G);O[o]=new M(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(J,G);O[o]=new M(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){O[s]=new M(s,1,!1,s.toLowerCase(),null,!1,!1)}),O.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){O[s]=new M(s,1,!1,s.toLowerCase(),null,!0,!0)});function Z(s,o,u,f){var m=O.hasOwnProperty(o)?O[o]:null;(m!==null?m.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(D(o,u,m,f)&&(u=null),f||m===null?E(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,f=m.attributeNamespace,u===null?s.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,f?s.setAttributeNS(f,o,u):s.setAttribute(o,u))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,se=Symbol.for("react.element"),fe=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),x=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),ee=Symbol.iterator;function pe(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Object.assign,N;function K(s){if(N===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);N=o&&o[1]||""}return`
`+N+s}var he=!1;function ve(s,o){if(!s||he)return"";he=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var f=Q}Reflect.construct(s,[],o)}else{try{o.call()}catch(Q){f=Q}s.call(o.prototype)}else{try{throw Error()}catch(Q){f=Q}s()}}catch(Q){if(Q&&f&&typeof Q.stack=="string"){for(var m=Q.stack.split(`
`),_=f.stack.split(`
`),T=m.length-1,C=_.length-1;1<=T&&0<=C&&m[T]!==_[C];)C--;for(;1<=T&&0<=C;T--,C--)if(m[T]!==_[C]){if(T!==1||C!==1)do if(T--,C--,0>C||m[T]!==_[C]){var L=`
`+m[T].replace(" at new "," at ");return s.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",s.displayName)),L}while(1<=T&&0<=C);break}}}finally{he=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?K(s):""}function Ee(s){switch(s.tag){case 5:return K(s.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return s=ve(s.type,!1),s;case 11:return s=ve(s.type.render,!1),s;case 1:return s=ve(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case I:return"Fragment";case fe:return"Portal";case P:return"Profiler";case R:return"StrictMode";case b:return"Suspense";case Me:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case x:return(s.displayName||"Context")+".Consumer";case V:return(s._context.displayName||"Context")+".Provider";case F:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case He:return o=s.displayName||null,o!==null?o:we(s.type)||"Memo";case ye:o=s._payload,s=s._init;try{return we(s(o))}catch{}}return null}function Ke(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(o);case 8:return o===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function je(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function st(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ft(s){var o=st(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),f=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(T){f=""+T,_.call(this,T)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(T){f=""+T},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Ii(s){s._valueTracker||(s._valueTracker=Ft(s))}function At(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return s&&(f=st(s)?s.checked?"true":"false":s.value),s=f,s!==u?(o.setValue(s),!0):!1}function Rn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Sr(s,o){var u=o.checked;return ne({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Os(s,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=je(o.value!=null?o.value:u),s._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function An(s,o){o=o.checked,o!=null&&Z(s,"checked",o,!1)}function Yn(s,o){An(s,o);var u=je(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(f==="submit"||f==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?ut(s,o.type,u):o.hasOwnProperty("defaultValue")&&ut(s,o.type,je(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Si(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function ut(s,o,u){(o!=="number"||Rn(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Pt=Array.isArray;function Jn(s,o,u,f){if(s=s.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=o.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&f&&(s[u].defaultSelected=!0)}else{for(u=""+je(u),o=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,f&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function Yt(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ne({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function ur(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Pt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:je(u)}}function cr(s,o){var u=je(o.value),f=je(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),f!=null&&(s.defaultValue=""+f)}function Mn(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function Rr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hr(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?Rr(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Jt,mn=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,m){MSApp.execUnsafeLocalFunction(function(){return s(o,u,f,m)})}:s})(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Jt=Jt||document.createElement("div"),Jt.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Jt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function Pn(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Ar={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Xn=["Webkit","ms","Moz","O"];Object.keys(Ar).forEach(function(s){Xn.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),Ar[o]=Ar[s]})});function qr(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||Ar.hasOwnProperty(s)&&Ar[s]?(""+o).trim():o+"px"}function gn(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,m=qr(u,o[u],f);u==="float"&&(u="cssFloat"),f?s.setProperty(u,m):s[u]=m}}var si=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bn(s,o){if(o){if(si[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function oi(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dr=null;function yn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Fn=null,hr=null,yt=null;function Ri(s){if(s=mu(s)){if(typeof Fn!="function")throw Error(t(280));var o=s.stateNode;o&&(o=wd(o),Fn(s.stateNode,s.type,o))}}function Fe(s){hr?yt?yt.push(s):yt=[s]:hr=s}function _t(){if(hr){var s=hr,o=yt;if(yt=hr=null,Ri(s),o)for(s=0;s<o.length;s++)Ri(o[s])}}function Dt(s,o){return s(o)}function Ut(){}var en=!1;function bt(s,o,u){if(en)return s(o,u);en=!0;try{return Dt(s,o,u)}finally{en=!1,(hr!==null||yt!==null)&&(Ut(),_t())}}function Ht(s,o){var u=s.stateNode;if(u===null)return null;var f=wd(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var Zn=!1;if(c)try{var k={};Object.defineProperty(k,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",k,k),window.removeEventListener("test",k,k)}catch{Zn=!1}function U(s,o,u,f,m,_,T,C,L){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(u,Q)}catch(ie){this.onError(ie)}}var q=!1,te=null,ue=!1,Se=null,Ve={onError:function(s){q=!0,te=s}};function Te(s,o,u,f,m,_,T,C,L){q=!1,te=null,U.apply(Ve,arguments)}function Re(s,o,u,f,m,_,T,C,L){if(Te.apply(this,arguments),q){if(q){var Q=te;q=!1,te=null}else throw Error(t(198));ue||(ue=!0,Se=Q)}}function Pe(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function $e(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function De(s){if(Pe(s)!==s)throw Error(t(188))}function Ge(s){var o=s.alternate;if(!o){if(o=Pe(s),o===null)throw Error(t(188));return o!==s?null:s}for(var u=s,f=o;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(f=m.return,f!==null){u=f;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return De(m),s;if(_===f)return De(m),o;_=_.sibling}throw Error(t(188))}if(u.return!==f.return)u=m,f=_;else{for(var T=!1,C=m.child;C;){if(C===u){T=!0,u=m,f=_;break}if(C===f){T=!0,f=m,u=_;break}C=C.sibling}if(!T){for(C=_.child;C;){if(C===u){T=!0,u=_,f=m;break}if(C===f){T=!0,f=_,u=m;break}C=C.sibling}if(!T)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?s:o}function Je(s){return s=Ge(s),s!==null?Ct(s):null}function Ct(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Ct(s);if(o!==null)return o;s=s.sibling}return null}var Nt=e.unstable_scheduleCallback,qt=e.unstable_cancelCallback,nt=e.unstable_shouldYield,Wt=e.unstable_requestPaint,ct=e.unstable_now,ts=e.unstable_getCurrentPriorityLevel,er=e.unstable_ImmediatePriority,Un=e.unstable_UserBlockingPriority,ai=e.unstable_NormalPriority,li=e.unstable_LowPriority,fr=e.unstable_IdlePriority,Wr=null,_n=null;function Ze(s){if(_n&&typeof _n.onCommitFiberRoot=="function")try{_n.onCommitFiberRoot(Wr,s,void 0,(s.current.flags&128)===128)}catch{}}var mt=Math.clz32?Math.clz32:gt,Cn=Math.log,tn=Math.LN2;function gt(s){return s>>>=0,s===0?32:31-(Cn(s)/tn|0)|0}var tr=64,ui=4194304;function dt(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function ns(s,o){var u=s.pendingLanes;if(u===0)return 0;var f=0,m=s.suspendedLanes,_=s.pingedLanes,T=u&268435455;if(T!==0){var C=T&~m;C!==0?f=dt(C):(_&=T,_!==0&&(f=dt(_)))}else T=u&~m,T!==0?f=dt(T):_!==0&&(f=dt(_));if(f===0)return 0;if(o!==0&&o!==f&&(o&m)===0&&(m=f&-f,_=o&-o,m>=_||m===16&&(_&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=f;0<o;)u=31-mt(o),m=1<<u,f|=s[u],o&=~m;return f}function Co(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ko(s,o){for(var u=s.suspendedLanes,f=s.pingedLanes,m=s.expirationTimes,_=s.pendingLanes;0<_;){var T=31-mt(_),C=1<<T,L=m[T];L===-1?((C&u)===0||(C&f)!==0)&&(m[T]=Co(C,o)):L<=o&&(s.expiredLanes|=C),_&=~C}}function Gl(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ql(){var s=tr;return tr<<=1,(tr&4194240)===0&&(tr=64),s}function Yl(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function xo(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-mt(o),s[o]=u}function Jf(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var f=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-mt(u),_=1<<m;o[m]=0,f[m]=-1,s[m]=-1,u&=~_}}function Jl(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var f=31-mt(u),m=1<<f;m&o|s[f]&o&&(s[f]|=o),u&=~m}}var ot=0;function Ai(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Xl,ba,Zl,eu,tu,Pi=!1,Ca=[],bi=null,Ci=null,kn=null,Do=new Map,rs=new Map,Pr=[],id="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vs(s,o){switch(s){case"focusin":case"focusout":bi=null;break;case"dragenter":case"dragleave":Ci=null;break;case"mouseover":case"mouseout":kn=null;break;case"pointerover":case"pointerout":Do.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":rs.delete(o.pointerId)}}function ci(s,o,u,f,m,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:_,targetContainers:[m]},o!==null&&(o=mu(o),o!==null&&ba(o)),s):(s.eventSystemFlags|=f,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function sd(s,o,u,f,m){switch(o){case"focusin":return bi=ci(bi,s,o,u,f,m),!0;case"dragenter":return Ci=ci(Ci,s,o,u,f,m),!0;case"mouseover":return kn=ci(kn,s,o,u,f,m),!0;case"pointerover":var _=m.pointerId;return Do.set(_,ci(Do.get(_)||null,s,o,u,f,m)),!0;case"gotpointercapture":return _=m.pointerId,rs.set(_,ci(rs.get(_)||null,s,o,u,f,m)),!0}return!1}function ka(s){var o=Lo(s.target);if(o!==null){var u=Pe(o);if(u!==null){if(o=u.tag,o===13){if(o=$e(u),o!==null){s.blockedOn=o,tu(s.priority,function(){Zl(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function It(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=xa(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var f=new u.constructor(u.type,u);dr=f,u.target.dispatchEvent(f),dr=null}else return o=mu(u),o!==null&&ba(o),s.blockedOn=u,!1;o.shift()}return!0}function od(s,o,u){It(s)&&u.delete(o)}function Xf(){Pi=!1,bi!==null&&It(bi)&&(bi=null),Ci!==null&&It(Ci)&&(Ci=null),kn!==null&&It(kn)&&(kn=null),Do.forEach(od),rs.forEach(od)}function Ls(s,o){s.blockedOn===o&&(s.blockedOn=null,Pi||(Pi=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Xf)))}function Ms(s){function o(m){return Ls(m,s)}if(0<Ca.length){Ls(Ca[0],s);for(var u=1;u<Ca.length;u++){var f=Ca[u];f.blockedOn===s&&(f.blockedOn=null)}}for(bi!==null&&Ls(bi,s),Ci!==null&&Ls(Ci,s),kn!==null&&Ls(kn,s),Do.forEach(o),rs.forEach(o),u=0;u<Pr.length;u++)f=Pr[u],f.blockedOn===s&&(f.blockedOn=null);for(;0<Pr.length&&(u=Pr[0],u.blockedOn===null);)ka(u),u.blockedOn===null&&Pr.shift()}var is=ae.ReactCurrentBatchConfig,ss=!0;function ki(s,o,u,f){var m=ot,_=is.transition;is.transition=null;try{ot=1,nu(s,o,u,f)}finally{ot=m,is.transition=_}}function ad(s,o,u,f){var m=ot,_=is.transition;is.transition=null;try{ot=4,nu(s,o,u,f)}finally{ot=m,is.transition=_}}function nu(s,o,u,f){if(ss){var m=xa(s,o,u,f);if(m===null)up(s,o,f,xi,u),Vs(s,f);else if(sd(m,s,o,u,f))f.stopPropagation();else if(Vs(s,f),o&4&&-1<id.indexOf(s)){for(;m!==null;){var _=mu(m);if(_!==null&&Xl(_),_=xa(s,o,u,f),_===null&&up(s,o,f,xi,u),_===m)break;m=_}m!==null&&f.stopPropagation()}else up(s,o,f,null,u)}}var xi=null;function xa(s,o,u,f){if(xi=null,s=yn(f),s=Lo(s),s!==null)if(o=Pe(s),o===null)s=null;else if(u=o.tag,u===13){if(s=$e(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return xi=s,null}function Da(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ts()){case er:return 1;case Un:return 4;case ai:case li:return 16;case fr:return 536870912;default:return 16}default:return 16}}var br=null,Na=null,os=null;function ld(){if(os)return os;var s,o=Na,u=o.length,f,m="value"in br?br.value:br.textContent,_=m.length;for(s=0;s<u&&o[s]===m[s];s++);var T=u-s;for(f=1;f<=T&&o[u-f]===m[_-f];f++);return os=m.slice(s,1<f?1-f:void 0)}function No(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Di(){return!0}function ru(){return!1}function Bn(s){function o(u,f,m,_,T){this._reactName=u,this._targetInst=m,this.type=f,this.nativeEvent=_,this.target=T,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(u=s[C],this[C]=u?u(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Di:ru,this.isPropagationStopped=ru,this}return ne(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),o}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oo=Bn(Ni),Fs=ne({},Ni,{view:0,detail:0}),Oa=Bn(Fs),Va,La,Cr,Vo=ne({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ye,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Cr&&(Cr&&s.type==="mousemove"?(Va=s.screenX-Cr.screenX,La=s.screenY-Cr.screenY):La=Va=0,Cr=s),Va)},movementY:function(s){return"movementY"in s?s.movementY:La}}),iu=Bn(Vo),ud=ne({},Vo,{dataTransfer:0}),cd=Bn(ud),Ma=ne({},Fs,{relatedTarget:0}),xn=Bn(Ma),dd=ne({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),hd=Bn(dd),Us=ne({},Ni,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),d=Bn(Us),v=ne({},Ni,{data:0}),w=Bn(v),A={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Y[s])?!!o[s]:!1}function Ye(){return me}var Xt=ne({},Fs,{key:function(s){if(s.key){var o=A[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=No(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?H[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ye,charCode:function(s){return s.type==="keypress"?No(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?No(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),vt=Bn(Xt),nn=ne({},Vo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kr=Bn(nn),as=ne({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ye}),Oi=Bn(as),Vi=ne({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fa=Bn(Vi),su=ne({},Vo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),WP=Bn(su),KP=[9,13,27,32],Zf=c&&"CompositionEvent"in window,ou=null;c&&"documentMode"in document&&(ou=document.documentMode);var GP=c&&"TextEvent"in window&&!ou,A_=c&&(!Zf||ou&&8<ou&&11>=ou),P_=" ",b_=!1;function C_(s,o){switch(s){case"keyup":return KP.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k_(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ua=!1;function QP(s,o){switch(s){case"compositionend":return k_(o);case"keypress":return o.which!==32?null:(b_=!0,P_);case"textInput":return s=o.data,s===P_&&b_?null:s;default:return null}}function YP(s,o){if(Ua)return s==="compositionend"||!Zf&&C_(s,o)?(s=ld(),os=Na=br=null,Ua=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return A_&&o.locale!=="ko"?null:o.data;default:return null}}var JP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x_(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!JP[s.type]:o==="textarea"}function D_(s,o,u,f){Fe(f),o=yd(o,"onChange"),0<o.length&&(u=new Oo("onChange","change",null,u,f),s.push({event:u,listeners:o}))}var au=null,lu=null;function XP(s){Y_(s,0)}function fd(s){var o=Ha(s);if(At(o))return s}function ZP(s,o){if(s==="change")return o}var N_=!1;if(c){var ep;if(c){var tp="oninput"in document;if(!tp){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),tp=typeof O_.oninput=="function"}ep=tp}else ep=!1;N_=ep&&(!document.documentMode||9<document.documentMode)}function V_(){au&&(au.detachEvent("onpropertychange",L_),lu=au=null)}function L_(s){if(s.propertyName==="value"&&fd(lu)){var o=[];D_(o,lu,s,yn(s)),bt(XP,o)}}function e1(s,o,u){s==="focusin"?(V_(),au=o,lu=u,au.attachEvent("onpropertychange",L_)):s==="focusout"&&V_()}function t1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return fd(lu)}function n1(s,o){if(s==="click")return fd(o)}function r1(s,o){if(s==="input"||s==="change")return fd(o)}function i1(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var di=typeof Object.is=="function"?Object.is:i1;function uu(s,o){if(di(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var m=u[f];if(!h.call(o,m)||!di(s[m],o[m]))return!1}return!0}function M_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function F_(s,o){var u=M_(s);s=0;for(var f;u;){if(u.nodeType===3){if(f=s+u.textContent.length,s<=o&&f>=o)return{node:u,offset:o-s};s=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=M_(u)}}function U_(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?U_(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function B_(){for(var s=window,o=Rn();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Rn(s.document)}return o}function np(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function s1(s){var o=B_(),u=s.focusedElem,f=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&U_(u.ownerDocument.documentElement,u)){if(f!==null&&np(u)){if(o=f.start,s=f.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,_=Math.min(f.start,m);f=f.end===void 0?_:Math.min(f.end,m),!s.extend&&_>f&&(m=f,f=_,_=m),m=F_(u,_);var T=F_(u,f);m&&T&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==T.node||s.focusOffset!==T.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),_>f?(s.addRange(o),s.extend(T.node,T.offset)):(o.setEnd(T.node,T.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var o1=c&&"documentMode"in document&&11>=document.documentMode,Ba=null,rp=null,cu=null,ip=!1;function z_(s,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ip||Ba==null||Ba!==Rn(f)||(f=Ba,"selectionStart"in f&&np(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),cu&&uu(cu,f)||(cu=f,f=yd(rp,"onSelect"),0<f.length&&(o=new Oo("onSelect","select",null,o,u),s.push({event:o,listeners:f}),o.target=Ba)))}function pd(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var za={animationend:pd("Animation","AnimationEnd"),animationiteration:pd("Animation","AnimationIteration"),animationstart:pd("Animation","AnimationStart"),transitionend:pd("Transition","TransitionEnd")},sp={},j_={};c&&(j_=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function md(s){if(sp[s])return sp[s];if(!za[s])return s;var o=za[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in j_)return sp[s]=o[u];return s}var $_=md("animationend"),H_=md("animationiteration"),q_=md("animationstart"),W_=md("transitionend"),K_=new Map,G_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(s,o){K_.set(s,o),a(o,[s])}for(var op=0;op<G_.length;op++){var ap=G_[op],a1=ap.toLowerCase(),l1=ap[0].toUpperCase()+ap.slice(1);Bs(a1,"on"+l1)}Bs($_,"onAnimationEnd"),Bs(H_,"onAnimationIteration"),Bs(q_,"onAnimationStart"),Bs("dblclick","onDoubleClick"),Bs("focusin","onFocus"),Bs("focusout","onBlur"),Bs(W_,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var du="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u1=new Set("cancel close invalid load scroll toggle".split(" ").concat(du));function Q_(s,o,u){var f=s.type||"unknown-event";s.currentTarget=u,Re(f,o,void 0,s),s.currentTarget=null}function Y_(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var f=s[u],m=f.event;f=f.listeners;e:{var _=void 0;if(o)for(var T=f.length-1;0<=T;T--){var C=f[T],L=C.instance,Q=C.currentTarget;if(C=C.listener,L!==_&&m.isPropagationStopped())break e;Q_(m,C,Q),_=L}else for(T=0;T<f.length;T++){if(C=f[T],L=C.instance,Q=C.currentTarget,C=C.listener,L!==_&&m.isPropagationStopped())break e;Q_(m,C,Q),_=L}}}if(ue)throw s=Se,ue=!1,Se=null,s}function kt(s,o){var u=o[mp];u===void 0&&(u=o[mp]=new Set);var f=s+"__bubble";u.has(f)||(J_(o,s,2,!1),u.add(f))}function lp(s,o,u){var f=0;o&&(f|=4),J_(u,s,f,o)}var gd="_reactListening"+Math.random().toString(36).slice(2);function hu(s){if(!s[gd]){s[gd]=!0,r.forEach(function(u){u!=="selectionchange"&&(u1.has(u)||lp(u,!1,s),lp(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[gd]||(o[gd]=!0,lp("selectionchange",!1,o))}}function J_(s,o,u,f){switch(Da(o)){case 1:var m=ki;break;case 4:m=ad;break;default:m=nu}u=m.bind(null,o,u,s),m=void 0,!Zn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),f?m!==void 0?s.addEventListener(o,u,{capture:!0,passive:m}):s.addEventListener(o,u,!0):m!==void 0?s.addEventListener(o,u,{passive:m}):s.addEventListener(o,u,!1)}function up(s,o,u,f,m){var _=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var C=f.stateNode.containerInfo;if(C===m||C.nodeType===8&&C.parentNode===m)break;if(T===4)for(T=f.return;T!==null;){var L=T.tag;if((L===3||L===4)&&(L=T.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;T=T.return}for(;C!==null;){if(T=Lo(C),T===null)return;if(L=T.tag,L===5||L===6){f=_=T;continue e}C=C.parentNode}}f=f.return}bt(function(){var Q=_,ie=yn(u),oe=[];e:{var re=K_.get(s);if(re!==void 0){var Ie=Oo,Ce=s;switch(s){case"keypress":if(No(u)===0)break e;case"keydown":case"keyup":Ie=vt;break;case"focusin":Ce="focus",Ie=xn;break;case"focusout":Ce="blur",Ie=xn;break;case"beforeblur":case"afterblur":Ie=xn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=cd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=Oi;break;case $_:case H_:case q_:Ie=hd;break;case W_:Ie=Fa;break;case"scroll":Ie=Oa;break;case"wheel":Ie=WP;break;case"copy":case"cut":case"paste":Ie=d;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=kr}var ke=(o&4)!==0,Zt=!ke&&s==="scroll",$=ke?re!==null?re+"Capture":null:re;ke=[];for(var B=Q,W;B!==null;){W=B;var ce=W.stateNode;if(W.tag===5&&ce!==null&&(W=ce,$!==null&&(ce=Ht(B,$),ce!=null&&ke.push(fu(B,ce,W)))),Zt)break;B=B.return}0<ke.length&&(re=new Ie(re,Ce,null,u,ie),oe.push({event:re,listeners:ke}))}}if((o&7)===0){e:{if(re=s==="mouseover"||s==="pointerover",Ie=s==="mouseout"||s==="pointerout",re&&u!==dr&&(Ce=u.relatedTarget||u.fromElement)&&(Lo(Ce)||Ce[ls]))break e;if((Ie||re)&&(re=ie.window===ie?ie:(re=ie.ownerDocument)?re.defaultView||re.parentWindow:window,Ie?(Ce=u.relatedTarget||u.toElement,Ie=Q,Ce=Ce?Lo(Ce):null,Ce!==null&&(Zt=Pe(Ce),Ce!==Zt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Ie=null,Ce=Q),Ie!==Ce)){if(ke=iu,ce="onMouseLeave",$="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(ke=kr,ce="onPointerLeave",$="onPointerEnter",B="pointer"),Zt=Ie==null?re:Ha(Ie),W=Ce==null?re:Ha(Ce),re=new ke(ce,B+"leave",Ie,u,ie),re.target=Zt,re.relatedTarget=W,ce=null,Lo(ie)===Q&&(ke=new ke($,B+"enter",Ce,u,ie),ke.target=W,ke.relatedTarget=Zt,ce=ke),Zt=ce,Ie&&Ce)t:{for(ke=Ie,$=Ce,B=0,W=ke;W;W=ja(W))B++;for(W=0,ce=$;ce;ce=ja(ce))W++;for(;0<B-W;)ke=ja(ke),B--;for(;0<W-B;)$=ja($),W--;for(;B--;){if(ke===$||$!==null&&ke===$.alternate)break t;ke=ja(ke),$=ja($)}ke=null}else ke=null;Ie!==null&&X_(oe,re,Ie,ke,!1),Ce!==null&&Zt!==null&&X_(oe,Zt,Ce,ke,!0)}}e:{if(re=Q?Ha(Q):window,Ie=re.nodeName&&re.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&re.type==="file")var Oe=ZP;else if(x_(re))if(N_)Oe=r1;else{Oe=t1;var Ue=e1}else(Ie=re.nodeName)&&Ie.toLowerCase()==="input"&&(re.type==="checkbox"||re.type==="radio")&&(Oe=n1);if(Oe&&(Oe=Oe(s,Q))){D_(oe,Oe,u,ie);break e}Ue&&Ue(s,re,Q),s==="focusout"&&(Ue=re._wrapperState)&&Ue.controlled&&re.type==="number"&&ut(re,"number",re.value)}switch(Ue=Q?Ha(Q):window,s){case"focusin":(x_(Ue)||Ue.contentEditable==="true")&&(Ba=Ue,rp=Q,cu=null);break;case"focusout":cu=rp=Ba=null;break;case"mousedown":ip=!0;break;case"contextmenu":case"mouseup":case"dragend":ip=!1,z_(oe,u,ie);break;case"selectionchange":if(o1)break;case"keydown":case"keyup":z_(oe,u,ie)}var Be;if(Zf)e:{switch(s){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else Ua?C_(s,u)&&(qe="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(qe="onCompositionStart");qe&&(A_&&u.locale!=="ko"&&(Ua||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&Ua&&(Be=ld()):(br=ie,Na="value"in br?br.value:br.textContent,Ua=!0)),Ue=yd(Q,qe),0<Ue.length&&(qe=new w(qe,s,null,u,ie),oe.push({event:qe,listeners:Ue}),Be?qe.data=Be:(Be=k_(u),Be!==null&&(qe.data=Be)))),(Be=GP?QP(s,u):YP(s,u))&&(Q=yd(Q,"onBeforeInput"),0<Q.length&&(ie=new w("onBeforeInput","beforeinput",null,u,ie),oe.push({event:ie,listeners:Q}),ie.data=Be))}Y_(oe,o)})}function fu(s,o,u){return{instance:s,listener:o,currentTarget:u}}function yd(s,o){for(var u=o+"Capture",f=[];s!==null;){var m=s,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=Ht(s,u),_!=null&&f.unshift(fu(s,_,m)),_=Ht(s,o),_!=null&&f.push(fu(s,_,m))),s=s.return}return f}function ja(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function X_(s,o,u,f,m){for(var _=o._reactName,T=[];u!==null&&u!==f;){var C=u,L=C.alternate,Q=C.stateNode;if(L!==null&&L===f)break;C.tag===5&&Q!==null&&(C=Q,m?(L=Ht(u,_),L!=null&&T.unshift(fu(u,L,C))):m||(L=Ht(u,_),L!=null&&T.push(fu(u,L,C)))),u=u.return}T.length!==0&&s.push({event:o,listeners:T})}var c1=/\r\n?/g,d1=/\u0000|\uFFFD/g;function Z_(s){return(typeof s=="string"?s:""+s).replace(c1,`
`).replace(d1,"")}function _d(s,o,u){if(o=Z_(o),Z_(s)!==o&&u)throw Error(t(425))}function vd(){}var cp=null,dp=null;function hp(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fp=typeof setTimeout=="function"?setTimeout:void 0,h1=typeof clearTimeout=="function"?clearTimeout:void 0,ev=typeof Promise=="function"?Promise:void 0,f1=typeof queueMicrotask=="function"?queueMicrotask:typeof ev<"u"?function(s){return ev.resolve(null).then(s).catch(p1)}:fp;function p1(s){setTimeout(function(){throw s})}function pp(s,o){var u=o,f=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(f===0){s.removeChild(m),Ms(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=m}while(u);Ms(o)}function zs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function tv(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Li="__reactFiber$"+$a,pu="__reactProps$"+$a,ls="__reactContainer$"+$a,mp="__reactEvents$"+$a,m1="__reactListeners$"+$a,g1="__reactHandles$"+$a;function Lo(s){var o=s[Li];if(o)return o;for(var u=s.parentNode;u;){if(o=u[ls]||u[Li]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=tv(s);s!==null;){if(u=s[Li])return u;s=tv(s)}return o}s=u,u=s.parentNode}return null}function mu(s){return s=s[Li]||s[ls],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Ha(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(t(33))}function wd(s){return s[pu]||null}var gp=[],qa=-1;function js(s){return{current:s}}function xt(s){0>qa||(s.current=gp[qa],gp[qa]=null,qa--)}function St(s,o){qa++,gp[qa]=s.current,s.current=o}var $s={},zn=js($s),pr=js(!1),Mo=$s;function Wa(s,o){var u=s.type.contextTypes;if(!u)return $s;var f=s.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=o[_];return f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function mr(s){return s=s.childContextTypes,s!=null}function Ed(){xt(pr),xt(zn)}function nv(s,o,u){if(zn.current!==$s)throw Error(t(168));St(zn,o),St(pr,u)}function rv(s,o,u){var f=s.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var m in f)if(!(m in o))throw Error(t(108,Ke(s)||"Unknown",m));return ne({},u,f)}function Td(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||$s,Mo=zn.current,St(zn,s),St(pr,pr.current),!0}function iv(s,o,u){var f=s.stateNode;if(!f)throw Error(t(169));u?(s=rv(s,o,Mo),f.__reactInternalMemoizedMergedChildContext=s,xt(pr),xt(zn),St(zn,s)):xt(pr),St(pr,u)}var us=null,Id=!1,yp=!1;function sv(s){us===null?us=[s]:us.push(s)}function y1(s){Id=!0,sv(s)}function Hs(){if(!yp&&us!==null){yp=!0;var s=0,o=ot;try{var u=us;for(ot=1;s<u.length;s++){var f=u[s];do f=f(!0);while(f!==null)}us=null,Id=!1}catch(m){throw us!==null&&(us=us.slice(s+1)),Nt(er,Hs),m}finally{ot=o,yp=!1}}return null}var Ka=[],Ga=0,Sd=null,Rd=0,Kr=[],Gr=0,Fo=null,cs=1,ds="";function Uo(s,o){Ka[Ga++]=Rd,Ka[Ga++]=Sd,Sd=s,Rd=o}function ov(s,o,u){Kr[Gr++]=cs,Kr[Gr++]=ds,Kr[Gr++]=Fo,Fo=s;var f=cs;s=ds;var m=32-mt(f)-1;f&=~(1<<m),u+=1;var _=32-mt(o)+m;if(30<_){var T=m-m%5;_=(f&(1<<T)-1).toString(32),f>>=T,m-=T,cs=1<<32-mt(o)+m|u<<m|f,ds=_+s}else cs=1<<_|u<<m|f,ds=s}function _p(s){s.return!==null&&(Uo(s,1),ov(s,1,0))}function vp(s){for(;s===Sd;)Sd=Ka[--Ga],Ka[Ga]=null,Rd=Ka[--Ga],Ka[Ga]=null;for(;s===Fo;)Fo=Kr[--Gr],Kr[Gr]=null,ds=Kr[--Gr],Kr[Gr]=null,cs=Kr[--Gr],Kr[Gr]=null}var xr=null,Dr=null,Ot=!1,hi=null;function av(s,o){var u=Xr(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function lv(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,xr=s,Dr=zs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,xr=s,Dr=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Fo!==null?{id:cs,overflow:ds}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Xr(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,xr=s,Dr=null,!0):!1;default:return!1}}function wp(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Ep(s){if(Ot){var o=Dr;if(o){var u=o;if(!lv(s,o)){if(wp(s))throw Error(t(418));o=zs(u.nextSibling);var f=xr;o&&lv(s,o)?av(f,u):(s.flags=s.flags&-4097|2,Ot=!1,xr=s)}}else{if(wp(s))throw Error(t(418));s.flags=s.flags&-4097|2,Ot=!1,xr=s}}}function uv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;xr=s}function Ad(s){if(s!==xr)return!1;if(!Ot)return uv(s),Ot=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!hp(s.type,s.memoizedProps)),o&&(o=Dr)){if(wp(s))throw cv(),Error(t(418));for(;o;)av(s,o),o=zs(o.nextSibling)}if(uv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(t(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){Dr=zs(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}Dr=null}}else Dr=xr?zs(s.stateNode.nextSibling):null;return!0}function cv(){for(var s=Dr;s;)s=zs(s.nextSibling)}function Qa(){Dr=xr=null,Ot=!1}function Tp(s){hi===null?hi=[s]:hi.push(s)}var _1=ae.ReactCurrentBatchConfig;function gu(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,s));var m=f,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(T){var C=m.refs;T===null?delete C[_]:C[_]=T},o._stringRef=_,o)}if(typeof s!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,s))}return s}function Pd(s,o){throw s=Object.prototype.toString.call(o),Error(t(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function dv(s){var o=s._init;return o(s._payload)}function hv(s){function o($,B){if(s){var W=$.deletions;W===null?($.deletions=[B],$.flags|=16):W.push(B)}}function u($,B){if(!s)return null;for(;B!==null;)o($,B),B=B.sibling;return null}function f($,B){for($=new Map;B!==null;)B.key!==null?$.set(B.key,B):$.set(B.index,B),B=B.sibling;return $}function m($,B){return $=Xs($,B),$.index=0,$.sibling=null,$}function _($,B,W){return $.index=W,s?(W=$.alternate,W!==null?(W=W.index,W<B?($.flags|=2,B):W):($.flags|=2,B)):($.flags|=1048576,B)}function T($){return s&&$.alternate===null&&($.flags|=2),$}function C($,B,W,ce){return B===null||B.tag!==6?(B=fm(W,$.mode,ce),B.return=$,B):(B=m(B,W),B.return=$,B)}function L($,B,W,ce){var Oe=W.type;return Oe===I?ie($,B,W.props.children,ce,W.key):B!==null&&(B.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ye&&dv(Oe)===B.type)?(ce=m(B,W.props),ce.ref=gu($,B,W),ce.return=$,ce):(ce=Jd(W.type,W.key,W.props,null,$.mode,ce),ce.ref=gu($,B,W),ce.return=$,ce)}function Q($,B,W,ce){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=pm(W,$.mode,ce),B.return=$,B):(B=m(B,W.children||[]),B.return=$,B)}function ie($,B,W,ce,Oe){return B===null||B.tag!==7?(B=Ko(W,$.mode,ce,Oe),B.return=$,B):(B=m(B,W),B.return=$,B)}function oe($,B,W){if(typeof B=="string"&&B!==""||typeof B=="number")return B=fm(""+B,$.mode,W),B.return=$,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case se:return W=Jd(B.type,B.key,B.props,null,$.mode,W),W.ref=gu($,null,B),W.return=$,W;case fe:return B=pm(B,$.mode,W),B.return=$,B;case ye:var ce=B._init;return oe($,ce(B._payload),W)}if(Pt(B)||pe(B))return B=Ko(B,$.mode,W,null),B.return=$,B;Pd($,B)}return null}function re($,B,W,ce){var Oe=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Oe!==null?null:C($,B,""+W,ce);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case se:return W.key===Oe?L($,B,W,ce):null;case fe:return W.key===Oe?Q($,B,W,ce):null;case ye:return Oe=W._init,re($,B,Oe(W._payload),ce)}if(Pt(W)||pe(W))return Oe!==null?null:ie($,B,W,ce,null);Pd($,W)}return null}function Ie($,B,W,ce,Oe){if(typeof ce=="string"&&ce!==""||typeof ce=="number")return $=$.get(W)||null,C(B,$,""+ce,Oe);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case se:return $=$.get(ce.key===null?W:ce.key)||null,L(B,$,ce,Oe);case fe:return $=$.get(ce.key===null?W:ce.key)||null,Q(B,$,ce,Oe);case ye:var Ue=ce._init;return Ie($,B,W,Ue(ce._payload),Oe)}if(Pt(ce)||pe(ce))return $=$.get(W)||null,ie(B,$,ce,Oe,null);Pd(B,ce)}return null}function Ce($,B,W,ce){for(var Oe=null,Ue=null,Be=B,qe=B=0,En=null;Be!==null&&qe<W.length;qe++){Be.index>qe?(En=Be,Be=null):En=Be.sibling;var pt=re($,Be,W[qe],ce);if(pt===null){Be===null&&(Be=En);break}s&&Be&&pt.alternate===null&&o($,Be),B=_(pt,B,qe),Ue===null?Oe=pt:Ue.sibling=pt,Ue=pt,Be=En}if(qe===W.length)return u($,Be),Ot&&Uo($,qe),Oe;if(Be===null){for(;qe<W.length;qe++)Be=oe($,W[qe],ce),Be!==null&&(B=_(Be,B,qe),Ue===null?Oe=Be:Ue.sibling=Be,Ue=Be);return Ot&&Uo($,qe),Oe}for(Be=f($,Be);qe<W.length;qe++)En=Ie(Be,$,qe,W[qe],ce),En!==null&&(s&&En.alternate!==null&&Be.delete(En.key===null?qe:En.key),B=_(En,B,qe),Ue===null?Oe=En:Ue.sibling=En,Ue=En);return s&&Be.forEach(function(Zs){return o($,Zs)}),Ot&&Uo($,qe),Oe}function ke($,B,W,ce){var Oe=pe(W);if(typeof Oe!="function")throw Error(t(150));if(W=Oe.call(W),W==null)throw Error(t(151));for(var Ue=Oe=null,Be=B,qe=B=0,En=null,pt=W.next();Be!==null&&!pt.done;qe++,pt=W.next()){Be.index>qe?(En=Be,Be=null):En=Be.sibling;var Zs=re($,Be,pt.value,ce);if(Zs===null){Be===null&&(Be=En);break}s&&Be&&Zs.alternate===null&&o($,Be),B=_(Zs,B,qe),Ue===null?Oe=Zs:Ue.sibling=Zs,Ue=Zs,Be=En}if(pt.done)return u($,Be),Ot&&Uo($,qe),Oe;if(Be===null){for(;!pt.done;qe++,pt=W.next())pt=oe($,pt.value,ce),pt!==null&&(B=_(pt,B,qe),Ue===null?Oe=pt:Ue.sibling=pt,Ue=pt);return Ot&&Uo($,qe),Oe}for(Be=f($,Be);!pt.done;qe++,pt=W.next())pt=Ie(Be,$,qe,pt.value,ce),pt!==null&&(s&&pt.alternate!==null&&Be.delete(pt.key===null?qe:pt.key),B=_(pt,B,qe),Ue===null?Oe=pt:Ue.sibling=pt,Ue=pt);return s&&Be.forEach(function(J1){return o($,J1)}),Ot&&Uo($,qe),Oe}function Zt($,B,W,ce){if(typeof W=="object"&&W!==null&&W.type===I&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case se:e:{for(var Oe=W.key,Ue=B;Ue!==null;){if(Ue.key===Oe){if(Oe=W.type,Oe===I){if(Ue.tag===7){u($,Ue.sibling),B=m(Ue,W.props.children),B.return=$,$=B;break e}}else if(Ue.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===ye&&dv(Oe)===Ue.type){u($,Ue.sibling),B=m(Ue,W.props),B.ref=gu($,Ue,W),B.return=$,$=B;break e}u($,Ue);break}else o($,Ue);Ue=Ue.sibling}W.type===I?(B=Ko(W.props.children,$.mode,ce,W.key),B.return=$,$=B):(ce=Jd(W.type,W.key,W.props,null,$.mode,ce),ce.ref=gu($,B,W),ce.return=$,$=ce)}return T($);case fe:e:{for(Ue=W.key;B!==null;){if(B.key===Ue)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){u($,B.sibling),B=m(B,W.children||[]),B.return=$,$=B;break e}else{u($,B);break}else o($,B);B=B.sibling}B=pm(W,$.mode,ce),B.return=$,$=B}return T($);case ye:return Ue=W._init,Zt($,B,Ue(W._payload),ce)}if(Pt(W))return Ce($,B,W,ce);if(pe(W))return ke($,B,W,ce);Pd($,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,B!==null&&B.tag===6?(u($,B.sibling),B=m(B,W),B.return=$,$=B):(u($,B),B=fm(W,$.mode,ce),B.return=$,$=B),T($)):u($,B)}return Zt}var Ya=hv(!0),fv=hv(!1),bd=js(null),Cd=null,Ja=null,Ip=null;function Sp(){Ip=Ja=Cd=null}function Rp(s){var o=bd.current;xt(bd),s._currentValue=o}function Ap(s,o,u){for(;s!==null;){var f=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),s===u)break;s=s.return}}function Xa(s,o){Cd=s,Ip=Ja=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(gr=!0),s.firstContext=null)}function Qr(s){var o=s._currentValue;if(Ip!==s)if(s={context:s,memoizedValue:o,next:null},Ja===null){if(Cd===null)throw Error(t(308));Ja=s,Cd.dependencies={lanes:0,firstContext:s}}else Ja=Ja.next=s;return o}var Bo=null;function Pp(s){Bo===null?Bo=[s]:Bo.push(s)}function pv(s,o,u,f){var m=o.interleaved;return m===null?(u.next=u,Pp(o)):(u.next=m.next,m.next=u),o.interleaved=u,hs(s,f)}function hs(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var qs=!1;function bp(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mv(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function fs(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Ws(s,o,u){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(ht&2)!==0){var m=f.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),f.pending=o,hs(s,u)}return m=f.interleaved,m===null?(o.next=o,Pp(f)):(o.next=m.next,m.next=o),f.interleaved=o,hs(s,u)}function kd(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,Jl(s,u)}}function gv(s,o){var u=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var T={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=T:_=_.next=T,u=u.next}while(u!==null);_===null?m=_=o:_=_.next=o}else m=_=o;u={baseState:f.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:f.shared,effects:f.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function xd(s,o,u,f){var m=s.updateQueue;qs=!1;var _=m.firstBaseUpdate,T=m.lastBaseUpdate,C=m.shared.pending;if(C!==null){m.shared.pending=null;var L=C,Q=L.next;L.next=null,T===null?_=Q:T.next=Q,T=L;var ie=s.alternate;ie!==null&&(ie=ie.updateQueue,C=ie.lastBaseUpdate,C!==T&&(C===null?ie.firstBaseUpdate=Q:C.next=Q,ie.lastBaseUpdate=L))}if(_!==null){var oe=m.baseState;T=0,ie=Q=L=null,C=_;do{var re=C.lane,Ie=C.eventTime;if((f&re)===re){ie!==null&&(ie=ie.next={eventTime:Ie,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var Ce=s,ke=C;switch(re=o,Ie=u,ke.tag){case 1:if(Ce=ke.payload,typeof Ce=="function"){oe=Ce.call(Ie,oe,re);break e}oe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=ke.payload,re=typeof Ce=="function"?Ce.call(Ie,oe,re):Ce,re==null)break e;oe=ne({},oe,re);break e;case 2:qs=!0}}C.callback!==null&&C.lane!==0&&(s.flags|=64,re=m.effects,re===null?m.effects=[C]:re.push(C))}else Ie={eventTime:Ie,lane:re,tag:C.tag,payload:C.payload,callback:C.callback,next:null},ie===null?(Q=ie=Ie,L=oe):ie=ie.next=Ie,T|=re;if(C=C.next,C===null){if(C=m.shared.pending,C===null)break;re=C,C=re.next,re.next=null,m.lastBaseUpdate=re,m.shared.pending=null}}while(!0);if(ie===null&&(L=oe),m.baseState=L,m.firstBaseUpdate=Q,m.lastBaseUpdate=ie,o=m.shared.interleaved,o!==null){m=o;do T|=m.lane,m=m.next;while(m!==o)}else _===null&&(m.shared.lanes=0);$o|=T,s.lanes=T,s.memoizedState=oe}}function yv(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var f=s[o],m=f.callback;if(m!==null){if(f.callback=null,f=u,typeof m!="function")throw Error(t(191,m));m.call(f)}}}var yu={},Mi=js(yu),_u=js(yu),vu=js(yu);function zo(s){if(s===yu)throw Error(t(174));return s}function Cp(s,o){switch(St(vu,o),St(_u,s),St(Mi,yu),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Hr(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=Hr(o,s)}xt(Mi),St(Mi,o)}function Za(){xt(Mi),xt(_u),xt(vu)}function _v(s){zo(vu.current);var o=zo(Mi.current),u=Hr(o,s.type);o!==u&&(St(_u,s),St(Mi,u))}function kp(s){_u.current===s&&(xt(Mi),xt(_u))}var Bt=js(0);function Dd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var xp=[];function Dp(){for(var s=0;s<xp.length;s++)xp[s]._workInProgressVersionPrimary=null;xp.length=0}var Nd=ae.ReactCurrentDispatcher,Np=ae.ReactCurrentBatchConfig,jo=0,zt=null,cn=null,vn=null,Od=!1,wu=!1,Eu=0,v1=0;function jn(){throw Error(t(321))}function Op(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!di(s[u],o[u]))return!1;return!0}function Vp(s,o,u,f,m,_){if(jo=_,zt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Nd.current=s===null||s.memoizedState===null?I1:S1,s=u(f,m),wu){_=0;do{if(wu=!1,Eu=0,25<=_)throw Error(t(301));_+=1,vn=cn=null,o.updateQueue=null,Nd.current=R1,s=u(f,m)}while(wu)}if(Nd.current=Md,o=cn!==null&&cn.next!==null,jo=0,vn=cn=zt=null,Od=!1,o)throw Error(t(300));return s}function Lp(){var s=Eu!==0;return Eu=0,s}function Fi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?zt.memoizedState=vn=s:vn=vn.next=s,vn}function Yr(){if(cn===null){var s=zt.alternate;s=s!==null?s.memoizedState:null}else s=cn.next;var o=vn===null?zt.memoizedState:vn.next;if(o!==null)vn=o,cn=s;else{if(s===null)throw Error(t(310));cn=s,s={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},vn===null?zt.memoizedState=vn=s:vn=vn.next=s}return vn}function Tu(s,o){return typeof o=="function"?o(s):o}function Mp(s){var o=Yr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=cn,m=f.baseQueue,_=u.pending;if(_!==null){if(m!==null){var T=m.next;m.next=_.next,_.next=T}f.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,f=f.baseState;var C=T=null,L=null,Q=_;do{var ie=Q.lane;if((jo&ie)===ie)L!==null&&(L=L.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),f=Q.hasEagerState?Q.eagerState:s(f,Q.action);else{var oe={lane:ie,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};L===null?(C=L=oe,T=f):L=L.next=oe,zt.lanes|=ie,$o|=ie}Q=Q.next}while(Q!==null&&Q!==_);L===null?T=f:L.next=C,di(f,o.memoizedState)||(gr=!0),o.memoizedState=f,o.baseState=T,o.baseQueue=L,u.lastRenderedState=f}if(s=u.interleaved,s!==null){m=s;do _=m.lane,zt.lanes|=_,$o|=_,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Fp(s){var o=Yr(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=s;var f=u.dispatch,m=u.pending,_=o.memoizedState;if(m!==null){u.pending=null;var T=m=m.next;do _=s(_,T.action),T=T.next;while(T!==m);di(_,o.memoizedState)||(gr=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,f]}function vv(){}function wv(s,o){var u=zt,f=Yr(),m=o(),_=!di(f.memoizedState,m);if(_&&(f.memoizedState=m,gr=!0),f=f.queue,Up(Iv.bind(null,u,f,s),[s]),f.getSnapshot!==o||_||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,Iu(9,Tv.bind(null,u,f,m,o),void 0,null),wn===null)throw Error(t(349));(jo&30)!==0||Ev(u,o,m)}return m}function Ev(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Tv(s,o,u,f){o.value=u,o.getSnapshot=f,Sv(o)&&Rv(s)}function Iv(s,o,u){return u(function(){Sv(o)&&Rv(s)})}function Sv(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!di(s,u)}catch{return!0}}function Rv(s){var o=hs(s,1);o!==null&&gi(o,s,1,-1)}function Av(s){var o=Fi();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Tu,lastRenderedState:s},o.queue=s,s=s.dispatch=T1.bind(null,zt,s),[o.memoizedState,s]}function Iu(s,o,u,f){return s={tag:s,create:o,destroy:u,deps:f,next:null},o=zt.updateQueue,o===null?(o={lastEffect:null,stores:null},zt.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(f=u.next,u.next=s,s.next=f,o.lastEffect=s)),s}function Pv(){return Yr().memoizedState}function Vd(s,o,u,f){var m=Fi();zt.flags|=s,m.memoizedState=Iu(1|o,u,void 0,f===void 0?null:f)}function Ld(s,o,u,f){var m=Yr();f=f===void 0?null:f;var _=void 0;if(cn!==null){var T=cn.memoizedState;if(_=T.destroy,f!==null&&Op(f,T.deps)){m.memoizedState=Iu(o,u,_,f);return}}zt.flags|=s,m.memoizedState=Iu(1|o,u,_,f)}function bv(s,o){return Vd(8390656,8,s,o)}function Up(s,o){return Ld(2048,8,s,o)}function Cv(s,o){return Ld(4,2,s,o)}function kv(s,o){return Ld(4,4,s,o)}function xv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Dv(s,o,u){return u=u!=null?u.concat([s]):null,Ld(4,4,xv.bind(null,o,s),u)}function Bp(){}function Nv(s,o){var u=Yr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Op(o,f[1])?f[0]:(u.memoizedState=[s,o],s)}function Ov(s,o){var u=Yr();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Op(o,f[1])?f[0]:(s=s(),u.memoizedState=[s,o],s)}function Vv(s,o,u){return(jo&21)===0?(s.baseState&&(s.baseState=!1,gr=!0),s.memoizedState=u):(di(u,o)||(u=Ql(),zt.lanes|=u,$o|=u,s.baseState=!0),o)}function w1(s,o){var u=ot;ot=u!==0&&4>u?u:4,s(!0);var f=Np.transition;Np.transition={};try{s(!1),o()}finally{ot=u,Np.transition=f}}function Lv(){return Yr().memoizedState}function E1(s,o,u){var f=Ys(s);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Mv(s))Fv(o,u);else if(u=pv(s,o,u,f),u!==null){var m=rr();gi(u,s,f,m),Uv(u,o,f)}}function T1(s,o,u){var f=Ys(s),m={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Mv(s))Fv(o,m);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var T=o.lastRenderedState,C=_(T,u);if(m.hasEagerState=!0,m.eagerState=C,di(C,T)){var L=o.interleaved;L===null?(m.next=m,Pp(o)):(m.next=L.next,L.next=m),o.interleaved=m;return}}catch{}finally{}u=pv(s,o,m,f),u!==null&&(m=rr(),gi(u,s,f,m),Uv(u,o,f))}}function Mv(s){var o=s.alternate;return s===zt||o!==null&&o===zt}function Fv(s,o){wu=Od=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function Uv(s,o,u){if((u&4194240)!==0){var f=o.lanes;f&=s.pendingLanes,u|=f,o.lanes=u,Jl(s,u)}}var Md={readContext:Qr,useCallback:jn,useContext:jn,useEffect:jn,useImperativeHandle:jn,useInsertionEffect:jn,useLayoutEffect:jn,useMemo:jn,useReducer:jn,useRef:jn,useState:jn,useDebugValue:jn,useDeferredValue:jn,useTransition:jn,useMutableSource:jn,useSyncExternalStore:jn,useId:jn,unstable_isNewReconciler:!1},I1={readContext:Qr,useCallback:function(s,o){return Fi().memoizedState=[s,o===void 0?null:o],s},useContext:Qr,useEffect:bv,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Vd(4194308,4,xv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Vd(4194308,4,s,o)},useInsertionEffect:function(s,o){return Vd(4,2,s,o)},useMemo:function(s,o){var u=Fi();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var f=Fi();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},f.queue=s,s=s.dispatch=E1.bind(null,zt,s),[f.memoizedState,s]},useRef:function(s){var o=Fi();return s={current:s},o.memoizedState=s},useState:Av,useDebugValue:Bp,useDeferredValue:function(s){return Fi().memoizedState=s},useTransition:function(){var s=Av(!1),o=s[0];return s=w1.bind(null,s[1]),Fi().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var f=zt,m=Fi();if(Ot){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),wn===null)throw Error(t(349));(jo&30)!==0||Ev(f,o,u)}m.memoizedState=u;var _={value:u,getSnapshot:o};return m.queue=_,bv(Iv.bind(null,f,_,s),[s]),f.flags|=2048,Iu(9,Tv.bind(null,f,_,u,o),void 0,null),u},useId:function(){var s=Fi(),o=wn.identifierPrefix;if(Ot){var u=ds,f=cs;u=(f&~(1<<32-mt(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=Eu++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=v1++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},S1={readContext:Qr,useCallback:Nv,useContext:Qr,useEffect:Up,useImperativeHandle:Dv,useInsertionEffect:Cv,useLayoutEffect:kv,useMemo:Ov,useReducer:Mp,useRef:Pv,useState:function(){return Mp(Tu)},useDebugValue:Bp,useDeferredValue:function(s){var o=Yr();return Vv(o,cn.memoizedState,s)},useTransition:function(){var s=Mp(Tu)[0],o=Yr().memoizedState;return[s,o]},useMutableSource:vv,useSyncExternalStore:wv,useId:Lv,unstable_isNewReconciler:!1},R1={readContext:Qr,useCallback:Nv,useContext:Qr,useEffect:Up,useImperativeHandle:Dv,useInsertionEffect:Cv,useLayoutEffect:kv,useMemo:Ov,useReducer:Fp,useRef:Pv,useState:function(){return Fp(Tu)},useDebugValue:Bp,useDeferredValue:function(s){var o=Yr();return cn===null?o.memoizedState=s:Vv(o,cn.memoizedState,s)},useTransition:function(){var s=Fp(Tu)[0],o=Yr().memoizedState;return[s,o]},useMutableSource:vv,useSyncExternalStore:wv,useId:Lv,unstable_isNewReconciler:!1};function fi(s,o){if(s&&s.defaultProps){o=ne({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function zp(s,o,u,f){o=s.memoizedState,u=u(f,o),u=u==null?o:ne({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Fd={isMounted:function(s){return(s=s._reactInternals)?Pe(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var f=rr(),m=Ys(s),_=fs(f,m);_.payload=o,u!=null&&(_.callback=u),o=Ws(s,_,m),o!==null&&(gi(o,s,m,f),kd(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var f=rr(),m=Ys(s),_=fs(f,m);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=Ws(s,_,m),o!==null&&(gi(o,s,m,f),kd(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=rr(),f=Ys(s),m=fs(u,f);m.tag=2,o!=null&&(m.callback=o),o=Ws(s,m,f),o!==null&&(gi(o,s,f,u),kd(o,s,f))}};function Bv(s,o,u,f,m,_,T){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,_,T):o.prototype&&o.prototype.isPureReactComponent?!uu(u,f)||!uu(m,_):!0}function zv(s,o,u){var f=!1,m=$s,_=o.contextType;return typeof _=="object"&&_!==null?_=Qr(_):(m=mr(o)?Mo:zn.current,f=o.contextTypes,_=(f=f!=null)?Wa(s,m):$s),o=new o(u,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fd,s.stateNode=o,o._reactInternals=s,f&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=_),o}function jv(s,o,u,f){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==s&&Fd.enqueueReplaceState(o,o.state,null)}function jp(s,o,u,f){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},bp(s);var _=o.contextType;typeof _=="object"&&_!==null?m.context=Qr(_):(_=mr(o)?Mo:zn.current,m.context=Wa(s,_)),m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(zp(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Fd.enqueueReplaceState(m,m.state,null),xd(s,u,m,f),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function el(s,o){try{var u="",f=o;do u+=Ee(f),f=f.return;while(f);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:m,digest:null}}function $p(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Hp(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var A1=typeof WeakMap=="function"?WeakMap:Map;function $v(s,o,u){u=fs(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){qd||(qd=!0,sm=f),Hp(s,o)},u}function Hv(s,o,u){u=fs(-1,u),u.tag=3;var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;u.payload=function(){return f(m)},u.callback=function(){Hp(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Hp(s,o),typeof f!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})}),u}function qv(s,o,u){var f=s.pingCache;if(f===null){f=s.pingCache=new A1;var m=new Set;f.set(o,m)}else m=f.get(o),m===void 0&&(m=new Set,f.set(o,m));m.has(u)||(m.add(u),s=B1.bind(null,s,o,u),o.then(s,s))}function Wv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Kv(s,o,u,f,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=fs(-1,1),o.tag=2,Ws(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var P1=ae.ReactCurrentOwner,gr=!1;function nr(s,o,u,f){o.child=s===null?fv(o,null,u,f):Ya(o,s.child,u,f)}function Gv(s,o,u,f,m){u=u.render;var _=o.ref;return Xa(o,m),f=Vp(s,o,u,f,_,m),u=Lp(),s!==null&&!gr?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ps(s,o,m)):(Ot&&u&&_p(o),o.flags|=1,nr(s,o,f,m),o.child)}function Qv(s,o,u,f,m){if(s===null){var _=u.type;return typeof _=="function"&&!hm(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Yv(s,o,_,f,m)):(s=Jd(u.type,null,f,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,(s.lanes&m)===0){var T=_.memoizedProps;if(u=u.compare,u=u!==null?u:uu,u(T,f)&&s.ref===o.ref)return ps(s,o,m)}return o.flags|=1,s=Xs(_,f),s.ref=o.ref,s.return=o,o.child=s}function Yv(s,o,u,f,m){if(s!==null){var _=s.memoizedProps;if(uu(_,f)&&s.ref===o.ref)if(gr=!1,o.pendingProps=f=_,(s.lanes&m)!==0)(s.flags&131072)!==0&&(gr=!0);else return o.lanes=s.lanes,ps(s,o,m)}return qp(s,o,u,f,m)}function Jv(s,o,u){var f=o.pendingProps,m=f.children,_=s!==null?s.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(nl,Nr),Nr|=u;else{if((u&1073741824)===0)return s=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,St(nl,Nr),Nr|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=_!==null?_.baseLanes:u,St(nl,Nr),Nr|=f}else _!==null?(f=_.baseLanes|u,o.memoizedState=null):f=u,St(nl,Nr),Nr|=f;return nr(s,o,m,u),o.child}function Xv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function qp(s,o,u,f,m){var _=mr(u)?Mo:zn.current;return _=Wa(o,_),Xa(o,m),u=Vp(s,o,u,f,_,m),f=Lp(),s!==null&&!gr?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ps(s,o,m)):(Ot&&f&&_p(o),o.flags|=1,nr(s,o,u,m),o.child)}function Zv(s,o,u,f,m){if(mr(u)){var _=!0;Td(o)}else _=!1;if(Xa(o,m),o.stateNode===null)Bd(s,o),zv(o,u,f),jp(o,u,f,m),f=!0;else if(s===null){var T=o.stateNode,C=o.memoizedProps;T.props=C;var L=T.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=Qr(Q):(Q=mr(u)?Mo:zn.current,Q=Wa(o,Q));var ie=u.getDerivedStateFromProps,oe=typeof ie=="function"||typeof T.getSnapshotBeforeUpdate=="function";oe||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==f||L!==Q)&&jv(o,T,f,Q),qs=!1;var re=o.memoizedState;T.state=re,xd(o,f,T,m),L=o.memoizedState,C!==f||re!==L||pr.current||qs?(typeof ie=="function"&&(zp(o,u,ie,f),L=o.memoizedState),(C=qs||Bv(o,u,C,f,re,L,Q))?(oe||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=L),T.props=f,T.state=L,T.context=Q,f=C):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{T=o.stateNode,mv(s,o),C=o.memoizedProps,Q=o.type===o.elementType?C:fi(o.type,C),T.props=Q,oe=o.pendingProps,re=T.context,L=u.contextType,typeof L=="object"&&L!==null?L=Qr(L):(L=mr(u)?Mo:zn.current,L=Wa(o,L));var Ie=u.getDerivedStateFromProps;(ie=typeof Ie=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(C!==oe||re!==L)&&jv(o,T,f,L),qs=!1,re=o.memoizedState,T.state=re,xd(o,f,T,m);var Ce=o.memoizedState;C!==oe||re!==Ce||pr.current||qs?(typeof Ie=="function"&&(zp(o,u,Ie,f),Ce=o.memoizedState),(Q=qs||Bv(o,u,Q,f,re,Ce,L)||!1)?(ie||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(f,Ce,L),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(f,Ce,L)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=Ce),T.props=f,T.state=Ce,T.context=L,f=Q):(typeof T.componentDidUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||C===s.memoizedProps&&re===s.memoizedState||(o.flags|=1024),f=!1)}return Wp(s,o,u,f,_,m)}function Wp(s,o,u,f,m,_){Xv(s,o);var T=(o.flags&128)!==0;if(!f&&!T)return m&&iv(o,u,!1),ps(s,o,_);f=o.stateNode,P1.current=o;var C=T&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,s!==null&&T?(o.child=Ya(o,s.child,null,_),o.child=Ya(o,null,C,_)):nr(s,o,C,_),o.memoizedState=f.state,m&&iv(o,u,!0),o.child}function ew(s){var o=s.stateNode;o.pendingContext?nv(s,o.pendingContext,o.pendingContext!==o.context):o.context&&nv(s,o.context,!1),Cp(s,o.containerInfo)}function tw(s,o,u,f,m){return Qa(),Tp(m),o.flags|=256,nr(s,o,u,f),o.child}var Kp={dehydrated:null,treeContext:null,retryLane:0};function Gp(s){return{baseLanes:s,cachePool:null,transitions:null}}function nw(s,o,u){var f=o.pendingProps,m=Bt.current,_=!1,T=(o.flags&128)!==0,C;if((C=T)||(C=s!==null&&s.memoizedState===null?!1:(m&2)!==0),C?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),St(Bt,m&1),s===null)return Ep(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(T=f.children,s=f.fallback,_?(f=o.mode,_=o.child,T={mode:"hidden",children:T},(f&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=T):_=Xd(T,f,0,null),s=Ko(s,f,u,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=Gp(u),o.memoizedState=Kp,s):Qp(o,T));if(m=s.memoizedState,m!==null&&(C=m.dehydrated,C!==null))return b1(s,o,T,f,C,m,u);if(_){_=f.fallback,T=o.mode,m=s.child,C=m.sibling;var L={mode:"hidden",children:f.children};return(T&1)===0&&o.child!==m?(f=o.child,f.childLanes=0,f.pendingProps=L,o.deletions=null):(f=Xs(m,L),f.subtreeFlags=m.subtreeFlags&14680064),C!==null?_=Xs(C,_):(_=Ko(_,T,u,null),_.flags|=2),_.return=o,f.return=o,f.sibling=_,o.child=f,f=_,_=o.child,T=s.child.memoizedState,T=T===null?Gp(u):{baseLanes:T.baseLanes|u,cachePool:null,transitions:T.transitions},_.memoizedState=T,_.childLanes=s.childLanes&~u,o.memoizedState=Kp,f}return _=s.child,s=_.sibling,f=Xs(_,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=f,o.memoizedState=null,f}function Qp(s,o){return o=Xd({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Ud(s,o,u,f){return f!==null&&Tp(f),Ya(o,s.child,null,u),s=Qp(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function b1(s,o,u,f,m,_,T){if(u)return o.flags&256?(o.flags&=-257,f=$p(Error(t(422))),Ud(s,o,T,f)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=f.fallback,m=o.mode,f=Xd({mode:"visible",children:f.children},m,0,null),_=Ko(_,m,T,null),_.flags|=2,f.return=o,_.return=o,f.sibling=_,o.child=f,(o.mode&1)!==0&&Ya(o,s.child,null,T),o.child.memoizedState=Gp(T),o.memoizedState=Kp,_);if((o.mode&1)===0)return Ud(s,o,T,null);if(m.data==="$!"){if(f=m.nextSibling&&m.nextSibling.dataset,f)var C=f.dgst;return f=C,_=Error(t(419)),f=$p(_,f,void 0),Ud(s,o,T,f)}if(C=(T&s.childLanes)!==0,gr||C){if(f=wn,f!==null){switch(T&-T){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(f.suspendedLanes|T))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,hs(s,m),gi(f,s,m,-1))}return dm(),f=$p(Error(t(421))),Ud(s,o,T,f)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=z1.bind(null,s),m._reactRetry=o,null):(s=_.treeContext,Dr=zs(m.nextSibling),xr=o,Ot=!0,hi=null,s!==null&&(Kr[Gr++]=cs,Kr[Gr++]=ds,Kr[Gr++]=Fo,cs=s.id,ds=s.overflow,Fo=o),o=Qp(o,f.children),o.flags|=4096,o)}function rw(s,o,u){s.lanes|=o;var f=s.alternate;f!==null&&(f.lanes|=o),Ap(s.return,o,u)}function Yp(s,o,u,f,m){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:m}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=f,_.tail=u,_.tailMode=m)}function iw(s,o,u){var f=o.pendingProps,m=f.revealOrder,_=f.tail;if(nr(s,o,f.children,u),f=Bt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&rw(s,u,o);else if(s.tag===19)rw(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}f&=1}if(St(Bt,f),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)s=u.alternate,s!==null&&Dd(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Yp(o,!1,m,u,_);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&Dd(s)===null){o.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Yp(o,!0,u,null,_);break;case"together":Yp(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Bd(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ps(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),$o|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(t(153));if(o.child!==null){for(s=o.child,u=Xs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Xs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function C1(s,o,u){switch(o.tag){case 3:ew(o),Qa();break;case 5:_v(o);break;case 1:mr(o.type)&&Td(o);break;case 4:Cp(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,m=o.memoizedProps.value;St(bd,f._currentValue),f._currentValue=m;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(St(Bt,Bt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?nw(s,o,u):(St(Bt,Bt.current&1),s=ps(s,o,u),s!==null?s.sibling:null);St(Bt,Bt.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(s.flags&128)!==0){if(f)return iw(s,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),St(Bt,Bt.current),f)break;return null;case 22:case 23:return o.lanes=0,Jv(s,o,u)}return ps(s,o,u)}var sw,Jp,ow,aw;sw=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Jp=function(){},ow=function(s,o,u,f){var m=s.memoizedProps;if(m!==f){s=o.stateNode,zo(Mi.current);var _=null;switch(u){case"input":m=Sr(s,m),f=Sr(s,f),_=[];break;case"select":m=ne({},m,{value:void 0}),f=ne({},f,{value:void 0}),_=[];break;case"textarea":m=Yt(s,m),f=Yt(s,f),_=[];break;default:typeof m.onClick!="function"&&typeof f.onClick=="function"&&(s.onclick=vd)}bn(u,f);var T;u=null;for(Q in m)if(!f.hasOwnProperty(Q)&&m.hasOwnProperty(Q)&&m[Q]!=null)if(Q==="style"){var C=m[Q];for(T in C)C.hasOwnProperty(T)&&(u||(u={}),u[T]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?_||(_=[]):(_=_||[]).push(Q,null));for(Q in f){var L=f[Q];if(C=m!=null?m[Q]:void 0,f.hasOwnProperty(Q)&&L!==C&&(L!=null||C!=null))if(Q==="style")if(C){for(T in C)!C.hasOwnProperty(T)||L&&L.hasOwnProperty(T)||(u||(u={}),u[T]="");for(T in L)L.hasOwnProperty(T)&&C[T]!==L[T]&&(u||(u={}),u[T]=L[T])}else u||(_||(_=[]),_.push(Q,u)),u=L;else Q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,C=C?C.__html:void 0,L!=null&&C!==L&&(_=_||[]).push(Q,L)):Q==="children"?typeof L!="string"&&typeof L!="number"||(_=_||[]).push(Q,""+L):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(L!=null&&Q==="onScroll"&&kt("scroll",s),_||C===L||(_=[])):(_=_||[]).push(Q,L))}u&&(_=_||[]).push("style",u);var Q=_;(o.updateQueue=Q)&&(o.flags|=4)}},aw=function(s,o,u,f){u!==f&&(o.flags|=4)};function Su(s,o){if(!Ot)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function $n(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,f=0;if(o)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags&14680064,f|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,f|=m.subtreeFlags,f|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=f,s.childLanes=u,o}function k1(s,o,u){var f=o.pendingProps;switch(vp(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $n(o),null;case 1:return mr(o.type)&&Ed(),$n(o),null;case 3:return f=o.stateNode,Za(),xt(pr),xt(zn),Dp(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Ad(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,hi!==null&&(lm(hi),hi=null))),Jp(s,o),$n(o),null;case 5:kp(o);var m=zo(vu.current);if(u=o.type,s!==null&&o.stateNode!=null)ow(s,o,u,f,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return $n(o),null}if(s=zo(Mi.current),Ad(o)){f=o.stateNode,u=o.type;var _=o.memoizedProps;switch(f[Li]=o,f[pu]=_,s=(o.mode&1)!==0,u){case"dialog":kt("cancel",f),kt("close",f);break;case"iframe":case"object":case"embed":kt("load",f);break;case"video":case"audio":for(m=0;m<du.length;m++)kt(du[m],f);break;case"source":kt("error",f);break;case"img":case"image":case"link":kt("error",f),kt("load",f);break;case"details":kt("toggle",f);break;case"input":Os(f,_),kt("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!_.multiple},kt("invalid",f);break;case"textarea":ur(f,_),kt("invalid",f)}bn(u,_),m=null;for(var T in _)if(_.hasOwnProperty(T)){var C=_[T];T==="children"?typeof C=="string"?f.textContent!==C&&(_.suppressHydrationWarning!==!0&&_d(f.textContent,C,s),m=["children",C]):typeof C=="number"&&f.textContent!==""+C&&(_.suppressHydrationWarning!==!0&&_d(f.textContent,C,s),m=["children",""+C]):i.hasOwnProperty(T)&&C!=null&&T==="onScroll"&&kt("scroll",f)}switch(u){case"input":Ii(f),Si(f,_,!0);break;case"textarea":Ii(f),Mn(f);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(f.onclick=vd)}f=m,o.updateQueue=f,f!==null&&(o.flags|=4)}else{T=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Rr(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=T.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof f.is=="string"?s=T.createElement(u,{is:f.is}):(s=T.createElement(u),u==="select"&&(T=s,f.multiple?T.multiple=!0:f.size&&(T.size=f.size))):s=T.createElementNS(s,u),s[Li]=o,s[pu]=f,sw(s,o,!1,!1),o.stateNode=s;e:{switch(T=oi(u,f),u){case"dialog":kt("cancel",s),kt("close",s),m=f;break;case"iframe":case"object":case"embed":kt("load",s),m=f;break;case"video":case"audio":for(m=0;m<du.length;m++)kt(du[m],s);m=f;break;case"source":kt("error",s),m=f;break;case"img":case"image":case"link":kt("error",s),kt("load",s),m=f;break;case"details":kt("toggle",s),m=f;break;case"input":Os(s,f),m=Sr(s,f),kt("invalid",s);break;case"option":m=f;break;case"select":s._wrapperState={wasMultiple:!!f.multiple},m=ne({},f,{value:void 0}),kt("invalid",s);break;case"textarea":ur(s,f),m=Yt(s,f),kt("invalid",s);break;default:m=f}bn(u,m),C=m;for(_ in C)if(C.hasOwnProperty(_)){var L=C[_];_==="style"?gn(s,L):_==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&mn(s,L)):_==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Pn(s,L):typeof L=="number"&&Pn(s,""+L):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?L!=null&&_==="onScroll"&&kt("scroll",s):L!=null&&Z(s,_,L,T))}switch(u){case"input":Ii(s),Si(s,f,!1);break;case"textarea":Ii(s),Mn(s);break;case"option":f.value!=null&&s.setAttribute("value",""+je(f.value));break;case"select":s.multiple=!!f.multiple,_=f.value,_!=null?Jn(s,!!f.multiple,_,!1):f.defaultValue!=null&&Jn(s,!!f.multiple,f.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=vd)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return $n(o),null;case 6:if(s&&o.stateNode!=null)aw(s,o,s.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=zo(vu.current),zo(Mi.current),Ad(o)){if(f=o.stateNode,u=o.memoizedProps,f[Li]=o,(_=f.nodeValue!==u)&&(s=xr,s!==null))switch(s.tag){case 3:_d(f.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&_d(f.nodeValue,u,(s.mode&1)!==0)}_&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Li]=o,o.stateNode=f}return $n(o),null;case 13:if(xt(Bt),f=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ot&&Dr!==null&&(o.mode&1)!==0&&(o.flags&128)===0)cv(),Qa(),o.flags|=98560,_=!1;else if(_=Ad(o),f!==null&&f.dehydrated!==null){if(s===null){if(!_)throw Error(t(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(t(317));_[Li]=o}else Qa(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;$n(o),_=!1}else hi!==null&&(lm(hi),hi=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(s!==null&&s.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(Bt.current&1)!==0?dn===0&&(dn=3):dm())),o.updateQueue!==null&&(o.flags|=4),$n(o),null);case 4:return Za(),Jp(s,o),s===null&&hu(o.stateNode.containerInfo),$n(o),null;case 10:return Rp(o.type._context),$n(o),null;case 17:return mr(o.type)&&Ed(),$n(o),null;case 19:if(xt(Bt),_=o.memoizedState,_===null)return $n(o),null;if(f=(o.flags&128)!==0,T=_.rendering,T===null)if(f)Su(_,!1);else{if(dn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(T=Dd(s),T!==null){for(o.flags|=128,Su(_,!1),f=T.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)_=u,s=f,_.flags&=14680066,T=_.alternate,T===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=T.childLanes,_.lanes=T.lanes,_.child=T.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=T.memoizedProps,_.memoizedState=T.memoizedState,_.updateQueue=T.updateQueue,_.type=T.type,s=T.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return St(Bt,Bt.current&1|2),o.child}s=s.sibling}_.tail!==null&&ct()>rl&&(o.flags|=128,f=!0,Su(_,!1),o.lanes=4194304)}else{if(!f)if(s=Dd(T),s!==null){if(o.flags|=128,f=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Su(_,!0),_.tail===null&&_.tailMode==="hidden"&&!T.alternate&&!Ot)return $n(o),null}else 2*ct()-_.renderingStartTime>rl&&u!==1073741824&&(o.flags|=128,f=!0,Su(_,!1),o.lanes=4194304);_.isBackwards?(T.sibling=o.child,o.child=T):(u=_.last,u!==null?u.sibling=T:o.child=T,_.last=T)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=ct(),o.sibling=null,u=Bt.current,St(Bt,f?u&1|2:u&1),o):($n(o),null);case 22:case 23:return cm(),f=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(Nr&1073741824)!==0&&($n(o),o.subtreeFlags&6&&(o.flags|=8192)):$n(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function x1(s,o){switch(vp(o),o.tag){case 1:return mr(o.type)&&Ed(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Za(),xt(pr),xt(zn),Dp(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return kp(o),null;case 13:if(xt(Bt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Qa()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return xt(Bt),null;case 4:return Za(),null;case 10:return Rp(o.type._context),null;case 22:case 23:return cm(),null;case 24:return null;default:return null}}var zd=!1,Hn=!1,D1=typeof WeakSet=="function"?WeakSet:Set,be=null;function tl(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Kt(s,o,f)}else u.current=null}function Xp(s,o,u){try{u()}catch(f){Kt(s,o,f)}}var lw=!1;function N1(s,o){if(cp=ss,s=B_(),np(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var m=f.anchorOffset,_=f.focusNode;f=f.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var T=0,C=-1,L=-1,Q=0,ie=0,oe=s,re=null;t:for(;;){for(var Ie;oe!==u||m!==0&&oe.nodeType!==3||(C=T+m),oe!==_||f!==0&&oe.nodeType!==3||(L=T+f),oe.nodeType===3&&(T+=oe.nodeValue.length),(Ie=oe.firstChild)!==null;)re=oe,oe=Ie;for(;;){if(oe===s)break t;if(re===u&&++Q===m&&(C=T),re===_&&++ie===f&&(L=T),(Ie=oe.nextSibling)!==null)break;oe=re,re=oe.parentNode}oe=Ie}u=C===-1||L===-1?null:{start:C,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(dp={focusedElem:s,selectionRange:u},ss=!1,be=o;be!==null;)if(o=be,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,be=s;else for(;be!==null;){o=be;try{var Ce=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var ke=Ce.memoizedProps,Zt=Ce.memoizedState,$=o.stateNode,B=$.getSnapshotBeforeUpdate(o.elementType===o.type?ke:fi(o.type,ke),Zt);$.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var W=o.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ce){Kt(o,o.return,ce)}if(s=o.sibling,s!==null){s.return=o.return,be=s;break}be=o.return}return Ce=lw,lw=!1,Ce}function Ru(s,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var m=f=f.next;do{if((m.tag&s)===s){var _=m.destroy;m.destroy=void 0,_!==void 0&&Xp(o,u,_)}m=m.next}while(m!==f)}}function jd(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Zp(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function uw(s){var o=s.alternate;o!==null&&(s.alternate=null,uw(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Li],delete o[pu],delete o[mp],delete o[m1],delete o[g1])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function cw(s){return s.tag===5||s.tag===3||s.tag===4}function dw(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||cw(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function em(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=vd));else if(f!==4&&(s=s.child,s!==null))for(em(s,o,u),s=s.sibling;s!==null;)em(s,o,u),s=s.sibling}function tm(s,o,u){var f=s.tag;if(f===5||f===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(f!==4&&(s=s.child,s!==null))for(tm(s,o,u),s=s.sibling;s!==null;)tm(s,o,u),s=s.sibling}var Dn=null,pi=!1;function Ks(s,o,u){for(u=u.child;u!==null;)hw(s,o,u),u=u.sibling}function hw(s,o,u){if(_n&&typeof _n.onCommitFiberUnmount=="function")try{_n.onCommitFiberUnmount(Wr,u)}catch{}switch(u.tag){case 5:Hn||tl(u,o);case 6:var f=Dn,m=pi;Dn=null,Ks(s,o,u),Dn=f,pi=m,Dn!==null&&(pi?(s=Dn,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Dn.removeChild(u.stateNode));break;case 18:Dn!==null&&(pi?(s=Dn,u=u.stateNode,s.nodeType===8?pp(s.parentNode,u):s.nodeType===1&&pp(s,u),Ms(s)):pp(Dn,u.stateNode));break;case 4:f=Dn,m=pi,Dn=u.stateNode.containerInfo,pi=!0,Ks(s,o,u),Dn=f,pi=m;break;case 0:case 11:case 14:case 15:if(!Hn&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){m=f=f.next;do{var _=m,T=_.destroy;_=_.tag,T!==void 0&&((_&2)!==0||(_&4)!==0)&&Xp(u,o,T),m=m.next}while(m!==f)}Ks(s,o,u);break;case 1:if(!Hn&&(tl(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(C){Kt(u,o,C)}Ks(s,o,u);break;case 21:Ks(s,o,u);break;case 22:u.mode&1?(Hn=(f=Hn)||u.memoizedState!==null,Ks(s,o,u),Hn=f):Ks(s,o,u);break;default:Ks(s,o,u)}}function fw(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new D1),o.forEach(function(f){var m=j1.bind(null,s,f);u.has(f)||(u.add(f),f.then(m,m))})}}function mi(s,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var m=u[f];try{var _=s,T=o,C=T;e:for(;C!==null;){switch(C.tag){case 5:Dn=C.stateNode,pi=!1;break e;case 3:Dn=C.stateNode.containerInfo,pi=!0;break e;case 4:Dn=C.stateNode.containerInfo,pi=!0;break e}C=C.return}if(Dn===null)throw Error(t(160));hw(_,T,m),Dn=null,pi=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(Q){Kt(m,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)pw(o,s),o=o.sibling}function pw(s,o){var u=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(mi(o,s),Ui(s),f&4){try{Ru(3,s,s.return),jd(3,s)}catch(ke){Kt(s,s.return,ke)}try{Ru(5,s,s.return)}catch(ke){Kt(s,s.return,ke)}}break;case 1:mi(o,s),Ui(s),f&512&&u!==null&&tl(u,u.return);break;case 5:if(mi(o,s),Ui(s),f&512&&u!==null&&tl(u,u.return),s.flags&32){var m=s.stateNode;try{Pn(m,"")}catch(ke){Kt(s,s.return,ke)}}if(f&4&&(m=s.stateNode,m!=null)){var _=s.memoizedProps,T=u!==null?u.memoizedProps:_,C=s.type,L=s.updateQueue;if(s.updateQueue=null,L!==null)try{C==="input"&&_.type==="radio"&&_.name!=null&&An(m,_),oi(C,T);var Q=oi(C,_);for(T=0;T<L.length;T+=2){var ie=L[T],oe=L[T+1];ie==="style"?gn(m,oe):ie==="dangerouslySetInnerHTML"?mn(m,oe):ie==="children"?Pn(m,oe):Z(m,ie,oe,Q)}switch(C){case"input":Yn(m,_);break;case"textarea":cr(m,_);break;case"select":var re=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var Ie=_.value;Ie!=null?Jn(m,!!_.multiple,Ie,!1):re!==!!_.multiple&&(_.defaultValue!=null?Jn(m,!!_.multiple,_.defaultValue,!0):Jn(m,!!_.multiple,_.multiple?[]:"",!1))}m[pu]=_}catch(ke){Kt(s,s.return,ke)}}break;case 6:if(mi(o,s),Ui(s),f&4){if(s.stateNode===null)throw Error(t(162));m=s.stateNode,_=s.memoizedProps;try{m.nodeValue=_}catch(ke){Kt(s,s.return,ke)}}break;case 3:if(mi(o,s),Ui(s),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ms(o.containerInfo)}catch(ke){Kt(s,s.return,ke)}break;case 4:mi(o,s),Ui(s);break;case 13:mi(o,s),Ui(s),m=s.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(im=ct())),f&4&&fw(s);break;case 22:if(ie=u!==null&&u.memoizedState!==null,s.mode&1?(Hn=(Q=Hn)||ie,mi(o,s),Hn=Q):mi(o,s),Ui(s),f&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!ie&&(s.mode&1)!==0)for(be=s,ie=s.child;ie!==null;){for(oe=be=ie;be!==null;){switch(re=be,Ie=re.child,re.tag){case 0:case 11:case 14:case 15:Ru(4,re,re.return);break;case 1:tl(re,re.return);var Ce=re.stateNode;if(typeof Ce.componentWillUnmount=="function"){f=re,u=re.return;try{o=f,Ce.props=o.memoizedProps,Ce.state=o.memoizedState,Ce.componentWillUnmount()}catch(ke){Kt(f,u,ke)}}break;case 5:tl(re,re.return);break;case 22:if(re.memoizedState!==null){yw(oe);continue}}Ie!==null?(Ie.return=re,be=Ie):yw(oe)}ie=ie.sibling}e:for(ie=null,oe=s;;){if(oe.tag===5){if(ie===null){ie=oe;try{m=oe.stateNode,Q?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(C=oe.stateNode,L=oe.memoizedProps.style,T=L!=null&&L.hasOwnProperty("display")?L.display:null,C.style.display=qr("display",T))}catch(ke){Kt(s,s.return,ke)}}}else if(oe.tag===6){if(ie===null)try{oe.stateNode.nodeValue=Q?"":oe.memoizedProps}catch(ke){Kt(s,s.return,ke)}}else if((oe.tag!==22&&oe.tag!==23||oe.memoizedState===null||oe===s)&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===s)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===s)break e;ie===oe&&(ie=null),oe=oe.return}ie===oe&&(ie=null),oe.sibling.return=oe.return,oe=oe.sibling}}break;case 19:mi(o,s),Ui(s),f&4&&fw(s);break;case 21:break;default:mi(o,s),Ui(s)}}function Ui(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(cw(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var m=f.stateNode;f.flags&32&&(Pn(m,""),f.flags&=-33);var _=dw(s);tm(s,_,m);break;case 3:case 4:var T=f.stateNode.containerInfo,C=dw(s);em(s,C,T);break;default:throw Error(t(161))}}catch(L){Kt(s,s.return,L)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function O1(s,o,u){be=s,mw(s)}function mw(s,o,u){for(var f=(s.mode&1)!==0;be!==null;){var m=be,_=m.child;if(m.tag===22&&f){var T=m.memoizedState!==null||zd;if(!T){var C=m.alternate,L=C!==null&&C.memoizedState!==null||Hn;C=zd;var Q=Hn;if(zd=T,(Hn=L)&&!Q)for(be=m;be!==null;)T=be,L=T.child,T.tag===22&&T.memoizedState!==null?_w(m):L!==null?(L.return=T,be=L):_w(m);for(;_!==null;)be=_,mw(_),_=_.sibling;be=m,zd=C,Hn=Q}gw(s)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,be=_):gw(s)}}function gw(s){for(;be!==null;){var o=be;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Hn||jd(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Hn)if(u===null)f.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:fi(o.type,u.memoizedProps);f.componentDidUpdate(m,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&yv(o,_,f);break;case 3:var T=o.updateQueue;if(T!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}yv(o,T,u)}break;case 5:var C=o.stateNode;if(u===null&&o.flags&4){u=C;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var ie=Q.memoizedState;if(ie!==null){var oe=ie.dehydrated;oe!==null&&Ms(oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Hn||o.flags&512&&Zp(o)}catch(re){Kt(o,o.return,re)}}if(o===s){be=null;break}if(u=o.sibling,u!==null){u.return=o.return,be=u;break}be=o.return}}function yw(s){for(;be!==null;){var o=be;if(o===s){be=null;break}var u=o.sibling;if(u!==null){u.return=o.return,be=u;break}be=o.return}}function _w(s){for(;be!==null;){var o=be;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{jd(4,o)}catch(L){Kt(o,u,L)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var m=o.return;try{f.componentDidMount()}catch(L){Kt(o,m,L)}}var _=o.return;try{Zp(o)}catch(L){Kt(o,_,L)}break;case 5:var T=o.return;try{Zp(o)}catch(L){Kt(o,T,L)}}}catch(L){Kt(o,o.return,L)}if(o===s){be=null;break}var C=o.sibling;if(C!==null){C.return=o.return,be=C;break}be=o.return}}var V1=Math.ceil,$d=ae.ReactCurrentDispatcher,nm=ae.ReactCurrentOwner,Jr=ae.ReactCurrentBatchConfig,ht=0,wn=null,rn=null,Nn=0,Nr=0,nl=js(0),dn=0,Au=null,$o=0,Hd=0,rm=0,Pu=null,yr=null,im=0,rl=1/0,ms=null,qd=!1,sm=null,Gs=null,Wd=!1,Qs=null,Kd=0,bu=0,om=null,Gd=-1,Qd=0;function rr(){return(ht&6)!==0?ct():Gd!==-1?Gd:Gd=ct()}function Ys(s){return(s.mode&1)===0?1:(ht&2)!==0&&Nn!==0?Nn&-Nn:_1.transition!==null?(Qd===0&&(Qd=Ql()),Qd):(s=ot,s!==0||(s=window.event,s=s===void 0?16:Da(s.type)),s)}function gi(s,o,u,f){if(50<bu)throw bu=0,om=null,Error(t(185));xo(s,u,f),((ht&2)===0||s!==wn)&&(s===wn&&((ht&2)===0&&(Hd|=u),dn===4&&Js(s,Nn)),_r(s,f),u===1&&ht===0&&(o.mode&1)===0&&(rl=ct()+500,Id&&Hs()))}function _r(s,o){var u=s.callbackNode;ko(s,o);var f=ns(s,s===wn?Nn:0);if(f===0)u!==null&&qt(u),s.callbackNode=null,s.callbackPriority=0;else if(o=f&-f,s.callbackPriority!==o){if(u!=null&&qt(u),o===1)s.tag===0?y1(ww.bind(null,s)):sv(ww.bind(null,s)),f1(function(){(ht&6)===0&&Hs()}),u=null;else{switch(Ai(f)){case 1:u=er;break;case 4:u=Un;break;case 16:u=ai;break;case 536870912:u=fr;break;default:u=ai}u=bw(u,vw.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function vw(s,o){if(Gd=-1,Qd=0,(ht&6)!==0)throw Error(t(327));var u=s.callbackNode;if(il()&&s.callbackNode!==u)return null;var f=ns(s,s===wn?Nn:0);if(f===0)return null;if((f&30)!==0||(f&s.expiredLanes)!==0||o)o=Yd(s,f);else{o=f;var m=ht;ht|=2;var _=Tw();(wn!==s||Nn!==o)&&(ms=null,rl=ct()+500,qo(s,o));do try{F1();break}catch(C){Ew(s,C)}while(!0);Sp(),$d.current=_,ht=m,rn!==null?o=0:(wn=null,Nn=0,o=dn)}if(o!==0){if(o===2&&(m=Gl(s),m!==0&&(f=m,o=am(s,m))),o===1)throw u=Au,qo(s,0),Js(s,f),_r(s,ct()),u;if(o===6)Js(s,f);else{if(m=s.current.alternate,(f&30)===0&&!L1(m)&&(o=Yd(s,f),o===2&&(_=Gl(s),_!==0&&(f=_,o=am(s,_))),o===1))throw u=Au,qo(s,0),Js(s,f),_r(s,ct()),u;switch(s.finishedWork=m,s.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Wo(s,yr,ms);break;case 3:if(Js(s,f),(f&130023424)===f&&(o=im+500-ct(),10<o)){if(ns(s,0)!==0)break;if(m=s.suspendedLanes,(m&f)!==f){rr(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=fp(Wo.bind(null,s,yr,ms),o);break}Wo(s,yr,ms);break;case 4:if(Js(s,f),(f&4194240)===f)break;for(o=s.eventTimes,m=-1;0<f;){var T=31-mt(f);_=1<<T,T=o[T],T>m&&(m=T),f&=~_}if(f=m,f=ct()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*V1(f/1960))-f,10<f){s.timeoutHandle=fp(Wo.bind(null,s,yr,ms),f);break}Wo(s,yr,ms);break;case 5:Wo(s,yr,ms);break;default:throw Error(t(329))}}}return _r(s,ct()),s.callbackNode===u?vw.bind(null,s):null}function am(s,o){var u=Pu;return s.current.memoizedState.isDehydrated&&(qo(s,o).flags|=256),s=Yd(s,o),s!==2&&(o=yr,yr=u,o!==null&&lm(o)),s}function lm(s){yr===null?yr=s:yr.push.apply(yr,s)}function L1(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var m=u[f],_=m.getSnapshot;m=m.value;try{if(!di(_(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Js(s,o){for(o&=~rm,o&=~Hd,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-mt(o),f=1<<u;s[u]=-1,o&=~f}}function ww(s){if((ht&6)!==0)throw Error(t(327));il();var o=ns(s,0);if((o&1)===0)return _r(s,ct()),null;var u=Yd(s,o);if(s.tag!==0&&u===2){var f=Gl(s);f!==0&&(o=f,u=am(s,f))}if(u===1)throw u=Au,qo(s,0),Js(s,o),_r(s,ct()),u;if(u===6)throw Error(t(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Wo(s,yr,ms),_r(s,ct()),null}function um(s,o){var u=ht;ht|=1;try{return s(o)}finally{ht=u,ht===0&&(rl=ct()+500,Id&&Hs())}}function Ho(s){Qs!==null&&Qs.tag===0&&(ht&6)===0&&il();var o=ht;ht|=1;var u=Jr.transition,f=ot;try{if(Jr.transition=null,ot=1,s)return s()}finally{ot=f,Jr.transition=u,ht=o,(ht&6)===0&&Hs()}}function cm(){Nr=nl.current,xt(nl)}function qo(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,h1(u)),rn!==null)for(u=rn.return;u!==null;){var f=u;switch(vp(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Ed();break;case 3:Za(),xt(pr),xt(zn),Dp();break;case 5:kp(f);break;case 4:Za();break;case 13:xt(Bt);break;case 19:xt(Bt);break;case 10:Rp(f.type._context);break;case 22:case 23:cm()}u=u.return}if(wn=s,rn=s=Xs(s.current,null),Nn=Nr=o,dn=0,Au=null,rm=Hd=$o=0,yr=Pu=null,Bo!==null){for(o=0;o<Bo.length;o++)if(u=Bo[o],f=u.interleaved,f!==null){u.interleaved=null;var m=f.next,_=u.pending;if(_!==null){var T=_.next;_.next=m,f.next=T}u.pending=f}Bo=null}return s}function Ew(s,o){do{var u=rn;try{if(Sp(),Nd.current=Md,Od){for(var f=zt.memoizedState;f!==null;){var m=f.queue;m!==null&&(m.pending=null),f=f.next}Od=!1}if(jo=0,vn=cn=zt=null,wu=!1,Eu=0,nm.current=null,u===null||u.return===null){dn=1,Au=o,rn=null;break}e:{var _=s,T=u.return,C=u,L=o;if(o=Nn,C.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Q=L,ie=C,oe=ie.tag;if((ie.mode&1)===0&&(oe===0||oe===11||oe===15)){var re=ie.alternate;re?(ie.updateQueue=re.updateQueue,ie.memoizedState=re.memoizedState,ie.lanes=re.lanes):(ie.updateQueue=null,ie.memoizedState=null)}var Ie=Wv(T);if(Ie!==null){Ie.flags&=-257,Kv(Ie,T,C,_,o),Ie.mode&1&&qv(_,Q,o),o=Ie,L=Q;var Ce=o.updateQueue;if(Ce===null){var ke=new Set;ke.add(L),o.updateQueue=ke}else Ce.add(L);break e}else{if((o&1)===0){qv(_,Q,o),dm();break e}L=Error(t(426))}}else if(Ot&&C.mode&1){var Zt=Wv(T);if(Zt!==null){(Zt.flags&65536)===0&&(Zt.flags|=256),Kv(Zt,T,C,_,o),Tp(el(L,C));break e}}_=L=el(L,C),dn!==4&&(dn=2),Pu===null?Pu=[_]:Pu.push(_),_=T;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var $=$v(_,L,o);gv(_,$);break e;case 1:C=L;var B=_.type,W=_.stateNode;if((_.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Gs===null||!Gs.has(W)))){_.flags|=65536,o&=-o,_.lanes|=o;var ce=Hv(_,C,o);gv(_,ce);break e}}_=_.return}while(_!==null)}Sw(u)}catch(Oe){o=Oe,rn===u&&u!==null&&(rn=u=u.return);continue}break}while(!0)}function Tw(){var s=$d.current;return $d.current=Md,s===null?Md:s}function dm(){(dn===0||dn===3||dn===2)&&(dn=4),wn===null||($o&268435455)===0&&(Hd&268435455)===0||Js(wn,Nn)}function Yd(s,o){var u=ht;ht|=2;var f=Tw();(wn!==s||Nn!==o)&&(ms=null,qo(s,o));do try{M1();break}catch(m){Ew(s,m)}while(!0);if(Sp(),ht=u,$d.current=f,rn!==null)throw Error(t(261));return wn=null,Nn=0,dn}function M1(){for(;rn!==null;)Iw(rn)}function F1(){for(;rn!==null&&!nt();)Iw(rn)}function Iw(s){var o=Pw(s.alternate,s,Nr);s.memoizedProps=s.pendingProps,o===null?Sw(s):rn=o,nm.current=null}function Sw(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=k1(u,o,Nr),u!==null){rn=u;return}}else{if(u=x1(u,o),u!==null){u.flags&=32767,rn=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{dn=6,rn=null;return}}if(o=o.sibling,o!==null){rn=o;return}rn=o=s}while(o!==null);dn===0&&(dn=5)}function Wo(s,o,u){var f=ot,m=Jr.transition;try{Jr.transition=null,ot=1,U1(s,o,u,f)}finally{Jr.transition=m,ot=f}return null}function U1(s,o,u,f){do il();while(Qs!==null);if((ht&6)!==0)throw Error(t(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(t(177));s.callbackNode=null,s.callbackPriority=0;var _=u.lanes|u.childLanes;if(Jf(s,_),s===wn&&(rn=wn=null,Nn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Wd||(Wd=!0,bw(ai,function(){return il(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Jr.transition,Jr.transition=null;var T=ot;ot=1;var C=ht;ht|=4,nm.current=null,N1(s,u),pw(u,s),s1(dp),ss=!!cp,dp=cp=null,s.current=u,O1(u),Wt(),ht=C,ot=T,Jr.transition=_}else s.current=u;if(Wd&&(Wd=!1,Qs=s,Kd=m),_=s.pendingLanes,_===0&&(Gs=null),Ze(u.stateNode),_r(s,ct()),o!==null)for(f=s.onRecoverableError,u=0;u<o.length;u++)m=o[u],f(m.value,{componentStack:m.stack,digest:m.digest});if(qd)throw qd=!1,s=sm,sm=null,s;return(Kd&1)!==0&&s.tag!==0&&il(),_=s.pendingLanes,(_&1)!==0?s===om?bu++:(bu=0,om=s):bu=0,Hs(),null}function il(){if(Qs!==null){var s=Ai(Kd),o=Jr.transition,u=ot;try{if(Jr.transition=null,ot=16>s?16:s,Qs===null)var f=!1;else{if(s=Qs,Qs=null,Kd=0,(ht&6)!==0)throw Error(t(331));var m=ht;for(ht|=4,be=s.current;be!==null;){var _=be,T=_.child;if((be.flags&16)!==0){var C=_.deletions;if(C!==null){for(var L=0;L<C.length;L++){var Q=C[L];for(be=Q;be!==null;){var ie=be;switch(ie.tag){case 0:case 11:case 15:Ru(8,ie,_)}var oe=ie.child;if(oe!==null)oe.return=ie,be=oe;else for(;be!==null;){ie=be;var re=ie.sibling,Ie=ie.return;if(uw(ie),ie===Q){be=null;break}if(re!==null){re.return=Ie,be=re;break}be=Ie}}}var Ce=_.alternate;if(Ce!==null){var ke=Ce.child;if(ke!==null){Ce.child=null;do{var Zt=ke.sibling;ke.sibling=null,ke=Zt}while(ke!==null)}}be=_}}if((_.subtreeFlags&2064)!==0&&T!==null)T.return=_,be=T;else e:for(;be!==null;){if(_=be,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Ru(9,_,_.return)}var $=_.sibling;if($!==null){$.return=_.return,be=$;break e}be=_.return}}var B=s.current;for(be=B;be!==null;){T=be;var W=T.child;if((T.subtreeFlags&2064)!==0&&W!==null)W.return=T,be=W;else e:for(T=B;be!==null;){if(C=be,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:jd(9,C)}}catch(Oe){Kt(C,C.return,Oe)}if(C===T){be=null;break e}var ce=C.sibling;if(ce!==null){ce.return=C.return,be=ce;break e}be=C.return}}if(ht=m,Hs(),_n&&typeof _n.onPostCommitFiberRoot=="function")try{_n.onPostCommitFiberRoot(Wr,s)}catch{}f=!0}return f}finally{ot=u,Jr.transition=o}}return!1}function Rw(s,o,u){o=el(u,o),o=$v(s,o,1),s=Ws(s,o,1),o=rr(),s!==null&&(xo(s,1,o),_r(s,o))}function Kt(s,o,u){if(s.tag===3)Rw(s,s,u);else for(;o!==null;){if(o.tag===3){Rw(o,s,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Gs===null||!Gs.has(f))){s=el(u,s),s=Hv(o,s,1),o=Ws(o,s,1),s=rr(),o!==null&&(xo(o,1,s),_r(o,s));break}}o=o.return}}function B1(s,o,u){var f=s.pingCache;f!==null&&f.delete(o),o=rr(),s.pingedLanes|=s.suspendedLanes&u,wn===s&&(Nn&u)===u&&(dn===4||dn===3&&(Nn&130023424)===Nn&&500>ct()-im?qo(s,0):rm|=u),_r(s,o)}function Aw(s,o){o===0&&((s.mode&1)===0?o=1:(o=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var u=rr();s=hs(s,o),s!==null&&(xo(s,o,u),_r(s,u))}function z1(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),Aw(s,u)}function j1(s,o){var u=0;switch(s.tag){case 13:var f=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:f=s.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),Aw(s,u)}var Pw;Pw=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||pr.current)gr=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return gr=!1,C1(s,o,u);gr=(s.flags&131072)!==0}else gr=!1,Ot&&(o.flags&1048576)!==0&&ov(o,Rd,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Bd(s,o),s=o.pendingProps;var m=Wa(o,zn.current);Xa(o,u),m=Vp(null,o,f,s,m,u);var _=Lp();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,mr(f)?(_=!0,Td(o)):_=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,bp(o),m.updater=Fd,o.stateNode=m,m._reactInternals=o,jp(o,f,s,u),o=Wp(null,o,f,!0,_,u)):(o.tag=0,Ot&&_&&_p(o),nr(null,o,m,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Bd(s,o),s=o.pendingProps,m=f._init,f=m(f._payload),o.type=f,m=o.tag=H1(f),s=fi(f,s),m){case 0:o=qp(null,o,f,s,u);break e;case 1:o=Zv(null,o,f,s,u);break e;case 11:o=Gv(null,o,f,s,u);break e;case 14:o=Qv(null,o,f,fi(f.type,s),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:fi(f,m),qp(s,o,f,m,u);case 1:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:fi(f,m),Zv(s,o,f,m,u);case 3:e:{if(ew(o),s===null)throw Error(t(387));f=o.pendingProps,_=o.memoizedState,m=_.element,mv(s,o),xd(o,f,null,u);var T=o.memoizedState;if(f=T.element,_.isDehydrated)if(_={element:f,isDehydrated:!1,cache:T.cache,pendingSuspenseBoundaries:T.pendingSuspenseBoundaries,transitions:T.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){m=el(Error(t(423)),o),o=tw(s,o,f,u,m);break e}else if(f!==m){m=el(Error(t(424)),o),o=tw(s,o,f,u,m);break e}else for(Dr=zs(o.stateNode.containerInfo.firstChild),xr=o,Ot=!0,hi=null,u=fv(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Qa(),f===m){o=ps(s,o,u);break e}nr(s,o,f,u)}o=o.child}return o;case 5:return _v(o),s===null&&Ep(o),f=o.type,m=o.pendingProps,_=s!==null?s.memoizedProps:null,T=m.children,hp(f,m)?T=null:_!==null&&hp(f,_)&&(o.flags|=32),Xv(s,o),nr(s,o,T,u),o.child;case 6:return s===null&&Ep(o),null;case 13:return nw(s,o,u);case 4:return Cp(o,o.stateNode.containerInfo),f=o.pendingProps,s===null?o.child=Ya(o,null,f,u):nr(s,o,f,u),o.child;case 11:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:fi(f,m),Gv(s,o,f,m,u);case 7:return nr(s,o,o.pendingProps,u),o.child;case 8:return nr(s,o,o.pendingProps.children,u),o.child;case 12:return nr(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,m=o.pendingProps,_=o.memoizedProps,T=m.value,St(bd,f._currentValue),f._currentValue=T,_!==null)if(di(_.value,T)){if(_.children===m.children&&!pr.current){o=ps(s,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var C=_.dependencies;if(C!==null){T=_.child;for(var L=C.firstContext;L!==null;){if(L.context===f){if(_.tag===1){L=fs(-1,u&-u),L.tag=2;var Q=_.updateQueue;if(Q!==null){Q=Q.shared;var ie=Q.pending;ie===null?L.next=L:(L.next=ie.next,ie.next=L),Q.pending=L}}_.lanes|=u,L=_.alternate,L!==null&&(L.lanes|=u),Ap(_.return,u,o),C.lanes|=u;break}L=L.next}}else if(_.tag===10)T=_.type===o.type?null:_.child;else if(_.tag===18){if(T=_.return,T===null)throw Error(t(341));T.lanes|=u,C=T.alternate,C!==null&&(C.lanes|=u),Ap(T,u,o),T=_.sibling}else T=_.child;if(T!==null)T.return=_;else for(T=_;T!==null;){if(T===o){T=null;break}if(_=T.sibling,_!==null){_.return=T.return,T=_;break}T=T.return}_=T}nr(s,o,m.children,u),o=o.child}return o;case 9:return m=o.type,f=o.pendingProps.children,Xa(o,u),m=Qr(m),f=f(m),o.flags|=1,nr(s,o,f,u),o.child;case 14:return f=o.type,m=fi(f,o.pendingProps),m=fi(f.type,m),Qv(s,o,f,m,u);case 15:return Yv(s,o,o.type,o.pendingProps,u);case 17:return f=o.type,m=o.pendingProps,m=o.elementType===f?m:fi(f,m),Bd(s,o),o.tag=1,mr(f)?(s=!0,Td(o)):s=!1,Xa(o,u),zv(o,f,m),jp(o,f,m,u),Wp(null,o,f,!0,s,u);case 19:return iw(s,o,u);case 22:return Jv(s,o,u)}throw Error(t(156,o.tag))};function bw(s,o){return Nt(s,o)}function $1(s,o,u,f){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(s,o,u,f){return new $1(s,o,u,f)}function hm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function H1(s){if(typeof s=="function")return hm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===He)return 14}return 2}function Xs(s,o){var u=s.alternate;return u===null?(u=Xr(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Jd(s,o,u,f,m,_){var T=2;if(f=s,typeof s=="function")hm(s)&&(T=1);else if(typeof s=="string")T=5;else e:switch(s){case I:return Ko(u.children,m,_,o);case R:T=8,m|=8;break;case P:return s=Xr(12,u,o,m|2),s.elementType=P,s.lanes=_,s;case b:return s=Xr(13,u,o,m),s.elementType=b,s.lanes=_,s;case Me:return s=Xr(19,u,o,m),s.elementType=Me,s.lanes=_,s;case Ne:return Xd(u,m,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case V:T=10;break e;case x:T=9;break e;case F:T=11;break e;case He:T=14;break e;case ye:T=16,f=null;break e}throw Error(t(130,s==null?s:typeof s,""))}return o=Xr(T,u,o,m),o.elementType=s,o.type=f,o.lanes=_,o}function Ko(s,o,u,f){return s=Xr(7,s,f,o),s.lanes=u,s}function Xd(s,o,u,f){return s=Xr(22,s,f,o),s.elementType=Ne,s.lanes=u,s.stateNode={isHidden:!1},s}function fm(s,o,u){return s=Xr(6,s,null,o),s.lanes=u,s}function pm(s,o,u){return o=Xr(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function q1(s,o,u,f,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yl(0),this.expirationTimes=Yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yl(0),this.identifierPrefix=f,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function mm(s,o,u,f,m,_,T,C,L){return s=new q1(s,o,u,C,L),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Xr(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},bp(_),s}function W1(s,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fe,key:f==null?null:""+f,children:s,containerInfo:o,implementation:u}}function Cw(s){if(!s)return $s;s=s._reactInternals;e:{if(Pe(s)!==s||s.tag!==1)throw Error(t(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(mr(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(s.tag===1){var u=s.type;if(mr(u))return rv(s,u,o)}return o}function kw(s,o,u,f,m,_,T,C,L){return s=mm(u,f,!0,s,m,_,T,C,L),s.context=Cw(null),u=s.current,f=rr(),m=Ys(u),_=fs(f,m),_.callback=o??null,Ws(u,_,m),s.current.lanes=m,xo(s,m,f),_r(s,f),s}function Zd(s,o,u,f){var m=o.current,_=rr(),T=Ys(m);return u=Cw(u),o.context===null?o.context=u:o.pendingContext=u,o=fs(_,T),o.payload={element:s},f=f===void 0?null:f,f!==null&&(o.callback=f),s=Ws(m,o,T),s!==null&&(gi(s,m,T,_),kd(s,m,T)),T}function eh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function xw(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function gm(s,o){xw(s,o),(s=s.alternate)&&xw(s,o)}function K1(){return null}var Dw=typeof reportError=="function"?reportError:function(s){console.error(s)};function ym(s){this._internalRoot=s}th.prototype.render=ym.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(t(409));Zd(s,o,null,null)},th.prototype.unmount=ym.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Ho(function(){Zd(null,s,null,null)}),o[ls]=null}};function th(s){this._internalRoot=s}th.prototype.unstable_scheduleHydration=function(s){if(s){var o=eu();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Pr.length&&o!==0&&o<Pr[u].priority;u++);Pr.splice(u,0,s),u===0&&ka(s)}};function _m(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function nh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Nw(){}function G1(s,o,u,f,m){if(m){if(typeof f=="function"){var _=f;f=function(){var Q=eh(T);_.call(Q)}}var T=kw(o,f,s,0,null,!1,!1,"",Nw);return s._reactRootContainer=T,s[ls]=T.current,hu(s.nodeType===8?s.parentNode:s),Ho(),T}for(;m=s.lastChild;)s.removeChild(m);if(typeof f=="function"){var C=f;f=function(){var Q=eh(L);C.call(Q)}}var L=mm(s,0,!1,null,null,!1,!1,"",Nw);return s._reactRootContainer=L,s[ls]=L.current,hu(s.nodeType===8?s.parentNode:s),Ho(function(){Zd(o,L,u,f)}),L}function rh(s,o,u,f,m){var _=u._reactRootContainer;if(_){var T=_;if(typeof m=="function"){var C=m;m=function(){var L=eh(T);C.call(L)}}Zd(o,T,s,m)}else T=G1(u,o,s,m,f);return eh(T)}Xl=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=dt(o.pendingLanes);u!==0&&(Jl(o,u|1),_r(o,ct()),(ht&6)===0&&(rl=ct()+500,Hs()))}break;case 13:Ho(function(){var f=hs(s,1);if(f!==null){var m=rr();gi(f,s,1,m)}}),gm(s,1)}},ba=function(s){if(s.tag===13){var o=hs(s,134217728);if(o!==null){var u=rr();gi(o,s,134217728,u)}gm(s,134217728)}},Zl=function(s){if(s.tag===13){var o=Ys(s),u=hs(s,o);if(u!==null){var f=rr();gi(u,s,o,f)}gm(s,o)}},eu=function(){return ot},tu=function(s,o){var u=ot;try{return ot=s,o()}finally{ot=u}},Fn=function(s,o,u){switch(o){case"input":if(Yn(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==s&&f.form===s.form){var m=wd(f);if(!m)throw Error(t(90));At(f),Yn(f,m)}}}break;case"textarea":cr(s,u);break;case"select":o=u.value,o!=null&&Jn(s,!!u.multiple,o,!1)}},Dt=um,Ut=Ho;var Q1={usingClientEntryPoint:!1,Events:[mu,Ha,wd,Fe,_t,um]},Cu={findFiberByHostInstance:Lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y1={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Je(s),s===null?null:s.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||K1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{Wr=ih.inject(Y1),_n=ih}catch{}}return vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q1,vr.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_m(o))throw Error(t(200));return W1(s,o,null,u)},vr.createRoot=function(s,o){if(!_m(s))throw Error(t(299));var u=!1,f="",m=Dw;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=mm(s,1,!1,null,null,u,!1,f,m),s[ls]=o.current,hu(s.nodeType===8?s.parentNode:s),new ym(o)},vr.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(t(188)):(s=Object.keys(s).join(","),Error(t(268,s)));return s=Je(o),s=s===null?null:s.stateNode,s},vr.flushSync=function(s){return Ho(s)},vr.hydrate=function(s,o,u){if(!nh(o))throw Error(t(200));return rh(null,s,o,!0,u)},vr.hydrateRoot=function(s,o,u){if(!_m(s))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,m=!1,_="",T=Dw;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(T=u.onRecoverableError)),o=kw(o,null,s,1,u??null,m,!1,_,T),s[ls]=o.current,hu(s),f)for(s=0;s<f.length;s++)u=f[s],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new th(o)},vr.render=function(s,o,u){if(!nh(o))throw Error(t(200));return rh(null,s,o,!1,u)},vr.unmountComponentAtNode=function(s){if(!nh(s))throw Error(t(40));return s._reactRootContainer?(Ho(function(){rh(null,null,s,!1,function(){s._reactRootContainer=null,s[ls]=null})}),!0):!1},vr.unstable_batchedUpdates=um,vr.unstable_renderSubtreeIntoContainer=function(s,o,u,f){if(!nh(u))throw Error(t(200));if(s==null||s._reactInternals===void 0)throw Error(t(38));return rh(s,o,u,!1,f)},vr.version="18.3.1-next-f1338f8080-20240426",vr}var zw;function t0(){if(zw)return Em.exports;zw=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Em.exports=ib(),Em.exports}var jw;function sb(){if(jw)return sh;jw=1;var n=t0();return sh.createRoot=n.createRoot,sh.hydrateRoot=n.hydrateRoot,sh}var ob=sb(),z=zg();const ge=e0(z),ab=X1({__proto__:null,default:ge},[z]);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n0=n=>{throw TypeError(n)},lb=(n,e,t)=>e.has(n)||n0("Cannot "+t),Sm=(n,e,t)=>(lb(n,e,"read from private field"),t?t.call(n):e.get(n)),ub=(n,e,t)=>e.has(n)?n0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),$w="popstate";function cb(n={}){function e(r,i){let{pathname:a,search:l,hash:c}=r.location;return uc("",{pathname:a,search:l,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(r,i){return typeof i=="string"?i:Qi(i)}return hb(e,t,null,n)}function tt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ln(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function db(){return Math.random().toString(36).substring(2,10)}function Hw(n,e){return{usr:n.state,key:n.key,idx:e}}function uc(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ro(e):e,state:t,key:e&&e.key||r||db()}}function Qi({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ro(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function hb(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,c="POP",h=null,p=y();p==null&&(p=0,l.replaceState({...l.state,idx:p},""));function y(){return(l.state||{idx:null}).idx}function g(){c="POP";let O=y(),J=O==null?null:O-p;p=O,h&&h({action:c,location:M.location,delta:J})}function E(O,J){c="PUSH";let G=uc(M.location,O,J);p=y()+1;let Z=Hw(G,p),ae=M.createHref(G);try{l.pushState(Z,"",ae)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;i.location.assign(ae)}a&&h&&h({action:c,location:M.location,delta:1})}function S(O,J){c="REPLACE";let G=uc(M.location,O,J);p=y();let Z=Hw(G,p),ae=M.createHref(G);l.replaceState(Z,"",ae),a&&h&&h({action:c,location:M.location,delta:0})}function D(O){return r0(O)}let M={get action(){return c},get location(){return n(i,l)},listen(O){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener($w,g),h=O,()=>{i.removeEventListener($w,g),h=null}},createHref(O){return e(i,O)},createURL:D,encodeLocation(O){let J=D(O);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:E,replace:S,go(O){return l.go(O)}};return M}function r0(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),tt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Qi(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}var zu,qw=class{constructor(n){if(ub(this,zu,new Map),n)for(let[e,t]of n)this.set(e,t)}get(n){if(Sm(this,zu).has(n))return Sm(this,zu).get(n);if(n.defaultValue!==void 0)return n.defaultValue;throw new Error("No value found for context")}set(n,e){Sm(this,zu).set(n,e)}};zu=new WeakMap;var fb=new Set(["lazy","caseSensitive","path","id","index","children"]);function pb(n){return fb.has(n)}var mb=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function gb(n){return mb.has(n)}function yb(n){return n.index===!0}function cc(n,e,t=[],r={},i=!1){return n.map((a,l)=>{let c=[...t,String(l)],h=typeof a.id=="string"?a.id:c.join("-");if(tt(a.index!==!0||!a.children,"Cannot specify children on an index route"),tt(i||!r[h],`Found a route id collision on id "${h}".  Route id's must be globally unique within Data Router usages`),yb(a)){let p={...a,id:h};return r[h]=Ww(p,e(p)),p}else{let p={...a,id:h,children:void 0};return r[h]=Ww(p,e(p)),a.children&&(p.children=cc(a.children,e,c,r,i)),p}})}function Ww(n,e){return Object.assign(n,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...n.lazy,...e.lazy}}:{}})}function io(n,e,t="/"){return ju(n,e,t,!1)}function ju(n,e,t,r){let i=typeof e=="string"?Ro(e):e,a=ni(i.pathname||"/",t);if(a==null)return null;let l=i0(n);vb(l);let c=null;for(let h=0;c==null&&h<l.length;++h){let p=kb(a);c=bb(l[h],p,r)}return c}function _b(n,e){let{route:t,pathname:r,params:i}=n;return{id:t.id,pathname:r,params:i,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function i0(n,e=[],t=[],r="",i=!1){let a=(l,c,h=i,p)=>{let y={relativePath:p===void 0?l.path||"":p,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&h)return;tt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let g=qi([r,y.relativePath]),E=t.concat(y);l.children&&l.children.length>0&&(tt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),i0(l.children,e,E,g,h)),!(l.path==null&&!l.index)&&e.push({path:g,score:Ab(g,l.index),routesMeta:E})};return n.forEach((l,c)=>{var h;if(l.path===""||!((h=l.path)!=null&&h.includes("?")))a(l,c);else for(let p of s0(l.path))a(l,c,!0,p)}),e}function s0(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=s0(r.join("/")),c=[];return c.push(...l.map(h=>h===""?a:[a,h].join("/"))),i&&c.push(...l),c.map(h=>n.startsWith("/")&&h===""?"/":h)}function vb(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Pb(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var wb=/^:[\w-]+$/,Eb=3,Tb=2,Ib=1,Sb=10,Rb=-2,Kw=n=>n==="*";function Ab(n,e){let t=n.split("/"),r=t.length;return t.some(Kw)&&(r+=Rb),e&&(r+=Tb),t.filter(i=>!Kw(i)).reduce((i,a)=>i+(wb.test(a)?Eb:a===""?Ib:Sb),r)}function Pb(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function bb(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",l=[];for(let c=0;c<r.length;++c){let h=r[c],p=c===r.length-1,y=a==="/"?e:e.slice(a.length)||"/",g=Bh({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},y),E=h.route;if(!g&&p&&t&&!r[r.length-1].route.index&&(g=Bh({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:qi([a,g.pathname]),pathnameBase:Nb(qi([a,g.pathnameBase])),route:E}),g.pathnameBase!=="/"&&(a=qi([a,g.pathnameBase]))}return l}function Bh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Cb(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:g},E)=>{if(y==="*"){let D=c[E]||"";l=a.slice(0,a.length-D.length).replace(/(.)\/+$/,"$1")}const S=c[E];return g&&!S?p[y]=void 0:p[y]=(S||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:n}}function Cb(n,e=!1,t=!0){ln(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,h)=>(r.push({paramName:c,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function kb(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ln(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ni(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function xb({basename:n,pathname:e}){return e==="/"?n:qi([n,e])}var o0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jg=n=>o0.test(n);function Db(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Ro(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=Gw(t.substring(1),"/"):a=Gw(t,e)):a=e,{pathname:a,search:Ob(r),hash:Vb(i)}}function Gw(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function Rm(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a0(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $g(n){let e=a0(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function Hg(n,e,t,r=!1){let i;typeof n=="string"?i=Ro(n):(i={...n},tt(!i.pathname||!i.pathname.includes("?"),Rm("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),Rm("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),Rm("#","search","hash",i)));let a=n===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=t;else{let g=e.length-1;if(!r&&l.startsWith("..")){let E=l.split("/");for(;E[0]==="..";)E.shift(),g-=1;i.pathname=E.join("/")}c=g>=0?e[g]:"/"}let h=Db(i,c),p=l&&l!=="/"&&l.endsWith("/"),y=(a||l===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||y)&&(h.pathname+="/"),h}var qi=n=>n.join("/").replace(/\/\/+/g,"/"),Nb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Ob=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Vb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,Oc=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function dc(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Vc(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var l0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function u0(n,e){let t=n;if(typeof t!="string"||!o0.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(l0)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),c=ni(l.pathname,e);l.origin===a.origin&&c!=null?t=c+l.search+l.hash:i=!0}catch{ln(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}var ho=Symbol("Uninstrumented");function Lb(n,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};n.forEach(i=>i({id:e.id,index:e.index,path:e.path,instrument(a){let l=Object.keys(t);for(let c of l)a[c]&&t[c].push(a[c])}}));let r={};if(typeof e.lazy=="function"&&t.lazy.length>0){let i=_l(t.lazy,e.lazy,()=>{});i&&(r.lazy=i)}if(typeof e.lazy=="object"){let i=e.lazy;["middleware","loader","action"].forEach(a=>{let l=i[a],c=t[`lazy.${a}`];if(typeof l=="function"&&c.length>0){let h=_l(c,l,()=>{});h&&(r.lazy=Object.assign(r.lazy||{},{[a]:h}))}})}return["loader","action"].forEach(i=>{let a=e[i];if(typeof a=="function"&&t[i].length>0){let l=a[ho]??a,c=_l(t[i],l,(...h)=>Qw(h[0]));c&&(i==="loader"&&l.hydrate===!0&&(c.hydrate=!0),c[ho]=l,r[i]=c)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(r.middleware=e.middleware.map(i=>{let a=i[ho]??i,l=_l(t.middleware,a,(...c)=>Qw(c[0]));return l?(l[ho]=a,l):i})),r}function Mb(n,e){let t={navigate:[],fetch:[]};if(e.forEach(r=>r({instrument(i){let a=Object.keys(i);for(let l of a)i[l]&&t[l].push(i[l])}})),t.navigate.length>0){let r=n.navigate[ho]??n.navigate,i=_l(t.navigate,r,(...a)=>{let[l,c]=a;return{to:typeof l=="number"||typeof l=="string"?l:l?Qi(l):".",...Yw(n,c??{})}});i&&(i[ho]=r,n.navigate=i)}if(t.fetch.length>0){let r=n.fetch[ho]??n.fetch,i=_l(t.fetch,r,(...a)=>{let[l,,c,h]=a;return{href:c??".",fetcherKey:l,...Yw(n,h??{})}});i&&(i[ho]=r,n.fetch=i)}return n}function _l(n,e,t){return n.length===0?null:async(...r)=>{let i=await c0(n,t(...r),()=>e(...r),n.length-1);if(i.type==="error")throw i.value;return i.value}}async function c0(n,e,t,r){let i=n[r],a;if(i){let l,c=async()=>(l?console.error("You cannot call instrumented handlers more than once"):l=c0(n,e,t,r-1),a=await l,tt(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await i(c,e)}catch(h){console.error("An instrumentation function threw an error:",h)}l||await c(),await l}else try{a={type:"success",value:await t()}}catch(l){a={type:"error",value:l}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function Qw(n){let{request:e,context:t,params:r,unstable_pattern:i}=n;return{request:Fb(e),params:{...r},unstable_pattern:i,context:Ub(t)}}function Yw(n,e){return{currentUrl:Qi(n.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function Fb(n){return{method:n.method,url:n.url,headers:{get:(...e)=>n.headers.get(...e)}}}function Ub(n){if(zb(n)){let e={...n};return Object.freeze(e),e}else return{get:e=>n.get(e)}}var Bb=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function zb(n){if(n===null||typeof n!="object")return!1;const e=Object.getPrototypeOf(n);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===Bb}var d0=["POST","PUT","PATCH","DELETE"],jb=new Set(d0),$b=["GET",...d0],Hb=new Set($b),h0=new Set([301,302,303,307,308]),qb=new Set([307,308]),Am={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Wb={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kb=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),f0="remix-router-transitions",p0=Symbol("ResetLoaderData");function Gb(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";tt(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r=n.hydrationRouteProperties||[],i=n.mapRouteProperties||Kb,a=i;if(n.unstable_instrumentations){let k=n.unstable_instrumentations;a=U=>({...i(U),...Lb(k.map(q=>q.route).filter(Boolean),U)})}let l={},c=cc(n.routes,a,void 0,l),h,p=n.basename||"/";p.startsWith("/")||(p=`/${p}`);let y=n.dataStrategy||Zb,g={...n.future},E=null,S=new Set,D=null,M=null,O=null,J=n.hydrationData!=null,G=io(c,n.history.location,p),Z=!1,ae=null,se;if(G==null&&!n.patchRoutesOnNavigation){let k=Zr(404,{pathname:n.history.location.pathname}),{matches:U,route:q}=oh(c);se=!0,G=U,ae={[q.id]:k}}else if(G&&!n.hydrationData&&Ut(G,c,n.history.location.pathname).active&&(G=null),G)if(G.some(k=>k.route.lazy))se=!1;else if(!G.some(k=>qg(k.route)))se=!0;else{let k=n.hydrationData?n.hydrationData.loaderData:null,U=n.hydrationData?n.hydrationData.errors:null;if(U){let q=G.findIndex(te=>U[te.route.id]!==void 0);se=G.slice(0,q+1).every(te=>!tg(te.route,k,U))}else se=G.every(q=>!tg(q.route,k,U))}else{se=!1,G=[];let k=Ut(null,c,n.history.location.pathname);k.active&&k.matches&&(Z=!0,G=k.matches)}let fe,I={historyAction:n.history.action,location:n.history.location,matches:G,initialized:se,navigation:Am,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||ae,fetchers:new Map,blockers:new Map},R="POP",P=null,V=!1,x,F=!1,b=new Map,Me=null,He=!1,ye=!1,Ne=new Set,ee=new Map,pe=0,ne=-1,N=new Map,K=new Set,he=new Map,ve=new Map,Ee=new Set,we=new Map,Ke,je=null;function st(){if(E=n.history.listen(({action:k,location:U,delta:q})=>{if(Ke){Ke(),Ke=void 0;return}ln(we.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=hr({currentLocation:I.location,nextLocation:U,historyAction:k});if(te&&q!=null){let ue=new Promise(Se=>{Ke=Se});n.history.go(q*-1),Fn(te,{state:"blocked",location:U,proceed(){Fn(te,{state:"proceeding",proceed:void 0,reset:void 0,location:U}),ue.then(()=>n.history.go(q))},reset(){let Se=new Map(I.blockers);Se.set(te,xu),At({blockers:Se})}}),P==null||P.resolve(),P=null;return}return An(k,U)}),t){yC(e,b);let k=()=>_C(e,b);e.addEventListener("pagehide",k),Me=()=>e.removeEventListener("pagehide",k)}return I.initialized||An("POP",I.location,{initialHydration:!0}),fe}function Ft(){E&&E(),Me&&Me(),S.clear(),x&&x.abort(),I.fetchers.forEach((k,U)=>Xn(U)),I.blockers.forEach((k,U)=>yn(U))}function Ii(k){return S.add(k),()=>S.delete(k)}function At(k,U={}){k.matches&&(k.matches=k.matches.map(ue=>{let Se=l[ue.route.id],Ve=ue.route;return Ve.element!==Se.element||Ve.errorElement!==Se.errorElement||Ve.hydrateFallbackElement!==Se.hydrateFallbackElement?{...ue,route:Se}:ue})),I={...I,...k};let q=[],te=[];I.fetchers.forEach((ue,Se)=>{ue.state==="idle"&&(Ee.has(Se)?q.push(Se):te.push(Se))}),Ee.forEach(ue=>{!I.fetchers.has(ue)&&!ee.has(ue)&&q.push(ue)}),[...S].forEach(ue=>ue(I,{deletedFetchers:q,newErrors:k.errors??null,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),q.forEach(ue=>Xn(ue)),te.forEach(ue=>I.fetchers.delete(ue))}function Rn(k,U,{flushSync:q}={}){var $e,De;let te=I.actionData!=null&&I.navigation.formMethod!=null&&Wn(I.navigation.formMethod)&&I.navigation.state==="loading"&&(($e=k.state)==null?void 0:$e._isRedirect)!==!0,ue;U.actionData?Object.keys(U.actionData).length>0?ue=U.actionData:ue=null:te?ue=I.actionData:ue=null;let Se=U.loaderData?oE(I.loaderData,U.loaderData,U.matches||[],U.errors):I.loaderData,Ve=I.blockers;Ve.size>0&&(Ve=new Map(Ve),Ve.forEach((Ge,Je)=>Ve.set(Je,xu)));let Te=He?!1:Dt(k,U.matches||I.matches),Re=V===!0||I.navigation.formMethod!=null&&Wn(I.navigation.formMethod)&&((De=k.state)==null?void 0:De._isRedirect)!==!0;h&&(c=h,h=void 0),He||R==="POP"||(R==="PUSH"?n.history.push(k,k.state):R==="REPLACE"&&n.history.replace(k,k.state));let Pe;if(R==="POP"){let Ge=b.get(I.location.pathname);Ge&&Ge.has(k.pathname)?Pe={currentLocation:I.location,nextLocation:k}:b.has(k.pathname)&&(Pe={currentLocation:k,nextLocation:I.location})}else if(F){let Ge=b.get(I.location.pathname);Ge?Ge.add(k.pathname):(Ge=new Set([k.pathname]),b.set(I.location.pathname,Ge)),Pe={currentLocation:I.location,nextLocation:k}}At({...U,actionData:ue,loaderData:Se,historyAction:R,location:k,initialized:!0,navigation:Am,revalidation:"idle",restoreScrollPosition:Te,preventScrollReset:Re,blockers:Ve},{viewTransitionOpts:Pe,flushSync:q===!0}),R="POP",V=!1,F=!1,He=!1,ye=!1,P==null||P.resolve(),P=null,je==null||je.resolve(),je=null}async function Sr(k,U){if(P==null||P.resolve(),P=null,typeof k=="number"){P||(P=cE());let Je=P.promise;return n.history.go(k),Je}let q=eg(I.location,I.matches,p,k,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:te,submission:ue,error:Se}=Jw(!1,q,U),Ve=I.location,Te=uc(I.location,te,U&&U.state);Te={...Te,...n.history.encodeLocation(Te)};let Re=U&&U.replace!=null?U.replace:void 0,Pe="PUSH";Re===!0?Pe="REPLACE":Re===!1||ue!=null&&Wn(ue.formMethod)&&ue.formAction===I.location.pathname+I.location.search&&(Pe="REPLACE");let $e=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,De=(U&&U.flushSync)===!0,Ge=hr({currentLocation:Ve,nextLocation:Te,historyAction:Pe});if(Ge){Fn(Ge,{state:"blocked",location:Te,proceed(){Fn(Ge,{state:"proceeding",proceed:void 0,reset:void 0,location:Te}),Sr(k,U)},reset(){let Je=new Map(I.blockers);Je.set(Ge,xu),At({blockers:Je})}});return}await An(Pe,Te,{submission:ue,pendingError:Se,preventScrollReset:$e,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:De,callSiteDefaultShouldRevalidate:U&&U.unstable_defaultShouldRevalidate})}function Os(){je||(je=cE()),Hr(),At({revalidation:"loading"});let k=je.promise;return I.navigation.state==="submitting"?k:I.navigation.state==="idle"?(An(I.historyAction,I.location,{startUninterruptedRevalidation:!0}),k):(An(R||I.historyAction,I.navigation.location,{overrideNavigation:I.navigation,enableViewTransition:F===!0}),k)}async function An(k,U,q){x&&x.abort(),x=null,R=k,He=(q&&q.startUninterruptedRevalidation)===!0,_t(I.location,I.matches),V=(q&&q.preventScrollReset)===!0,F=(q&&q.enableViewTransition)===!0;let te=h||c,ue=q&&q.overrideNavigation,Se=q!=null&&q.initialHydration&&I.matches&&I.matches.length>0&&!Z?I.matches:io(te,U,p),Ve=(q&&q.flushSync)===!0;if(Se&&I.initialized&&!ye&&aC(I.location,U)&&!(q&&q.submission&&Wn(q.submission.formMethod))){Rn(U,{matches:Se},{flushSync:Ve});return}let Te=Ut(Se,te,U.pathname);if(Te.active&&Te.matches&&(Se=Te.matches),!Se){let{error:Nt,notFoundMatches:qt,route:nt}=yt(U.pathname);Rn(U,{matches:qt,loaderData:{},errors:{[nt.id]:Nt}},{flushSync:Ve});return}x=new AbortController;let Re=dl(n.history,U,x.signal,q&&q.submission),Pe=n.getContext?await n.getContext():new qw,$e;if(q&&q.pendingError)$e=[so(Se).route.id,{type:"error",error:q.pendingError}];else if(q&&q.submission&&Wn(q.submission.formMethod)){let Nt=await Yn(Re,U,q.submission,Se,Pe,Te.active,q&&q.initialHydration===!0,{replace:q.replace,flushSync:Ve});if(Nt.shortCircuited)return;if(Nt.pendingActionResult){let[qt,nt]=Nt.pendingActionResult;if(Or(nt)&&dc(nt.error)&&nt.error.status===404){x=null,Rn(U,{matches:Nt.matches,loaderData:{},errors:{[qt]:nt.error}});return}}Se=Nt.matches||Se,$e=Nt.pendingActionResult,ue=Pm(U,q.submission),Ve=!1,Te.active=!1,Re=dl(n.history,Re.url,Re.signal)}let{shortCircuited:De,matches:Ge,loaderData:Je,errors:Ct}=await Si(Re,U,Se,Pe,Te.active,ue,q&&q.submission,q&&q.fetcherSubmission,q&&q.replace,q&&q.initialHydration===!0,Ve,$e,q&&q.callSiteDefaultShouldRevalidate);De||(x=null,Rn(U,{matches:Ge||Se,...aE($e),loaderData:Je,errors:Ct}))}async function Yn(k,U,q,te,ue,Se,Ve,Te={}){Hr();let Re=mC(U,q);if(At({navigation:Re},{flushSync:Te.flushSync===!0}),Se){let De=await en(te,U.pathname,k.signal);if(De.type==="aborted")return{shortCircuited:!0};if(De.type==="error"){if(De.partialMatches.length===0){let{matches:Je,route:Ct}=oh(c);return{matches:Je,pendingActionResult:[Ct.id,{type:"error",error:De.error}]}}let Ge=so(De.partialMatches).route.id;return{matches:De.partialMatches,pendingActionResult:[Ge,{type:"error",error:De.error}]}}else if(De.matches)te=De.matches;else{let{notFoundMatches:Ge,error:Je,route:Ct}=yt(U.pathname);return{matches:Ge,pendingActionResult:[Ct.id,{type:"error",error:Je}]}}}let Pe,$e=Eh(te,U);if(!$e.route.action&&!$e.route.lazy)Pe={type:"error",error:Zr(405,{method:k.method,pathname:U.pathname,routeId:$e.route.id})};else{let De=wl(a,l,k,te,$e,Ve?[]:r,ue),Ge=await Mn(k,De,ue,null);if(Pe=Ge[$e.route.id],!Pe){for(let Je of te)if(Ge[Je.route.id]){Pe=Ge[Je.route.id];break}}if(k.signal.aborted)return{shortCircuited:!0}}if(na(Pe)){let De;return Te&&Te.replace!=null?De=Te.replace:De=rE(Pe.response.headers.get("Location"),new URL(k.url),p,n.history)===I.location.pathname+I.location.search,await cr(k,Pe,!0,{submission:q,replace:De}),{shortCircuited:!0}}if(Or(Pe)){let De=so(te,$e.route.id);return(Te&&Te.replace)!==!0&&(R="PUSH"),{matches:te,pendingActionResult:[De.route.id,Pe,$e.route.id]}}return{matches:te,pendingActionResult:[$e.route.id,Pe]}}async function Si(k,U,q,te,ue,Se,Ve,Te,Re,Pe,$e,De,Ge){let Je=Se||Pm(U,Ve),Ct=Ve||Te||uE(Je),Nt=!He&&!Pe;if(ue){if(Nt){let mt=ut(De);At({navigation:Je,...mt!==void 0?{actionData:mt}:{}},{flushSync:$e})}let Ze=await en(q,U.pathname,k.signal);if(Ze.type==="aborted")return{shortCircuited:!0};if(Ze.type==="error"){if(Ze.partialMatches.length===0){let{matches:Cn,route:tn}=oh(c);return{matches:Cn,loaderData:{},errors:{[tn.id]:Ze.error}}}let mt=so(Ze.partialMatches).route.id;return{matches:Ze.partialMatches,loaderData:{},errors:{[mt]:Ze.error}}}else if(Ze.matches)q=Ze.matches;else{let{error:mt,notFoundMatches:Cn,route:tn}=yt(U.pathname);return{matches:Cn,loaderData:{},errors:{[tn.id]:mt}}}}let qt=h||c,{dsMatches:nt,revalidatingFetchers:Wt}=Xw(k,te,a,l,n.history,I,q,Ct,U,Pe?[]:r,Pe===!0,ye,Ne,Ee,he,K,qt,p,n.patchRoutesOnNavigation!=null,De,Ge);if(ne=++pe,!n.dataStrategy&&!nt.some(Ze=>Ze.shouldLoad)&&!nt.some(Ze=>Ze.route.middleware&&Ze.route.middleware.length>0)&&Wt.length===0){let Ze=bn();return Rn(U,{matches:q,loaderData:{},errors:De&&Or(De[1])?{[De[0]]:De[1].error}:null,...aE(De),...Ze?{fetchers:new Map(I.fetchers)}:{}},{flushSync:$e}),{shortCircuited:!0}}if(Nt){let Ze={};if(!ue){Ze.navigation=Je;let mt=ut(De);mt!==void 0&&(Ze.actionData=mt)}Wt.length>0&&(Ze.fetchers=Pt(Wt)),At(Ze,{flushSync:$e})}Wt.forEach(Ze=>{gn(Ze.key),Ze.controller&&ee.set(Ze.key,Ze.controller)});let ct=()=>Wt.forEach(Ze=>gn(Ze.key));x&&x.signal.addEventListener("abort",ct);let{loaderResults:ts,fetcherResults:er}=await Rr(nt,Wt,k,te);if(k.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",ct),Wt.forEach(Ze=>ee.delete(Ze.key));let Un=ah(ts);if(Un)return await cr(k,Un.result,!0,{replace:Re}),{shortCircuited:!0};if(Un=ah(er),Un)return K.add(Un.key),await cr(k,Un.result,!0,{replace:Re}),{shortCircuited:!0};let{loaderData:ai,errors:li}=sE(I,q,ts,De,Wt,er);Pe&&I.errors&&(li={...I.errors,...li});let fr=bn(),Wr=oi(ne),_n=fr||Wr||Wt.length>0;return{matches:q,loaderData:ai,errors:li,..._n?{fetchers:new Map(I.fetchers)}:{}}}function ut(k){if(k&&!Or(k[1]))return{[k[0]]:k[1].data};if(I.actionData)return Object.keys(I.actionData).length===0?null:I.actionData}function Pt(k){return k.forEach(U=>{let q=I.fetchers.get(U.key),te=Du(void 0,q?q.data:void 0);I.fetchers.set(U.key,te)}),new Map(I.fetchers)}async function Jn(k,U,q,te){gn(k);let ue=(te&&te.flushSync)===!0,Se=h||c,Ve=eg(I.location,I.matches,p,q,U,te==null?void 0:te.relative),Te=io(Se,Ve,p),Re=Ut(Te,Se,Ve);if(Re.active&&Re.matches&&(Te=Re.matches),!Te){mn(k,U,Zr(404,{pathname:Ve}),{flushSync:ue});return}let{path:Pe,submission:$e,error:De}=Jw(!0,Ve,te);if(De){mn(k,U,De,{flushSync:ue});return}let Ge=n.getContext?await n.getContext():new qw,Je=(te&&te.preventScrollReset)===!0;if($e&&Wn($e.formMethod)){await Yt(k,U,Pe,Te,Ge,Re.active,ue,Je,$e,te&&te.unstable_defaultShouldRevalidate);return}he.set(k,{routeId:U,path:Pe}),await ur(k,U,Pe,Te,Ge,Re.active,ue,Je,$e)}async function Yt(k,U,q,te,ue,Se,Ve,Te,Re,Pe){Hr(),he.delete(k);let $e=I.fetchers.get(k);Jt(k,gC(Re,$e),{flushSync:Ve});let De=new AbortController,Ge=dl(n.history,q,De.signal,Re);if(Se){let gt=await en(te,new URL(Ge.url).pathname,Ge.signal,k);if(gt.type==="aborted")return;if(gt.type==="error"){mn(k,U,gt.error,{flushSync:Ve});return}else if(gt.matches)te=gt.matches;else{mn(k,U,Zr(404,{pathname:q}),{flushSync:Ve});return}}let Je=Eh(te,q);if(!Je.route.action&&!Je.route.lazy){let gt=Zr(405,{method:Re.formMethod,pathname:q,routeId:U});mn(k,U,gt,{flushSync:Ve});return}ee.set(k,De);let Ct=pe,Nt=wl(a,l,Ge,te,Je,r,ue),qt=await Mn(Ge,Nt,ue,k),nt=qt[Je.route.id];if(!nt){for(let gt of Nt)if(qt[gt.route.id]){nt=qt[gt.route.id];break}}if(Ge.signal.aborted){ee.get(k)===De&&ee.delete(k);return}if(Ee.has(k)){if(na(nt)||Or(nt)){Jt(k,gs(void 0));return}}else{if(na(nt))if(ee.delete(k),ne>Ct){Jt(k,gs(void 0));return}else return K.add(k),Jt(k,Du(Re)),cr(Ge,nt,!1,{fetcherSubmission:Re,preventScrollReset:Te});if(Or(nt)){mn(k,U,nt.error);return}}let Wt=I.navigation.location||I.location,ct=dl(n.history,Wt,De.signal),ts=h||c,er=I.navigation.state!=="idle"?io(ts,I.navigation.location,p):I.matches;tt(er,"Didn't find any matches after fetcher action");let Un=++pe;N.set(k,Un);let ai=Du(Re,nt.data);I.fetchers.set(k,ai);let{dsMatches:li,revalidatingFetchers:fr}=Xw(ct,ue,a,l,n.history,I,er,Re,Wt,r,!1,ye,Ne,Ee,he,K,ts,p,n.patchRoutesOnNavigation!=null,[Je.route.id,nt],Pe);fr.filter(gt=>gt.key!==k).forEach(gt=>{let tr=gt.key,ui=I.fetchers.get(tr),dt=Du(void 0,ui?ui.data:void 0);I.fetchers.set(tr,dt),gn(tr),gt.controller&&ee.set(tr,gt.controller)}),At({fetchers:new Map(I.fetchers)});let Wr=()=>fr.forEach(gt=>gn(gt.key));De.signal.addEventListener("abort",Wr);let{loaderResults:_n,fetcherResults:Ze}=await Rr(li,fr,ct,ue);if(De.signal.aborted)return;if(De.signal.removeEventListener("abort",Wr),N.delete(k),ee.delete(k),fr.forEach(gt=>ee.delete(gt.key)),I.fetchers.has(k)){let gt=gs(nt.data);I.fetchers.set(k,gt)}let mt=ah(_n);if(mt)return cr(ct,mt.result,!1,{preventScrollReset:Te});if(mt=ah(Ze),mt)return K.add(mt.key),cr(ct,mt.result,!1,{preventScrollReset:Te});let{loaderData:Cn,errors:tn}=sE(I,er,_n,void 0,fr,Ze);oi(Un),I.navigation.state==="loading"&&Un>ne?(tt(R,"Expected pending action"),x&&x.abort(),Rn(I.navigation.location,{matches:er,loaderData:Cn,errors:tn,fetchers:new Map(I.fetchers)})):(At({errors:tn,loaderData:oE(I.loaderData,Cn,er,tn),fetchers:new Map(I.fetchers)}),ye=!1)}async function ur(k,U,q,te,ue,Se,Ve,Te,Re){let Pe=I.fetchers.get(k);Jt(k,Du(Re,Pe?Pe.data:void 0),{flushSync:Ve});let $e=new AbortController,De=dl(n.history,q,$e.signal);if(Se){let nt=await en(te,new URL(De.url).pathname,De.signal,k);if(nt.type==="aborted")return;if(nt.type==="error"){mn(k,U,nt.error,{flushSync:Ve});return}else if(nt.matches)te=nt.matches;else{mn(k,U,Zr(404,{pathname:q}),{flushSync:Ve});return}}let Ge=Eh(te,q);ee.set(k,$e);let Je=pe,Ct=wl(a,l,De,te,Ge,r,ue),qt=(await Mn(De,Ct,ue,k))[Ge.route.id];if(ee.get(k)===$e&&ee.delete(k),!De.signal.aborted){if(Ee.has(k)){Jt(k,gs(void 0));return}if(na(qt))if(ne>Je){Jt(k,gs(void 0));return}else{K.add(k),await cr(De,qt,!1,{preventScrollReset:Te});return}if(Or(qt)){mn(k,U,qt.error);return}Jt(k,gs(qt.data))}}async function cr(k,U,q,{submission:te,fetcherSubmission:ue,preventScrollReset:Se,replace:Ve}={}){q||(P==null||P.resolve(),P=null),U.response.headers.has("X-Remix-Revalidate")&&(ye=!0);let Te=U.response.headers.get("Location");tt(Te,"Expected a Location header on the redirect Response"),Te=rE(Te,new URL(k.url),p,n.history);let Re=uc(I.location,Te,{_isRedirect:!0});if(t){let Ct=!1;if(U.response.headers.has("X-Remix-Reload-Document"))Ct=!0;else if(jg(Te)){const Nt=r0(Te,!0);Ct=Nt.origin!==e.location.origin||ni(Nt.pathname,p)==null}if(Ct){Ve?e.location.replace(Te):e.location.assign(Te);return}}x=null;let Pe=Ve===!0||U.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:$e,formAction:De,formEncType:Ge}=I.navigation;!te&&!ue&&$e&&De&&Ge&&(te=uE(I.navigation));let Je=te||ue;if(qb.has(U.response.status)&&Je&&Wn(Je.formMethod))await An(Pe,Re,{submission:{...Je,formAction:Te},preventScrollReset:Se||V,enableViewTransition:q?F:void 0});else{let Ct=Pm(Re,te);await An(Pe,Re,{overrideNavigation:Ct,fetcherSubmission:ue,preventScrollReset:Se||V,enableViewTransition:q?F:void 0})}}async function Mn(k,U,q,te){var Ve;let ue,Se={};try{ue=await tC(y,k,U,te,q,!1)}catch(Te){return U.filter(Re=>Re.shouldLoad).forEach(Re=>{Se[Re.route.id]={type:"error",error:Te}}),Se}if(k.signal.aborted)return Se;if(!Wn(k.method))for(let Te of U){if(((Ve=ue[Te.route.id])==null?void 0:Ve.type)==="error")break;!ue.hasOwnProperty(Te.route.id)&&!I.loaderData.hasOwnProperty(Te.route.id)&&(!I.errors||!I.errors.hasOwnProperty(Te.route.id))&&Te.shouldCallHandler()&&(ue[Te.route.id]={type:"error",result:new Error(`No result returned from dataStrategy for route ${Te.route.id}`)})}for(let[Te,Re]of Object.entries(ue))if(dC(Re)){let Pe=Re.result;Se[Te]={type:"redirect",response:sC(Pe,k,Te,U,p)}}else Se[Te]=await iC(Re);return Se}async function Rr(k,U,q,te){let ue=Mn(q,k,te,null),Se=Promise.all(U.map(async Re=>{if(Re.matches&&Re.match&&Re.request&&Re.controller){let $e=(await Mn(Re.request,Re.matches,te,Re.key))[Re.match.route.id];return{[Re.key]:$e}}else return Promise.resolve({[Re.key]:{type:"error",error:Zr(404,{pathname:Re.path})}})})),Ve=await ue,Te=(await Se).reduce((Re,Pe)=>Object.assign(Re,Pe),{});return{loaderResults:Ve,fetcherResults:Te}}function Hr(){ye=!0,he.forEach((k,U)=>{ee.has(U)&&Ne.add(U),gn(U)})}function Jt(k,U,q={}){I.fetchers.set(k,U),At({fetchers:new Map(I.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function mn(k,U,q,te={}){let ue=so(I.matches,U);Xn(k),At({errors:{[ue.route.id]:q},fetchers:new Map(I.fetchers)},{flushSync:(te&&te.flushSync)===!0})}function Pn(k){return ve.set(k,(ve.get(k)||0)+1),Ee.has(k)&&Ee.delete(k),I.fetchers.get(k)||Wb}function Ar(k,U){gn(k,U==null?void 0:U.reason),Jt(k,gs(null))}function Xn(k){let U=I.fetchers.get(k);ee.has(k)&&!(U&&U.state==="loading"&&N.has(k))&&gn(k),he.delete(k),N.delete(k),K.delete(k),Ee.delete(k),Ne.delete(k),I.fetchers.delete(k)}function qr(k){let U=(ve.get(k)||0)-1;U<=0?(ve.delete(k),Ee.add(k)):ve.set(k,U),At({fetchers:new Map(I.fetchers)})}function gn(k,U){let q=ee.get(k);q&&(q.abort(U),ee.delete(k))}function si(k){for(let U of k){let q=Pn(U),te=gs(q.data);I.fetchers.set(U,te)}}function bn(){let k=[],U=!1;for(let q of K){let te=I.fetchers.get(q);tt(te,`Expected fetcher: ${q}`),te.state==="loading"&&(K.delete(q),k.push(q),U=!0)}return si(k),U}function oi(k){let U=[];for(let[q,te]of N)if(te<k){let ue=I.fetchers.get(q);tt(ue,`Expected fetcher: ${q}`),ue.state==="loading"&&(gn(q),N.delete(q),U.push(q))}return si(U),U.length>0}function dr(k,U){let q=I.blockers.get(k)||xu;return we.get(k)!==U&&we.set(k,U),q}function yn(k){I.blockers.delete(k),we.delete(k)}function Fn(k,U){let q=I.blockers.get(k)||xu;tt(q.state==="unblocked"&&U.state==="blocked"||q.state==="blocked"&&U.state==="blocked"||q.state==="blocked"&&U.state==="proceeding"||q.state==="blocked"&&U.state==="unblocked"||q.state==="proceeding"&&U.state==="unblocked",`Invalid blocker state transition: ${q.state} -> ${U.state}`);let te=new Map(I.blockers);te.set(k,U),At({blockers:te})}function hr({currentLocation:k,nextLocation:U,historyAction:q}){if(we.size===0)return;we.size>1&&ln(!1,"A router only supports one blocker at a time");let te=Array.from(we.entries()),[ue,Se]=te[te.length-1],Ve=I.blockers.get(ue);if(!(Ve&&Ve.state==="proceeding")&&Se({currentLocation:k,nextLocation:U,historyAction:q}))return ue}function yt(k){let U=Zr(404,{pathname:k}),q=h||c,{matches:te,route:ue}=oh(q);return{notFoundMatches:te,route:ue,error:U}}function Ri(k,U,q){if(D=k,O=U,M=q||null,!J&&I.navigation===Am){J=!0;let te=Dt(I.location,I.matches);te!=null&&At({restoreScrollPosition:te})}return()=>{D=null,O=null,M=null}}function Fe(k,U){return M&&M(k,U.map(te=>_b(te,I.loaderData)))||k.key}function _t(k,U){if(D&&O){let q=Fe(k,U);D[q]=O()}}function Dt(k,U){if(D){let q=Fe(k,U),te=D[q];if(typeof te=="number")return te}return null}function Ut(k,U,q){if(n.patchRoutesOnNavigation)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:ju(U,q,p,!0)}}else return{active:!0,matches:ju(U,q,p,!0)||[]};return{active:!1,matches:null}}async function en(k,U,q,te){if(!n.patchRoutesOnNavigation)return{type:"success",matches:k};let ue=k;for(;;){let Se=h==null,Ve=h||c,Te=l;try{await n.patchRoutesOnNavigation({signal:q,path:U,matches:ue,fetcherKey:te,patch:($e,De)=>{q.aborted||Zw($e,De,Ve,Te,a,!1)}})}catch($e){return{type:"error",error:$e,partialMatches:ue}}finally{Se&&!q.aborted&&(c=[...c])}if(q.aborted)return{type:"aborted"};let Re=io(Ve,U,p),Pe=null;if(Re){if(Object.keys(Re[0].params).length===0)return{type:"success",matches:Re};if(Pe=ju(Ve,U,p,!0),!(Pe&&ue.length<Pe.length&&bt(ue,Pe.slice(0,ue.length))))return{type:"success",matches:Re}}if(Pe||(Pe=ju(Ve,U,p,!0)),!Pe||bt(ue,Pe))return{type:"success",matches:null};ue=Pe}}function bt(k,U){return k.length===U.length&&k.every((q,te)=>q.route.id===U[te].route.id)}function Ht(k){l={},h=cc(k,a,void 0,l)}function Zn(k,U,q=!1){let te=h==null;Zw(k,U,h||c,l,a,q),te&&(c=[...c],At({}))}return fe={get basename(){return p},get future(){return g},get state(){return I},get routes(){return c},get window(){return e},initialize:st,subscribe:Ii,enableScrollRestoration:Ri,navigate:Sr,fetch:Jn,revalidate:Os,createHref:k=>n.history.createHref(k),encodeLocation:k=>n.history.encodeLocation(k),getFetcher:Pn,resetFetcher:Ar,deleteFetcher:qr,dispose:Ft,getBlocker:dr,deleteBlocker:yn,patchRoutes:Zn,_internalFetchControllers:ee,_internalSetRoutes:Ht,_internalSetStateDoNotUseOrYouWillBreakYourApp(k){At(k)}},n.unstable_instrumentations&&(fe=Mb(fe,n.unstable_instrumentations.map(k=>k.router).filter(Boolean))),fe}function Qb(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function eg(n,e,t,r,i,a){let l,c;if(i){l=[];for(let p of e)if(l.push(p),p.route.id===i){c=p;break}}else l=e,c=e[e.length-1];let h=Hg(r||".",$g(l),ni(n.pathname,t)||n.pathname,a==="path");if(r==null&&(h.search=n.search,h.hash=n.hash),(r==null||r===""||r===".")&&c){let p=Kg(h.search);if(c.route.index&&!p)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&p){let y=new URLSearchParams(h.search),g=y.getAll("index");y.delete("index"),g.filter(S=>S).forEach(S=>y.append("index",S));let E=y.toString();h.search=E?`?${E}`:""}}return t!=="/"&&(h.pathname=xb({basename:t,pathname:h.pathname})),Qi(h)}function Jw(n,e,t){if(!t||!Qb(t))return{path:e};if(t.formMethod&&!pC(t.formMethod))return{path:e,error:Zr(405,{method:t.formMethod})};let r=()=>({path:e,error:Zr(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),l=w0(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Wn(a))return r();let g=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((E,[S,D])=>`${E}${S}=${D}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:l,formEncType:t.formEncType,formData:void 0,json:void 0,text:g}}}else if(t.formEncType==="application/json"){if(!Wn(a))return r();try{let g=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:l,formEncType:t.formEncType,formData:void 0,json:g,text:void 0}}}catch{return r()}}}tt(typeof FormData=="function","FormData is not available in this environment");let c,h;if(t.formData)c=rg(t.formData),h=t.formData;else if(t.body instanceof FormData)c=rg(t.body),h=t.body;else if(t.body instanceof URLSearchParams)c=t.body,h=iE(c);else if(t.body==null)c=new URLSearchParams,h=new FormData;else try{c=new URLSearchParams(t.body),h=iE(c)}catch{return r()}let p={formMethod:a,formAction:l,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:h,json:void 0,text:void 0};if(Wn(p.formMethod))return{path:e,submission:p};let y=Ro(e);return n&&y.search&&Kg(y.search)&&c.append("index",""),y.search=`?${c}`,{path:Qi(y),submission:p}}function Xw(n,e,t,r,i,a,l,c,h,p,y,g,E,S,D,M,O,J,G,Z,ae){var He;let se=Z?Or(Z[1])?Z[1].error:Z[1].data:void 0,fe=i.createURL(a.location),I=i.createURL(h),R;if(y&&a.errors){let ye=Object.keys(a.errors)[0];R=l.findIndex(Ne=>Ne.route.id===ye)}else if(Z&&Or(Z[1])){let ye=Z[0];R=l.findIndex(Ne=>Ne.route.id===ye)-1}let P=Z?Z[1].statusCode:void 0,V=P&&P>=400,x={currentUrl:fe,currentParams:((He=a.matches[0])==null?void 0:He.params)||{},nextUrl:I,nextParams:l[0].params,...c,actionResult:se,actionStatus:P},F=Vc(l),b=l.map((ye,Ne)=>{let{route:ee}=ye,pe=null;if(R!=null&&Ne>R?pe=!1:ee.lazy?pe=!0:qg(ee)?y?pe=tg(ee,a.loaderData,a.errors):Yb(a.loaderData,a.matches[Ne],ye)&&(pe=!0):pe=!1,pe!==null)return ng(t,r,n,F,ye,p,e,pe);let ne=!1;typeof ae=="boolean"?ne=ae:V?ne=!1:(g||fe.pathname+fe.search===I.pathname+I.search||fe.search!==I.search||Jb(a.matches[Ne],ye))&&(ne=!0);let N={...x,defaultShouldRevalidate:ne},K=Ju(ye,N);return ng(t,r,n,F,ye,p,e,K,N,ae)}),Me=[];return D.forEach((ye,Ne)=>{if(y||!l.some(Ee=>Ee.route.id===ye.routeId)||S.has(Ne))return;let ee=a.fetchers.get(Ne),pe=ee&&ee.state!=="idle"&&ee.data===void 0,ne=io(O,ye.path,J);if(!ne){if(G&&pe)return;Me.push({key:Ne,routeId:ye.routeId,path:ye.path,matches:null,match:null,request:null,controller:null});return}if(M.has(Ne))return;let N=Eh(ne,ye.path),K=new AbortController,he=dl(i,ye.path,K.signal),ve=null;if(E.has(Ne))E.delete(Ne),ve=wl(t,r,he,ne,N,p,e);else if(pe)g&&(ve=wl(t,r,he,ne,N,p,e));else{let Ee;typeof ae=="boolean"?Ee=ae:V?Ee=!1:Ee=g;let we={...x,defaultShouldRevalidate:Ee};Ju(N,we)&&(ve=wl(t,r,he,ne,N,p,e,we))}ve&&Me.push({key:Ne,routeId:ye.routeId,path:ye.path,matches:ve,match:N,request:he,controller:K})}),{dsMatches:b,revalidatingFetchers:Me}}function qg(n){return n.loader!=null||n.middleware!=null&&n.middleware.length>0}function tg(n,e,t){if(n.lazy)return!0;if(!qg(n))return!1;let r=e!=null&&n.id in e,i=t!=null&&t[n.id]!==void 0;return!r&&i?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!r&&!i}function Yb(n,e,t){let r=!e||t.route.id!==e.route.id,i=!n.hasOwnProperty(t.route.id);return r||i}function Jb(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function Ju(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function Zw(n,e,t,r,i,a){let l;if(n){let p=r[n];tt(p,`No route found to patch children into: routeId = ${n}`),p.children||(p.children=[]),l=p.children}else l=t;let c=[],h=[];if(e.forEach(p=>{let y=l.find(g=>m0(p,g));y?h.push({existingRoute:y,newRoute:p}):c.push(p)}),c.length>0){let p=cc(c,i,[n||"_","patch",String((l==null?void 0:l.length)||"0")],r);l.push(...p)}if(a&&h.length>0)for(let p=0;p<h.length;p++){let{existingRoute:y,newRoute:g}=h[p],E=y,[S]=cc([g],i,[],{},!0);Object.assign(E,{element:S.element?S.element:E.element,errorElement:S.errorElement?S.errorElement:E.errorElement,hydrateFallbackElement:S.hydrateFallbackElement?S.hydrateFallbackElement:E.hydrateFallbackElement})}}function m0(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,r)=>{var i;return(i=e.children)==null?void 0:i.some(a=>m0(t,a))}):!1}var eE=new WeakMap,g0=({key:n,route:e,manifest:t,mapRouteProperties:r})=>{let i=t[e.id];if(tt(i,"No route found in manifest"),!i.lazy||typeof i.lazy!="object")return;let a=i.lazy[n];if(!a)return;let l=eE.get(i);l||(l={},eE.set(i,l));let c=l[n];if(c)return c;let h=(async()=>{let p=pb(n),g=i[n]!==void 0&&n!=="hasErrorBoundary";if(p)ln(!p,"Route property "+n+" is not a supported lazy route property. This property will be ignored."),l[n]=Promise.resolve();else if(g)ln(!1,`Route "${i.id}" has a static property "${n}" defined. The lazy property will be ignored.`);else{let E=await a();E!=null&&(Object.assign(i,{[n]:E}),Object.assign(i,r(i)))}typeof i.lazy=="object"&&(i.lazy[n]=void 0,Object.values(i.lazy).every(E=>E===void 0)&&(i.lazy=void 0))})();return l[n]=h,h},tE=new WeakMap;function Xb(n,e,t,r,i){let a=t[n.id];if(tt(a,"No route found in manifest"),!n.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof n.lazy=="function"){let y=tE.get(a);if(y)return{lazyRoutePromise:y,lazyHandlerPromise:y};let g=(async()=>{tt(typeof n.lazy=="function","No lazy route function found");let E=await n.lazy(),S={};for(let D in E){let M=E[D];if(M===void 0)continue;let O=gb(D),G=a[D]!==void 0&&D!=="hasErrorBoundary";O?ln(!O,"Route property "+D+" is not a supported property to be returned from a lazy route function. This property will be ignored."):G?ln(!G,`Route "${a.id}" has a static property "${D}" defined but its lazy function is also returning a value for this property. The lazy route property "${D}" will be ignored.`):S[D]=M}Object.assign(a,S),Object.assign(a,{...r(a),lazy:void 0})})();return tE.set(a,g),g.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:g}}let l=Object.keys(n.lazy),c=[],h;for(let y of l){if(i&&i.includes(y))continue;let g=g0({key:y,route:n,manifest:t,mapRouteProperties:r});g&&(c.push(g),y===e&&(h=g))}let p=c.length>0?Promise.all(c).then(()=>{}):void 0;return p==null||p.catch(()=>{}),h==null||h.catch(()=>{}),{lazyRoutePromise:p,lazyHandlerPromise:h}}async function nE(n){let e=n.matches.filter(i=>i.shouldLoad),t={};return(await Promise.all(e.map(i=>i.resolve()))).forEach((i,a)=>{t[e[a].route.id]=i}),t}async function Zb(n){return n.matches.some(e=>e.route.middleware)?y0(n,()=>nE(n)):nE(n)}function y0(n,e){return eC(n,e,r=>{if(fC(r))throw r;return r},uC,t);function t(r,i,a){if(a)return Promise.resolve(Object.assign(a.value,{[i]:{type:"error",result:r}}));{let{matches:l}=n,c=Math.min(Math.max(l.findIndex(p=>p.route.id===i),0),Math.max(l.findIndex(p=>p.shouldCallHandler()),0)),h=so(l,l[c].route.id).route.id;return Promise.resolve({[h]:{type:"error",result:r}})}}}async function eC(n,e,t,r,i){let{matches:a,request:l,params:c,context:h,unstable_pattern:p}=n,y=a.flatMap(E=>E.route.middleware?E.route.middleware.map(S=>[E.route.id,S]):[]);return await _0({request:l,params:c,context:h,unstable_pattern:p},y,e,t,r,i)}async function _0(n,e,t,r,i,a,l=0){let{request:c}=n;if(c.signal.aborted)throw c.signal.reason??new Error(`Request aborted: ${c.method} ${c.url}`);let h=e[l];if(!h)return await t();let[p,y]=h,g,E=async()=>{if(g)throw new Error("You may only call `next()` once per middleware");try{return g={value:await _0(n,e,t,r,i,a,l+1)},g.value}catch(S){return g={value:await a(S,p,g)},g.value}};try{let S=await y(n,E),D=S!=null?r(S):void 0;return i(D)?D:g?D??g.value:(g={value:await E()},g.value)}catch(S){return await a(S,p,g)}}function v0(n,e,t,r,i){let a=g0({key:"middleware",route:r.route,manifest:e,mapRouteProperties:n}),l=Xb(r.route,Wn(t.method)?"action":"loader",e,n,i);return{middleware:a,route:l.lazyRoutePromise,handler:l.lazyHandlerPromise}}function ng(n,e,t,r,i,a,l,c,h=null,p){let y=!1,g=v0(n,e,t,i,a);return{...i,_lazyPromises:g,shouldLoad:c,shouldRevalidateArgs:h,shouldCallHandler(E){return y=!0,h?typeof p=="boolean"?Ju(i,{...h,defaultShouldRevalidate:p}):typeof E=="boolean"?Ju(i,{...h,defaultShouldRevalidate:E}):Ju(i,h):c},resolve(E){let{lazy:S,loader:D,middleware:M}=i.route,O=y||c||E&&!Wn(t.method)&&(S||D),J=M&&M.length>0&&!D&&!S;return O&&(Wn(t.method)||!J)?nC({request:t,unstable_pattern:r,match:i,lazyHandlerPromise:g==null?void 0:g.handler,lazyRoutePromise:g==null?void 0:g.route,handlerOverride:E,scopedContext:l}):Promise.resolve({type:"data",result:void 0})}}}function wl(n,e,t,r,i,a,l,c=null){return r.map(h=>h.route.id!==i.route.id?{...h,shouldLoad:!1,shouldRevalidateArgs:c,shouldCallHandler:()=>!1,_lazyPromises:v0(n,e,t,h,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:ng(n,e,t,Vc(r),h,a,l,!0,c))}async function tC(n,e,t,r,i,a){t.some(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware})&&await Promise.all(t.map(p=>{var y;return(y=p._lazyPromises)==null?void 0:y.middleware}));let l={request:e,unstable_pattern:Vc(t),params:t[0].params,context:i,matches:t},h=await n({...l,fetcherKey:r,runClientMiddleware:p=>{let y=l;return y0(y,()=>p({...y,fetcherKey:r,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(p=>{var y,g;return[(y=p._lazyPromises)==null?void 0:y.handler,(g=p._lazyPromises)==null?void 0:g.route]}))}catch{}return h}async function nC({request:n,unstable_pattern:e,match:t,lazyHandlerPromise:r,lazyRoutePromise:i,handlerOverride:a,scopedContext:l}){let c,h,p=Wn(n.method),y=p?"action":"loader",g=E=>{let S,D=new Promise((J,G)=>S=G);h=()=>S(),n.signal.addEventListener("abort",h);let M=J=>typeof E!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${y}" [routeId: ${t.route.id}]`)):E({request:n,unstable_pattern:e,params:t.params,context:l},...J!==void 0?[J]:[]),O=(async()=>{try{return{type:"data",result:await(a?a(G=>M(G)):M())}}catch(J){return{type:"error",result:J}}})();return Promise.race([O,D])};try{let E=p?t.route.action:t.route.loader;if(r||i)if(E){let S,[D]=await Promise.all([g(E).catch(M=>{S=M}),r,i]);if(S!==void 0)throw S;c=D}else{await r;let S=p?t.route.action:t.route.loader;if(S)[c]=await Promise.all([g(S),i]);else if(y==="action"){let D=new URL(n.url),M=D.pathname+D.search;throw Zr(405,{method:n.method,pathname:M,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(E)c=await g(E);else{let S=new URL(n.url),D=S.pathname+S.search;throw Zr(404,{pathname:D})}}catch(E){return{type:"error",result:E}}finally{h&&n.signal.removeEventListener("abort",h)}return c}async function rC(n){let e=n.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?n.body==null?null:n.json():n.text()}async function iC(n){var r,i,a,l,c;let{result:e,type:t}=n;if(Wg(e)){let h;try{h=await rC(e)}catch(p){return{type:"error",error:p}}return t==="error"?{type:"error",error:new Oc(e.status,e.statusText,h),statusCode:e.status,headers:e.headers}:{type:"data",data:h,statusCode:e.status,headers:e.headers}}return t==="error"?lE(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(r=e.init)==null?void 0:r.status,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}:{type:"error",error:lC(e),statusCode:dc(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:dc(e)?e.status:void 0}:lE(e)?{type:"data",data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function sC(n,e,t,r,i){let a=n.headers.get("Location");if(tt(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!jg(a)){let l=r.slice(0,r.findIndex(c=>c.route.id===t)+1);a=eg(new URL(e.url),l,i,a),n.headers.set("Location",a)}return n}function rE(n,e,t,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(jg(n)){let a=n,l=a.startsWith("//")?new URL(e.protocol+a):new URL(a);if(i.includes(l.protocol))throw new Error("Invalid redirect location");let c=ni(l.pathname,t)!=null;if(l.origin===e.origin&&c)return l.pathname+l.search+l.hash}try{let a=r.createURL(n);if(i.includes(a.protocol))throw new Error("Invalid redirect location")}catch{}return n}function dl(n,e,t,r){let i=n.createURL(w0(e)).toString(),a={signal:t};if(r&&Wn(r.formMethod)){let{formMethod:l,formEncType:c}=r;a.method=l.toUpperCase(),c==="application/json"?(a.headers=new Headers({"Content-Type":c}),a.body=JSON.stringify(r.json)):c==="text/plain"?a.body=r.text:c==="application/x-www-form-urlencoded"&&r.formData?a.body=rg(r.formData):a.body=r.formData}return new Request(i,a)}function rg(n){let e=new URLSearchParams;for(let[t,r]of n.entries())e.append(t,typeof r=="string"?r:r.name);return e}function iE(n){let e=new FormData;for(let[t,r]of n.entries())e.append(t,r);return e}function oC(n,e,t,r=!1,i=!1){let a={},l=null,c,h=!1,p={},y=t&&Or(t[1])?t[1].error:void 0;return n.forEach(g=>{if(!(g.route.id in e))return;let E=g.route.id,S=e[E];if(tt(!na(S),"Cannot handle redirect results in processLoaderData"),Or(S)){let D=S.error;if(y!==void 0&&(D=y,y=void 0),l=l||{},i)l[E]=D;else{let M=so(n,E);l[M.route.id]==null&&(l[M.route.id]=D)}r||(a[E]=p0),h||(h=!0,c=dc(S.error)?S.error.status:500),S.headers&&(p[E]=S.headers)}else a[E]=S.data,S.statusCode&&S.statusCode!==200&&!h&&(c=S.statusCode),S.headers&&(p[E]=S.headers)}),y!==void 0&&t&&(l={[t[0]]:y},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:l,statusCode:c||200,loaderHeaders:p}}function sE(n,e,t,r,i,a){let{loaderData:l,errors:c}=oC(e,t,r);return i.filter(h=>!h.matches||h.matches.some(p=>p.shouldLoad)).forEach(h=>{let{key:p,match:y,controller:g}=h;if(g&&g.signal.aborted)return;let E=a[p];if(tt(E,"Did not find corresponding fetcher result"),Or(E)){let S=so(n.matches,y==null?void 0:y.route.id);c&&c[S.route.id]||(c={...c,[S.route.id]:E.error}),n.fetchers.delete(p)}else if(na(E))tt(!1,"Unhandled fetcher revalidation redirect");else{let S=gs(E.data);n.fetchers.set(p,S)}}),{loaderData:l,errors:c}}function oE(n,e,t,r){let i=Object.entries(e).filter(([,a])=>a!==p0).reduce((a,[l,c])=>(a[l]=c,a),{});for(let a of t){let l=a.route.id;if(!e.hasOwnProperty(l)&&n.hasOwnProperty(l)&&a.route.loader&&(i[l]=n[l]),r&&r.hasOwnProperty(l))break}return i}function aE(n){return n?Or(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function so(n,e){return(e?n.slice(0,n.findIndex(r=>r.route.id===e)+1):[...n]).reverse().find(r=>r.route.hasErrorBoundary===!0)||n[0]}function oh(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Zr(n,{pathname:e,routeId:t,method:r,type:i,message:a}={}){let l="Unknown Server Error",c="Unknown @remix-run/router error";return n===400?(l="Bad Request",r&&e&&t?c=`You made a ${r} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:i==="invalid-body"&&(c="Unable to encode submission body")):n===403?(l="Forbidden",c=`Route "${t}" does not match URL "${e}"`):n===404?(l="Not Found",c=`No route matches URL "${e}"`):n===405&&(l="Method Not Allowed",r&&e&&t?c=`You made a ${r.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:r&&(c=`Invalid request method "${r.toUpperCase()}"`)),new Oc(n||500,l,new Error(c),!0)}function ah(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[r,i]=e[t];if(na(i))return{key:r,result:i}}}function w0(n){let e=typeof n=="string"?Ro(n):n;return Qi({...e,hash:""})}function aC(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function lC(n){var e,t;return new Oc(((e=n.init)==null?void 0:e.status)??500,((t=n.init)==null?void 0:t.statusText)??"Internal Server Error",n.data)}function uC(n){return n!=null&&typeof n=="object"&&Object.entries(n).every(([e,t])=>typeof e=="string"&&cC(t))}function cC(n){return n!=null&&typeof n=="object"&&"type"in n&&"result"in n&&(n.type==="data"||n.type==="error")}function dC(n){return Wg(n.result)&&h0.has(n.result.status)}function Or(n){return n.type==="error"}function na(n){return(n&&n.type)==="redirect"}function lE(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function Wg(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function hC(n){return h0.has(n)}function fC(n){return Wg(n)&&hC(n.status)&&n.headers.has("Location")}function pC(n){return Hb.has(n.toUpperCase())}function Wn(n){return jb.has(n.toUpperCase())}function Kg(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function Eh(n,e){let t=typeof e=="string"?Ro(e).search:e.search;if(n[n.length-1].route.index&&Kg(t||""))return n[n.length-1];let r=a0(n);return r[r.length-1]}function uE(n){let{formMethod:e,formAction:t,formEncType:r,text:i,formData:a,json:l}=n;if(!(!e||!t||!r)){if(i!=null)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:e,formAction:t,formEncType:r,formData:a,json:void 0,text:void 0};if(l!==void 0)return{formMethod:e,formAction:t,formEncType:r,formData:void 0,json:l,text:void 0}}}function Pm(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function mC(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Du(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function gC(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function gs(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function yC(n,e){try{let t=n.sessionStorage.getItem(f0);if(t){let r=JSON.parse(t);for(let[i,a]of Object.entries(r||{}))a&&Array.isArray(a)&&e.set(i,new Set(a||[]))}}catch{}}function _C(n,e){if(e.size>0){let t={};for(let[r,i]of e)t[r]=[...i];try{n.sessionStorage.setItem(f0,JSON.stringify(t))}catch(r){ln(!1,`Failed to save applied view transitions in sessionStorage (${r}).`)}}}function cE(){let n,e,t=new Promise((r,i)=>{n=async a=>{r(a);try{await t}catch{}},e=async a=>{i(a);try{await t}catch{}}});return{promise:t,resolve:n,reject:e}}var Ia=z.createContext(null);Ia.displayName="DataRouter";var Lc=z.createContext(null);Lc.displayName="DataRouterState";var E0=z.createContext(!1);function vC(){return z.useContext(E0)}var Gg=z.createContext({isTransitioning:!1});Gg.displayName="ViewTransition";var T0=z.createContext(new Map);T0.displayName="Fetchers";var wC=z.createContext(null);wC.displayName="Await";var ii=z.createContext(null);ii.displayName="Navigation";var gf=z.createContext(null);gf.displayName="Location";var Xi=z.createContext({outlet:null,matches:[],isDataRoute:!1});Xi.displayName="Route";var Qg=z.createContext(null);Qg.displayName="RouteError";var I0="REACT_ROUTER_ERROR",EC="REDIRECT",TC="ROUTE_ERROR_RESPONSE";function IC(n){if(n.startsWith(`${I0}:${EC}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function SC(n){if(n.startsWith(`${I0}:${TC}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Oc(e.status,e.statusText,e.data)}catch{}}function RC(n,{relative:e}={}){tt(Mc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(ii),{hash:i,pathname:a,search:l}=Fc(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:qi([t,a])),r.createHref({pathname:c,search:l,hash:i})}function Mc(){return z.useContext(gf)!=null}function Sa(){return tt(Mc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(gf).location}var S0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function R0(n){z.useContext(ii).static||z.useLayoutEffect(n)}function AC(){let{isDataRoute:n}=z.useContext(Xi);return n?UC():PC()}function PC(){tt(Mc(),"useNavigate() may be used only in the context of a <Router> component.");let n=z.useContext(Ia),{basename:e,navigator:t}=z.useContext(ii),{matches:r}=z.useContext(Xi),{pathname:i}=Sa(),a=JSON.stringify($g(r)),l=z.useRef(!1);return R0(()=>{l.current=!0}),z.useCallback((h,p={})=>{if(ln(l.current,S0),!l.current)return;if(typeof h=="number"){t.go(h);return}let y=Hg(h,JSON.parse(a),i,p.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:qi([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,a,i,n])}z.createContext(null);function v3(){let{matches:n}=z.useContext(Xi),e=n[n.length-1];return e?e.params:{}}function Fc(n,{relative:e}={}){let{matches:t}=z.useContext(Xi),{pathname:r}=Sa(),i=JSON.stringify($g(t));return z.useMemo(()=>Hg(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function bC(n,e,t,r,i){tt(Mc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=z.useContext(ii),{matches:l}=z.useContext(Xi),c=l[l.length-1],h=c?c.params:{},p=c?c.pathname:"/",y=c?c.pathnameBase:"/",g=c&&c.route;{let G=g&&g.path||"";P0(p,!g||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let E=Sa(),S;S=E;let D=S.pathname||"/",M=D;if(y!=="/"){let G=y.replace(/^\//,"").split("/");M="/"+D.replace(/^\//,"").split("/").slice(G.length).join("/")}let O=io(n,{pathname:M});return ln(g||O!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),ln(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),NC(O&&O.map(G=>Object.assign({},G,{params:Object.assign({},h,G.params),pathname:qi([y,a.encodeLocation?a.encodeLocation(G.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?y:qi([y,a.encodeLocation?a.encodeLocation(G.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:G.pathnameBase])})),l,t,r,i)}function CC(){let n=FC(),e=dc(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:a},"ErrorBoundary")," or"," ",z.createElement("code",{style:a},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:i},t):null,l)}var kC=z.createElement(CC,null),A0=class extends z.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=SC(n.digest);t&&(n=t)}let e=n!==void 0?z.createElement(Xi.Provider,{value:this.props.routeContext},z.createElement(Qg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?z.createElement(xC,{error:n},e):e}};A0.contextType=E0;var bm=new WeakMap;function xC({children:n,error:e}){let{basename:t}=z.useContext(ii);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=IC(e.digest);if(r){let i=bm.get(e);if(i)throw i;let a=u0(r.location,t);if(l0&&!bm.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw bm.set(e,l),l}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function DC({routeContext:n,match:e,children:t}){let r=z.useContext(Ia);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(Xi.Provider,{value:n},t)}function NC(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let y=a.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);tt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,y+1))}let c=!1,h=-1;if(t)for(let y=0;y<a.length;y++){let g=a[y];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=y),g.route.id){let{loaderData:E,errors:S}=t,D=g.route.loader&&!E.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||D){c=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let p=t&&r?(y,g)=>{var E,S;r(y,{location:t.location,params:((S=(E=t.matches)==null?void 0:E[0])==null?void 0:S.params)??{},unstable_pattern:Vc(t.matches),errorInfo:g})}:void 0;return a.reduceRight((y,g,E)=>{let S,D=!1,M=null,O=null;t&&(S=l&&g.route.id?l[g.route.id]:void 0,M=g.route.errorElement||kC,c&&(h<0&&E===0?(P0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),D=!0,O=null):h===E&&(D=!0,O=g.route.hydrateFallbackElement||null)));let J=e.concat(a.slice(0,E+1)),G=()=>{let Z;return S?Z=M:D?Z=O:g.route.Component?Z=z.createElement(g.route.Component,null):g.route.element?Z=g.route.element:Z=y,z.createElement(DC,{match:g,routeContext:{outlet:y,matches:J,isDataRoute:t!=null},children:Z})};return t&&(g.route.ErrorBoundary||g.route.errorElement||E===0)?z.createElement(A0,{location:t.location,revalidation:t.revalidation,component:M,error:S,children:G(),routeContext:{outlet:null,matches:J,isDataRoute:!0},onError:p}):G()},null)}function Yg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OC(n){let e=z.useContext(Ia);return tt(e,Yg(n)),e}function VC(n){let e=z.useContext(Lc);return tt(e,Yg(n)),e}function LC(n){let e=z.useContext(Xi);return tt(e,Yg(n)),e}function Jg(n){let e=LC(n),t=e.matches[e.matches.length-1];return tt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function MC(){return Jg("useRouteId")}function FC(){var r;let n=z.useContext(Qg),e=VC("useRouteError"),t=Jg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function UC(){let{router:n}=OC("useNavigate"),e=Jg("useNavigate"),t=z.useRef(!1);return R0(()=>{t.current=!0}),z.useCallback(async(i,a={})=>{ln(t.current,S0),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var dE={};function P0(n,e,t){!e&&!dE[n]&&(dE[n]=!0,ln(!1,t))}var hE={};function fE(n,e){!n&&!hE[e]&&(hE[e]=!0,console.warn(e))}var BC="useOptimistic",pE=ab[BC],zC=()=>{};function jC(n){return pE?pE(n):[n,zC]}function $C(n){let e={hasErrorBoundary:n.hasErrorBoundary||n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&(n.element&&ln(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:z.createElement(n.Component),Component:void 0})),n.HydrateFallback&&(n.hydrateFallbackElement&&ln(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:z.createElement(n.HydrateFallback),HydrateFallback:void 0})),n.ErrorBoundary&&(n.errorElement&&ln(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:z.createElement(n.ErrorBoundary),ErrorBoundary:void 0})),e}var HC=["HydrateFallback","hydrateFallbackElement"],qC=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",t(r))}})}};function WC({router:n,flushSync:e,onError:t,unstable_useTransitions:r}){r=vC()||r;let[a,l]=z.useState(n.state),[c,h]=jC(a),[p,y]=z.useState(),[g,E]=z.useState({isTransitioning:!1}),[S,D]=z.useState(),[M,O]=z.useState(),[J,G]=z.useState(),Z=z.useRef(new Map),ae=z.useCallback((R,{deletedFetchers:P,newErrors:V,flushSync:x,viewTransitionOpts:F})=>{V&&t&&Object.values(V).forEach(Me=>{var He;return t(Me,{location:R.location,params:((He=R.matches[0])==null?void 0:He.params)??{},unstable_pattern:Vc(R.matches)})}),R.fetchers.forEach((Me,He)=>{Me.data!==void 0&&Z.current.set(He,Me.data)}),P.forEach(Me=>Z.current.delete(Me)),fE(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let b=n.window!=null&&n.window.document!=null&&typeof n.window.document.startViewTransition=="function";if(fE(F==null||b,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!F||!b){e&&x?e(()=>l(R)):r===!1?l(R):z.startTransition(()=>{r===!0&&h(Me=>mE(Me,R)),l(R)});return}if(e&&x){e(()=>{M&&(S==null||S.resolve(),M.skipTransition()),E({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let Me=n.window.document.startViewTransition(()=>{e(()=>l(R))});Me.finished.finally(()=>{e(()=>{D(void 0),O(void 0),y(void 0),E({isTransitioning:!1})})}),e(()=>O(Me));return}M?(S==null||S.resolve(),M.skipTransition(),G({state:R,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(y(R),E({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[n.window,e,M,S,r,h,t]);z.useLayoutEffect(()=>n.subscribe(ae),[n,ae]),z.useEffect(()=>{g.isTransitioning&&!g.flushSync&&D(new qC)},[g]),z.useEffect(()=>{if(S&&p&&n.window){let R=p,P=S.promise,V=n.window.document.startViewTransition(async()=>{r===!1?l(R):z.startTransition(()=>{r===!0&&h(x=>mE(x,R)),l(R)}),await P});V.finished.finally(()=>{D(void 0),O(void 0),y(void 0),E({isTransitioning:!1})}),O(V)}},[p,S,n.window,r,h]),z.useEffect(()=>{S&&p&&c.location.key===p.location.key&&S.resolve()},[S,M,c.location,p]),z.useEffect(()=>{!g.isTransitioning&&J&&(y(J.state),E({isTransitioning:!0,flushSync:!1,currentLocation:J.currentLocation,nextLocation:J.nextLocation}),G(void 0))},[g.isTransitioning,J]);let se=z.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:R=>n.navigate(R),push:(R,P,V)=>n.navigate(R,{state:P,preventScrollReset:V==null?void 0:V.preventScrollReset}),replace:(R,P,V)=>n.navigate(R,{replace:!0,state:P,preventScrollReset:V==null?void 0:V.preventScrollReset})}),[n]),fe=n.basename||"/",I=z.useMemo(()=>({router:n,navigator:se,static:!1,basename:fe,onError:t}),[n,se,fe,t]);return z.createElement(z.Fragment,null,z.createElement(Ia.Provider,{value:I},z.createElement(Lc.Provider,{value:c},z.createElement(T0.Provider,{value:Z.current},z.createElement(Gg.Provider,{value:g},z.createElement(QC,{basename:fe,location:c.location,navigationType:c.historyAction,navigator:se,unstable_useTransitions:r},z.createElement(KC,{routes:n.routes,future:n.future,state:c,onError:t})))))),null)}function mE(n,e){return{...n,navigation:e.navigation.state!=="idle"?e.navigation:n.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:n.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:n.actionData,fetchers:e.fetchers}}var KC=z.memo(GC);function GC({routes:n,future:e,state:t,onError:r}){return bC(n,void 0,t,r,e)}function QC({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){tt(!Mc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=z.useMemo(()=>({basename:c,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[c,i,a,l]);typeof t=="string"&&(t=Ro(t));let{pathname:p="/",search:y="",hash:g="",state:E=null,key:S="default"}=t,D=z.useMemo(()=>{let M=ni(p,c);return M==null?null:{location:{pathname:M,search:y,hash:g,state:E,key:S},navigationType:r}},[c,p,y,g,E,S,r]);return ln(D!=null,`<Router basename="${c}"> is not able to match the URL "${p}${y}${g}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:z.createElement(ii.Provider,{value:h},z.createElement(gf.Provider,{children:e,value:D}))}var Th="get",Ih="application/x-www-form-urlencoded";function yf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function YC(n){return yf(n)&&n.tagName.toLowerCase()==="button"}function JC(n){return yf(n)&&n.tagName.toLowerCase()==="form"}function XC(n){return yf(n)&&n.tagName.toLowerCase()==="input"}function ZC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ek(n,e){return n.button===0&&(!e||e==="_self")&&!ZC(n)}var lh=null;function tk(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var nk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cm(n){return n!=null&&!nk.has(n)?(ln(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ih}"`),null):n}function rk(n,e){let t,r,i,a,l;if(JC(n)){let c=n.getAttribute("action");r=c?ni(c,e):null,t=n.getAttribute("method")||Th,i=Cm(n.getAttribute("enctype"))||Ih,a=new FormData(n)}else if(YC(n)||XC(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||c.getAttribute("action");if(r=h?ni(h,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Th,i=Cm(n.getAttribute("formenctype"))||Cm(c.getAttribute("enctype"))||Ih,a=new FormData(c,n),!tk()){let{name:p,type:y,value:g}=n;if(y==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,g)}}else{if(yf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Th,r=null,i=Ih,l=n}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Xg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ik(n,e,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?i.pathname.endsWith("/")?i.pathname=`${i.pathname}_.${r}`:i.pathname=`${i.pathname}.${r}`:i.pathname==="/"?i.pathname=`_root.${r}`:e&&ni(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function sk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function ok(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ak(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await sk(a,t);return l.links?l.links():[]}return[]}));return dk(r.flat(1).filter(ok).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function gE(n,e,t,r,i,a){let l=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,c=(h,p)=>{var y;return t[p].pathname!==h.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,p)=>l(h,p)||c(h,p)):a==="data"?e.filter((h,p)=>{var g;let y=r.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(l(h,p)||c(h,p))return!0;if(h.route.shouldRevalidate){let E=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function lk(n,e,{includeHydrateFallback:t}={}){return uk(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function uk(n){return[...new Set(n)]}function ck(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function dk(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(ck(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function b0(){let n=z.useContext(Ia);return Xg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function hk(){let n=z.useContext(Lc);return Xg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Zg=z.createContext(void 0);Zg.displayName="FrameworkContext";function C0(){let n=z.useContext(Zg);return Xg(n,"You must render this element inside a <HydratedRouter> element"),n}function fk(n,e){let t=z.useContext(Zg),[r,i]=z.useState(!1),[a,l]=z.useState(!1),{onFocus:c,onBlur:h,onMouseEnter:p,onMouseLeave:y,onTouchStart:g}=e,E=z.useRef(null);z.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let M=J=>{J.forEach(G=>{l(G.isIntersecting)})},O=new IntersectionObserver(M,{threshold:.5});return E.current&&O.observe(E.current),()=>{O.disconnect()}}},[n]),z.useEffect(()=>{if(r){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[r]);let S=()=>{i(!0)},D=()=>{i(!1),l(!1)};return t?n!=="intent"?[a,E,{}]:[a,E,{onFocus:Nu(c,S),onBlur:Nu(h,D),onMouseEnter:Nu(p,S),onMouseLeave:Nu(y,D),onTouchStart:Nu(g,S)}]:[!1,E,{}]}function Nu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function pk({page:n,...e}){let{router:t}=b0(),r=z.useMemo(()=>io(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?z.createElement(gk,{page:n,matches:r,...e}):null}function mk(n){let{manifest:e,routeModules:t}=C0(),[r,i]=z.useState([]);return z.useEffect(()=>{let a=!1;return ak(n,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[n,e,t]),r}function gk({page:n,matches:e,...t}){let r=Sa(),{future:i,manifest:a,routeModules:l}=C0(),{basename:c}=b0(),{loaderData:h,matches:p}=hk(),y=z.useMemo(()=>gE(n,e,p,a,r,"data"),[n,e,p,a,r]),g=z.useMemo(()=>gE(n,e,p,a,r,"assets"),[n,e,p,a,r]),E=z.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,O=!1;if(e.forEach(G=>{var ae;let Z=a.routes[G.route.id];!Z||!Z.hasLoader||(!y.some(se=>se.route.id===G.route.id)&&G.route.id in h&&((ae=l[G.route.id])!=null&&ae.shouldRevalidate)||Z.hasClientLoader?O=!0:M.add(G.route.id))}),M.size===0)return[];let J=ik(n,c,i.unstable_trailingSlashAwareDataRequests,"data");return O&&M.size>0&&J.searchParams.set("_routes",e.filter(G=>M.has(G.route.id)).map(G=>G.route.id).join(",")),[J.pathname+J.search]},[c,i.unstable_trailingSlashAwareDataRequests,h,r,a,y,e,n,l]),S=z.useMemo(()=>lk(g,a),[g,a]),D=mk(g);return z.createElement(z.Fragment,null,E.map(M=>z.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),S.map(M=>z.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),D.map(({key:M,link:O})=>z.createElement("link",{key:M,nonce:t.nonce,...O,crossOrigin:O.crossOrigin??t.crossOrigin})))}function yk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _k=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{_k&&(window.__reactRouterVersion="7.13.0")}catch{}function vk(n,e){return Gb({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:cb({window:e==null?void 0:e.window}),hydrationData:wk(),routes:n,mapRouteProperties:$C,hydrationRouteProperties:HC,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function wk(){let n=window==null?void 0:window.__staticRouterHydrationData;return n&&n.errors&&(n={...n,errors:Ek(n.errors)}),n}function Ek(n){if(!n)return null;let e=Object.entries(n),t={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")t[r]=new Oc(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let l=new a(i.message);l.stack="",t[r]=l}catch{}}if(t[r]==null){let a=new Error(i.message);a.stack="",t[r]=a}}else t[r]=i;return t}var k0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,x0=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:c,target:h,to:p,preventScrollReset:y,viewTransition:g,unstable_defaultShouldRevalidate:E,...S},D){let{basename:M,unstable_useTransitions:O}=z.useContext(ii),J=typeof p=="string"&&k0.test(p),G=u0(p,M);p=G.to;let Z=RC(p,{relative:i}),[ae,se,fe]=fk(r,S),I=Rk(p,{replace:l,state:c,target:h,preventScrollReset:y,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:E,unstable_useTransitions:O});function R(V){e&&e(V),V.defaultPrevented||I(V)}let P=z.createElement("a",{...S,...fe,href:G.absoluteURL||Z,onClick:G.isExternal||a?e:R,ref:yk(D,se),target:h,"data-discover":!J&&t==="render"?"true":void 0});return ae&&!J?z.createElement(z.Fragment,null,P,z.createElement(pk,{page:Z})):P});x0.displayName="Link";var Tk=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:c,children:h,...p},y){let g=Fc(l,{relative:p.relative}),E=Sa(),S=z.useContext(Lc),{navigator:D,basename:M}=z.useContext(ii),O=S!=null&&kk(g)&&c===!0,J=D.encodeLocation?D.encodeLocation(g).pathname:g.pathname,G=E.pathname,Z=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(G=G.toLowerCase(),Z=Z?Z.toLowerCase():null,J=J.toLowerCase()),Z&&M&&(Z=ni(Z,M)||Z);const ae=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let se=G===J||!i&&G.startsWith(J)&&G.charAt(ae)==="/",fe=Z!=null&&(Z===J||!i&&Z.startsWith(J)&&Z.charAt(J.length)==="/"),I={isActive:se,isPending:fe,isTransitioning:O},R=se?e:void 0,P;typeof r=="function"?P=r(I):P=[r,se?"active":null,fe?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let V=typeof a=="function"?a(I):a;return z.createElement(x0,{...p,"aria-current":R,className:P,ref:y,style:V,to:l,viewTransition:c},typeof h=="function"?h(I):h)});Tk.displayName="NavLink";var Ik=z.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:l=Th,action:c,onSubmit:h,relative:p,preventScrollReset:y,viewTransition:g,unstable_defaultShouldRevalidate:E,...S},D)=>{let{unstable_useTransitions:M}=z.useContext(ii),O=bk(),J=Ck(c,{relative:p}),G=l.toLowerCase()==="get"?"get":"post",Z=typeof c=="string"&&k0.test(c),ae=se=>{if(h&&h(se),se.defaultPrevented)return;se.preventDefault();let fe=se.nativeEvent.submitter,I=(fe==null?void 0:fe.getAttribute("formmethod"))||l,R=()=>O(fe||se.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:i,state:a,relative:p,preventScrollReset:y,viewTransition:g,unstable_defaultShouldRevalidate:E});M&&t!==!1?z.startTransition(()=>R()):R()};return z.createElement("form",{ref:D,method:G,action:J,onSubmit:r?h:ae,...S,"data-discover":!Z&&n==="render"?"true":void 0})});Ik.displayName="Form";function Sk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function D0(n){let e=z.useContext(Ia);return tt(e,Sk(n)),e}function Rk(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:h}={}){let p=AC(),y=Sa(),g=Fc(n,{relative:a});return z.useCallback(E=>{if(ek(E,e)){E.preventDefault();let S=t!==void 0?t:Qi(y)===Qi(g),D=()=>p(n,{replace:S,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c});h?z.startTransition(()=>D()):D()}},[y,p,g,t,r,e,n,i,a,l,c,h])}var Ak=0,Pk=()=>`__${String(++Ak)}__`;function bk(){let{router:n}=D0("useSubmit"),{basename:e}=z.useContext(ii),t=MC(),r=n.fetch,i=n.navigate;return z.useCallback(async(a,l={})=>{let{action:c,method:h,encType:p,formData:y,body:g}=rk(a,e);if(l.navigate===!1){let E=l.fetcherKey||Pk();await r(E,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:g,formMethod:l.method||h,formEncType:l.encType||p,flushSync:l.flushSync})}else await i(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:y,body:g,formMethod:l.method||h,formEncType:l.encType||p,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,t])}function Ck(n,{relative:e}={}){let{basename:t}=z.useContext(ii),r=z.useContext(Xi);tt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...Fc(n||".",{relative:e})},l=Sa();if(n==null){a.search=l.search;let c=new URLSearchParams(a.search),h=c.getAll("index");if(h.some(y=>y==="")){c.delete("index"),h.filter(g=>g).forEach(g=>c.append("index",g));let y=c.toString();a.search=y?`?${y}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:qi([t,a.pathname])),Qi(a)}function kk(n,{relative:e}={}){let t=z.useContext(Gg);tt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=D0("useViewTransitionState"),i=Fc(n,{relative:e});if(!t.isTransitioning)return!1;let a=ni(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ni(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bh(i.pathname,l)!=null||Bh(i.pathname,a)!=null}const xk="modulepreload",Dk=function(n){return"/"+n},yE={},fn=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=l(t.map(p=>{if(p=Dk(p),p in yE)return;yE[p]=!0;const y=p.endsWith(".css"),g=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${g}`))return;const E=document.createElement("link");if(E.rel=y?"stylesheet":xk,y||(E.as="script"),E.crossOrigin="",E.href=p,h&&E.setAttribute("nonce",h),document.head.appendChild(E),y)return new Promise((S,D)=>{E.addEventListener("load",S),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(l){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=l,window.dispatchEvent(c),!c.defaultPrevented)throw l}return i.then(l=>{for(const c of l||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},_E=z.lazy(()=>fn(()=>import("./Login-B_WD1EjS.js"),__vite__mapDeps([0,1,2,3,4]))),vE=z.lazy(()=>fn(()=>import("./Dashboard-DtTBhg6I.js"),__vite__mapDeps([5,6,1,2,7,8,9,10,11]))),Nk=z.lazy(()=>fn(()=>import("./LecturerDetails-Clmk3W24.js"),__vite__mapDeps([12,6,1,13,14,9,10,11,15,8]))),Ok=z.lazy(()=>fn(()=>import("./BookClass-v9mx71-k.js"),__vite__mapDeps([16,6,1,3,4,17,18,19,20,9,2,21,14,8,22,23]))),Vk=z.lazy(()=>fn(()=>import("./MyBookings-CLyIhO1R.js"),__vite__mapDeps([24,6,1,13,25,18,19,4,26,14,9,8,15,11,22,27]))),wE=z.lazy(()=>fn(()=>import("./Dashboard-Dkc6oTsD.js"),__vite__mapDeps([28,6,1,13,7,8,9,15,29,30]))),Lk=z.lazy(()=>fn(()=>import("./Availability-B1RdTPBj.js"),__vite__mapDeps([31,1,18,20,4,3,6,26,14,9,8,32,23]))),EE=z.lazy(()=>fn(()=>import("./Dashboard-BA2RgVy6.js"),__vite__mapDeps([33,6,1,13,25,18,19,4,7,15,9,34,11,27]))),TE=z.lazy(()=>fn(()=>import("./Dashboard-CjRFM4g6.js"),__vite__mapDeps([35,6,1,13,25,18,19,4,21,20,9,23,7,29,30]))),IE=z.lazy(()=>fn(()=>import("./Dashboard-_W6XJ96v.js"),__vite__mapDeps([36,1,13,6,7,9,29]))),Mk=z.lazy(()=>fn(()=>import("./NotFound-BCVXMiNk.js"),__vite__mapDeps([37,1,32,9]))),Fk=z.lazy(()=>fn(()=>import("./Register-Daf7frDJ.js"),__vite__mapDeps([38,1,3,4,2]))),SE=z.lazy(()=>fn(()=>import("./Onboarding-blVlBRdp.js"),__vite__mapDeps([39,1,3,4,2,17,18,19,20,9]))),Uk=z.lazy(()=>fn(()=>import("./Thread-CklALgdq.js"),__vite__mapDeps([40,1,2,14,9]))),Bk=z.lazy(()=>fn(()=>import("./Analytics-7hQrEFzq.js"),__vite__mapDeps([41,6,1]))),zk=z.lazy(()=>fn(()=>import("./BookingDetails-C2LdmEPL.js"),__vite__mapDeps([42,6,1,13,26,14,9,8,15,11]))),jk=z.lazy(()=>fn(()=>import("./KYCReview-CAm2V-Se.js"),__vite__mapDeps([43,6,1,7,34,9]))),$k=z.lazy(()=>fn(()=>import("./SupportInbox-BOUUV6NC.js"),__vite__mapDeps([44,6,7,1]))),Hk=z.lazy(()=>fn(()=>import("./Support-U-FF-c0F.js"),__vite__mapDeps([45,6,1,7]))),Rt=n=>e=>_i.jsx(z.Suspense,{fallback:null,children:_i.jsx(n,{...e})}),qk=vk([{path:"/",Component:Rt(_E)},{path:"/login",Component:Rt(_E)},{path:"/register",Component:Rt(Fk)},{path:"/onboarding",Component:Rt(SE)},{path:"/profile",Component:Rt(SE)},{path:"/chat/:bookingId",Component:Rt(Uk)},{path:"/admin/analytics",Component:Rt(Bk)},{path:"/student/booking/:id",Component:Rt(zk)},{path:"/admin/kyc",Component:Rt(jk)},{path:"/admin/support",Component:Rt($k)},{path:"/support",Component:Rt(Hk)},{path:"/student",children:[{index:!0,Component:Rt(vE)},{path:"dashboard",Component:Rt(vE)},{path:"lecturer/:id",Component:Rt(Nk)},{path:"book/:lecturerId",Component:Rt(Ok)},{path:"bookings",Component:Rt(Vk)}]},{path:"/lecturer",children:[{index:!0,Component:Rt(wE)},{path:"dashboard",Component:Rt(wE)},{path:"availability",Component:Rt(Lk)}]},{path:"/admin",children:[{index:!0,Component:Rt(EE)},{path:"dashboard",Component:Rt(EE)}]},{path:"/super-admin",children:[{index:!0,Component:Rt(TE)},{path:"dashboard",Component:Rt(TE)}]},{path:"/developer",children:[{index:!0,Component:Rt(IE)},{path:"dashboard",Component:Rt(IE)}]},{path:"*",Component:Rt(Mk)}]),Wk=()=>{};var RE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Kk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],c=n[t++],h=((i&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,c=l?n[i+1]:0,h=i+2<n.length,p=h?n[i+2]:0,y=a>>2,g=(a&3)<<4|c>>4;let E=(c&15)<<2|p>>6,S=p&63;h||(S=64,l||(E=64)),r.push(t[y],t[g],t[E],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(N0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Kk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;const p=i<n.length?t[n.charAt(i)]:64;++i;const g=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||c==null||p==null||g==null)throw new Gk;const E=a<<2|c>>4;if(r.push(E),p!==64){const S=c<<4&240|p>>2;if(r.push(S),g!==64){const D=p<<6&192|g;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Gk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Qk=function(n){const e=N0(n);return O0.encodeByteArray(e,!0)},zh=function(n){return Qk(n).replace(/\./g,"")},V0=function(n){try{return O0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=()=>L0().__FIREBASE_DEFAULTS__,Jk=()=>{if(typeof process>"u"||typeof RE>"u")return;const n=RE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Xk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&V0(n[1]);return e&&JSON.parse(e)},_f=()=>{try{return Wk()||Yk()||Jk()||Xk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},M0=n=>{var e,t;return(t=(e=_f())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ey=n=>{const e=M0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},F0=()=>{var n;return(n=_f())==null?void 0:n.config},U0=n=>{var e;return(e=_f())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function vf(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[zh(JSON.stringify(t)),zh(JSON.stringify(l)),""].join(".")}const Xu={};function ex(){const n={prod:[],emulator:[]};for(const e of Object.keys(Xu))Xu[e]?n.emulator.push(e):n.prod.push(e);return n}function tx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let AE=!1;function wf(n,e){if(typeof window>"u"||typeof document>"u"||!Zi(window.location.host)||Xu[n]===e||Xu[n]||AE)return;Xu[n]=e;function t(E){return`__firebase__banner__${E}`}const r="__firebase__banner",a=ex().prod.length>0;function l(){const E=document.getElementById(r);E&&E.remove()}function c(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function h(E,S){E.setAttribute("width","24"),E.setAttribute("id",S),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function p(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{AE=!0,l()},E}function y(E,S){E.setAttribute("id",S),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function g(){const E=tx(r),S=t("text"),D=document.getElementById(S)||document.createElement("span"),M=t("learnmore"),O=document.getElementById(M)||document.createElement("a"),J=t("preprendIcon"),G=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Z=E.element;c(Z),y(O,M);const ae=p();h(G,J),Z.append(G,D,O,ae),document.body.appendChild(Z)}a?(D.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function z0(){var e;const n=(e=_f())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function j0(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ix(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sx(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function $0(){return!z0()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H0(){return!z0()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ty(){try{return typeof indexedDB=="object"}catch{return!1}}function q0(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function ox(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="FirebaseError";class $r extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=ax,Object.setPrototypeOf(this,$r.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ao.prototype.create)}}class Ao{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?lx(a,r):"Error",c=`${this.serviceName}: ${l} (${i}).`;return new $r(i,c,r)}}function lx(n,e){return n.replace(ux,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const ux=/\{\$([^}]+)}/g;function cx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function vo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(PE(a)&&PE(l)){if(!vo(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function PE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $u(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function Hu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dx(n,e){const t=new hx(n,e);return t.subscribe.bind(t)}class hx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fx(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=km),i.error===void 0&&(i.error=km),i.complete===void 0&&(i.complete=km);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fx(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function km(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=1e3,mx=2,gx=14400*1e3,yx=.5;function bE(n,e=px,t=mx){const r=e*Math.pow(t,n),i=Math.round(yx*r*(Math.random()-.5)*2);return Math.min(gx,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(n){return n&&n._delegate?n._delegate:n}class lr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Zk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(wx(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vx(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vx(n){return n===Qo?void 0:n}function wx(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _x(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(rt||(rt={}));const Tx={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},Ix=rt.INFO,Sx={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},Rx=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=Sx[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ef{constructor(e){this.name=e,this._logLevel=Ix,this._logHandler=Rx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const Ax=(n,e)=>e.some(t=>n instanceof t);let CE,kE;function Px(){return CE||(CE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function bx(){return kE||(kE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,ig=new WeakMap,K0=new WeakMap,xm=new WeakMap,ny=new WeakMap;function Cx(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Ts(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&W0.set(t,n)}).catch(()=>{}),ny.set(e,n),e}function kx(n){if(ig.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});ig.set(n,e)}let sg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ig.get(n);if(e==="objectStoreNames")return n.objectStoreNames||K0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ts(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xx(n){sg=n(sg)}function Dx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Dm(this),e,...t);return K0.set(r,e.sort?e.sort():[e]),Ts(r)}:bx().includes(n)?function(...e){return n.apply(Dm(this),e),Ts(W0.get(this))}:function(...e){return Ts(n.apply(Dm(this),e))}}function Nx(n){return typeof n=="function"?Dx(n):(n instanceof IDBTransaction&&kx(n),Ax(n,Px())?new Proxy(n,sg):n)}function Ts(n){if(n instanceof IDBRequest)return Cx(n);if(xm.has(n))return xm.get(n);const e=Nx(n);return e!==n&&(xm.set(n,e),ny.set(e,n)),e}const Dm=n=>ny.get(n);function Tf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),c=Ts(l);return r&&l.addEventListener("upgradeneeded",h=>{r(Ts(l.result),h.oldVersion,h.newVersion,Ts(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),c}function Nm(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Ts(t).then(()=>{})}const Ox=["get","getKey","getAll","getAllKeys","count"],Vx=["put","add","delete","clear"],Om=new Map;function xE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Om.get(e))return Om.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=Vx.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Ox.includes(t)))return;const a=async function(l,...c){const h=this.transaction(l,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(c.shift())),(await Promise.all([p[t](...c),i&&h.done]))[0]};return Om.set(e,a),a}xx(n=>({...n,get:(e,t,r)=>xE(e,t)||n.get(e,t,r),has:(e,t)=>!!xE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Mx(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function Mx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",DE="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Ef("@firebase/app"),Fx="@firebase/app-compat",Ux="@firebase/analytics-compat",Bx="@firebase/analytics",zx="@firebase/app-check-compat",jx="@firebase/app-check",$x="@firebase/auth",Hx="@firebase/auth-compat",qx="@firebase/database",Wx="@firebase/data-connect",Kx="@firebase/database-compat",Gx="@firebase/functions",Qx="@firebase/functions-compat",Yx="@firebase/installations",Jx="@firebase/installations-compat",Xx="@firebase/messaging",Zx="@firebase/messaging-compat",eD="@firebase/performance",tD="@firebase/performance-compat",nD="@firebase/remote-config",rD="@firebase/remote-config-compat",iD="@firebase/storage",sD="@firebase/storage-compat",oD="@firebase/firestore",aD="@firebase/ai",lD="@firebase/firestore-compat",uD="firebase",cD="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",dD={[og]:"fire-core",[Fx]:"fire-core-compat",[Bx]:"fire-analytics",[Ux]:"fire-analytics-compat",[jx]:"fire-app-check",[zx]:"fire-app-check-compat",[$x]:"fire-auth",[Hx]:"fire-auth-compat",[qx]:"fire-rtdb",[Wx]:"fire-data-connect",[Kx]:"fire-rtdb-compat",[Gx]:"fire-fn",[Qx]:"fire-fn-compat",[Yx]:"fire-iid",[Jx]:"fire-iid-compat",[Xx]:"fire-fcm",[Zx]:"fire-fcm-compat",[eD]:"fire-perf",[tD]:"fire-perf-compat",[nD]:"fire-rc",[rD]:"fire-rc-compat",[iD]:"fire-gcs",[sD]:"fire-gcs-compat",[oD]:"fire-fst",[lD]:"fire-fst-compat",[aD]:"fire-vertex","fire-js":"fire-js",[uD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hc=new Map,hD=new Map,lg=new Map;function NE(n,e){try{n.container.addComponent(e)}catch(t){Ss.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ir(n){const e=n.name;if(lg.has(e))return Ss.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,n);for(const t of hc.values())NE(t,n);for(const t of hD.values())NE(t,n);return!0}function bs(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},po=new Ao("app","Firebase",fD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw po.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra=cD;function G0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:ag,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw po.create("bad-app-name",{appName:String(i)});if(t||(t=F0()),!t)throw po.create("no-options");const a=hc.get(i);if(a){if(vo(t,a.options)&&vo(r,a.config))return a;throw po.create("duplicate-app",{appName:i})}const l=new Ex(i);for(const h of lg.values())l.addComponent(h);const c=new pD(t,r,l);return hc.set(i,c),c}function Bc(n=ag){const e=hc.get(n);if(!e&&n===ag&&F0())return G0();if(!e)throw po.create("no-app",{appName:n});return e}function OE(){return Array.from(hc.values())}function In(n,e,t){let r=dD[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ss.warn(l.join(" "));return}Ir(new lr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD="firebase-heartbeat-database",gD=1,fc="firebase-heartbeat-store";let Vm=null;function Q0(){return Vm||(Vm=Tf(mD,gD,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(fc)}catch(t){console.warn(t)}}}}).catch(n=>{throw po.create("idb-open",{originalErrorMessage:n.message})})),Vm}async function yD(n){try{const t=(await Q0()).transaction(fc),r=await t.objectStore(fc).get(Y0(n));return await t.done,r}catch(e){if(e instanceof $r)Ss.warn(e.message);else{const t=po.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ss.warn(t.message)}}}async function VE(n,e){try{const r=(await Q0()).transaction(fc,"readwrite");await r.objectStore(fc).put(e,Y0(n)),await r.done}catch(t){if(t instanceof $r)Ss.warn(t.message);else{const r=po.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ss.warn(r.message)}}}function Y0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=1024,vD=30;class wD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TD(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=LE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>vD){const l=ID(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ss.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=LE(),{heartbeatsToSend:r,unsentEntries:i}=ED(this._heartbeatsCache.heartbeats),a=zh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Ss.warn(t),""}}}function LE(){return new Date().toISOString().substring(0,10)}function ED(n,e=_D){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),ME(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ME(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class TD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ty()?q0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yD(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return VE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return VE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ME(n){return zh(JSON.stringify({version:2,heartbeats:n})).length}function ID(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n){Ir(new lr("platform-logger",e=>new Lx(e),"PRIVATE")),Ir(new lr("heartbeat",e=>new wD(e),"PRIVATE")),In(og,DE,n),In(og,DE,"esm2020"),In("fire-js","")}SD("");var RD="firebase",AD="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In(RD,AD,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="type.googleapis.com/google.protobuf.Int64Value",bD="type.googleapis.com/google.protobuf.UInt64Value";function J0(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function jh(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>jh(e));if(typeof n=="function"||typeof n=="object")return J0(n,e=>jh(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Pl(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case PD:case bD:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Pl(e)):typeof n=="function"||typeof n=="object"?J0(n,e=>Pl(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Er extends $r{constructor(e,t,r){super(`${ry}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Er.prototype)}}function CD(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $h(n,e){let t=CD(n),r=t,i;try{const a=e&&e.error;if(a){const l=a.status;if(typeof l=="string"){if(!FE[l])return new Er("internal","internal");t=FE[l],r=l}const c=a.message;typeof c=="string"&&(r=c),i=a.details,i!==void 0&&(i=Pl(i))}}catch{}return t==="ok"?null:new Er(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,t,r,i){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Gn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||i==null||i.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="us-central1",xD=/^data: (.*?)(?:\n|$)/;function DD(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Er("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class ND{constructor(e,t,r,i,a=ug,l=(...c)=>fetch(...c)){this.app=e,this.fetchImpl=l,this.emulatorOrigin=null,this.contextProvider=new kD(e,t,r,i),this.cancelAllRequests=new Promise(c=>{this.deleteService=()=>Promise.resolve(c())});try{const c=new URL(a);this.customDomain=c.origin+(c.pathname==="/"?"":c.pathname),this.region=ug}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function OD(n,e,t){const r=Zi(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(vf(n.emulatorOrigin+"/backends"),wf("Functions",!0))}function VD(n,e,t){const r=i=>MD(n,e,i,{});return r.stream=(i,a)=>UD(n,e,i,a),r}function X0(n){return n.emulatorOrigin&&Zi(n.emulatorOrigin)?"include":void 0}async function LD(n,e,t,r,i){t["Content-Type"]="application/json";let a;try{a=await r(n,{method:"POST",body:JSON.stringify(e),headers:t,credentials:X0(i)})}catch{return{status:0,json:null}}let l=null;try{l=await a.json()}catch{}return{status:a.status,json:l}}async function Z0(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function MD(n,e,t,r){const i=n._url(e);return FD(n,i,t,r)}async function FD(n,e,t,r){t=jh(t);const i={data:t},a=await Z0(n,r),l=r.timeout||7e4,c=DD(l),h=await Promise.race([LD(e,i,a,n.fetchImpl,n),c.promise,n.cancelAllRequests]);if(c.cancel(),!h)throw new Er("cancelled","Firebase Functions instance was deleted.");const p=$h(h.status,h.json);if(p)throw p;if(!h.json)throw new Er("internal","Response is not valid JSON object.");let y=h.json.data;if(typeof y>"u"&&(y=h.json.result),typeof y>"u")throw new Er("internal","Response is missing data field.");return{data:Pl(y)}}function UD(n,e,t,r){const i=n._url(e);return BD(n,i,t,r||{})}async function BD(n,e,t,r){var E;t=jh(t);const i={data:t},a=await Z0(n,r);a["Content-Type"]="application/json",a.Accept="text/event-stream";let l;try{l=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(i),headers:a,signal:r==null?void 0:r.signal,credentials:X0(n)})}catch(S){if(S instanceof Error&&S.name==="AbortError"){const M=new Er("cancelled","Request was cancelled.");return{data:Promise.reject(M),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(M)}}}}}}const D=$h(0,null);return{data:Promise.reject(D),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(D)}}}}}}let c,h;const p=new Promise((S,D)=>{c=S,h=D});(E=r==null?void 0:r.signal)==null||E.addEventListener("abort",()=>{const S=new Er("cancelled","Request was cancelled.");h(S)});const y=l.body.getReader(),g=zD(y,c,h,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const S=g.getReader();return{async next(){const{value:D,done:M}=await S.read();return{value:D,done:M}},async return(){return await S.cancel(),{done:!0,value:void 0}}}}},data:p}}function zD(n,e,t,r){const i=(l,c)=>{const h=l.match(xD);if(!h)return;const p=h[1];try{const y=JSON.parse(p);if("result"in y){e(Pl(y.result));return}if("message"in y){c.enqueue(Pl(y.message));return}if("error"in y){const g=$h(0,y);c.error(g),t(g);return}}catch(y){if(y instanceof Er){c.error(y),t(y);return}}},a=new TextDecoder;return new ReadableStream({start(l){let c="";return h();async function h(){if(r!=null&&r.aborted){const p=new Er("cancelled","Request was cancelled");return l.error(p),t(p),Promise.resolve()}try{const{value:p,done:y}=await n.read();if(y){c.trim()&&i(c.trim(),l),l.close();return}if(r!=null&&r.aborted){const E=new Er("cancelled","Request was cancelled");l.error(E),t(E),await n.cancel();return}c+=a.decode(p,{stream:!0});const g=c.split(`
`);c=g.pop()||"";for(const E of g)E.trim()&&i(E.trim(),l);return h()}catch(p){const y=p instanceof Er?p:$h(0,null);l.error(y),t(y)}}},cancel(){return n.cancel()}})}const UE="@firebase/functions",BE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="auth-internal",$D="app-check-internal",HD="messaging-internal";function qD(n){const e=(t,{instanceIdentifier:r})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider(jD),l=t.getProvider(HD),c=t.getProvider($D);return new ND(i,a,l,c,r)};Ir(new lr(ry,e,"PUBLIC").setMultipleInstances(!0)),In(UE,BE,n),In(UE,BE,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(n=Bc(),e=ug){const r=bs(lt(n),ry).getImmediate({identifier:e}),i=ey("functions");return i&&KD(r,...i),r}function KD(n,e,t){OD(lt(n),e,t)}function E3(n,e,t){return VD(lt(n),e)}qD();function eS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GD=eS,tS=new Ao("auth","Firebase",eS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new Ef("@firebase/auth");function QD(n,...e){Hh.logLevel<=rt.WARN&&Hh.warn(`Auth (${Ra}): ${n}`,...e)}function Sh(n,...e){Hh.logLevel<=rt.ERROR&&Hh.error(`Auth (${Ra}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,...e){throw sy(n,...e)}function wi(n,...e){return sy(n,...e)}function iy(n,e,t){const r={...GD(),[e]:t};return new Ao("auth","Firebase",r).create(e,{appName:n.name})}function Wi(n){return iy(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nS(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ri(n,"argument-error"),iy(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sy(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tS.create(n,...e)}function ze(n,e,...t){if(!n)throw sy(e,...t)}function vs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Sh(e),new Error(e)}function Rs(n,e){n||vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function YD(){return zE()==="http:"||zE()==="https:"}function zE(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(YD()||j0()||"connection"in navigator)?navigator.onLine:!0}function XD(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rs(t>e,"Short delay should be less than long delay!"),this.isMobile=nx()||ix()}get(){return JD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n,e){Rs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],tN=new zc(3e4,6e4);function Cs(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function es(n,e,t,r,i={}){return iS(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const c=Uc({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...a};return rx()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Zi(n.emulatorConfig.host)&&(p.credentials="include"),rS.fetch()(await sS(n,n.config.apiHost,t,c),p)})}async function iS(n,e,t){n._canInitEmulator=!1;const r={...ZD,...e};try{const i=new rN(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw uh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,p]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw uh(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw uh(n,"user-disabled",l);const y=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw iy(n,y,p);ri(n,y)}}catch(i){if(i instanceof $r)throw i;ri(n,"network-request-failed",{message:String(i)})}}async function jc(n,e,t,r,i={}){const a=await es(n,e,t,r,i);return"mfaPendingCredential"in a&&ri(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function sS(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?oy(n.config,i):`${n.config.apiScheme}://${i}`;return eN.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function nN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(wi(this.auth,"network-request-failed")),tN.get())})}}function uh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=wi(n,e,r);return i.customData._tokenResponse=t,i}function jE(n){return n!==void 0&&n.enterprise!==void 0}class iN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sN(n,e){return es(n,"GET","/v2/recaptchaConfig",Cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oN(n,e){return es(n,"POST","/v1/accounts:delete",e)}async function qh(n,e){return es(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aN(n,e=!1){const t=lt(n),r=await t.getIdToken(e),i=ay(r);ze(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:Zu(Lm(i.auth_time)),issuedAtTime:Zu(Lm(i.iat)),expirationTime:Zu(Lm(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Lm(n){return Number(n)*1e3}function ay(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Sh("JWT malformed, contained fewer than 3 sections"),null;try{const i=V0(t);return i?JSON.parse(i):(Sh("Failed to decode base64 JWT payload"),null)}catch(i){return Sh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $E(n){const e=ay(n);return ze(e,"internal-error"),ze(typeof e.exp<"u","internal-error"),ze(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof $r&&lN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zu(this.lastLoginAt),this.creationTime=Zu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wh(n){var g;const e=n.auth,t=await n.getIdToken(),r=await bl(n,qh(e,{idToken:t}));ze(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=(g=i.providerUserInfo)!=null&&g.length?oS(i.providerUserInfo):[],l=dN(n.providerData,a),c=n.isAnonymous,h=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),p=c?h:!1,y={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new dg(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(n,y)}async function cN(n){const e=lt(n);await Wh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dN(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oS(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(n,e){const t=await iS(n,{},async()=>{const r=Uc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await sS(n,i,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:r};return n.emulatorConfig&&Zi(n.emulatorConfig.host)&&(h.credentials="include"),rS.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function fN(n,e){return es(n,"POST","/v2/accounts:revokeToken",Cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ze(e.idToken,"internal-error"),ze(typeof e.idToken<"u","internal-error"),ze(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$E(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ze(e.length!==0,"internal-error");const t=$E(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await hN(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new El;return r&&(ze(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(ze(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(ze(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new El,this.toJSON())}_performRefresh(){return vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(n,e){ze(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class vi{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new uN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new dg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await bl(this,this.stsTokenManager.getToken(this.auth,e));return ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return aN(this,e)}reload(){return cN(this)}_assign(e){this!==e&&(ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Wh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gn(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await bl(this,oN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:g,emailVerified:E,isAnonymous:S,providerData:D,stsTokenManager:M}=t;ze(g&&M,e,"internal-error");const O=El.fromJSON(this.name,M);ze(typeof g=="string",e,"internal-error"),eo(r,e.name),eo(i,e.name),ze(typeof E=="boolean",e,"internal-error"),ze(typeof S=="boolean",e,"internal-error"),eo(a,e.name),eo(l,e.name),eo(c,e.name),eo(h,e.name),eo(p,e.name),eo(y,e.name);const J=new vi({uid:g,auth:e,email:i,emailVerified:E,displayName:r,isAnonymous:S,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:O,createdAt:p,lastLoginAt:y});return D&&Array.isArray(D)&&(J.providerData=D.map(G=>({...G}))),h&&(J._redirectEventId=h),J}static async _fromIdTokenResponse(e,t,r=!1){const i=new El;i.updateFromServerResponse(t);const a=new vi({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Wh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];ze(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?oS(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),c=new El;c.updateFromIdToken(r);const h=new vi({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new dg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE=new Map;function ws(n){Rs(n instanceof Function,"Expected a class definition");let e=HE.get(n);return e?(Rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,HE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}aS.type="NONE";const qE=aS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(n,e,t){return`firebase:${n}:${e}:${t}`}class Tl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Rh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Rh("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await qh(this.auth,{idToken:e}).catch(()=>{});return t?vi._fromGetAccountInfoResponse(this.auth,t,e):null}return vi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Tl(ws(qE),e,r);const i=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||ws(qE);const l=Rh(r,e.config.apiKey,e.name);let c=null;for(const p of t)try{const y=await p._get(l);if(y){let g;if(typeof y=="string"){const E=await qh(e,{idToken:y}).catch(()=>{});if(!E)break;g=await vi._fromGetAccountInfoResponse(e,E,y)}else g=vi._fromJSON(e,y);p!==a&&(c=g),a=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new Tl(a,e,r):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Tl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fS(e))return"Blackberry";if(pS(e))return"Webos";if(uS(e))return"Safari";if((e.includes("chrome/")||cS(e))&&!e.includes("edge/"))return"Chrome";if(hS(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lS(n=hn()){return/firefox\//i.test(n)}function uS(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cS(n=hn()){return/crios\//i.test(n)}function dS(n=hn()){return/iemobile/i.test(n)}function hS(n=hn()){return/android/i.test(n)}function fS(n=hn()){return/blackberry/i.test(n)}function pS(n=hn()){return/webos/i.test(n)}function ly(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pN(n=hn()){var e;return ly(n)&&!!((e=window.navigator)!=null&&e.standalone)}function mN(){return sx()&&document.documentMode===10}function mS(n=hn()){return ly(n)||hS(n)||pS(n)||fS(n)||/windows phone/i.test(n)||dS(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(n,e=[]){let t;switch(n){case"Browser":t=WE(hn());break;case"Worker":t=`${WE(hn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ra}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,c)=>{try{const h=e(a);l(h)}catch(h){c(h)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(n,e={}){return es(n,"GET","/v2/passwordPolicy",Cs(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=6;class vN{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??_N,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new KE(this),this.idTokenSubscription=new KE(this),this.beforeStateQueue=new gN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ws(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Tl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await qh(this,{idToken:e}),r=await vi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Gn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=r==null?void 0:r._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(r=h.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Wh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gn(this.app))return Promise.reject(Wi(this));const t=e?lt(e):null;return t&&ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gn(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gn(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yN(this),t=new vN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ao("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await fN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ws(e)||this._popupRedirectResolver;ze(t,this,"argument-error"),this.redirectPersistenceManager=await Tl.create(this,[ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(ze(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,r,i);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&QD(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ks(n){return lt(n)}class KE{constructor(e){this.auth=e,this.observer=null,this.addObserver=dx(t=>this.observer=t)}get next(){return ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EN(n){If=n}function yS(n){return If.loadJS(n)}function TN(){return If.recaptchaEnterpriseScript}function IN(){return If.gapiScript}function SN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class RN{constructor(){this.enterprise=new AN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class AN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const PN="recaptcha-enterprise",_S="NO_RECAPTCHA";class bN{constructor(e){this.type=PN,this.auth=ks(e)}async verify(e="verify",t=!1){async function r(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{sN(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const p=new iN(h);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,l(p.siteKey)}}).catch(h=>{c(h)})})}function i(a,l,c){const h=window.grecaptcha;jE(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(p=>{l(p)}).catch(()=>{l(_S)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new RN().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{r(this.auth).then(c=>{if(!t&&jE(window.grecaptcha))i(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=TN();h.length!==0&&(h+=c),yS(h).then(()=>{i(c,a,l)}).catch(p=>{l(p)})}}).catch(c=>{l(c)})})}}async function GE(n,e,t,r=!1,i=!1){const a=new bN(n);let l;if(i)l=_S;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,p=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function hg(n,e,t,r,i){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await GE(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await GE(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(n,e){const t=bs(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(vo(a,e??{}))return i;ri(i,"already-initialized")}return t.initialize({options:e})}function kN(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ws);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function xN(n,e,t){const r=ks(n);ze(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=vS(e),{host:l,port:c}=DN(e),h=c===null?"":`:${c}`,p={url:`${a}//${l}${h}/`},y=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){ze(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ze(vo(p,r.config.emulator)&&vo(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,Zi(l)?(vf(`${a}//${l}${h}`),wf("Auth",!0)):NN()}function vS(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DN(n){const e=vS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:QE(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:QE(l)}}}function QE(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function NN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return vs("not implemented")}_getIdTokenResponse(e){return vs("not implemented")}_linkToIdToken(e,t){return vs("not implemented")}_getReauthenticationResolver(e){return vs("not implemented")}}async function ON(n,e){return es(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(n,e){return jc(n,"POST","/v1/accounts:signInWithPassword",Cs(n,e))}async function LN(n,e){return es(n,"POST","/v1/accounts:sendOobCode",Cs(n,e))}async function MN(n,e){return LN(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(n,e){return jc(n,"POST","/v1/accounts:signInWithEmailLink",Cs(n,e))}async function UN(n,e){return jc(n,"POST","/v1/accounts:signInWithEmailLink",Cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc extends uy{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,t,"signInWithPassword",VN);case"emailLink":return FN(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,r,"signUpPassword",ON);case"emailLink":return UN(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(n,e){return jc(n,"POST","/v1/accounts:signInWithIdp",Cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN="http://localhost";class ca extends uy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new ca(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Il(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Il(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Il(e,t)}buildRequest(){const e={requestUri:BN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Uc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jN(n){const e=$u(Hu(n)).link,t=e?$u(Hu(e)).deep_link_id:null,r=$u(Hu(n)).deep_link_id;return(r?$u(Hu(r)).link:null)||r||t||e||n}class cy{constructor(e){const t=$u(Hu(e)),r=t.apiKey??null,i=t.oobCode??null,a=zN(t.mode??null);ze(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=jN(e);try{return new cy(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(){this.providerId=$l.PROVIDER_ID}static credential(e,t){return pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=cy.parseLink(t);return ze(r,"argument-error"),pc._fromEmailAndCode(e,r.code,r.tenantId)}}$l.PROVIDER_ID="password";$l.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$l.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends Sf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends $c{constructor(){super("facebook.com")}static credential(e){return ca._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oo.credential(e.oauthAccessToken)}catch{return null}}}oo.FACEBOOK_SIGN_IN_METHOD="facebook.com";oo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s extends $c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ca._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return _s.credential(t,r)}catch{return null}}}_s.GOOGLE_SIGN_IN_METHOD="google.com";_s.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao extends $c{constructor(){super("github.com")}static credential(e){return ca._fromParams({providerId:ao.PROVIDER_ID,signInMethod:ao.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ao.credentialFromTaggedObject(e)}static credentialFromError(e){return ao.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ao.credential(e.oauthAccessToken)}catch{return null}}}ao.GITHUB_SIGN_IN_METHOD="github.com";ao.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo extends $c{constructor(){super("twitter.com")}static credential(e,t){return ca._fromParams({providerId:lo.PROVIDER_ID,signInMethod:lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return lo.credentialFromTaggedObject(e)}static credentialFromError(e){return lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return lo.credential(t,r)}catch{return null}}}lo.TWITTER_SIGN_IN_METHOD="twitter.com";lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $N(n,e){return jc(n,"POST","/v1/accounts:signUp",Cs(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await vi._fromIdTokenResponse(e,r,i),l=YE(r);return new da({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=YE(r);return new da({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function YE(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends $r{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Kh(e,t,r,i)}}function wS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Kh._fromErrorAndOperation(n,a,e,r):a})}async function HN(n,e,t=!1){const r=await bl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return da._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qN(n,e,t=!1){const{auth:r}=n;if(Gn(r.app))return Promise.reject(Wi(r));const i="reauthenticate";try{const a=await bl(n,wS(r,i,e,n),t);ze(a.idToken,r,"internal-error");const l=ay(a.idToken);ze(l,r,"internal-error");const{sub:c}=l;return ze(n.uid===c,r,"user-mismatch"),da._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&ri(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ES(n,e,t=!1){if(Gn(n.app))return Promise.reject(Wi(n));const r="signIn",i=await wS(n,r,e),a=await da._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}async function WN(n,e){return ES(ks(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TS(n){const e=ks(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function T3(n,e,t){if(Gn(n.app))return Promise.reject(Wi(n));const r=ks(n),l=await hg(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$N).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&TS(n),h}),c=await da._fromIdTokenResponse(r,"signIn",l);return await r._updateCurrentUser(c.user),c}function KN(n,e,t){return Gn(n.app)?Promise.reject(Wi(n)):WN(lt(n),$l.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&TS(n),r})}async function I3(n,e){const t=lt(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await MN(t.auth,i);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(n,e){return es(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=lt(n),a={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await bl(r,GN(r.auth,a));r.displayName=l.displayName||null,r.photoURL=l.photoUrl||null;const c=r.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(n,e){return lt(n).setPersistence(e)}function YN(n,e,t,r){return lt(n).onIdTokenChanged(e,t,r)}function JN(n,e,t){return lt(n).beforeAuthStateChanged(e,t)}function XN(n,e,t,r){return lt(n).onAuthStateChanged(e,t,r)}function ZN(n){return lt(n).signOut()}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=1e3,tO=10;class SS extends IS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);mN()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,tO):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},eO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}SS.type="LOCAL";const RS=SS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS extends IS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AS.type="SESSION";const PS=AS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(l).map(async p=>p(t.origin,a)),h=await nO(c);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const p=dy("",20);i.port1.start();const y=setTimeout(()=>{h(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(g){const E=g;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(E.data.response);break;default:clearTimeout(y),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function iO(n){Ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function sO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oO(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function aO(){return bS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebaseLocalStorageDb",lO=1,Qh="firebaseLocalStorage",kS="fbase_key";class Hc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Af(n,e){return n.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function uO(){const n=indexedDB.deleteDatabase(CS);return new Hc(n).toPromise()}function fg(){const n=indexedDB.open(CS,lO);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Qh,{keyPath:kS})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Qh)?e(r):(r.close(),await uO(),e(await fg()))})})}async function JE(n,e,t){const r=Af(n,!0).put({[kS]:e,value:t});return new Hc(r).toPromise()}async function cO(n,e){const t=Af(n,!1).get(e),r=await new Hc(t).toPromise();return r===void 0?null:r.value}function XE(n,e){const t=Af(n,!0).delete(e);return new Hc(t).toPromise()}const dO=800,hO=3;class xS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await fg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>hO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rf._getInstance(aO()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await sO(),!this.activeServiceWorker)return;this.sender=new rO(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await fg();return await JE(e,Gh,"1"),await XE(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>JE(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>cO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>XE(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Af(i,!1).getAll();return new Hc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xS.type="LOCAL";const fO=xS;new zc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hy(n,e){return e?ws(e):(ze(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy extends uy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Il(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Il(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Il(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function pO(n){return ES(n.auth,new fy(n),n.bypassAuthState)}function mO(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),qN(t,new fy(n),n.bypassAuthState)}async function gO(n){const{auth:e,user:t}=n;return ze(t,e,"internal-error"),HN(t,new fy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pO;case"linkViaPopup":case"linkViaRedirect":return gO;case"reauthViaPopup":case"reauthViaRedirect":return mO;default:ri(this.auth,"internal-error")}}resolve(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=new zc(2e3,1e4);async function _O(n,e,t){if(Gn(n.app))return Promise.reject(wi(n,"operation-not-supported-in-this-environment"));const r=ks(n);nS(n,e,Sf);const i=hy(r,t);return new ra(r,"signInViaPopup",e,i).executeNotNull()}class ra extends DS{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ra.currentPopupAction&&ra.currentPopupAction.cancel(),ra.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ze(e,this.auth,"internal-error"),e}async onExecution(){Rs(this.filter.length===1,"Popup operations only handle one event");const e=dy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(wi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(wi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ra.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yO.get())};e()}}ra.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vO="pendingRedirect",Ah=new Map;class wO extends DS{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ah.get(this.auth._key());if(!e){try{const r=await EO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ah.set(this.auth._key(),e)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function EO(n,e){const t=OS(e),r=NS(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function TO(n,e){return NS(n)._set(OS(e),"true")}function IO(n,e){Ah.set(n._key(),e)}function NS(n){return ws(n._redirectPersistence)}function OS(n){return Rh(vO,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(n,e,t){return RO(n,e,t)}async function RO(n,e,t){if(Gn(n.app))return Promise.reject(Wi(n));const r=ks(n);nS(n,e,Sf),await r._initializationPromise;const i=hy(r,t);return await TO(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function AO(n,e,t=!1){if(Gn(n.app))return Promise.reject(Wi(n));const r=ks(n),i=hy(r,e),l=await new wO(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=600*1e3;class bO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!VS(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(wi(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=PO&&this.cachedEventUids.clear(),this.cachedEventUids.has(ZE(e))}saveEventToCache(e){this.cachedEventUids.add(ZE(e)),this.lastProcessedEventTime=Date.now()}}function ZE(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function VS({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VS(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(n,e={}){return es(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DO=/^https?/;async function NO(n){if(n.config.emulator)return;const{authorizedDomains:e}=await kO(n);for(const t of e)try{if(OO(t))return}catch{}ri(n,"unauthorized-domain")}function OO(n){const e=cg(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!DO.test(t))return!1;if(xO.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VO=new zc(3e4,6e4);function eT(){const n=Ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function LO(n){return new Promise((e,t)=>{var i,a,l;function r(){eT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{eT(),t(wi(n,"network-request-failed"))},timeout:VO.get()})}if((a=(i=Ki().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=Ki().gapi)!=null&&l.load)r();else{const c=SN("iframefcb");return Ki()[c]=()=>{gapi.load?r():t(wi(n,"network-request-failed"))},yS(`${IN()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw Ph=null,e})}let Ph=null;function MO(n){return Ph=Ph||LO(n),Ph}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=new zc(5e3,15e3),UO="__/auth/iframe",BO="emulator/auth/iframe",zO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $O(n){const e=n.config;ze(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?oy(e,BO):`https://${n.config.authDomain}/${UO}`,r={apiKey:e.apiKey,appName:n.name,v:Ra},i=jO.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Uc(r).slice(1)}`}async function HO(n){const e=await MO(n),t=Ki().gapi;return ze(t,n,"internal-error"),e.open({where:document.body,url:$O(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=wi(n,"network-request-failed"),c=Ki().setTimeout(()=>{a(l)},FO.get());function h(){Ki().clearTimeout(c),i(r)}r.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},WO=500,KO=600,GO="_blank",QO="http://localhost";class tT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YO(n,e,t,r=WO,i=KO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const h={...qO,width:r.toString(),height:i.toString(),top:a,left:l},p=hn().toLowerCase();t&&(c=cS(p)?GO:t),lS(p)&&(e=e||QO,h.scrollbars="yes");const y=Object.entries(h).reduce((E,[S,D])=>`${E}${S}=${D},`,"");if(pN(p)&&c!=="_self")return JO(e||"",c),new tT(null);const g=window.open(e||"",c,y);ze(g,n,"popup-blocked");try{g.focus()}catch{}return new tT(g)}function JO(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO="__/auth/handler",ZO="emulator/auth/handler",eV=encodeURIComponent("fac");async function nT(n,e,t,r,i,a){ze(n.config.authDomain,n,"auth-domain-config-required"),ze(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ra,eventId:i};if(e instanceof Sf){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",cx(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,g]of Object.entries({}))l[y]=g}if(e instanceof $c){const y=e.getScopes().filter(g=>g!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const y of Object.keys(c))c[y]===void 0&&delete c[y];const h=await n._getAppCheckToken(),p=h?`#${eV}=${encodeURIComponent(h)}`:"";return`${tV(n)}?${Uc(c).slice(1)}${p}`}function tV({config:n}){return n.emulator?oy(n,ZO):`https://${n.authDomain}/${XO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="webStorageSupport";class nV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PS,this._completeRedirectFn=AO,this._overrideRedirectResult=IO}async _openPopup(e,t,r,i){var l;Rs((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await nT(e,t,r,cg(),i);return YO(e,a,dy())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await nT(e,t,r,cg(),i);return iO(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(Rs(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await HO(e),r=new bO(e);return t.register("authEvent",i=>(ze(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mm,{type:Mm},i=>{var l;const a=(l=i==null?void 0:i[0])==null?void 0:l[Mm];a!==void 0&&t(!!a),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=NO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mS()||uS()||ly()}}const rV=nV;var rT="@firebase/auth",iT="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function oV(n){Ir(new lr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=r.options;ze(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gS(n)},p=new wN(r,i,a,h);return kN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ir(new lr("auth-internal",e=>{const t=ks(e.getProvider("auth").getImmediate());return(r=>new iV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),In(rT,iT,sV(n)),In(rT,iT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV=300,lV=U0("authIdTokenMaxAge")||aV;let sT=null;const uV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>lV)return;const i=t==null?void 0:t.token;sT!==i&&(sT=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function cV(n=Bc()){const e=bs(n,"auth");if(e.isInitialized())return e.getImmediate();const t=CN(n,{popupRedirectResolver:rV,persistence:[fO,RS,PS]}),r=U0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=uV(a.toString());JN(t,l,()=>l(t.currentUser)),YN(t,c=>l(c))}}const i=M0("auth");return i&&xN(t,`http://${i}`),t}function dV(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}EN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=wi("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",dV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});oV("Browser");var oT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var mo,LS;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function P(){}P.prototype=R.prototype,I.F=R.prototype,I.prototype=new P,I.prototype.constructor=I,I.D=function(V,x,F){for(var b=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)b[Me-2]=arguments[Me];return R.prototype[x].apply(V,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,P){P||(P=0);const V=Array(16);if(typeof R=="string")for(var x=0;x<16;++x)V[x]=R.charCodeAt(P++)|R.charCodeAt(P++)<<8|R.charCodeAt(P++)<<16|R.charCodeAt(P++)<<24;else for(x=0;x<16;++x)V[x]=R[P++]|R[P++]<<8|R[P++]<<16|R[P++]<<24;R=I.g[0],P=I.g[1],x=I.g[2];let F=I.g[3],b;b=R+(F^P&(x^F))+V[0]+3614090360&4294967295,R=P+(b<<7&4294967295|b>>>25),b=F+(x^R&(P^x))+V[1]+3905402710&4294967295,F=R+(b<<12&4294967295|b>>>20),b=x+(P^F&(R^P))+V[2]+606105819&4294967295,x=F+(b<<17&4294967295|b>>>15),b=P+(R^x&(F^R))+V[3]+3250441966&4294967295,P=x+(b<<22&4294967295|b>>>10),b=R+(F^P&(x^F))+V[4]+4118548399&4294967295,R=P+(b<<7&4294967295|b>>>25),b=F+(x^R&(P^x))+V[5]+1200080426&4294967295,F=R+(b<<12&4294967295|b>>>20),b=x+(P^F&(R^P))+V[6]+2821735955&4294967295,x=F+(b<<17&4294967295|b>>>15),b=P+(R^x&(F^R))+V[7]+4249261313&4294967295,P=x+(b<<22&4294967295|b>>>10),b=R+(F^P&(x^F))+V[8]+1770035416&4294967295,R=P+(b<<7&4294967295|b>>>25),b=F+(x^R&(P^x))+V[9]+2336552879&4294967295,F=R+(b<<12&4294967295|b>>>20),b=x+(P^F&(R^P))+V[10]+4294925233&4294967295,x=F+(b<<17&4294967295|b>>>15),b=P+(R^x&(F^R))+V[11]+2304563134&4294967295,P=x+(b<<22&4294967295|b>>>10),b=R+(F^P&(x^F))+V[12]+1804603682&4294967295,R=P+(b<<7&4294967295|b>>>25),b=F+(x^R&(P^x))+V[13]+4254626195&4294967295,F=R+(b<<12&4294967295|b>>>20),b=x+(P^F&(R^P))+V[14]+2792965006&4294967295,x=F+(b<<17&4294967295|b>>>15),b=P+(R^x&(F^R))+V[15]+1236535329&4294967295,P=x+(b<<22&4294967295|b>>>10),b=R+(x^F&(P^x))+V[1]+4129170786&4294967295,R=P+(b<<5&4294967295|b>>>27),b=F+(P^x&(R^P))+V[6]+3225465664&4294967295,F=R+(b<<9&4294967295|b>>>23),b=x+(R^P&(F^R))+V[11]+643717713&4294967295,x=F+(b<<14&4294967295|b>>>18),b=P+(F^R&(x^F))+V[0]+3921069994&4294967295,P=x+(b<<20&4294967295|b>>>12),b=R+(x^F&(P^x))+V[5]+3593408605&4294967295,R=P+(b<<5&4294967295|b>>>27),b=F+(P^x&(R^P))+V[10]+38016083&4294967295,F=R+(b<<9&4294967295|b>>>23),b=x+(R^P&(F^R))+V[15]+3634488961&4294967295,x=F+(b<<14&4294967295|b>>>18),b=P+(F^R&(x^F))+V[4]+3889429448&4294967295,P=x+(b<<20&4294967295|b>>>12),b=R+(x^F&(P^x))+V[9]+568446438&4294967295,R=P+(b<<5&4294967295|b>>>27),b=F+(P^x&(R^P))+V[14]+3275163606&4294967295,F=R+(b<<9&4294967295|b>>>23),b=x+(R^P&(F^R))+V[3]+4107603335&4294967295,x=F+(b<<14&4294967295|b>>>18),b=P+(F^R&(x^F))+V[8]+1163531501&4294967295,P=x+(b<<20&4294967295|b>>>12),b=R+(x^F&(P^x))+V[13]+2850285829&4294967295,R=P+(b<<5&4294967295|b>>>27),b=F+(P^x&(R^P))+V[2]+4243563512&4294967295,F=R+(b<<9&4294967295|b>>>23),b=x+(R^P&(F^R))+V[7]+1735328473&4294967295,x=F+(b<<14&4294967295|b>>>18),b=P+(F^R&(x^F))+V[12]+2368359562&4294967295,P=x+(b<<20&4294967295|b>>>12),b=R+(P^x^F)+V[5]+4294588738&4294967295,R=P+(b<<4&4294967295|b>>>28),b=F+(R^P^x)+V[8]+2272392833&4294967295,F=R+(b<<11&4294967295|b>>>21),b=x+(F^R^P)+V[11]+1839030562&4294967295,x=F+(b<<16&4294967295|b>>>16),b=P+(x^F^R)+V[14]+4259657740&4294967295,P=x+(b<<23&4294967295|b>>>9),b=R+(P^x^F)+V[1]+2763975236&4294967295,R=P+(b<<4&4294967295|b>>>28),b=F+(R^P^x)+V[4]+1272893353&4294967295,F=R+(b<<11&4294967295|b>>>21),b=x+(F^R^P)+V[7]+4139469664&4294967295,x=F+(b<<16&4294967295|b>>>16),b=P+(x^F^R)+V[10]+3200236656&4294967295,P=x+(b<<23&4294967295|b>>>9),b=R+(P^x^F)+V[13]+681279174&4294967295,R=P+(b<<4&4294967295|b>>>28),b=F+(R^P^x)+V[0]+3936430074&4294967295,F=R+(b<<11&4294967295|b>>>21),b=x+(F^R^P)+V[3]+3572445317&4294967295,x=F+(b<<16&4294967295|b>>>16),b=P+(x^F^R)+V[6]+76029189&4294967295,P=x+(b<<23&4294967295|b>>>9),b=R+(P^x^F)+V[9]+3654602809&4294967295,R=P+(b<<4&4294967295|b>>>28),b=F+(R^P^x)+V[12]+3873151461&4294967295,F=R+(b<<11&4294967295|b>>>21),b=x+(F^R^P)+V[15]+530742520&4294967295,x=F+(b<<16&4294967295|b>>>16),b=P+(x^F^R)+V[2]+3299628645&4294967295,P=x+(b<<23&4294967295|b>>>9),b=R+(x^(P|~F))+V[0]+4096336452&4294967295,R=P+(b<<6&4294967295|b>>>26),b=F+(P^(R|~x))+V[7]+1126891415&4294967295,F=R+(b<<10&4294967295|b>>>22),b=x+(R^(F|~P))+V[14]+2878612391&4294967295,x=F+(b<<15&4294967295|b>>>17),b=P+(F^(x|~R))+V[5]+4237533241&4294967295,P=x+(b<<21&4294967295|b>>>11),b=R+(x^(P|~F))+V[12]+1700485571&4294967295,R=P+(b<<6&4294967295|b>>>26),b=F+(P^(R|~x))+V[3]+2399980690&4294967295,F=R+(b<<10&4294967295|b>>>22),b=x+(R^(F|~P))+V[10]+4293915773&4294967295,x=F+(b<<15&4294967295|b>>>17),b=P+(F^(x|~R))+V[1]+2240044497&4294967295,P=x+(b<<21&4294967295|b>>>11),b=R+(x^(P|~F))+V[8]+1873313359&4294967295,R=P+(b<<6&4294967295|b>>>26),b=F+(P^(R|~x))+V[15]+4264355552&4294967295,F=R+(b<<10&4294967295|b>>>22),b=x+(R^(F|~P))+V[6]+2734768916&4294967295,x=F+(b<<15&4294967295|b>>>17),b=P+(F^(x|~R))+V[13]+1309151649&4294967295,P=x+(b<<21&4294967295|b>>>11),b=R+(x^(P|~F))+V[4]+4149444226&4294967295,R=P+(b<<6&4294967295|b>>>26),b=F+(P^(R|~x))+V[11]+3174756917&4294967295,F=R+(b<<10&4294967295|b>>>22),b=x+(R^(F|~P))+V[2]+718787259&4294967295,x=F+(b<<15&4294967295|b>>>17),b=P+(F^(x|~R))+V[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(x+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+x&4294967295,I.g[3]=I.g[3]+F&4294967295}r.prototype.v=function(I,R){R===void 0&&(R=I.length);const P=R-this.blockSize,V=this.C;let x=this.h,F=0;for(;F<R;){if(x==0)for(;F<=P;)i(this,I,F),F+=this.blockSize;if(typeof I=="string"){for(;F<R;)if(V[x++]=I.charCodeAt(F++),x==this.blockSize){i(this,V),x=0;break}}else for(;F<R;)if(V[x++]=I[F++],x==this.blockSize){i(this,V),x=0;break}}this.h=x,this.o+=R},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var P=I.length-8;P<I.length;++P)I[P]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,P=0;P<4;++P)for(let V=0;V<32;V+=8)I[R++]=this.g[P]>>>V&255;return I};function a(I,R){var P=c;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=R(I)}function l(I,R){this.h=R;const P=[];let V=!0;for(let x=I.length-1;x>=0;x--){const F=I[x]|0;V&&F==R||(P[x]=F,V=!1)}this.g=P}var c={};function h(I){return-128<=I&&I<128?a(I,function(R){return new l([R|0],R<0?-1:0)}):new l([I|0],I<0?-1:0)}function p(I){if(isNaN(I)||!isFinite(I))return g;if(I<0)return O(p(-I));const R=[];let P=1;for(let V=0;I>=P;V++)R[V]=I/P|0,P*=4294967296;return new l(R,0)}function y(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return O(y(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=p(Math.pow(R,8));let V=g;for(let F=0;F<I.length;F+=8){var x=Math.min(8,I.length-F);const b=parseInt(I.substring(F,F+x),R);x<8?(x=p(Math.pow(R,x)),V=V.j(x).add(p(b))):(V=V.j(P),V=V.add(p(b)))}return V}var g=h(0),E=h(1),S=h(16777216);n=l.prototype,n.m=function(){if(M(this))return-O(this).m();let I=0,R=1;for(let P=0;P<this.g.length;P++){const V=this.i(P);I+=(V>=0?V:4294967296+V)*R,R*=4294967296}return I},n.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D(this))return"0";if(M(this))return"-"+O(this).toString(I);const R=p(Math.pow(I,6));var P=this;let V="";for(;;){const x=ae(P,R).g;P=J(P,x.j(R));let F=((P.g.length>0?P.g[0]:P.h)>>>0).toString(I);if(P=x,D(P))return F+V;for(;F.length<6;)F="0"+F;V=F+V}},n.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function D(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=J(this,I),M(I)?-1:D(I)?0:1};function O(I){const R=I.g.length,P=[];for(let V=0;V<R;V++)P[V]=~I.g[V];return new l(P,~I.h).add(E)}n.abs=function(){return M(this)?O(this):this},n.add=function(I){const R=Math.max(this.g.length,I.g.length),P=[];let V=0;for(let x=0;x<=R;x++){let F=V+(this.i(x)&65535)+(I.i(x)&65535),b=(F>>>16)+(this.i(x)>>>16)+(I.i(x)>>>16);V=b>>>16,F&=65535,b&=65535,P[x]=b<<16|F}return new l(P,P[P.length-1]&-2147483648?-1:0)};function J(I,R){return I.add(O(R))}n.j=function(I){if(D(this)||D(I))return g;if(M(this))return M(I)?O(this).j(O(I)):O(O(this).j(I));if(M(I))return O(this.j(O(I)));if(this.l(S)<0&&I.l(S)<0)return p(this.m()*I.m());const R=this.g.length+I.g.length,P=[];for(var V=0;V<2*R;V++)P[V]=0;for(V=0;V<this.g.length;V++)for(let x=0;x<I.g.length;x++){const F=this.i(V)>>>16,b=this.i(V)&65535,Me=I.i(x)>>>16,He=I.i(x)&65535;P[2*V+2*x]+=b*He,G(P,2*V+2*x),P[2*V+2*x+1]+=F*He,G(P,2*V+2*x+1),P[2*V+2*x+1]+=b*Me,G(P,2*V+2*x+1),P[2*V+2*x+2]+=F*Me,G(P,2*V+2*x+2)}for(I=0;I<R;I++)P[I]=P[2*I+1]<<16|P[2*I];for(I=R;I<2*R;I++)P[I]=0;return new l(P,0)};function G(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function Z(I,R){this.g=I,this.h=R}function ae(I,R){if(D(R))throw Error("division by zero");if(D(I))return new Z(g,g);if(M(I))return R=ae(O(I),R),new Z(O(R.g),O(R.h));if(M(R))return R=ae(I,O(R)),new Z(O(R.g),R.h);if(I.g.length>30){if(M(I)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var P=E,V=R;V.l(I)<=0;)P=se(P),V=se(V);var x=fe(P,1),F=fe(V,1);for(V=fe(V,2),P=fe(P,2);!D(V);){var b=F.add(V);b.l(I)<=0&&(x=x.add(P),F=b),V=fe(V,1),P=fe(P,1)}return R=J(I,x.j(R)),new Z(x,R)}for(x=g;I.l(R)>=0;){for(P=Math.max(1,Math.floor(I.m()/R.m())),V=Math.ceil(Math.log(P)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),F=p(P),b=F.j(R);M(b)||b.l(I)>0;)P-=V,F=p(P),b=F.j(R);D(F)&&(F=E),x=x.add(F),I=J(I,b)}return new Z(x,I)}n.B=function(I){return ae(this,I).h},n.and=function(I){const R=Math.max(this.g.length,I.g.length),P=[];for(let V=0;V<R;V++)P[V]=this.i(V)&I.i(V);return new l(P,this.h&I.h)},n.or=function(I){const R=Math.max(this.g.length,I.g.length),P=[];for(let V=0;V<R;V++)P[V]=this.i(V)|I.i(V);return new l(P,this.h|I.h)},n.xor=function(I){const R=Math.max(this.g.length,I.g.length),P=[];for(let V=0;V<R;V++)P[V]=this.i(V)^I.i(V);return new l(P,this.h^I.h)};function se(I){const R=I.g.length+1,P=[];for(let V=0;V<R;V++)P[V]=I.i(V)<<1|I.i(V-1)>>>31;return new l(P,I.h)}function fe(I,R){const P=R>>5;R%=32;const V=I.g.length-P,x=[];for(let F=0;F<V;F++)x[F]=R>0?I.i(F+P)>>>R|I.i(F+P+1)<<32-R:I.i(F+P);return new l(x,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,LS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=y,mo=l}).apply(typeof oT<"u"?oT:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MS,qu,FS,bh,pg,US,BS,zS;(function(){var n,e=Object.defineProperty;function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var v=0;v<d.length;++v){var w=d[v];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=t(this);function i(d,v){if(v)e:{var w=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var H=d[A];if(!(H in w))break e;w=w[H]}d=d[d.length-1],A=w[d],v=v(A),v!=A&&v!=null&&e(w,d,{configurable:!0,writable:!0,value:v})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(v){var w=[],A;for(A in v)Object.prototype.hasOwnProperty.call(v,A)&&w.push([A,v[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function h(d,v,w){return d.call.apply(d.bind,arguments)}function p(d,v,w){return p=h,p.apply(null,arguments)}function y(d,v){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function g(d,v){function w(){}w.prototype=v.prototype,d.Z=v.prototype,d.prototype=new w,d.prototype.constructor=d,d.Ob=function(A,H,Y){for(var me=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)me[Ye-2]=arguments[Ye];return v.prototype[H].apply(A,me)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function S(d){const v=d.length;if(v>0){const w=Array(v);for(let A=0;A<v;A++)w[A]=d[A];return w}return[]}function D(d,v){for(let A=1;A<arguments.length;A++){const H=arguments[A];var w=typeof H;if(w=w!="object"?w:H?Array.isArray(H)?"array":w:"null",w=="array"||w=="object"&&typeof H.length=="number"){w=d.length||0;const Y=H.length||0;d.length=w+Y;for(let me=0;me<Y;me++)d[w+me]=H[me]}else d.push(H)}}class M{constructor(v,w){this.i=v,this.j=w,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function O(d){l.setTimeout(()=>{throw d},0)}function J(){var d=I;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class G{constructor(){this.h=this.g=null}add(v,w){const A=Z.get();A.set(v,w),this.h?this.h.next=A:this.g=A,this.h=A}}var Z=new M(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,w){this.h=v,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let se,fe=!1,I=new G,R=()=>{const d=Promise.resolve(void 0);se=()=>{d.then(P)}};function P(){for(var d;d=J();){try{d.h.call(d.g)}catch(w){O(w)}var v=Z;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}fe=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const w=()=>{};l.addEventListener("test",w,v),l.removeEventListener("test",w,v)}catch{}return d})();function b(d){return/^[\s\xa0]*$/.test(d)}function Me(d,v){x.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}g(Me,x),Me.prototype.init=function(d,v){const w=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(w=="mouseover"?v=d.fromElement:w=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var He="closure_listenable_"+(Math.random()*1e6|0),ye=0;function Ne(d,v,w,A,H){this.listener=d,this.proxy=null,this.src=v,this.type=w,this.capture=!!A,this.ha=H,this.key=++ye,this.da=this.fa=!1}function ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function pe(d,v,w){for(const A in d)v.call(w,d[A],A,d)}function ne(d,v){for(const w in d)v.call(void 0,d[w],w,d)}function N(d){const v={};for(const w in d)v[w]=d[w];return v}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(d,v){let w,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(w in A)d[w]=A[w];for(let Y=0;Y<K.length;Y++)w=K[Y],Object.prototype.hasOwnProperty.call(A,w)&&(d[w]=A[w])}}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,v,w,A,H){const Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);const me=we(d,v,A,H);return me>-1?(v=d[me],w||(v.fa=!1)):(v=new Ne(v,this.src,Y,!!A,H),v.fa=w,d.push(v)),v};function Ee(d,v){const w=v.type;if(w in d.g){var A=d.g[w],H=Array.prototype.indexOf.call(A,v,void 0),Y;(Y=H>=0)&&Array.prototype.splice.call(A,H,1),Y&&(ee(v),d.g[w].length==0&&(delete d.g[w],d.h--))}}function we(d,v,w,A){for(let H=0;H<d.length;++H){const Y=d[H];if(!Y.da&&Y.listener==v&&Y.capture==!!w&&Y.ha==A)return H}return-1}var Ke="closure_lm_"+(Math.random()*1e6|0),je={};function st(d,v,w,A,H){if(Array.isArray(v)){for(let Y=0;Y<v.length;Y++)st(d,v[Y],w,A,H);return null}return w=Si(w),d&&d[He]?d.J(v,w,c(A)?!!A.capture:!1,H):Ft(d,v,w,!1,A,H)}function Ft(d,v,w,A,H,Y){if(!v)throw Error("Invalid event type");const me=c(H)?!!H.capture:!!H;let Ye=An(d);if(Ye||(d[Ke]=Ye=new ve(d)),w=Ye.add(v,w,A,me,Y),w.proxy)return w;if(A=Ii(),w.proxy=A,A.src=d,A.listener=w,d.addEventListener)F||(H=me),H===void 0&&(H=!1),d.addEventListener(v.toString(),A,H);else if(d.attachEvent)d.attachEvent(Sr(v.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function Ii(){function d(w){return v.call(d.src,d.listener,w)}const v=Os;return d}function At(d,v,w,A,H){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)At(d,v[Y],w,A,H);else A=c(A)?!!A.capture:!!A,w=Si(w),d&&d[He]?(d=d.i,Y=String(v).toString(),Y in d.g&&(v=d.g[Y],w=we(v,w,A,H),w>-1&&(ee(v[w]),Array.prototype.splice.call(v,w,1),v.length==0&&(delete d.g[Y],d.h--)))):d&&(d=An(d))&&(v=d.g[v.toString()],d=-1,v&&(d=we(v,w,A,H)),(w=d>-1?v[d]:null)&&Rn(w))}function Rn(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[He])Ee(v.i,d);else{var w=d.type,A=d.proxy;v.removeEventListener?v.removeEventListener(w,A,d.capture):v.detachEvent?v.detachEvent(Sr(w),A):v.addListener&&v.removeListener&&v.removeListener(A),(w=An(v))?(Ee(w,d),w.h==0&&(w.src=null,v[Ke]=null)):ee(d)}}}function Sr(d){return d in je?je[d]:je[d]="on"+d}function Os(d,v){if(d.da)d=!0;else{v=new Me(v,this);const w=d.listener,A=d.ha||d.src;d.fa&&Rn(d),d=w.call(A,v)}return d}function An(d){return d=d[Ke],d instanceof ve?d:null}var Yn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Si(d){return typeof d=="function"?d:(d[Yn]||(d[Yn]=function(v){return d.handleEvent(v)}),d[Yn])}function ut(){V.call(this),this.i=new ve(this),this.M=this,this.G=null}g(ut,V),ut.prototype[He]=!0,ut.prototype.removeEventListener=function(d,v,w,A){At(this,d,v,w,A)};function Pt(d,v){var w,A=d.G;if(A)for(w=[];A;A=A.G)w.push(A);if(d=d.M,A=v.type||v,typeof v=="string")v=new x(v,d);else if(v instanceof x)v.target=v.target||d;else{var H=v;v=new x(A,d),he(v,H)}H=!0;let Y,me;if(w)for(me=w.length-1;me>=0;me--)Y=v.g=w[me],H=Jn(Y,A,!0,v)&&H;if(Y=v.g=d,H=Jn(Y,A,!0,v)&&H,H=Jn(Y,A,!1,v)&&H,w)for(me=0;me<w.length;me++)Y=v.g=w[me],H=Jn(Y,A,!1,v)&&H}ut.prototype.N=function(){if(ut.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const w=d.g[v];for(let A=0;A<w.length;A++)ee(w[A]);delete d.g[v],d.h--}}this.G=null},ut.prototype.J=function(d,v,w,A){return this.i.add(String(d),v,!1,w,A)},ut.prototype.K=function(d,v,w,A){return this.i.add(String(d),v,!0,w,A)};function Jn(d,v,w,A){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let H=!0;for(let Y=0;Y<v.length;++Y){const me=v[Y];if(me&&!me.da&&me.capture==w){const Ye=me.listener,Xt=me.ha||me.src;me.fa&&Ee(d.i,me),H=Ye.call(Xt,A)!==!1&&H}}return H&&!A.defaultPrevented}function Yt(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:l.setTimeout(d,v||0)}function ur(d){d.g=Yt(()=>{d.g=null,d.i&&(d.i=!1,ur(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class cr extends V{constructor(v,w){super(),this.m=v,this.l=w,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ur(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mn(d){V.call(this),this.h=d,this.g={}}g(Mn,V);var Rr=[];function Hr(d){pe(d.g,function(v,w){this.g.hasOwnProperty(w)&&Rn(v)},d),d.g={}}Mn.prototype.N=function(){Mn.Z.N.call(this),Hr(this)},Mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jt=l.JSON.stringify,mn=l.JSON.parse,Pn=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Ar(){}function Xn(){}var qr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function gn(){x.call(this,"d")}g(gn,x);function si(){x.call(this,"c")}g(si,x);var bn={},oi=null;function dr(){return oi=oi||new ut}bn.Ia="serverreachability";function yn(d){x.call(this,bn.Ia,d)}g(yn,x);function Fn(d){const v=dr();Pt(v,new yn(v))}bn.STAT_EVENT="statevent";function hr(d,v){x.call(this,bn.STAT_EVENT,d),this.stat=v}g(hr,x);function yt(d){const v=dr();Pt(v,new hr(v,d))}bn.Ja="timingevent";function Ri(d,v){x.call(this,bn.Ja,d),this.size=v}g(Ri,x);function Fe(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function _t(){this.g=!0}_t.prototype.ua=function(){this.g=!1};function Dt(d,v,w,A,H,Y){d.info(function(){if(d.g)if(Y){var me="",Ye=Y.split("&");for(let vt=0;vt<Ye.length;vt++){var Xt=Ye[vt].split("=");if(Xt.length>1){const nn=Xt[0];Xt=Xt[1];const kr=nn.split("_");me=kr.length>=2&&kr[1]=="type"?me+(nn+"="+Xt+"&"):me+(nn+"=redacted&")}}}else me=null;else me=Y;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+v+`
`+w+`
`+me})}function Ut(d,v,w,A,H,Y,me){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+v+`
`+w+`
`+Y+" "+me})}function en(d,v,w,A){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ht(d,w)+(A?" "+A:"")})}function bt(d,v){d.info(function(){return"TIMEOUT: "+v})}_t.prototype.info=function(){};function Ht(d,v){if(!d.g)return v;if(!v)return null;try{const Y=JSON.parse(v);if(Y){for(d=0;d<Y.length;d++)if(Array.isArray(Y[d])){var w=Y[d];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let me=1;me<A.length;me++)A[me]=""}}}}return Jt(Y)}catch{return v}}var Zn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},k={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},U;function q(){}g(q,Ar),q.prototype.g=function(){return new XMLHttpRequest},U=new q;function te(d){return encodeURIComponent(String(d))}function ue(d){var v=1;d=d.split(":");const w=[];for(;v>0&&d.length;)w.push(d.shift()),v--;return d.length&&w.push(d.join(":")),w}function Se(d,v,w,A){this.j=d,this.i=v,this.l=w,this.S=A||1,this.V=new Mn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Te={},Re={};function Pe(d,v,w){d.M=1,d.A=ns(tn(v)),d.u=w,d.R=!0,$e(d,null)}function $e(d,v){d.F=Date.now(),Ct(d),d.B=tn(d.A);var w=d.B,A=d.S;Array.isArray(A)||(A=[String(A)]),eu(w.i,"t",A),d.C=0,w=d.j.L,d.h=new Ve,d.g=ud(d.j,w?v:null,!d.u),d.P>0&&(d.O=new cr(p(d.Y,d,d.g),d.P)),v=d.V,w=d.g,A=d.ba;var H="readystatechange";Array.isArray(H)||(H&&(Rr[0]=H.toString()),H=Rr);for(let Y=0;Y<H.length;Y++){const me=st(w,H[Y],A||v.handleEvent,!1,v.h||v);if(!me)break;v.g[me.key]=me}v=d.J?N(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),Fn(),Dt(d.i,d.v,d.B,d.l,d.S,d.u)}Se.prototype.ba=function(d){d=d.target;const v=this.O;v&&ki(d)==3?v.j():this.Y(d)},Se.prototype.Y=function(d){try{if(d==this.g)e:{const Ye=ki(this.g),Xt=this.g.ya(),vt=this.g.ca();if(!(Ye<3)&&(Ye!=3||this.g&&(this.h.h||this.g.la()||ad(this.g)))){this.K||Ye!=4||Xt==7||(Xt==8||vt<=0?Fn(3):Fn(2)),qt(this);var v=this.g.ca();this.X=v;var w=De(this);if(this.o=v==200,Ut(this.i,this.v,this.B,this.l,this.S,Ye,v),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(A)){var Y=A;break t}}Y=null}if(d=Y)en(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ct(this,d);else{this.o=!1,this.m=3,yt(12),Wt(this),nt(this);break e}}if(this.R){d=!0;let nn;for(;!this.K&&this.C<w.length;)if(nn=Je(this,w),nn==Re){Ye==4&&(this.m=4,yt(14),d=!1),en(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==Te){this.m=4,yt(15),en(this.i,this.l,w,"[Invalid Chunk]"),d=!1;break}else en(this.i,this.l,nn,null),ct(this,nn);if(Ge(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ye!=4||w.length!=0||this.h.h||(this.m=1,yt(16),d=!1),this.o=this.o&&d,!d)en(this.i,this.l,w,"[Invalid Chunked Response]"),Wt(this),nt(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Oo(me),me.P=!0,yt(11))}}else en(this.i,this.l,w,null),ct(this,w);Ye==4&&Wt(this),this.o&&!this.K&&(Ye==4?Va(this.j,this):(this.o=!1,Ct(this)))}else nu(this.g),v==400&&w.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),Wt(this),nt(this)}}}catch{}finally{}};function De(d){if(!Ge(d))return d.g.la();const v=ad(d.g);if(v==="")return"";let w="";const A=v.length,H=ki(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Wt(d),nt(d),"";d.h.i=new l.TextDecoder}for(let Y=0;Y<A;Y++)d.h.h=!0,w+=d.h.i.decode(v[Y],{stream:!(H&&Y==A-1)});return v.length=0,d.h.g+=w,d.C=0,d.h.g}function Ge(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Je(d,v){var w=d.C,A=v.indexOf(`
`,w);return A==-1?Re:(w=Number(v.substring(w,A)),isNaN(w)?Te:(A+=1,A+w>v.length?Re:(v=v.slice(A,A+w),d.C=A+w,v)))}Se.prototype.cancel=function(){this.K=!0,Wt(this)};function Ct(d){d.T=Date.now()+d.H,Nt(d,d.H)}function Nt(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Fe(p(d.aa,d),v)}function qt(d){d.D&&(l.clearTimeout(d.D),d.D=null)}Se.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(bt(this.i,this.B),this.M!=2&&(Fn(),yt(17)),Wt(this),this.m=2,nt(this)):Nt(this,this.T-d)};function nt(d){d.j.I==0||d.K||Va(d.j,d)}function Wt(d){qt(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,Hr(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function ct(d,v){try{var w=d.j;if(w.I!=0&&(w.g==d||li(w.h,d))){if(!d.L&&li(w.h,d)&&w.I==3){try{var A=w.Ba.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<d.F)Oa(w),br(w);else break e;Ni(w),yt(18)}}else w.xa=H[1],0<w.xa-w.K&&H[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Fe(p(w.Va,w),6e3));ai(w.h)<=1&&w.ta&&(w.ta=void 0)}else Cr(w,11)}else if((d.L||w.g==d)&&Oa(w),!b(v))for(H=w.Ba.g.parse(v),v=0;v<H.length;v++){let vt=H[v];const nn=vt[0];if(!(nn<=w.K))if(w.K=nn,vt=vt[1],w.I==2)if(vt[0]=="c"){w.M=vt[1],w.ba=vt[2];const kr=vt[3];kr!=null&&(w.ka=kr,w.j.info("VER="+w.ka));const as=vt[4];as!=null&&(w.za=as,w.j.info("SVER="+w.za));const Oi=vt[5];Oi!=null&&typeof Oi=="number"&&Oi>0&&(A=1.5*Oi,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const Vi=d.g;if(Vi){const Fa=Vi.g?Vi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fa){var Y=A.h;Y.g||Fa.indexOf("spdy")==-1&&Fa.indexOf("quic")==-1&&Fa.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(fr(Y,Y.h),Y.h=null))}if(A.G){const su=Vi.g?Vi.g.getResponseHeader("X-HTTP-Session-Id"):null;su&&(A.wa=su,dt(A.J,A.G,su))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-d.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var me=d;if(A.na=iu(A,A.L?A.ba:null,A.W),me.L){Wr(A.h,me);var Ye=me,Xt=A.O;Xt&&(Ye.H=Xt),Ye.D&&(qt(Ye),Ct(Ye)),A.g=me}else Bn(A);w.i.length>0&&os(w)}else vt[0]!="stop"&&vt[0]!="close"||Cr(w,7);else w.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Cr(w,7):Da(w):vt[0]!="noop"&&w.l&&w.l.qa(vt),w.A=0)}}Fn(4)}catch{}}var ts=class{constructor(d,v){this.g=d,this.map=v}};function er(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Un(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ai(d){return d.h?1:d.g?d.g.size:0}function li(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function fr(d,v){d.g?d.g.add(v):d.h=v}function Wr(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}er.prototype.cancel=function(){if(this.i=_n(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function _n(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const w of d.g.values())v=v.concat(w.G);return v}return S(d.i)}var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(d,v){if(d){d=d.split("&");for(let w=0;w<d.length;w++){const A=d[w].indexOf("=");let H,Y=null;A>=0?(H=d[w].substring(0,A),Y=d[w].substring(A+1)):H=d[w],v(H,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Cn(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof Cn?(this.l=d.l,gt(this,d.j),this.o=d.o,this.g=d.g,tr(this,d.u),this.h=d.h,ui(this,tu(d.i)),this.m=d.m):d&&(v=String(d).match(Ze))?(this.l=!1,gt(this,v[1]||"",!0),this.o=Co(v[2]||""),this.g=Co(v[3]||"",!0),tr(this,v[4]),this.h=Co(v[5]||"",!0),ui(this,v[6]||"",!0),this.m=Co(v[7]||"")):(this.l=!1,this.i=new ot(null,this.l))}Cn.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(ko(v,Ql,!0),":");var w=this.g;return(w||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ko(v,Ql,!0),"@"),d.push(te(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&d.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&d.push("/"),d.push(ko(w,w.charAt(0)=="/"?xo:Yl,!0))),(w=this.i.toString())&&d.push("?",w),(w=this.m)&&d.push("#",ko(w,Jl)),d.join("")},Cn.prototype.resolve=function(d){const v=tn(this);let w=!!d.j;w?gt(v,d.j):w=!!d.o,w?v.o=d.o:w=!!d.g,w?v.g=d.g:w=d.u!=null;var A=d.h;if(w)tr(v,d.u);else if(w=!!d.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=v.h.lastIndexOf("/");H!=-1&&(A=v.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const Y=[];for(let me=0;me<H.length;){const Ye=H[me++];Ye=="."?A&&me==H.length&&Y.push(""):Ye==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&me==H.length&&Y.push("")):(Y.push(Ye),A=!0)}A=Y.join("/")}else A=H}return w?v.h=A:w=d.i.toString()!=="",w?ui(v,tu(d.i)):w=!!d.m,w&&(v.m=d.m),v};function tn(d){return new Cn(d)}function gt(d,v,w){d.j=w?Co(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function tr(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function ui(d,v,w){v instanceof ot?(d.i=v,Ca(d.i,d.l)):(w||(v=ko(v,Jf)),d.i=new ot(v,d.l))}function dt(d,v,w){d.i.set(v,w)}function ns(d){return dt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Co(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ko(d,v,w){return typeof d=="string"?(d=encodeURI(d).replace(v,Gl),w&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Gl(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ql=/[#\/\?@]/g,Yl=/[#\?:]/g,xo=/[#\?]/g,Jf=/[#\?@]/g,Jl=/#/g;function ot(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Ai(d){d.g||(d.g=new Map,d.h=0,d.i&&mt(d.i,function(v,w){d.add(decodeURIComponent(v.replace(/\+/g," ")),w)}))}n=ot.prototype,n.add=function(d,v){Ai(this),this.i=null,d=Pi(this,d);let w=this.g.get(d);return w||this.g.set(d,w=[]),w.push(v),this.h+=1,this};function Xl(d,v){Ai(d),v=Pi(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function ba(d,v){return Ai(d),v=Pi(d,v),d.g.has(v)}n.forEach=function(d,v){Ai(this),this.g.forEach(function(w,A){w.forEach(function(H){d.call(v,H,A,this)},this)},this)};function Zl(d,v){Ai(d);let w=[];if(typeof v=="string")ba(d,v)&&(w=w.concat(d.g.get(Pi(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)w=w.concat(d[v]);return w}n.set=function(d,v){return Ai(this),this.i=null,d=Pi(this,d),ba(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},n.get=function(d,v){return d?(d=Zl(this,d),d.length>0?String(d[0]):v):v};function eu(d,v,w){Xl(d,v),w.length>0&&(d.i=null,d.g.set(Pi(d,v),S(w)),d.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let A=0;A<v.length;A++){var w=v[A];const H=te(w);w=Zl(this,w);for(let Y=0;Y<w.length;Y++){let me=H;w[Y]!==""&&(me+="="+te(w[Y])),d.push(me)}}return this.i=d.join("&")};function tu(d){const v=new ot;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Pi(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Ca(d,v){v&&!d.j&&(Ai(d),d.i=null,d.g.forEach(function(w,A){const H=A.toLowerCase();A!=H&&(Xl(this,A),eu(this,H,w))},d)),d.j=v}function bi(d,v){const w=new _t;if(l.Image){const A=new Image;A.onload=y(kn,w,"TestLoadImage: loaded",!0,v,A),A.onerror=y(kn,w,"TestLoadImage: error",!1,v,A),A.onabort=y(kn,w,"TestLoadImage: abort",!1,v,A),A.ontimeout=y(kn,w,"TestLoadImage: timeout",!1,v,A),l.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else v(!1)}function Ci(d,v){const w=new _t,A=new AbortController,H=setTimeout(()=>{A.abort(),kn(w,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:A.signal}).then(Y=>{clearTimeout(H),Y.ok?kn(w,"TestPingServer: ok",!0,v):kn(w,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),kn(w,"TestPingServer: error",!1,v)})}function kn(d,v,w,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(w)}catch{}}function Do(){this.g=new Pn}function rs(d){this.i=d.Sb||null,this.h=d.ab||!1}g(rs,Ar),rs.prototype.g=function(){return new Pr(this.i,this.h)};function Pr(d,v){ut.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Pr,ut),n=Pr.prototype,n.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,ci(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||l).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},n.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;id(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function id(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}n.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Vs(this):ci(this),this.readyState==3&&id(this)}},n.Oa=function(d){this.g&&(this.response=this.responseText=d,Vs(this))},n.Na=function(d){this.g&&(this.response=d,Vs(this))},n.ga=function(){this.g&&Vs(this)};function Vs(d){d.readyState=4,d.l=null,d.j=null,d.B=null,ci(d)}n.setRequestHeader=function(d,v){this.A.append(d,v)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var w=v.next();!w.done;)w=w.value,d.push(w[0]+": "+w[1]),w=v.next();return d.join(`\r
`)};function ci(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function sd(d){let v="";return pe(d,function(w,A){v+=A,v+=":",v+=w,v+=`\r
`}),v}function ka(d,v,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=sd(w),typeof d=="string"?w!=null&&te(w):dt(d,v,w))}function It(d){ut.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(It,ut);var od=/^https?$/i,Xf=["POST","PUT"];n=It.prototype,n.Fa=function(d){this.H=d},n.ea=function(d,v,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():U.g(),this.g.onreadystatechange=E(p(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Y){Ls(this,Y);return}if(d=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)w.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())w.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=l.FormData&&d instanceof l.FormData,!(Array.prototype.indexOf.call(Xf,v,void 0)>=0)||A||H||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,me]of w)this.g.setRequestHeader(Y,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Y){Ls(this,Y)}};function Ls(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Ms(d),ss(d)}function Ms(d){d.A||(d.A=!0,Pt(d,"complete"),Pt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Pt(this,"complete"),Pt(this,"abort"),ss(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ss(this,!0)),It.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?is(this):this.Xa())},n.Xa=function(){is(this)};function is(d){if(d.h&&typeof a<"u"){if(d.v&&ki(d)==4)setTimeout(d.Ca.bind(d),0);else if(Pt(d,"readystatechange"),ki(d)==4){d.h=!1;try{const Y=d.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var w;if(!(w=v)){var A;if(A=Y===0){let me=String(d.D).match(Ze)[1]||null;!me&&l.self&&l.self.location&&(me=l.self.location.protocol.slice(0,-1)),A=!od.test(me?me.toLowerCase():"")}w=A}if(w)Pt(d,"complete"),Pt(d,"success");else{d.o=6;try{var H=ki(d)>2?d.g.statusText:""}catch{H=""}d.l=H+" ["+d.ca()+"]",Ms(d)}}finally{ss(d)}}}}function ss(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const w=d.g;d.g=null,v||Pt(d,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function ki(d){return d.g?d.g.readyState:0}n.ca=function(){try{return ki(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),mn(v)}};function ad(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function nu(d){const v={};d=(d.g&&ki(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(b(d[A]))continue;var w=ue(d[A]);const H=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const Y=v[H]||[];v[H]=Y,Y.push(w)}ne(v,function(A){return A.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xi(d,v,w){return w&&w.internalChannelParams&&w.internalChannelParams[d]||v}function xa(d){this.za=0,this.i=[],this.j=new _t,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xi("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xi("baseRetryDelayMs",5e3,d),this.Za=xi("retryDelaySeedMs",1e4,d),this.Ta=xi("forwardChannelMaxRetries",2,d),this.va=xi("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new er(d&&d.concurrentRequestLimit),this.Ba=new Do,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xa.prototype,n.ka=8,n.I=1,n.connect=function(d,v,w,A){yt(0),this.W=d,this.H=v||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=iu(this,null,this.W),os(this)};function Da(d){if(Na(d),d.I==3){var v=d.V++,w=tn(d.J);if(dt(w,"SID",d.M),dt(w,"RID",v),dt(w,"TYPE","terminate"),Di(d,w),v=new Se(d,d.j,v),v.M=2,v.A=ns(tn(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(v.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=v.A,w=!0),w||(v.g=ud(v.j,null),v.g.ea(v.A)),v.F=Date.now(),Ct(v)}Vo(d)}function br(d){d.g&&(Oo(d),d.g.cancel(),d.g=null)}function Na(d){br(d),d.v&&(l.clearTimeout(d.v),d.v=null),Oa(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&l.clearTimeout(d.m),d.m=null)}function os(d){if(!Un(d.h)&&!d.m){d.m=!0;var v=d.Ea;se||R(),fe||(se(),fe=!0),I.add(v,d),d.D=0}}function ld(d,v){return ai(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Fe(p(d.Ea,d,v),La(d,d.D)),d.D++,!0)}n.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const H=new Se(this,this.j,d);let Y=this.o;if(this.U&&(Y?(Y=N(Y),he(Y,this.U)):Y=this.U),this.u!==null||this.R||(H.J=Y,Y=null),this.S)e:{for(var v=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,v>4096){v=w;break e}if(v===4096||w===this.i.length-1){v=w+1;break e}}v=1e3}else v=1e3;v=ru(this,H,v),w=tn(this.J),dt(w,"RID",d),dt(w,"CVER",22),this.G&&dt(w,"X-HTTP-Session-Id",this.G),Di(this,w),Y&&(this.R?v="headers="+te(sd(Y))+"&"+v:this.u&&ka(w,this.u,Y)),fr(this.h,H),this.Ra&&dt(w,"TYPE","init"),this.S?(dt(w,"$req",v),dt(w,"SID","null"),H.U=!0,Pe(H,w,null)):Pe(H,w,v),this.I=2}}else this.I==3&&(d?No(this,d):this.i.length==0||Un(this.h)||No(this))};function No(d,v){var w;v?w=v.l:w=d.V++;const A=tn(d.J);dt(A,"SID",d.M),dt(A,"RID",w),dt(A,"AID",d.K),Di(d,A),d.u&&d.o&&ka(A,d.u,d.o),w=new Se(d,d.j,w,d.D+1),d.u===null&&(w.J=d.o),v&&(d.i=v.G.concat(d.i)),v=ru(d,w,1e3),w.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),fr(d.h,w),Pe(w,A,v)}function Di(d,v){d.H&&pe(d.H,function(w,A){dt(v,A,w)}),d.l&&pe({},function(w,A){dt(v,A,w)})}function ru(d,v,w){w=Math.min(d.i.length,w);const A=d.l?p(d.l.Ka,d.l,d):null;e:{var H=d.i;let Ye=-1;for(;;){const Xt=["count="+w];Ye==-1?w>0?(Ye=H[0].g,Xt.push("ofs="+Ye)):Ye=0:Xt.push("ofs="+Ye);let vt=!0;for(let nn=0;nn<w;nn++){var Y=H[nn].g;const kr=H[nn].map;if(Y-=Ye,Y<0)Ye=Math.max(0,H[nn].g-100),vt=!1;else try{Y="req"+Y+"_"||"";try{var me=kr instanceof Map?kr:Object.entries(kr);for(const[as,Oi]of me){let Vi=Oi;c(Oi)&&(Vi=Jt(Oi)),Xt.push(Y+as+"="+encodeURIComponent(Vi))}}catch(as){throw Xt.push(Y+"type="+encodeURIComponent("_badmap")),as}}catch{A&&A(kr)}}if(vt){me=Xt.join("&");break e}}me=void 0}return d=d.i.splice(0,w),v.G=d,me}function Bn(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;se||R(),fe||(se(),fe=!0),I.add(v,d),d.A=0}}function Ni(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Fe(p(d.Da,d),La(d,d.A)),d.A++,!0)}n.Da=function(){if(this.v=null,Fs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Fe(p(this.Wa,this),d)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),br(this),Fs(this))};function Oo(d){d.B!=null&&(l.clearTimeout(d.B),d.B=null)}function Fs(d){d.g=new Se(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=tn(d.na);dt(v,"RID","rpc"),dt(v,"SID",d.M),dt(v,"AID",d.K),dt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&dt(v,"TO",d.ia),dt(v,"TYPE","xmlhttp"),Di(d,v),d.u&&d.o&&ka(v,d.u,d.o),d.O&&(d.g.H=d.O);var w=d.g;d=d.ba,w.M=1,w.A=ns(tn(v)),w.u=null,w.R=!0,$e(w,d)}n.Va=function(){this.C!=null&&(this.C=null,br(this),Ni(this),yt(19))};function Oa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function Va(d,v){var w=null;if(d.g==v){Oa(d),Oo(d),d.g=null;var A=2}else if(li(d.h,v))w=v.G,Wr(d.h,v),A=1;else return;if(d.I!=0){if(v.o)if(A==1){w=v.u?v.u.length:0,v=Date.now()-v.F;var H=d.D;A=dr(),Pt(A,new Ri(A,w)),os(d)}else Bn(d);else if(H=v.m,H==3||H==0&&v.X>0||!(A==1&&ld(d,v)||A==2&&Ni(d)))switch(w&&w.length>0&&(v=d.h,v.i=v.i.concat(w)),H){case 1:Cr(d,5);break;case 4:Cr(d,10);break;case 3:Cr(d,6);break;default:Cr(d,2)}}}function La(d,v){let w=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(w*=2),w*v}function Cr(d,v){if(d.j.info("Error code "+v),v==2){var w=p(d.bb,d),A=d.Ua;const H=!A;A=new Cn(A||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||gt(A,"https"),ns(A),H?bi(A.toString(),w):Ci(A.toString(),w)}else yt(2);d.I=0,d.l&&d.l.pa(v),Vo(d),Na(d)}n.bb=function(d){d?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Vo(d){if(d.I=0,d.ja=[],d.l){const v=_n(d.h);(v.length!=0||d.i.length!=0)&&(D(d.ja,v),D(d.ja,d.i),d.h.i.length=0,S(d.i),d.i.length=0),d.l.oa()}}function iu(d,v,w){var A=w instanceof Cn?tn(w):new Cn(w);if(A.g!="")v&&(A.g=v+"."+A.g),tr(A,A.u);else{var H=l.location;A=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;const Y=new Cn(null);A&&gt(Y,A),v&&(Y.g=v),H&&tr(Y,H),w&&(Y.h=w),A=Y}return w=d.G,v=d.wa,w&&v&&dt(A,w,v),dt(A,"VER",d.ka),Di(d,A),A}function ud(d,v,w){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new It(new rs({ab:w})):new It(d.ma),v.Fa(d.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cd(){}n=cd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ma(){}Ma.prototype.g=function(d,v){return new xn(d,v)};function xn(d,v){ut.call(this),this.g=new xa(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!b(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!b(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Us(this)}g(xn,ut),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Da(this.g)},xn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var w={};w.__data__=d,d=w}else this.v&&(w={},w.__data__=Jt(d),d=w);v.i.push(new ts(v.Ya++,d)),v.I==3&&os(v)},xn.prototype.N=function(){this.g.l=null,delete this.j,Da(this.g),delete this.g,xn.Z.N.call(this)};function dd(d){gn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const w in v){d=w;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}g(dd,gn);function hd(){si.call(this),this.status=1}g(hd,si);function Us(d){this.g=d}g(Us,cd),Us.prototype.ra=function(){Pt(this.g,"a")},Us.prototype.qa=function(d){Pt(this.g,new dd(d))},Us.prototype.pa=function(d){Pt(this.g,new hd)},Us.prototype.oa=function(){Pt(this.g,"b")},Ma.prototype.createWebChannel=Ma.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,zS=function(){return new Ma},BS=function(){return dr()},US=bn,pg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Zn.NO_ERROR=0,Zn.TIMEOUT=8,Zn.HTTP_ERROR=6,bh=Zn,k.COMPLETE="complete",FS=k,Xn.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",ut.prototype.listen=ut.prototype.J,qu=Xn,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,MS=It}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}On.UNAUTHENTICATED=new On(null),On.GOOGLE_CREDENTIALS=new On("google-credentials-uid"),On.FIRST_PARTY=new On("first-party-uid"),On.MOCK_USER=new On("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl="12.9.0";function hV(n){Hl=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha=new Ef("@firebase/firestore");function hl(){return ha.logLevel}function le(n,...e){if(ha.logLevel<=rt.DEBUG){const t=e.map(py);ha.debug(`Firestore (${Hl}): ${n}`,...t)}}function sr(n,...e){if(ha.logLevel<=rt.ERROR){const t=e.map(py);ha.error(`Firestore (${Hl}): ${n}`,...t)}}function wo(n,...e){if(ha.logLevel<=rt.WARN){const t=e.map(py);ha.warn(`Firestore (${Hl}): ${n}`,...t)}}function py(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,jS(n,r,t)}function jS(n,e,t){let r=`FIRESTORE (${Hl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw sr(r),new Error(r)}function xe(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||jS(e,i,r)}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends $r{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fV{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(On.UNAUTHENTICATED)))}shutdown(){}}class pV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class mV{constructor(e){this.t=e,this.currentUser=On.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){xe(this.o===void 0,42304);let r=this.i;const i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve();let a=new Ei;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Ei,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await i(this.currentUser)}))},c=h=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Ei)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string",31837,{l:r}),new $S(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string",2055,{h:e}),new On(e)}}class gV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=On.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class yV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new gV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(On.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class aT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _V{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){xe(this.o===void 0,3512);const r=a=>{a.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,le("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new aT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(xe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new aT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=vV(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Qe(n,e){return n<e?-1:n>e?1:0}function mg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return Fm(i)===Fm(a)?Qe(i,a):Fm(i)?1:-1}return Qe(n.length,e.length)}const wV=55296,EV=57343;function Fm(n){const e=n.charCodeAt(0);return e>=wV&&e<=EV}function Cl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function HS(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="__name__";class zi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Ae(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=zi.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Qe(e.length,t.length)}static compareSegments(e,t){const r=zi.isNumericId(e),i=zi.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?zi.extractNumericId(e).compare(zi.extractNumericId(t)):mg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mo.fromString(e.substring(4,e.length-2))}}class ft extends zi{construct(e,t,r){return new ft(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new ft(t)}static emptyPath(){return new ft([])}}const TV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends zi{construct(e,t,r){return new jt(e,t,r)}static isValidIdentifier(e){return TV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===lT}static keyField(){return new jt([lT])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new de(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new de(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else c==="`"?(l=!l,i++):c!=="."||l?(r+=c,i++):(a(),i++)}if(a(),l)throw new de(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ft.fromString(e))}static fromName(e){return new _e(ft.fromString(e).popFirst(5))}static empty(){return new _e(ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ft.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ft(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qS(n,e,t){if(!t)throw new de(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IV(n,e,t,r){if(e===!0&&r===!0)throw new de(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uT(n){if(!_e.isDocumentKey(n))throw new de(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cT(n){if(_e.isDocumentKey(n))throw new de(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function WS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function or(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pf(n);throw new de(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(n,e){const t={typeString:n};return e&&(t.value=e),t}function qc(n,e){if(!WS(n))throw new de(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new de(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=-62135596800,hT=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*hT);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<dT)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/hT}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(qc(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-dT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:an("string",wt._jsonSchemaVersion),seconds:an("number"),nanoseconds:an("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new wt(0,0))}static max(){return new Le(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=-1;class Yh{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function gg(n){return n.fields.find((e=>e.kind===2))}function Yo(n){return n.fields.filter((e=>e.kind!==2))}Yh.UNKNOWN_ID=-1;class Ch{constructor(e,t){this.fieldPath=e,this.kind=t}}class gc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gc(0,zr.min())}}function SV(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Le.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new zr(i,_e.empty(),e)}function KS(n){return new zr(n.readTime,n.key,mc)}class zr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new zr(Le.min(),_e.empty(),mc)}static max(){return new zr(Le.max(),_e.empty(),mc)}}function gy(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==GS)throw n;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new j(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof j?t:j.resolve(t)}catch(t){return j.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):j.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):j.reject(t)}static resolve(e){return new j(((t,r)=>{t(e)}))}static reject(e){return new j(((t,r)=>{r(e)}))}static waitFor(e){return new j(((t,r)=>{let i=0,a=0,l=!1;e.forEach((c=>{++i,c.next((()=>{++a,l&&a===i&&t()}),(h=>r(h)))})),l=!0,a===i&&t()}))}static or(e){let t=j.resolve(!1);for(const r of e)t=t.next((i=>i?j.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new j(((r,i)=>{const a=e.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const p=h;t(e[p]).next((y=>{l[p]=y,++c,c===a&&r(l)}),(y=>i(y)))}}))}static doWhile(e,t){return new j(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="SimpleDb";class bf{static open(e,t,r,i){try{return new bf(t,e.transaction(i,r))}catch(a){throw new ec(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ei,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ec(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=yy(r.target.error);this.S.reject(new ec(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(le(Vr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new AV(t)}}class go{static delete(e){return le(Vr,"Removing database:",e),Xo(L0().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ty())return!1;if(go.F())return!0;const e=hn(),t=go.M(e),r=0<t&&t<10,i=YS(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,go.M(hn())===12.2&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(le(Vr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=a=>{const l=a.target.result;t(l)},i.onblocked=()=>{r(new ec(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=a=>{const l=a.target.error;l.name==="VersionError"?r(new de(X.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?r(new de(X.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):r(new ec(e,l))},i.onupgradeneeded=a=>{le(Vr,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,i.transaction,a.oldVersion,this.version).next((()=>{le(Vr,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=bf.open(this.db,e,a?"readonly":"readwrite",r),h=i(c).next((p=>(c.C(),p))).catch((p=>(c.abort(p),j.reject(p)))).toPromise();return h.catch((()=>{})),await c.D,h}catch(c){const h=c,p=h.name!=="FirebaseError"&&l<3;if(le(Vr,"Transaction failed with error:",h.message,"Retrying:",p),this.close(),!p)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function YS(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class RV{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return Xo(this.U.delete())}}class ec extends de{constructor(e,t){super(X.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Po(n){return n.name==="IndexedDbTransactionError"}class AV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(le(Vr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(le(Vr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Xo(r)}add(e){return le(Vr,"ADD",this.store.name,e,e),Xo(this.store.add(e))}get(e){return Xo(this.store.get(e)).next((t=>(t===void 0&&(t=null),le(Vr,"GET",this.store.name,e,t),t)))}delete(e){return le(Vr,"DELETE",this.store.name,e),Xo(this.store.delete(e))}count(){return le(Vr,"COUNT",this.store.name),Xo(this.store.count())}H(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const a=i.getAll(r.range);return new j(((l,c)=>{a.onerror=h=>{c(h.target.error)},a.onsuccess=h=>{l(h.target.result)}}))}{const a=this.cursor(r),l=[];return this.J(a,((c,h)=>{l.push(h)})).next((()=>l))}}Z(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new j(((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}}))}X(e,t){le(Vr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.J(i,((a,l,c)=>c.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.J(i,t)}te(e){const t=this.cursor({});return new j(((r,i)=>{t.onerror=a=>{const l=yy(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():r()})):r()}}))}J(e,t){const r=[];return new j(((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void i();const h=new RV(c),p=t(c.primaryKey,c.value,h);if(p instanceof j){const y=p.catch((g=>(h.done(),j.reject(g))));r.push(y)}h.isDone?i():h.G===null?c.continue():c.continue(h.G)}})).next((()=>j.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Xo(n){return new j(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=yy(r.target.error);t(i)}}))}let fT=!1;function yy(n){const e=go.M(hn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new de("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return fT||(fT=!0,setTimeout((()=>{throw r}),0)),r}}return n}const tc="IndexBackfiller";class PV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){le(tc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();le(tc,`Documents written: ${t}`)}catch(t){Po(t)?le(tc,"Ignoring IndexedDB error during index backfill: ",t):await Aa(t)}await this.re(6e4)}))}}class bV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,a=!0;return j.doWhile((()=>a===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!r.has(l))return le(tc,`Processing collection: ${l}`),this.oe(e,l,i).next((c=>{i-=c,r.add(l)}));a=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(i,a))).next((c=>(le(tc,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,a)=>{const l=KS(a);gy(l,r)>0&&(r=l)})),new zr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ei.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa=-1;function Wc(n){return n==null}function yc(n){return n===0&&1/n==-1/0}function CV(n){return typeof n=="number"&&Number.isInteger(n)&&!yc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="";function Qn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=pT(e)),e=kV(n.get(t),e);return pT(e)}function kV(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case Jh:t+="";break;default:t+=a}}return t}function pT(n){return n+Jh+""}function ji(n){const e=n.length;if(xe(e>=2,64408,{path:n}),e===2)return xe(n.charAt(0)===Jh&&n.charAt(1)==="",56145,{path:n}),ft.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf(Jh,a);switch((l<0||l>t)&&Ae(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(a,l);let h;i.length===0?h=c:(i+=c,h=i,i=""),r.push(h);break;case"":i+=n.substring(a,l),i+="\0";break;case"":i+=n.substring(a,l+1);break;default:Ae(61167,{path:n})}a=l+2}return new ft(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo="remoteDocuments",Kc="owner",sl="owner",_c="mutationQueues",xV="userId",yi="mutations",mT="batchId",ia="userMutationsIndex",gT=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kh(n,e){return[n,Qn(e)]}function JS(n,e,t){return[n,Qn(e),t]}const DV={},kl="documentMutations",Xh="remoteDocumentsV14",NV=["prefixPath","collectionGroup","readTime","documentId"],xh="documentKeyIndex",OV=["prefixPath","collectionGroup","documentId"],XS="collectionGroupIndex",VV=["collectionGroup","readTime","prefixPath","documentId"],vc="remoteDocumentGlobal",yg="remoteDocumentGlobalKey",xl="targets",ZS="queryTargetsIndex",LV=["canonicalId","targetId"],Dl="targetDocuments",MV=["targetId","path"],_y="documentTargetsIndex",FV=["path","targetId"],Zh="targetGlobalKey",aa="targetGlobal",wc="collectionParents",UV=["collectionId","parent"],Nl="clientMetadata",BV="clientId",Cf="bundles",zV="bundleId",kf="namedQueries",jV="name",vy="indexConfiguration",$V="indexId",_g="collectionGroupIndex",HV="collectionGroup",nc="indexState",qV=["indexId","uid"],eR="sequenceNumberIndex",WV=["uid","sequenceNumber"],rc="indexEntries",KV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],tR="documentKeyIndex",GV=["indexId","uid","orderedDocumentKey"],xf="documentOverlays",QV=["userId","collectionPath","documentId"],vg="collectionPathOverlayIndex",YV=["userId","collectionPath","largestBatchId"],nR="collectionGroupOverlayIndex",JV=["userId","collectionGroup","largestBatchId"],wy="globals",XV="name",rR=[_c,yi,kl,Jo,xl,Kc,aa,Dl,Nl,vc,wc,Cf,kf],ZV=[...rR,xf],iR=[_c,yi,kl,Xh,xl,Kc,aa,Dl,Nl,vc,wc,Cf,kf,xf],sR=iR,Ey=[...sR,vy,nc,rc],eL=Ey,oR=[...Ey,wy],tL=oR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends QS{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function pn(n,e){const t=We(n);return go.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function aR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,t){this.comparator=e,this.root=t||Vn.EMPTY}insert(e,t){return new Mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dh(this.root,e,this.comparator,!1)}getReverseIterator(){return new dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dh(this.root,e,this.comparator,!0)}}class dh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??Vn.RED,this.left=i??Vn.EMPTY,this.right=a??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Vn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Vn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new Vn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _T(this.data.getIterator())}getIteratorFrom(e){return new _T(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Tt(this.comparator);return t.data=e,t}}class _T{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ol(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Tr([])}unionWith(e){let t=new Tt(jt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Tr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new lR("Invalid base64 string: "+a):a}})(e);return new un(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const nL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(xe(!!n,39018),typeof n=="string"){let e=0;const t=nL.exec(n);if(xe(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vt(n.seconds),nanos:Vt(n.nanos)}}function Vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ps(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR="server_timestamp",cR="__type__",dR="__previous_value__",hR="__local_write_time__";function Ty(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[cR])==null?void 0:r.stringValue)===uR}function Df(n){const e=n.mapValue.fields[dR];return Ty(e)?Df(e):e}function Ec(n){const e=As(n.mapValue.fields[hR].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,t,r,i,a,l,c,h,p,y,g){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=y,this.apiKey=g}}const ef="(default)";class fa{constructor(e,t){this.projectId=e,this.database=t||ef}static empty(){return new fa("","")}get isDefaultDatabase(){return this.database===ef}isEqual(e){return e instanceof fa&&e.projectId===this.projectId&&e.database===this.database}}function iL(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new de(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fa(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy="__type__",fR="__max__",fo={mapValue:{fields:{__type__:{stringValue:fR}}}},Sy="__vector__",Ol="value",Dh={nullValue:"NULL_VALUE"};function Eo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ty(n)?4:pR(n)?9007199254740991:Nf(n)?10:11:Ae(28295,{value:n})}function Yi(n,e){if(n===e)return!0;const t=Eo(n);if(t!==Eo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ec(n).isEqual(Ec(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=As(i.timestampValue),c=As(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return Ps(i.bytesValue).isEqual(Ps(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return Vt(i.geoPointValue.latitude)===Vt(a.geoPointValue.latitude)&&Vt(i.geoPointValue.longitude)===Vt(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Vt(i.integerValue)===Vt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Vt(i.doubleValue),c=Vt(a.doubleValue);return l===c?yc(l)===yc(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Cl(n.arrayValue.values||[],e.arrayValue.values||[],Yi);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},c=a.mapValue.fields||{};if(yT(l)!==yT(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!Yi(l[h],c[h])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Tc(n,e){return(n.values||[]).find((t=>Yi(t,e)))!==void 0}function To(n,e){if(n===e)return 0;const t=Eo(n),r=Eo(e);if(t!==r)return Qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=Vt(a.integerValue||a.doubleValue),h=Vt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return vT(n.timestampValue,e.timestampValue);case 4:return vT(Ec(n),Ec(e));case 5:return mg(n.stringValue,e.stringValue);case 6:return(function(a,l){const c=Ps(a),h=Ps(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),h=l.split("/");for(let p=0;p<c.length&&p<h.length;p++){const y=Qe(c[p],h[p]);if(y!==0)return y}return Qe(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Qe(Vt(a.latitude),Vt(l.latitude));return c!==0?c:Qe(Vt(a.longitude),Vt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return wT(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var E,S,D,M;const c=a.fields||{},h=l.fields||{},p=(E=c[Ol])==null?void 0:E.arrayValue,y=(S=h[Ol])==null?void 0:S.arrayValue,g=Qe(((D=p==null?void 0:p.values)==null?void 0:D.length)||0,((M=y==null?void 0:y.values)==null?void 0:M.length)||0);return g!==0?g:wT(p,y)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===fo.mapValue&&l===fo.mapValue)return 0;if(a===fo.mapValue)return 1;if(l===fo.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),p=l.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let g=0;g<h.length&&g<y.length;++g){const E=mg(h[g],y[g]);if(E!==0)return E;const S=To(c[h[g]],p[y[g]]);if(S!==0)return S}return Qe(h.length,y.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function vT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=As(n),r=As(e),i=Qe(t.seconds,r.seconds);return i!==0?i:Qe(t.nanos,r.nanos)}function wT(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=To(t[i],r[i]);if(a)return a}return Qe(t.length,r.length)}function Vl(n){return Eg(n)}function Eg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=As(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ps(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Eg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Eg(t.fields[l])}`;return i+"}"})(n.mapValue):Ae(61005,{value:n})}function Nh(n){switch(Eo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Df(n);return e?16+Nh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+Nh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return bo(r.fields,((a,l)=>{i+=a.length+Nh(l)})),i})(n.mapValue);default:throw Ae(13486,{value:n})}}function Ic(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Tg(n){return!!n&&"integerValue"in n}function Sc(n){return!!n&&"arrayValue"in n}function ET(n){return!!n&&"nullValue"in n}function TT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Oh(n){return!!n&&"mapValue"in n}function Nf(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Iy])==null?void 0:r.stringValue)===Sy}function ic(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return bo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=ic(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ic(n.arrayValue.values[t]);return e}return{...n}}function pR(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===fR}const mR={mapValue:{fields:{[Iy]:{stringValue:Sy},[Ol]:{arrayValue:{}}}}};function sL(n){return"nullValue"in n?Dh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ic(fa.empty(),_e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Nf(n)?mR:{mapValue:{}}:Ae(35942,{value:n})}function oL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ic(fa.empty(),_e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?mR:"mapValue"in n?Nf(n)?{mapValue:{}}:fo:Ae(61959,{value:n})}function IT(n,e){const t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ST(n,e){const t=To(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Oh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ic(t)}setAll(e){let t=jt.emptyPath(),r={},i=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=c.popLast()}l?r[c.lastSegment()]=ic(l):i.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Oh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Oh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bo(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Ln(ic(this.value))}}function gR(n){const e=[];return bo(n.fields,((t,r)=>{const i=new jt([t]);if(Oh(r)){const a=gR(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new Tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t,r,i,a,l,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new Lt(e,0,Le.min(),Le.min(),Le.min(),Ln.empty(),0)}static newFoundDocument(e,t,r,i){return new Lt(e,1,t,Le.min(),r,i,0)}static newNoDocument(e,t){return new Lt(e,2,t,Le.min(),Le.min(),Ln.empty(),0)}static newUnknownDocument(e,t){return new Lt(e,3,t,Le.min(),Le.min(),Ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t){this.position=e,this.inclusive=t}}function RT(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(l.referenceValue),t.key):r=To(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function AT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t="asc"){this.field=e,this.dir=t}}function aL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{}class it extends yR{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new lL(e,t,r):t==="array-contains"?new dL(e,r):t==="in"?new IR(e,r):t==="not-in"?new hL(e,r):t==="array-contains-any"?new fL(e,r):new it(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new uL(e,r):new cL(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(To(t,this.value)):t!==null&&Eo(this.value)===Eo(t)&&this.matchesComparison(To(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Et extends yR{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Et(e,t)}matches(e){return Ml(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ml(n){return n.op==="and"}function Ig(n){return n.op==="or"}function Ry(n){return _R(n)&&Ml(n)}function _R(n){for(const e of n.filters)if(e instanceof Et)return!1;return!0}function Sg(n){if(n instanceof it)return n.field.canonicalString()+n.op.toString()+Vl(n.value);if(Ry(n))return n.filters.map((e=>Sg(e))).join(",");{const e=n.filters.map((t=>Sg(t))).join(",");return`${n.op}(${e})`}}function vR(n,e){return n instanceof it?(function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&Yi(r.value,i.value)})(n,e):n instanceof Et?(function(r,i){return i instanceof Et&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,c)=>a&&vR(l,i.filters[c])),!0):!1})(n,e):void Ae(19439)}function wR(n,e){const t=n.filters.concat(e);return Et.create(t,n.op)}function ER(n){return n instanceof it?(function(t){return`${t.field.canonicalString()} ${t.op} ${Vl(t.value)}`})(n):n instanceof Et?(function(t){return t.op.toString()+" {"+t.getFilters().map(ER).join(" ,")+"}"})(n):"Filter"}class lL extends it{constructor(e,t,r){super(e,t,r),this.key=_e.fromName(r.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class uL extends it{constructor(e,t){super(e,"in",t),this.keys=TR("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class cL extends it{constructor(e,t){super(e,"not-in",t),this.keys=TR("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function TR(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>_e.fromName(r.referenceValue)))}class dL extends it{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sc(t)&&Tc(t.arrayValue,this.value)}}class IR extends it{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Tc(this.value.arrayValue,t)}}class hL extends it{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Tc(this.value.arrayValue,t)}}class fL extends it{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Tc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,t=null,r=[],i=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function Rg(n,e=null,t=[],r=[],i=null,a=null,l=null){return new pL(n,e,t,r,i,a,l)}function pa(n){const e=We(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Sg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Vl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Vl(r))).join(",")),e.Te=t}return e.Te}function Gc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!aL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!vR(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AT(n.startAt,e.startAt)&&AT(n.endAt,e.endAt)}function tf(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function nf(n,e){return n.filters.filter((t=>t instanceof it&&t.field.isEqual(e)))}function PT(n,e,t){let r=Dh,i=!0;for(const a of nf(n,e)){let l=Dh,c=!0;switch(a.op){case"<":case"<=":l=sL(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,c=!1;break;case"!=":case"not-in":l=Dh}IT({value:r,inclusive:i},{value:l,inclusive:c})<0&&(r=l,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];IT({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}function bT(n,e,t){let r=fo,i=!0;for(const a of nf(n,e)){let l=fo,c=!0;switch(a.op){case">=":case">":l=oL(a.value),c=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,c=!1;break;case"!=":case"not-in":l=fo}ST({value:r,inclusive:i},{value:l,inclusive:c})>0&&(r=l,i=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];ST({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t=null,r=[],i=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function mL(n,e,t,r,i,a,l,c){return new ql(n,e,t,r,i,a,l,c)}function Qc(n){return new ql(n)}function CT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gL(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function SR(n){return n.collectionGroup!==null}function sc(n){const e=We(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new Tt(jt.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(c=c.add(p.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Rc(a,r))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new Rc(jt.keyField(),r))}return e.Ie}function ti(n){const e=We(n);return e.Ee||(e.Ee=yL(e,sc(n))),e.Ee}function yL(n,e){if(n.limitType==="F")return Rg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new Rc(i.field,a)}));const t=n.endAt?new Ll(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ll(n.startAt.position,n.startAt.inclusive):null;return Rg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Ag(n,e){const t=n.filters.concat([e]);return new ql(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _L(n,e){const t=n.explicitOrderBy.concat([e]);return new ql(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function rf(n,e,t){return new ql(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Of(n,e){return Gc(ti(n),ti(e))&&n.limitType===e.limitType}function RR(n){return`${pa(ti(n))}|lt:${n.limitType}`}function fl(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>ER(i))).join(", ")}]`),Wc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Vl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Vl(i))).join(",")),`Target(${r})`})(ti(n))}; limitType=${n.limitType})`}function Yc(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of sc(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,c,h){const p=RT(l,c,h);return l.inclusive?p<=0:p<0})(r.startAt,sc(r),i)||r.endAt&&!(function(l,c,h){const p=RT(l,c,h);return l.inclusive?p>=0:p>0})(r.endAt,sc(r),i))})(n,e)}function vL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AR(n){return(e,t)=>{let r=!1;for(const i of sc(n)){const a=wL(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function wL(n,e,t){const r=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(a,l,c){const h=l.data.field(a),p=c.data.field(a);return h!==null&&p!==null?To(h,p):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bo(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return aR(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new Mt(_e.comparator);function Mr(){return EL}const PR=new Mt(_e.comparator);function Wu(...n){let e=PR;for(const t of n)e=e.insert(t.key,t);return e}function bR(n){let e=PR;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function $i(){return oc()}function CR(){return oc()}function oc(){return new xs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const TL=new Mt(_e.comparator),IL=new Tt(_e.comparator);function Xe(...n){let e=IL;for(const t of n)e=e.add(t);return e}const SL=new Tt(Qe);function RL(){return SL}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ay(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yc(e)?"-0":e}}function kR(n){return{integerValue:""+n}}function AL(n,e){return CV(e)?kR(e):Ay(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(){this._=void 0}}function PL(n,e,t){return n instanceof Ac?(function(i,a){const l={fields:{[cR]:{stringValue:uR},[hR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Ty(a)&&(a=Df(a)),a&&(l.fields[dR]=a),{mapValue:l}})(t,e):n instanceof Fl?DR(n,e):n instanceof Ul?NR(n,e):(function(i,a){const l=xR(i,a),c=kT(l)+kT(i.Ae);return Tg(l)&&Tg(i.Ae)?kR(c):Ay(i.serializer,c)})(n,e)}function bL(n,e,t){return n instanceof Fl?DR(n,e):n instanceof Ul?NR(n,e):t}function xR(n,e){return n instanceof Pc?(function(r){return Tg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Ac extends Vf{}class Fl extends Vf{constructor(e){super(),this.elements=e}}function DR(n,e){const t=OR(e);for(const r of n.elements)t.some((i=>Yi(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Ul extends Vf{constructor(e){super(),this.elements=e}}function NR(n,e){let t=OR(e);for(const r of n.elements)t=t.filter((i=>!Yi(i,r)));return{arrayValue:{values:t}}}class Pc extends Vf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kT(n){return Vt(n.integerValue||n.doubleValue)}function OR(n){return Sc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,t){this.field=e,this.transform=t}}function kL(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Fl&&i instanceof Fl||r instanceof Ul&&i instanceof Ul?Cl(r.elements,i.elements,Yi):r instanceof Pc&&i instanceof Pc?Yi(r.Ae,i.Ae):r instanceof Ac&&i instanceof Ac})(n.transform,e.transform)}class xL{constructor(e,t){this.version=e,this.transformResults=t}}class on{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Lf{}function VR(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Mf(n.key,on.none()):new Wl(n.key,n.data,on.none());{const t=n.data,r=Ln.empty();let i=new Tt(jt.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new Ds(n.key,r,new Tr(i.toArray()),on.none())}}function DL(n,e,t){n instanceof Wl?(function(i,a,l){const c=i.value.clone(),h=DT(i.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Ds?(function(i,a,l){if(!Vh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const c=DT(i.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(LR(i)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function ac(n,e,t,r){return n instanceof Wl?(function(a,l,c,h){if(!Vh(a.precondition,l))return c;const p=a.value.clone(),y=NT(a.fieldTransforms,h,l);return p.setAll(y),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Ds?(function(a,l,c,h){if(!Vh(a.precondition,l))return c;const p=NT(a.fieldTransforms,h,l),y=l.data;return y.setAll(LR(a)),y.setAll(p),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((g=>g.field)))})(n,e,t,r):(function(a,l,c){return Vh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function NL(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=xR(r.transform,i||null);a!=null&&(t===null&&(t=Ln.empty()),t.set(r.field,a))}return t||null}function xT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Cl(r,i,((a,l)=>kL(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wl extends Lf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ds extends Lf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function LR(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function DT(n,e,t){const r=new Map;xe(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,c=e.data.field(a.field);r.set(a.field,bL(l,c,t[i]))}return r}function NT(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,PL(a,l,e))}return r}class Mf extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Py extends Lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&DL(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=CR();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(i.key)?null:c;const h=VR(l,c);h!==null&&r.set(i.key,h),l.isValidDocument()||l.convertToNoDocument(Le.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Cl(this.mutations,e.mutations,((t,r)=>xT(t,r)))&&Cl(this.baseMutations,e.baseMutations,((t,r)=>xT(t,r)))}}class Cy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return TL})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Cy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn,at;function MR(n){switch(n){case X.OK:return Ae(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function FR(n){if(n===void 0)return sr("GRPC error has no .code"),X.UNKNOWN;switch(n){case sn.OK:return X.OK;case sn.CANCELLED:return X.CANCELLED;case sn.UNKNOWN:return X.UNKNOWN;case sn.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case sn.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case sn.INTERNAL:return X.INTERNAL;case sn.UNAVAILABLE:return X.UNAVAILABLE;case sn.UNAUTHENTICATED:return X.UNAUTHENTICATED;case sn.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case sn.NOT_FOUND:return X.NOT_FOUND;case sn.ALREADY_EXISTS:return X.ALREADY_EXISTS;case sn.PERMISSION_DENIED:return X.PERMISSION_DENIED;case sn.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case sn.ABORTED:return X.ABORTED;case sn.OUT_OF_RANGE:return X.OUT_OF_RANGE;case sn.UNIMPLEMENTED:return X.UNIMPLEMENTED;case sn.DATA_LOSS:return X.DATA_LOSS;default:return Ae(39323,{code:n})}}(at=sn||(sn={}))[at.OK=0]="OK",at[at.CANCELLED=1]="CANCELLED",at[at.UNKNOWN=2]="UNKNOWN",at[at.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",at[at.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",at[at.NOT_FOUND=5]="NOT_FOUND",at[at.ALREADY_EXISTS=6]="ALREADY_EXISTS",at[at.PERMISSION_DENIED=7]="PERMISSION_DENIED",at[at.UNAUTHENTICATED=16]="UNAUTHENTICATED",at[at.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",at[at.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",at[at.ABORTED=10]="ABORTED",at[at.OUT_OF_RANGE=11]="OUT_OF_RANGE",at[at.UNIMPLEMENTED=12]="UNIMPLEMENTED",at[at.INTERNAL=13]="INTERNAL",at[at.UNAVAILABLE=14]="UNAVAILABLE",at[at.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=new mo([4294967295,4294967295],0);function OT(n){const e=VL().encode(n),t=new LS;return t.update(e),new Uint8Array(t.digest())}function VT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new mo([t,r],0),new mo([i,a],0)]}class xy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ku(`Invalid padding: ${t}`);if(r<0)throw new Ku(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ku(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ku(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=mo.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(mo.fromNumber(r)));return i.compare(LL)===1&&(i=new mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=OT(e),[r,i]=VT(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new xy(a,i,t);return r.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=OT(e),[r,i]=VT(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.be(l)}}be(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ku extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ff(Le.min(),i,new Mt(Qe),Mr(),Xe())}}class Jc{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jc(r,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=i}}class UR{constructor(e,t){this.targetId=e,this.Ce=t}}class BR{constructor(e,t,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class LT{constructor(){this.ve=0,this.Fe=MT(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),r=Xe();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Ae(38017,{changeType:a})}})),new Jc(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=MT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,xe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ML{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mr(),this.He=hh(),this.Je=hh(),this.Ze=new Mt(Qe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(tf(a))if(r===0){const l=new _e(a.path);this.et(t,l,Lt.newNoDocument(l,Le.min()))}else xe(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,c;try{l=Ps(r).toUint8Array()}catch(h){if(h instanceof lR)return wo("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new xy(l,i,a)}catch(h){return wo(h instanceof Ku?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const c=this.ot(l);if(c){if(a.current&&tf(c.target)){const h=new _e(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,Lt.newNoDocument(h,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let r=Xe();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new Ff(e,t,this.Ze,this.je,r);return this.je=Mr(),this.He=hh(),this.Je=hh(),this.Ze=new Mt(Qe),i}Ye(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.qe(t,1):i.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new LT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Tt(Qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Tt(Qe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||le("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new LT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hh(){return new Mt(_e.comparator)}function MT(){return new Mt(_e.comparator)}const FL={asc:"ASCENDING",desc:"DESCENDING"},UL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BL={and:"AND",or:"OR"};class zL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Pg(n,e){return n.useProto3Json||Wc(e)?e:{value:e}}function Bl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zR(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jL(n,e){return Bl(n,e.toTimestamp())}function Sn(n){return xe(!!n,49232),Le.fromTimestamp((function(t){const r=As(t);return new wt(r.seconds,r.nanos)})(n))}function Dy(n,e){return bg(n,e).canonicalString()}function bg(n,e){const t=(function(i){return new ft(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jR(n){const e=ft.fromString(n);return xe(JR(e),10190,{key:e.toString()}),e}function bc(n,e){return Dy(n.databaseId,e.path)}function Is(n,e){const t=jR(e);if(t.get(1)!==n.databaseId.projectId)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(qR(t))}function $R(n,e){return Dy(n.databaseId,e)}function HR(n){const e=jR(n);return e.length===4?ft.emptyPath():qR(e)}function Cg(n){return new ft(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qR(n){return xe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function FT(n,e,t){return{name:bc(n,e),fields:t.value.mapValue.fields}}function $L(n,e,t){const r=Is(n,e.name),i=Sn(e.updateTime),a=e.createTime?Sn(e.createTime):Le.min(),l=new Ln({mapValue:{fields:e.fields}}),c=Lt.newFoundDocument(r,i,a,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function HL(n,e){return"found"in e?(function(r,i){xe(!!i.found,43571),i.found.name,i.found.updateTime;const a=Is(r,i.found.name),l=Sn(i.found.updateTime),c=i.found.createTime?Sn(i.found.createTime):Le.min(),h=new Ln({mapValue:{fields:i.found.fields}});return Lt.newFoundDocument(a,l,c,h)})(n,e):"missing"in e?(function(r,i){xe(!!i.missing,3894),xe(!!i.readTime,22933);const a=Is(r,i.missing),l=Sn(i.readTime);return Lt.newNoDocument(a,l)})(n,e):Ae(7234,{result:e})}function qL(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(p,y){return p.useProto3Json?(xe(y===void 0||typeof y=="string",58123),un.fromBase64String(y||"")):(xe(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),un.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(p){const y=p.code===void 0?X.UNKNOWN:FR(p.code);return new de(y,p.message||"")})(l);t=new BR(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Is(n,r.document.name),a=Sn(r.document.updateTime),l=r.document.createTime?Sn(r.document.createTime):Le.min(),c=new Ln({mapValue:{fields:r.document.fields}}),h=Lt.newFoundDocument(i,a,l,c),p=r.targetIds||[],y=r.removedTargetIds||[];t=new Lh(p,y,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Is(n,r.document),a=r.readTime?Sn(r.readTime):Le.min(),l=Lt.newNoDocument(i,a),c=r.removedTargetIds||[];t=new Lh([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Is(n,r.document),a=r.removedTargetIds||[];t=new Lh([],a,i,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new OL(i,a),c=r.targetId;t=new UR(c,l)}}return t}function Cc(n,e){let t;if(e instanceof Wl)t={update:FT(n,e.key,e.value)};else if(e instanceof Mf)t={delete:bc(n,e.key)};else if(e instanceof Ds)t={update:FT(n,e.key,e.data),updateMask:JL(e.fieldMask)};else{if(!(e instanceof Py))return Ae(16599,{dt:e.type});t={verify:bc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const c=l.transform;if(c instanceof Ac)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Fl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ul)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Pc)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw Ae(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:jL(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae(27497)})(n,e.precondition)),t}function kg(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?on.updateTime(Sn(a.updateTime)):a.exists!==void 0?on.exists(a.exists):on.none()})(e.currentDocument):on.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(l,c){let h=null;if("setToServerValue"in c)xe(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),h=new Ac;else if("appendMissingElements"in c){const y=c.appendMissingElements.values||[];h=new Fl(y)}else if("removeAllFromArray"in c){const y=c.removeAllFromArray.values||[];h=new Ul(y)}else"increment"in c?h=new Pc(l,c.increment):Ae(16584,{proto:c});const p=jt.fromServerFormat(c.fieldPath);return new CL(p,h)})(n,i))):[];if(e.update){e.update.name;const i=Is(n,e.update.name),a=new Ln({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const p=h.fieldPaths||[];return new Tr(p.map((y=>jt.fromServerFormat(y))))})(e.updateMask);return new Ds(i,a,l,t,r)}return new Wl(i,a,t,r)}if(e.delete){const i=Is(n,e.delete);return new Mf(i,t)}if(e.verify){const i=Is(n,e.verify);return new Py(i,t)}return Ae(1463,{proto:e})}function WL(n,e){return n&&n.length>0?(xe(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?Sn(i.updateTime):Sn(a);return l.isEqual(Le.min())&&(l=Sn(a)),new xL(l,i.transformResults||[])})(t,e)))):[]}function WR(n,e){return{documents:[$R(n,e.path)]}}function KR(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$R(n,i);const a=(function(p){if(p.length!==0)return YR(Et.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(p){if(p.length!==0)return p.map((y=>(function(E){return{field:pl(E.field),direction:GL(E.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=Pg(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:i}}function GR(n){let e=HR(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){xe(r===1,65062);const y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(g){const E=QR(g);return E instanceof Et&&Ry(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(g){return g.map((E=>(function(D){return new Rc(ml(D.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(t.orderBy));let c=null;t.limit&&(c=(function(g){let E;return E=typeof g=="object"?g.value:g,Wc(E)?null:E})(t.limit));let h=null;t.startAt&&(h=(function(g){const E=!!g.before,S=g.values||[];return new Ll(S,E)})(t.startAt));let p=null;return t.endAt&&(p=(function(g){const E=!g.before,S=g.values||[];return new Ll(S,E)})(t.endAt)),mL(e,i,l,a,c,"F",h,p)}function KL(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function QR(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ml(t.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ml(t.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ml(t.unaryFilter.field);return it.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ml(t.unaryFilter.field);return it.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return it.create(ml(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Et.create(t.compositeFilter.filters.map((r=>QR(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function GL(n){return FL[n]}function QL(n){return UL[n]}function YL(n){return BL[n]}function pl(n){return{fieldPath:n.canonicalString()}}function ml(n){return jt.fromServerFormat(n.fieldPath)}function YR(n){return n instanceof it?(function(t){if(t.op==="=="){if(TT(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NAN"}};if(ET(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TT(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NAN"}};if(ET(t.value))return{unaryFilter:{field:pl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pl(t.field),op:QL(t.op),value:t.value}}})(n):n instanceof Et?(function(t){const r=t.getFilters().map((i=>YR(i)));return r.length===1?r[0]:{compositeFilter:{op:YL(t.op),filters:r}}})(n):Ae(54877,{filter:n})}function JL(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function JR(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function XR(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,t,r,i,a=Le.min(),l=Le.min(),c=un.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.yt=e}}function XL(n,e){let t;if(e.document)t=$L(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=_e.fromSegments(e.noDocument.path),i=ga(e.noDocument.readTime);t=Lt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ae(56709);{const r=_e.fromSegments(e.unknownDocument.path),i=ga(e.unknownDocument.version);t=Lt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const a=new wt(i[0],i[1]);return Le.fromTimestamp(a)})(e.readTime)),t}function UT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(a,l){return{name:bc(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Bl(a,l.version.toTimestamp()),createTime:Bl(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ma(e.version)};else{if(!e.isUnknownDocument())return Ae(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:ma(e.version)}}return r}function sf(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ma(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ga(n){const e=new wt(n.seconds,n.nanoseconds);return Le.fromTimestamp(e)}function Zo(n,e){const t=(e.baseMutations||[]).map((a=>kg(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const r=e.mutations.map((a=>kg(n.yt,a))),i=wt.fromMillis(e.localWriteTimeMs);return new by(e.batchId,i,t,r)}function Gu(n){const e=ga(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ga(n.lastLimboFreeSnapshotVersion):Le.min();let r;return r=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return xe(l===1,1966,{count:l}),ti(Qc(HR(a.documents[0])))})(n.query):(function(a){return ti(GR(a))})(n.query),new Es(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,un.fromBase64String(n.resumeToken))}function eA(n,e){const t=ma(e.snapshotVersion),r=ma(e.lastLimboFreeSnapshotVersion);let i;i=tf(e.target)?WR(n.yt,e.target):KR(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pa(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function tA(n){const e=GR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?rf(e,e.limit,"L"):e}function Um(n,e){return new ky(e.largestBatchId,kg(n.yt,e.overlayMutation))}function BT(n,e){const t=e.path.lastSegment();return[n,Qn(e.path.popLast()),t]}function zT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ma(r.readTime),documentKey:Qn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZL{getBundleMetadata(e,t){return jT(e).get(t).next((r=>{if(r)return(function(a){return{id:a.bundleId,createTime:ga(a.createTime),version:a.version}})(r)}))}saveBundleMetadata(e,t){return jT(e).put((function(i){return{bundleId:i.id,createTime:ma(Sn(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return $T(e).get(t).next((r=>{if(r)return(function(a){return{name:a.name,query:tA(a.bundledQuery),readTime:ga(a.readTime)}})(r)}))}saveNamedQuery(e,t){return $T(e).put((function(i){return{name:i.name,readTime:ma(Sn(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function jT(n){return pn(n,Cf)}function $T(n){return pn(n,kf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Uf(e,r)}getOverlay(e,t){return Ou(e).get(BT(this.userId,t)).next((r=>r?Um(this.serializer,r):null))}getOverlays(e,t){const r=$i();return j.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((a,l)=>{const c=new ky(t,l);i.push(this.bt(e,c))})),j.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((l=>i.add(Qn(l.getCollectionPath()))));const a=[];return i.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Ou(e).X(vg,c))})),j.waitFor(a)}getOverlaysForCollection(e,t,r){const i=$i(),a=Qn(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ou(e).H(vg,l).next((c=>{for(const h of c){const p=Um(this.serializer,h);i.set(p.getKey(),p)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const a=$i();let l;const c=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ou(e).ee({index:nR,range:c},((h,p,y)=>{const g=Um(this.serializer,p);a.size()<i||g.largestBatchId===l?(a.set(g.getKey(),g),l=g.largestBatchId):y.done()})).next((()=>a))}bt(e,t){return Ou(e).put((function(i,a,l){const[c,h,p]=BT(a,l.mutation.key);return{userId:a,collectionPath:h,documentId:p,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:Cc(i.yt,l.mutation)}})(this.serializer,this.userId,t))}}function Ou(n){return pn(n,xf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{St(e){return pn(e,wy)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?un.fromUint8Array(r):un.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Vt(e.integerValue));else if("doubleValue"in e){const r=Vt(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),yc(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=As(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ps(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?pR(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Nf(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):Ae(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var l,c;const r=e.fields||{};this.Ft(t,53);const i=Ol,a=((c=(l=r[i].arrayValue)==null?void 0:l.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Vt(a)),this.Ot(i,t),this.Ct(r[i],t)}qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),_e.fromName(e).path.forEach((r=>{this.Ft(t,60),this.$t(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ea.Wt=new ea;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=255;function t2(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function HT(n){const e=64-(function(r){let i=0;for(let a=0;a<8;++a){const l=t2(255&r[a]);if(i+=l,l!==8)break}return i})(n);return Math.ceil(e/8)}class n2{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Xt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ht(r);else if(r<2048)this.Ht(960|r>>>6),this.Ht(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r);else{const i=t.codePointAt(0);this.Ht(240|i>>>18),this.Ht(128|63&i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i)}}this.Jt()}Yt(e){const t=this.en(e),r=HT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=HT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(al),this.sn(255)}_n(){this.an(al),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===al?(this.sn(al),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===al?(this.an(al),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class r2{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class i2{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Vu{constructor(){this.cn=new n2,this.ascending=new r2(this.cn),this.descending=new i2(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(e,t,r,i){this.hn=e,this.Pn=t,this.Tn=r,this.In=i}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new ta(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:Mh(this.Tn),directionalValue:Mh(this.In),orderedDocumentKey:Mh(t),documentKey:r.path.toArray()}}An(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function to(n,e){let t=n.hn-e.hn;return t!==0?t:(t=qT(n.Tn,e.Tn),t!==0?t:(t=qT(n.In,e.In),t!==0?t:_e.comparator(n.Pn,e.Pn)))}function qT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function Mh(n){return H0()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function WT(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class KT{constructor(e){this.Vn=new Tt(((t,r)=>jt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.mn.push(r)}}get fn(){return this.Vn.size>1}gn(e){if(xe(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=gg(e);if(t!==void 0&&!this.pn(t))return!1;const r=Yo(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.pn(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(this.Vn.size>0){const c=this.Vn.getIterator().getNext();if(!i.has(c.field.canonicalString())){const h=r[a];if(!this.yn(c,h)||!this.wn(this.dn[l++],h))return!1}++a}for(;a<r.length;++a){const c=r[a];if(l>=this.dn.length||!this.wn(this.dn[l++],c))return!1}return!0}bn(){if(this.fn)return null;let e=new Tt(jt.comparator);const t=[];for(const r of this.mn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Ch(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Ch(r.field,0))}for(const r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Ch(r.field,r.dir==="asc"?0:1)));return new Yh(Yh.UNKNOWN_ID,this.collectionId,t,gc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(n){var t,r;if(xe(n instanceof it||n instanceof Et,20012),n instanceof it){if(n instanceof IR){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((a=>it.create(n.field,"==",a))))||[];return Et.create(i,"or")}return n}const e=n.filters.map((i=>nA(i)));return Et.create(e,n.op)}function s2(n){if(n.getFilters().length===0)return[];const e=Ng(nA(n));return xe(rA(e),7391),xg(e)||Dg(e)?[e]:e.getFilters()}function xg(n){return n instanceof it}function Dg(n){return n instanceof Et&&Ry(n)}function rA(n){return xg(n)||Dg(n)||(function(t){if(t instanceof Et&&Ig(t)){for(const r of t.getFilters())if(!xg(r)&&!Dg(r))return!1;return!0}return!1})(n)}function Ng(n){if(xe(n instanceof it||n instanceof Et,34018),n instanceof it)return n;if(n.filters.length===1)return Ng(n.filters[0]);const e=n.filters.map((r=>Ng(r)));let t=Et.create(e,n.op);return t=of(t),rA(t)?t:(xe(t instanceof Et,64498),xe(Ml(t),40251),xe(t.filters.length>1,57927),t.filters.reduce(((r,i)=>Ny(r,i))))}function Ny(n,e){let t;return xe(n instanceof it||n instanceof Et,38388),xe(e instanceof it||e instanceof Et,25473),t=n instanceof it?e instanceof it?(function(i,a){return Et.create([i,a],"and")})(n,e):GT(n,e):e instanceof it?GT(e,n):(function(i,a){if(xe(i.filters.length>0&&a.filters.length>0,48005),Ml(i)&&Ml(a))return wR(i,a.getFilters());const l=Ig(i)?i:a,c=Ig(i)?a:i,h=l.filters.map((p=>Ny(p,c)));return Et.create(h,"or")})(n,e),of(t)}function GT(n,e){if(Ml(e))return wR(e,n.getFilters());{const t=e.filters.map((r=>Ny(n,r)));return Et.create(t,"or")}}function of(n){if(xe(n instanceof it||n instanceof Et,11850),n instanceof it)return n;const e=n.getFilters();if(e.length===1)return of(e[0]);if(_R(n))return n;const t=e.map((i=>of(i))),r=[];return t.forEach((i=>{i instanceof it?r.push(i):i instanceof Et&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Et.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(){this.Sn=new Oy}addToCollectionParentIndex(e,t){return this.Sn.add(t),j.resolve()}getCollectionParents(e,t){return j.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return j.resolve()}deleteFieldIndex(e,t){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,t){return j.resolve()}getDocumentsMatchingTarget(e,t){return j.resolve(null)}getIndexType(e,t){return j.resolve(0)}getFieldIndexes(e,t){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,t){return j.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,t){return j.resolve(zr.min())}updateCollectionGroup(e,t,r){return j.resolve()}updateIndexEntries(e,t){return j.resolve()}}class Oy{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Tt(ft.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="IndexedDbIndexManager",fh=new Uint8Array(0);class a2{constructor(e,t){this.databaseId=t,this.Dn=new Oy,this.Cn=new xs((r=>pa(r)),((r,i)=>Gc(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const a={collectionId:r,parent:Qn(i)};return YT(e).put(a)}return j.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[HS(t),""],!1,!0);return YT(e).H(i).next((a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ji(l.parent))}return r}))}addFieldIndex(e,t){const r=Lu(e),i=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete i.indexId;const a=r.add(i);if(t.indexState){const l=ul(e);return a.next((c=>{l.put(zT(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const r=Lu(e),i=ul(e),a=ll(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Lu(e),r=ll(e),i=ul(e);return t.X().next((()=>r.X())).next((()=>i.X()))}createTargetIndexes(e,t){return j.forEach(this.vn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const a=new KT(r).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const r=ll(e);let i=!0;const a=new Map;return j.forEach(this.vn(t),(l=>this.Fn(e,l).next((c=>{i&&(i=!!c),a.set(l,c)})))).next((()=>{if(i){let l=Xe();const c=[];return j.forEach(a,((h,p)=>{le(QT,`Using index ${(function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map((ae=>`${ae.fieldPath}:${ae.kind}`)).join(",")}`})(h)} to execute ${pa(t)}`);const y=(function(Z,ae){const se=gg(ae);if(se===void 0)return null;for(const fe of nf(Z,se.fieldPath))switch(fe.op){case"array-contains-any":return fe.value.arrayValue.values||[];case"array-contains":return[fe.value]}return null})(p,h),g=(function(Z,ae){const se=new Map;for(const fe of Yo(ae))for(const I of nf(Z,fe.fieldPath))switch(I.op){case"==":case"in":se.set(fe.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return se.set(fe.fieldPath.canonicalString(),I.value),Array.from(se.values())}return null})(p,h),E=(function(Z,ae){const se=[];let fe=!0;for(const I of Yo(ae)){const R=I.kind===0?PT(Z,I.fieldPath,Z.startAt):bT(Z,I.fieldPath,Z.startAt);se.push(R.value),fe&&(fe=R.inclusive)}return new Ll(se,fe)})(p,h),S=(function(Z,ae){const se=[];let fe=!0;for(const I of Yo(ae)){const R=I.kind===0?bT(Z,I.fieldPath,Z.endAt):PT(Z,I.fieldPath,Z.endAt);se.push(R.value),fe&&(fe=R.inclusive)}return new Ll(se,fe)})(p,h),D=this.Mn(h,p,E),M=this.Mn(h,p,S),O=this.xn(h,p,g),J=this.On(h.indexId,y,D,E.inclusive,M,S.inclusive,O);return j.forEach(J,(G=>r.Z(G,t.limit).next((Z=>{Z.forEach((ae=>{const se=_e.fromSegments(ae.documentKey);l.has(se)||(l=l.add(se),c.push(se))}))}))))})).next((()=>c))}return j.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=s2(Et.create(e.filters,"and")).map((r=>Rg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,r,i,a,l,c){const h=(t!=null?t.length:1)*Math.max(r.length,a.length),p=h/(t!=null?t.length:1),y=[];for(let g=0;g<h;++g){const E=t?this.Nn(t[g/p]):fh,S=this.Bn(e,E,r[g%p],i),D=this.Ln(e,E,a[g%p],l),M=c.map((O=>this.Bn(e,E,O,!0)));y.push(...this.createRange(S,D,M))}return y}Bn(e,t,r,i){const a=new ta(e,_e.empty(),t,r);return i?a:a.En()}Ln(e,t,r,i){const a=new ta(e,_e.empty(),t,r);return i?a.En():a}Fn(e,t){const r=new KT(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((a=>{let l=null;for(const c of a)r.gn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let r=2;const i=this.vn(t);return j.forEach(i,(a=>this.Fn(e,a).next((l=>{l?r!==0&&l.fields.length<(function(h){let p=new Tt(jt.comparator),y=!1;for(const g of h.filters)for(const E of g.getFlattenedFilters())E.field.isKeyField()||(E.op==="array-contains"||E.op==="array-contains-any"?y=!0:p=p.add(E.field));for(const g of h.orderBy)g.field.isKeyField()||(p=p.add(g.field));return p.size+(y?1:0)})(a)&&(r=1):r=0})))).next((()=>(function(l){return l.limit!==null})(t)&&i.length>1&&r===2?1:r))}kn(e,t){const r=new Vu;for(const i of Yo(e)){const a=t.data.field(i.fieldPath);if(a==null)return null;const l=r.ln(i.kind);ea.Wt.Dt(a,l)}return r.un()}Nn(e){const t=new Vu;return ea.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const r=new Vu;return ea.Wt.Dt(Ic(this.databaseId,t),r.ln((function(a){const l=Yo(a);return l.length===0?0:l[l.length-1].kind})(e))),r.un()}xn(e,t,r){if(r===null)return[];let i=[];i.push(new Vu);let a=0;for(const l of Yo(e)){const c=r[a++];for(const h of i)if(this.qn(t,l.fieldPath)&&Sc(c))i=this.Un(i,l,c);else{const p=h.ln(l.kind);ea.Wt.Dt(c,p)}}return this.$n(i)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const c of i){const h=new Vu;h.seed(c.un()),ea.Wt.Dt(l,h.ln(t.kind)),a.push(h)}return a}qn(e,t){return!!e.filters.find((r=>r instanceof it&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Lu(e),i=ul(e);return(t?r.H(_g,IDBKeyRange.bound(t,t)):r.H()).next((a=>{const l=[];return j.forEach(a,(c=>i.get([c.indexId,this.uid]).next((h=>{l.push((function(y,g){const E=g?new gc(g.sequenceNumber,new zr(ga(g.readTime),new _e(ji(g.documentKey)),g.largestBatchId)):gc.empty(),S=y.fields.map((([D,M])=>new Ch(jt.fromServerFormat(D),M)));return new Yh(y.indexId,y.collectionGroup,S,E)})(c,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return a!==0?a:Qe(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=Lu(e),a=ul(e);return this.Wn(e).next((l=>i.H(_g,IDBKeyRange.bound(t,t)).next((c=>j.forEach(c,(h=>a.put(zT(h.indexId,this.uid,l,r))))))))}updateIndexEntries(e,t){const r=new Map;return j.forEach(t,((i,a)=>{const l=r.get(i.collectionGroup);return(l?j.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next((c=>(r.set(i.collectionGroup,c),j.forEach(c,(h=>this.Qn(e,i,h).next((p=>{const y=this.Gn(a,h);return p.isEqual(y)?j.resolve():this.zn(e,a,h,p,y)})))))))}))}jn(e,t,r,i){return ll(e).put(i.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,i){return ll(e).delete(i.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){const i=ll(e);let a=new Tt(to);return i.ee({index:tR,range:IDBKeyRange.only([r.indexId,this.uid,Mh(this.Kn(r,t))])},((l,c)=>{a=a.add(new ta(r.indexId,t,WT(c.arrayValue),WT(c.directionalValue)))})).next((()=>a))}Gn(e,t){let r=new Tt(to);const i=this.kn(t,e);if(i==null)return r;const a=gg(t);if(a!=null){const l=e.data.field(a.fieldPath);if(Sc(l))for(const c of l.arrayValue.values||[])r=r.add(new ta(t.indexId,e.key,this.Nn(c),i))}else r=r.add(new ta(t.indexId,e.key,fh,i));return r}zn(e,t,r,i,a){le(QT,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,p,y,g,E){const S=h.getIterator(),D=p.getIterator();let M=ol(S),O=ol(D);for(;M||O;){let J=!1,G=!1;if(M&&O){const Z=y(M,O);Z<0?G=!0:Z>0&&(J=!0)}else M!=null?G=!0:J=!0;J?(g(O),O=ol(D)):G?(E(M),M=ol(S)):(M=ol(S),O=ol(D))}})(i,a,to,(c=>{l.push(this.jn(e,t,r,c))}),(c=>{l.push(this.Hn(e,t,r,c))})),j.waitFor(l)}Wn(e){let t=1;return ul(e).ee({index:eR,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,a)=>{a.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((l,c)=>to(l,c))).filter(((l,c,h)=>!c||to(l,h[c-1])!==0));const i=[];i.push(e);for(const l of r){const c=to(l,e),h=to(l,t);if(c===0)i[0]=e.En();else if(c>0&&h<0)i.push(l),i.push(l.En());else if(h>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.Jn(i[l],i[l+1]))return[];const c=i[l].An(this.uid,fh,_e.empty()),h=i[l+1].An(this.uid,fh,_e.empty());a.push(IDBKeyRange.bound(c,h))}return a}Jn(e,t){return to(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(JT)}getMinOffset(e,t){return j.mapArray(this.vn(t),(r=>this.Fn(e,r).next((i=>i||Ae(44426))))).next(JT)}}function YT(n){return pn(n,wc)}function ll(n){return pn(n,rc)}function Lu(n){return pn(n,vy)}function ul(n){return pn(n,nc)}function JT(n){xe(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;gy(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new zr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iA=41943040;class Kn{static withCacheSize(e){return new Kn(e,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n,e,t){const r=n.store(yi),i=n.store(kl),a=[],l=IDBKeyRange.only(t.batchId);let c=0;const h=r.ee({range:l},((y,g,E)=>(c++,E.delete())));a.push(h.next((()=>{xe(c===1,47070,{batchId:t.batchId})})));const p=[];for(const y of t.mutations){const g=JS(e,y.key.path,t.batchId);a.push(i.delete(g)),p.push(y.key)}return j.waitFor(a).next((()=>p))}function af(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Ae(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(iA,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);class Bf{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Zn={}}static wt(e,t,r,i){xe(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Bf(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return no(e).ee({index:ia,range:r},((i,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const a=gl(e),l=no(e);return l.add({}).next((c=>{xe(typeof c=="number",49019);const h=new by(c,t,r,i),p=(function(S,D,M){const O=M.baseMutations.map((G=>Cc(S.yt,G))),J=M.mutations.map((G=>Cc(S.yt,G)));return{userId:D,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:O,mutations:J}})(this.serializer,this.userId,h),y=[];let g=new Tt(((E,S)=>Qe(E.canonicalString(),S.canonicalString())));for(const E of i){const S=JS(this.userId,E.key.path,c);g=g.add(E.key.path.popLast()),y.push(l.put(p)),y.push(a.put(S,DV))}return g.forEach((E=>{y.push(this.indexManager.addToCollectionParentIndex(e,E))})),e.addOnCommittedListener((()=>{this.Zn[c]=h.keys()})),j.waitFor(y).next((()=>h))}))}lookupMutationBatch(e,t){return no(e).get(t).next((r=>r?(xe(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Zo(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?j.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Zn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return no(e).ee({index:ia,range:i},((l,c,h)=>{c.userId===this.userId&&(xe(c.batchId>=r,47524,{Yn:r}),a=Zo(this.serializer,c)),h.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=oa;return no(e).ee({index:ia,range:t,reverse:!0},((i,a,l)=>{r=a.batchId,l.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,oa],[this.userId,Number.POSITIVE_INFINITY]);return no(e).H(ia,t).next((r=>r.map((i=>Zo(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return gl(e).ee({range:i},((l,c,h)=>{const[p,y,g]=l,E=ji(y);if(p===this.userId&&t.path.isEqual(E))return no(e).get(g).next((S=>{if(!S)throw Ae(61480,{er:l,batchId:g});xe(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:g}),a.push(Zo(this.serializer,S))}));h.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(Qe);const i=[];return t.forEach((a=>{const l=kh(this.userId,a.path),c=IDBKeyRange.lowerBound(l),h=gl(e).ee({range:c},((p,y,g)=>{const[E,S,D]=p,M=ji(S);E===this.userId&&a.path.isEqual(M)?r=r.add(D):g.done()}));i.push(h)})),j.waitFor(i).next((()=>this.tr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=kh(this.userId,r),l=IDBKeyRange.lowerBound(a);let c=new Tt(Qe);return gl(e).ee({range:l},((h,p,y)=>{const[g,E,S]=h,D=ji(E);g===this.userId&&r.isPrefixOf(D)?D.length===i&&(c=c.add(S)):y.done()})).next((()=>this.tr(e,c)))}tr(e,t){const r=[],i=[];return t.forEach((a=>{i.push(no(e).get(a).next((l=>{if(l===null)throw Ae(35274,{batchId:a});xe(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),r.push(Zo(this.serializer,l))})))})),j.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return sA(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),j.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return j.resolve();const r=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),i=[];return gl(e).ee({range:r},((a,l,c)=>{if(a[0]===this.userId){const h=ji(a[1]);i.push(h)}else c.done()})).next((()=>{xe(i.length===0,56720,{rr:i.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return oA(e,this.userId,t)}ir(e){return aA(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:oa,lastStreamToken:""}))}}function oA(n,e,t){const r=kh(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return gl(n).ee({range:a,Y:!0},((c,h,p)=>{const[y,g,E]=c;y===e&&g===i&&(l=!0),p.done()})).next((()=>l))}function no(n){return pn(n,yi)}function gl(n){return pn(n,kl)}function aA(n){return pn(n,_c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ya(0)}static ar(){return new ya(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const r=new ya(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Le.fromTimestamp(new wt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.ur(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.cr(e,i))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>cl(e).delete(t.targetId))).next((()=>this.ur(e))).next((r=>(xe(r.targetCount>0,8065),r.targetCount-=1,this.cr(e,r))))}removeTargets(e,t,r){let i=0;const a=[];return cl(e).ee(((l,c)=>{const h=Gu(c);h.sequenceNumber<=t&&r.get(h.targetId)===null&&(i++,a.push(this.removeTargetData(e,h)))})).next((()=>j.waitFor(a))).next((()=>i))}forEachTarget(e,t){return cl(e).ee(((r,i)=>{const a=Gu(i);t(a)}))}ur(e){return ZT(e).get(Zh).next((t=>(xe(t!==null,2888),t)))}cr(e,t){return ZT(e).put(Zh,t)}lr(e,t){return cl(e).put(eA(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const r=pa(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return cl(e).ee({range:i,index:ZS},((l,c,h)=>{const p=Gu(c);Gc(t,p.target)&&(a=p,h.done())})).next((()=>a))}addMatchingKeys(e,t,r){const i=[],a=uo(e);return t.forEach((l=>{const c=Qn(l.path);i.push(a.put({targetId:r,path:c})),i.push(this.referenceDelegate.addReference(e,r,l))})),j.waitFor(i)}removeMatchingKeys(e,t,r){const i=uo(e);return j.forEach(t,(a=>{const l=Qn(a.path);return j.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])}))}removeMatchingKeysForTargetId(e,t){const r=uo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=uo(e);let a=Xe();return i.ee({range:r,Y:!0},((l,c,h)=>{const p=ji(l[1]),y=new _e(p);a=a.add(y)})).next((()=>a))}containsKey(e,t){const r=Qn(t.path),i=IDBKeyRange.bound([r],[HS(r)],!1,!0);let a=0;return uo(e).ee({index:_y,Y:!0,range:i},(([l,c],h,p)=>{l!==0&&(a++,p.done())})).next((()=>a>0))}At(e,t){return cl(e).get(t).next((r=>r?Gu(r):null))}}function cl(n){return pn(n,xl)}function ZT(n){return pn(n,aa)}function uo(n){return pn(n,Dl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI="LruGarbageCollector",u2=1048576;function tI([n,e],[t,r]){const i=Qe(n,t);return i===0?Qe(e,r):i}class c2{constructor(e){this.Pr=e,this.buffer=new Tt(tI),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tI(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lA{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){le(eI,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Po(t)?le(eI,"Ignoring IndexedDB error during garbage collection: ",t):await Aa(t)}await this.Ar(3e5)}))}}class d2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return j.resolve(ei.ce);const r=new c2(t);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(XT)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,i,a,l,c,h,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),i=this.params.maximumSequenceNumbersToCollect):i=g,l=Date.now(),this.nthSequenceNumber(e,i)))).next((g=>(r=g,c=Date.now(),this.removeTargets(e,r,t)))).next((g=>(a=g,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(p=Date.now(),hl()<=rt.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${i} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${g} documents in `+(p-h)+`ms
Total Duration: ${p-y}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:g}))))}}function uA(n,e){return new d2(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e,t){this.db=e,this.garbageCollector=uA(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((r,i)=>t(i)))}addReference(e,t,r){return ph(e,r)}removeReference(e,t,r){return ph(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return ph(e,t)}wr(e,t){return(function(i,a){let l=!1;return aA(i).te((c=>oA(i,c,a).next((h=>(h&&(l=!0),j.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.yr(e,((l,c)=>{if(c<=t){const h=this.wr(e,l).next((p=>{if(!p)return a++,r.getEntry(e,l).next((()=>(r.removeEntry(l,Le.min()),uo(e).delete((function(g){return[0,Qn(g.path)]})(l)))))}));i.push(h)}})).next((()=>j.waitFor(i))).next((()=>r.apply(e))).next((()=>a))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return ph(e,t)}yr(e,t){const r=uo(e);let i,a=ei.ce;return r.ee({index:_y},(([l,c],{path:h,sequenceNumber:p})=>{l===0?(a!==ei.ce&&t(new _e(ji(i)),a),a=p,i=h):a=ei.ce})).next((()=>{a!==ei.ce&&t(new _e(ji(i)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ph(n,e){return uo(n).put((function(r,i){return{targetId:0,path:Qn(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.changes=new xs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?j.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Go(e).put(r)}removeEntry(e,t,r){return Go(e).delete((function(a,l){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],sf(l),c[c.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=Lt.newInvalidDocument(t);return Go(e).ee({index:xh,range:IDBKeyRange.only(Mu(t))},((i,a)=>{r=this.Sr(t,a)})).next((()=>r))}Dr(e,t){let r={size:0,document:Lt.newInvalidDocument(t)};return Go(e).ee({index:xh,range:IDBKeyRange.only(Mu(t))},((i,a)=>{r={document:this.Sr(t,a),size:af(a)}})).next((()=>r))}getEntries(e,t){let r=Mr();return this.Cr(e,t,((i,a)=>{const l=this.Sr(i,a);r=r.insert(i,l)})).next((()=>r))}vr(e,t){let r=Mr(),i=new Mt(_e.comparator);return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);r=r.insert(a,c),i=i.insert(a,af(l))})).next((()=>({documents:r,Fr:i})))}Cr(e,t,r){if(t.isEmpty())return j.resolve();let i=new Tt(iI);t.forEach((h=>i=i.add(h)));const a=IDBKeyRange.bound(Mu(i.first()),Mu(i.last())),l=i.getIterator();let c=l.getNext();return Go(e).ee({index:xh,range:a},((h,p,y)=>{const g=_e.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;c&&iI(c,g)<0;)r(c,null),c=l.getNext();c&&c.isEqual(g)&&(r(c,p),c=l.hasNext()?l.getNext():null),c?y.j(Mu(c)):y.done()})).next((()=>{for(;c;)r(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,a){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),sf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Go(e).H(IDBKeyRange.bound(c,h,!0)).next((p=>{a==null||a.incrementDocumentReadCount(p.length);let y=Mr();for(const g of p){const E=this.Sr(_e.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);E.isFoundDocument()&&(Yc(t,E)||i.has(E.key))&&(y=y.insert(E.key,E))}return y}))}getAllFromCollectionGroup(e,t,r,i){let a=Mr();const l=rI(t,r),c=rI(t,zr.max());return Go(e).ee({index:XS,range:IDBKeyRange.bound(l,c,!0)},((h,p,y)=>{const g=this.Sr(_e.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);a=a.insert(g.key,g),a.size===i&&y.done()})).next((()=>a))}newChangeBuffer(e){return new p2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return nI(e).get(yg).next((t=>(xe(!!t,20021),t)))}br(e,t){return nI(e).put(yg,t)}Sr(e,t){if(t){const r=XL(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Le.min())))return r}return Lt.newInvalidDocument(e)}}function dA(n){return new f2(n)}class p2 extends cA{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new xs((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Tt(((a,l)=>Qe(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const c=this.Or.get(a);if(t.push(this.Mr.removeEntry(e,a,c.readTime)),l.isValidDocument()){const h=UT(this.Mr.serializer,l);i=i.add(a.path.popLast());const p=af(h);r+=p-c.size,t.push(this.Mr.addEntry(e,a,h))}else if(r-=c.size,this.trackRemovals){const h=UT(this.Mr.serializer,l.convertToNoDocument(Le.min()));t.push(this.Mr.addEntry(e,a,h))}})),i.forEach((a=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Mr.updateMetadata(e,r)),j.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((r=>(this.Or.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:r,Fr:i})=>(i.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:r.get(a).readTime})})),r)))}}function nI(n){return pn(n,vc)}function Go(n){return pn(n,Xh)}function Mu(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rI(n,e){const t=e.documentKey.path.toArray();return[n,sf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function iI(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Qe(t[a],r[a]),i)return i;return i=Qe(t.length,r.length),i||(i=Qe(t[t.length-2],r[r.length-2]),i||Qe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&ac(r.mutation,i,Tr.empty(),wt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Xe()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Xe()){const i=$i();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=Wu();return a.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=$i();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Xe())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,r,i){let a=Mr();const l=oc(),c=(function(){return oc()})();return t.forEach(((h,p)=>{const y=r.get(p.key);i.has(p.key)&&(y===void 0||y.mutation instanceof Ds)?a=a.insert(p.key,p):y!==void 0?(l.set(p.key,y.mutation.getFieldMask()),ac(y.mutation,p,y.mutation.getFieldMask(),wt.now())):l.set(p.key,Tr.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((p,y)=>l.set(p,y))),t.forEach(((p,y)=>c.set(p,new m2(y,l.get(p)??null)))),c)))}recalculateAndSaveOverlays(e,t){const r=oc();let i=new Mt(((l,c)=>l-c)),a=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let y=r.get(h)||Tr.empty();y=c.applyToLocalView(p,y),r.set(h,y);const g=(i.get(c.batchId)||Xe()).add(h);i=i.insert(c.batchId,g)}))})).next((()=>{const l=[],c=i.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),p=h.key,y=h.value,g=CR();y.forEach((E=>{if(!a.has(E)){const S=VR(t.get(E),r.get(E));S!==null&&g.set(E,S),a=a.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,p,g))}return j.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return gL(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):j.resolve($i());let c=mc,h=a;return l.next((p=>j.forEach(p,((y,g)=>(c<g.largestBatchId&&(c=g.largestBatchId),a.get(y)?j.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{h=h.insert(y,E)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,h,p,Xe()))).next((y=>({batchId:c,changes:bR(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((r=>{let i=Wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=Wu();return this.indexManager.getCollectionParents(e,a).next((c=>j.forEach(c,(h=>{const p=(function(g,E){return new ql(E,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next((y=>{y.forEach(((g,E)=>{l=l.insert(g,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((h,p)=>{const y=p.getKey();l.get(y)===null&&(l=l.insert(y,Lt.newInvalidDocument(y)))}));let c=Wu();return l.forEach(((h,p)=>{const y=a.get(h);y!==void 0&&ac(y.mutation,p,Tr.empty(),wt.now()),Yc(t,p)&&(c=c.insert(h,p))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return j.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Sn(i.createTime)}})(t)),j.resolve()}getNamedQuery(e,t){return j.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(i){return{name:i.name,query:tA(i.bundledQuery),readTime:Sn(i.readTime)}})(t)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(){this.overlays=new Mt(_e.comparator),this.Lr=new Map}getOverlay(e,t){return j.resolve(this.overlays.get(t))}getOverlays(e,t){const r=$i();return j.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.bt(e,t,a)})),j.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(r)),j.resolve()}getOverlaysForCollection(e,t,r){const i=$i(),a=t.length+1,l=new _e(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&h.largestBatchId>r&&i.set(h.getKey(),h)}return j.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Mt(((p,y)=>p-y));const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=a.get(p.largestBatchId);y===null&&(y=$i(),a=a.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const c=$i(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,y)=>c.set(p,y))),!(c.size()>=i)););return j.resolve(c)}bt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new ky(t,r));let a=this.Lr.get(t);a===void 0&&(a=Xe(),this.Lr.set(t,a)),this.Lr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(){this.kr=new Tt(Tn.Kr),this.qr=new Tt(Tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const r=new Tn(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new Tn(e,t))}Qr(e,t){e.forEach((r=>this.removeReference(r,t)))}Gr(e){const t=new _e(new ft([])),r=new Tn(t,e),i=new Tn(t,e+1),a=[];return this.qr.forEachInRange([r,i],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new _e(new ft([])),r=new Tn(t,e),i=new Tn(t,e+1);let a=Xe();return this.qr.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new Tn(e,0),r=this.kr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Tn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return _e.comparator(e.key,t.key)||Qe(e.Hr,t.Hr)}static Ur(e,t){return Qe(e.Hr,t.Hr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Tt(Tn.Kr)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new by(a,t,r,i);this.mutationQueue.push(l);for(const c of i)this.Jr=this.Jr.add(new Tn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return j.resolve(l)}lookupMutationBatch(e,t){return j.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Xr(r),a=i<0?0:i;return j.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?oa:this.Yn-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Tn(t,0),i=new Tn(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([r,i],(l=>{const c=this.Zr(l.Hr);a.push(c)})),j.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Tt(Qe);return t.forEach((i=>{const a=new Tn(i,0),l=new Tn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(c=>{r=r.add(c.Hr)}))})),j.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const l=new Tn(new _e(a),0);let c=new Tt(Qe);return this.Jr.forEachWhile((h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(c=c.add(h.Hr)),!0)}),l),j.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){xe(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return j.forEach(t.mutations,(i=>{const a=new Tn(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,t){const r=new Tn(t,0),i=this.Jr.firstAfterOrEqual(r);return j.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.ti=e,this.docs=(function(){return new Mt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return j.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(t))}getEntries(e,t){let r=Mr();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Lt.newInvalidDocument(i))})),j.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Mr();const l=t.path,c=new _e(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:p,value:{document:y}}=h.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||gy(KS(y),r)<=0||(i.has(y.key)||Yc(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return j.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Ae(9500)}ni(e,t){return j.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new E2(this)}getSize(e){return j.resolve(this.size)}}class E2 extends cA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),j.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.persistence=e,this.ri=new xs((t=>pa(t)),Gc),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new Vy,this.targetCount=0,this.oi=ya._r()}forEachTarget(e,t){return this.ri.forEach(((r,i)=>t(i))),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),j.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new ya(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,j.resolve()}updateTargetData(e,t){return this.lr(t),j.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),j.waitFor(a).next((()=>i))}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,t){const r=this.ri.get(t)||null;return j.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),j.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),j.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),j.resolve()}getMatchingKeysForTargetId(e,t){const r=this.si.jr(t);return j.resolve(r)}containsKey(e,t){return j.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,t){this._i={},this.overlays={},this.ai=new ei(0),this.ui=!1,this.ui=!0,this.ci=new _2,this.referenceDelegate=e(this),this.li=new T2(this),this.indexManager=new o2,this.remoteDocumentCache=(function(i){return new w2(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new ZR(t),this.Pi=new g2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new y2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new v2(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){le("MemoryPersistence","Starting transaction:",e);const i=new I2(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((a=>this.referenceDelegate.Ii(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ei(e,t){return j.or(Object.values(this._i).map((r=>()=>r.containsKey(e,t))))}}class I2 extends QS{constructor(e){super(),this.currentSequenceNumber=e}}class zf{constructor(e){this.persistence=e,this.Ri=new Vy,this.Ai=null}static Vi(e){return new zf(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),j.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),j.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.di.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.di,(r=>{const i=_e.fromPath(r);return this.mi(e,i).next((a=>{a||t.removeEntry(i,Le.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return j.or([()=>j.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class lf{constructor(e,t){this.persistence=e,this.fi=new xs((r=>Qn(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=uA(this,t)}static Vi(e,t){return new lf(e,t)}Ti(){}Ii(e){return j.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}pr(e){let t=0;return this.mr(e,(r=>{t++})).next((()=>t))}mr(e,t){return j.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((a=>a?j.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(r++,a.removeEntry(l,Le.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),j.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}wr(e,t,r){return j.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.fi.get(t);return j.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.serializer=e}k(e,t,r,i){const a=new bf("createOrUpgrade",t);r<1&&i>=1&&((function(h){h.createObjectStore(Kc)})(e),(function(h){h.createObjectStore(_c,{keyPath:xV}),h.createObjectStore(yi,{keyPath:mT,autoIncrement:!0}).createIndex(ia,gT,{unique:!0}),h.createObjectStore(kl)})(e),sI(e),(function(h){h.createObjectStore(Jo)})(e));let l=j.resolve();return r<3&&i>=3&&(r!==0&&((function(h){h.deleteObjectStore(Dl),h.deleteObjectStore(xl),h.deleteObjectStore(aa)})(e),sI(e)),l=l.next((()=>(function(h){const p=h.store(aa),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Le.min().toTimestamp(),targetCount:0};return p.put(Zh,y)})(a)))),r<4&&i>=4&&(r!==0&&(l=l.next((()=>(function(h,p){return p.store(yi).H().next((g=>{h.deleteObjectStore(yi),h.createObjectStore(yi,{keyPath:mT,autoIncrement:!0}).createIndex(ia,gT,{unique:!0});const E=p.store(yi),S=g.map((D=>E.put(D)));return j.waitFor(S)}))})(e,a)))),l=l.next((()=>{(function(h){h.createObjectStore(Nl,{keyPath:BV})})(e)}))),r<5&&i>=5&&(l=l.next((()=>this.gi(a)))),r<6&&i>=6&&(l=l.next((()=>((function(h){h.createObjectStore(vc)})(e),this.pi(a))))),r<7&&i>=7&&(l=l.next((()=>this.yi(a)))),r<8&&i>=8&&(l=l.next((()=>this.wi(e,a)))),r<9&&i>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(l=l.next((()=>this.bi(a)))),r<11&&i>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(Cf,{keyPath:zV})})(e),(function(h){h.createObjectStore(kf,{keyPath:jV})})(e)}))),r<12&&i>=12&&(l=l.next((()=>{(function(h){const p=h.createObjectStore(xf,{keyPath:QV});p.createIndex(vg,YV,{unique:!1}),p.createIndex(nR,JV,{unique:!1})})(e)}))),r<13&&i>=13&&(l=l.next((()=>(function(h){const p=h.createObjectStore(Xh,{keyPath:NV});p.createIndex(xh,OV),p.createIndex(XS,VV)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Jo)))),r<14&&i>=14&&(l=l.next((()=>this.Di(e,a)))),r<15&&i>=15&&(l=l.next((()=>(function(h){h.createObjectStore(vy,{keyPath:$V,autoIncrement:!0}).createIndex(_g,HV,{unique:!1}),h.createObjectStore(nc,{keyPath:qV}).createIndex(eR,WV,{unique:!1}),h.createObjectStore(rc,{keyPath:KV}).createIndex(tR,GV,{unique:!1})})(e)))),r<16&&i>=16&&(l=l.next((()=>{t.objectStore(nc).clear()})).next((()=>{t.objectStore(rc).clear()}))),r<17&&i>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(wy,{keyPath:XV})})(e)}))),r<18&&i>=18&&H0()&&(l=l.next((()=>{t.objectStore(nc).clear()})).next((()=>{t.objectStore(rc).clear()}))),l}pi(e){let t=0;return e.store(Jo).ee(((r,i)=>{t+=af(i)})).next((()=>{const r={byteSize:t};return e.store(vc).put(yg,r)}))}gi(e){const t=e.store(_c),r=e.store(yi);return t.H().next((i=>j.forEach(i,(a=>{const l=IDBKeyRange.bound([a.userId,oa],[a.userId,a.lastAcknowledgedBatchId]);return r.H(ia,l).next((c=>j.forEach(c,(h=>{xe(h.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const p=Zo(this.serializer,h);return sA(e,a.userId,p).next((()=>{}))}))))}))))}yi(e){const t=e.store(Dl),r=e.store(Jo);return e.store(aa).get(Zh).next((i=>{const a=[];return r.ee(((l,c)=>{const h=new ft(l),p=(function(g){return[0,Qn(g)]})(h);a.push(t.get(p).next((y=>y?j.resolve():(g=>t.put({targetId:0,path:Qn(g),sequenceNumber:i.highestListenSequenceNumber}))(h))))})).next((()=>j.waitFor(a)))}))}wi(e,t){e.createObjectStore(wc,{keyPath:UV});const r=t.store(wc),i=new Oy,a=l=>{if(i.add(l)){const c=l.lastSegment(),h=l.popLast();return r.put({collectionId:c,parent:Qn(h)})}};return t.store(Jo).ee({Y:!0},((l,c)=>{const h=new ft(l);return a(h.popLast())})).next((()=>t.store(kl).ee({Y:!0},(([l,c,h],p)=>{const y=ji(c);return a(y.popLast())}))))}bi(e){const t=e.store(xl);return t.ee(((r,i)=>{const a=Gu(i),l=eA(this.serializer,a);return t.put(l)}))}Si(e,t){const r=t.store(Jo),i=[];return r.ee(((a,l)=>{const c=t.store(Xh),h=(function(g){return g.document?new _e(ft.fromString(g.document.name).popFirst(5)):g.noDocument?_e.fromSegments(g.noDocument.path):g.unknownDocument?_e.fromSegments(g.unknownDocument.path):Ae(36783)})(l).path.toArray(),p={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(c.put(p))})).next((()=>j.waitFor(i)))}Di(e,t){const r=t.store(yi),i=dA(this.serializer),a=new Ly(zf.Vi,this.serializer.yt);return r.H().next((l=>{const c=new Map;return l.forEach((h=>{let p=c.get(h.userId)??Xe();Zo(this.serializer,h).keys().forEach((y=>p=p.add(y))),c.set(h.userId,p)})),j.forEach(c,((h,p)=>{const y=new On(p),g=Uf.wt(this.serializer,y),E=a.getIndexManager(y),S=Bf.wt(y,this.serializer,E,a.referenceDelegate);return new hA(i,S,g,E).recalculateAndSaveOverlaysForDocumentKeys(new wg(t,ei.ce),h).next()}))}))}}function sI(n){n.createObjectStore(Dl,{keyPath:MV}).createIndex(_y,FV,{unique:!0}),n.createObjectStore(xl,{keyPath:"targetId"}).createIndex(ZS,LV,{unique:!0}),n.createObjectStore(aa)}const ro="IndexedDbPersistence",Bm=18e5,zm=5e3,jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",R2="main";class My{constructor(e,t,r,i,a,l,c,h,p,y,g=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=a,this.window=l,this.document=c,this.Fi=p,this.Mi=y,this.xi=g,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=E=>Promise.resolve(),!My.v())throw new de(X.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h2(this,i),this.Ki=t+R2,this.serializer=new ZR(h),this.qi=new go(this.Ki,this.xi,new S2(this.serializer)),this.ci=new e2,this.li=new l2(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dA(this.serializer),this.Pi=new ZL,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&sr(ro,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new de(X.FAILED_PRECONDITION,jm);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new ei(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>mh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(Po(e))return le(ro,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return le(ro,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Fu(e).get(sl).next((t=>j.resolve(this.Xi(t))))}Yi(e){return mh(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Bm)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=pn(t,Nl);return r.H().next((i=>{const a=this.ns(i,Bm),l=i.filter((c=>a.indexOf(c)===-1));return j.forEach(l,(c=>r.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?j.resolve(!0):Fu(e).get(sl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,zm)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new de(X.FAILED_PRECONDITION,jm);return!1}}return!(!this.networkEnabled||!this.inForeground)||mh(e).H().next((r=>this.ns(r,zm).find((i=>{if(this.clientId!==i.clientId){const a=!this.networkEnabled&&i.networkEnabled,l=!this.inForeground&&i.inForeground,c=this.networkEnabled===i.networkEnabled;if(a||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&le(ro,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[Kc,Nl],(e=>{const t=new wg(e,ei.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((r=>this.ts(r.updateTimeMs,t)&&!this.ss(r.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>mh(e).H().next((t=>this.ns(t,Bm).map((r=>r.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Bf.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new a2(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Uf.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){le(ro,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",a=(function(h){return h===18?tL:h===17?oR:h===16?eL:h===15?Ey:h===14?sR:h===13?iR:h===12?ZV:h===11?rR:void Ae(60245)})(this.xi);let l;return this.qi.runTransaction(e,i,a,(c=>(l=new wg(c,this.ai?this.ai.next():ei.ce),t==="readwrite-primary"?this.ji(l).next((h=>!!h||this.Hi(l))).next((h=>{if(!h)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new de(X.FAILED_PRECONDITION,GS);return r(l)})).next((h=>this.Zi(l).next((()=>h)))):this.Ps(l).next((()=>r(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Ps(e){return Fu(e).get(sl).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,zm)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new de(X.FAILED_PRECONDITION,jm)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fu(e).put(sl,t)}static v(){return go.v()}Ji(e){const t=Fu(e);return t.get(sl).next((r=>this.Xi(r)?(le(ro,"Releasing primary lease."),t.delete(sl)):j.resolve()))}ts(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(sr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;$0()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const r=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return le(ro,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr(ro,"Failed to get zombied client id.",r),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fu(n){return pn(n,Kc)}function mh(n){return pn(n,Nl)}function A2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=i}static Es(e,t){let r=Xe(),i=Xe();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Fy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return $0()?8:YS(hn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new P2;return this.ys(e,t,l).next((c=>{if(a.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>a.result))}ws(e,t,r,i){return r.documentReadCount<this.Vs?(hl()<=rt.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",fl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),j.resolve()):(hl()<=rt.DEBUG&&le("QueryEngine","Query:",fl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(hl()<=rt.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",fl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):j.resolve())}gs(e,t){if(CT(t))return j.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=rf(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=Xe(...a);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,r).next((h=>{const p=this.bs(t,c);return this.Ss(t,p,l,h.readTime)?this.gs(e,rf(t,null,"F")):this.Ds(e,p,t,h)}))))})))))}ps(e,t,r,i){return CT(t)||i.isEqual(Le.min())?j.resolve(null):this.fs.getDocuments(e,r).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,r,i)?j.resolve(null):(hl()<=rt.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),fl(t)),this.Ds(e,l,t,SV(i,mc)).next((c=>c)))}))}bs(e,t){let r=new Tt(AR(e));return t.forEach(((i,a)=>{Yc(e,a)&&(r=r.add(a))})),r}Ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ys(e,t,r){return hl()<=rt.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",fl(t)),this.fs.getDocumentsMatchingQuery(e,t,zr.min(),r)}Ds(e,t,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy="LocalStore",b2=3e8;class C2{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.vs=new Mt(Qe),this.Fs=new xs((a=>pa(a)),Gc),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function pA(n,e,t,r){return new C2(n,e,t,r)}async function mA(n,e){const t=We(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Os(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],c=[];let h=Xe();for(const p of i){l.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}for(const p of a){c.push(p.batchId);for(const y of p.mutations)h=h.add(y.key)}return t.localDocuments.getDocuments(r,h).next((p=>({Ns:p,removedBatchIds:l,addedBatchIds:c})))}))}))}function k2(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,p,y){const g=p.batch,E=g.keys();let S=j.resolve();return E.forEach((D=>{S=S.next((()=>y.getEntry(h,D))).next((M=>{const O=p.docVersions.get(D);xe(O!==null,48541),M.version.compareTo(O)<0&&(g.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))}))})),S.next((()=>c.mutationQueue.removeMutationBatch(h,g)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let h=Xe();for(let p=0;p<c.mutationResults.length;++p)c.mutationResults[p].transformResults.length>0&&(h=h.add(c.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function gA(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function x2(n,e){const t=We(n),r=e.snapshotVersion;let i=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});i=t.vs;const c=[];e.targetChanges.forEach(((y,g)=>{const E=i.get(g);if(!E)return;c.push(t.li.removeMatchingKeys(a,y.removedDocuments,g).next((()=>t.li.addMatchingKeys(a,y.addedDocuments,g))));let S=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(g)!==null?S=S.withResumeToken(un.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):y.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(y.resumeToken,r)),i=i.insert(g,S),(function(M,O,J){return M.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=b2?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(E,S,y)&&c.push(t.li.updateTargetData(a,S))}));let h=Mr(),p=Xe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),c.push(D2(a,l,e.documentUpdates).next((y=>{h=y.Bs,p=y.Ls}))),!r.isEqual(Le.min())){const y=t.li.getLastRemoteSnapshotVersion(a).next((g=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,r)));c.push(y)}return j.waitFor(c).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,p))).next((()=>h))})).then((a=>(t.vs=i,a)))}function D2(n,e,t){let r=Xe(),i=Xe();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=Mr();return t.forEach(((c,h)=>{const p=a.get(c);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(c)),h.isNoDocument()&&h.version.isEqual(Le.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):le(Uy,"Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",h.version)})),{Bs:l,Ls:i}}))}function N2(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=oa),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function O2(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.li.getTargetData(r,e).next((a=>a?(i=a,j.resolve(i)):t.li.allocateTargetId(r).next((l=>(i=new Es(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.vs=t.vs.insert(r.targetId,r),t.Fs.set(e,r.targetId)),r}))}async function Og(n,e,t){const r=We(n),i=r.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Po(l))throw l;le(Uy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function oI(n,e,t){const r=We(n);let i=Le.min(),a=Xe();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,p,y){const g=We(h),E=g.Fs.get(y);return E!==void 0?j.resolve(g.vs.get(E)):g.li.getTargetData(p,y)})(r,l,ti(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{a=h}))})).next((()=>r.Cs.getDocumentsMatchingQuery(l,e,t?i:Le.min(),t?a:Xe()))).next((c=>(V2(r,vL(e),c),{documents:c,ks:a})))))}function V2(n,e,t){let r=n.Ms.get(e)||Le.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Ms.set(e,r)}class aI{constructor(){this.activeTargetIds=RL()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yA{constructor(){this.vo=new aI,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new aI,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="ConnectivityMonitor";class uI{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){le(lI,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){le(lI,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Vg(){return gh===null?gh=(function(){return 268435456+Math.round(2147483648*Math.random())})():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m="RestConnection",M2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class F2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===ef?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,a){const l=Vg(),c=this.Qo(e,t.toUriEncodedString());le($m,`Sending RPC '${e}' ${l}:`,c,r);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,i,a);const{host:p}=new URL(c),y=Zi(p);return this.zo(e,c,h,r,y).then((g=>(le($m,`Received RPC '${e}' ${l}: `,g),g)),(g=>{throw wo($m,`RPC '${e}' ${l} failed with error: `,g,"url: ",c,"request:",r),g}))}jo(e,t,r,i,a,l){return this.Wo(e,t,r,i,a)}Go(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Hl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}Qo(e,t){const r=M2[e];let i=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection",Uu=(n,e,t)=>{n.listen(e,(r=>{try{t(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Sl extends F2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Sl.c_){const e=BS();Uu(e,US.STAT_EVENT,(t=>{t.stat===pg.PROXY?le(qn,"STAT_EVENT: detected buffering proxy"):t.stat===pg.NOPROXY&&le(qn,"STAT_EVENT: detected no buffering proxy")})),Sl.c_=!0}}zo(e,t,r,i,a){const l=Vg();return new Promise(((c,h)=>{const p=new MS;p.setWithCredentials(!0),p.listenOnce(FS.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case bh.NO_ERROR:const g=p.getResponseJson();le(qn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(g)),c(g);break;case bh.TIMEOUT:le(qn,`RPC '${e}' ${l} timed out`),h(new de(X.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const E=p.getStatus();if(le(qn,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const D=S==null?void 0:S.error;if(D&&D.status&&D.message){const M=(function(J){const G=J.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(G)>=0?G:X.UNKNOWN})(D.status);h(new de(M,D.message))}else h(new de(X.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new de(X.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:l,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{le(qn,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(i);le(qn,`RPC '${e}' ${l} sending request:`,i),p.send(t,"POST",y,r,15)}))}T_(e,t,r){const i=Vg(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const p=a.join("");le(qn,`Creating RPC '${e}' stream ${i}: ${p}`,c);const y=l.createWebChannel(p,c);this.I_(y);let g=!1,E=!1;const S=new U2({Ho:D=>{E?le(qn,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(le(qn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),g=!0),le(qn,`RPC '${e}' stream ${i} sending:`,D),y.send(D))},Jo:()=>y.close()});return Uu(y,qu.EventType.OPEN,(()=>{E||(le(qn,`RPC '${e}' stream ${i} transport opened.`),S.i_())})),Uu(y,qu.EventType.CLOSE,(()=>{E||(E=!0,le(qn,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(y))})),Uu(y,qu.EventType.ERROR,(D=>{E||(E=!0,wo(qn,`RPC '${e}' stream ${i} transport errored. Name:`,D.name,"Message:",D.message),S.o_(new de(X.UNAVAILABLE,"The operation could not be completed")))})),Uu(y,qu.EventType.MESSAGE,(D=>{var M;if(!E){const O=D.data[0];xe(!!O,16349);const J=O,G=(J==null?void 0:J.error)||((M=J[0])==null?void 0:M.error);if(G){le(qn,`RPC '${e}' stream ${i} received error:`,G);const Z=G.status;let ae=(function(I){const R=sn[I];if(R!==void 0)return FR(R)})(Z),se=G.message;Z==="NOT_FOUND"&&se.includes("database")&&se.includes("does not exist")&&se.includes(this.databaseId.database)&&wo(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ae===void 0&&(ae=X.INTERNAL,se="Unknown error status: "+Z+" with message "+G.message),E=!0,S.o_(new de(ae,se)),y.close()}else le(qn,`RPC '${e}' stream ${i} received:`,O),S.__(O)}})),Sl.u_(),setTimeout((()=>{S.s_()}),0),S}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return zS()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(n){return new Sl(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(){return typeof window<"u"?window:null}function Fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n){return new zL(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sl.c_=!1;class By{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=i,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="PersistentStream";class _A{constructor(e,t,r,i,a,l,c,h){this.Ci=e,this.b_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new By(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(sr(t.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new de(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return le(cI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(le(cI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class j2 extends _A{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qL(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Le.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Le.min():l.readTime?Sn(l.readTime):Le.min()})(e);return this.listener.J_(t,r)}Z_(e){const t={};t.database=Cg(this.serializer),t.addTarget=(function(a,l){let c;const h=l.target;if(c=tf(h)?{documents:WR(a,h)}:{query:KR(a,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=zR(a,l.resumeToken);const p=Pg(a,l.expectedCount);p!==null&&(c.expectedCount=p)}else if(l.snapshotVersion.compareTo(Le.min())>0){c.readTime=Bl(a,l.snapshotVersion.toTimestamp());const p=Pg(a,l.expectedCount);p!==null&&(c.expectedCount=p)}return c})(this.serializer,e);const r=KL(this.serializer,e);r&&(t.labels=r),this.K_(t)}X_(e){const t={};t.database=Cg(this.serializer),t.removeTarget=e,this.K_(t)}}class $2 extends _A{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WL(e.writeResults,e.commitTime),r=Sn(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Cg(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>Cc(this.serializer,r)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{}class q2 extends H2{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,bg(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new de(X.UNKNOWN,a.toString())}))}jo(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,bg(t,r),i,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(X.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function W2(n,e,t,r){return new q2(n,e,t,r)}class K2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(sr(t),this.aa=!1):le("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class G2{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{r.enqueueAndForget((async()=>{Pa(this)&&(le(_a,"Restarting streams for network reachability change."),await(async function(h){const p=We(h);p.Ea.add(4),await Xc(p),p.Va.set("Unknown"),p.Ea.delete(4),await $f(p)})(this))}))})),this.Va=new K2(r,i)}}async function $f(n){if(Pa(n))for(const e of n.Ra)await e(!0)}async function Xc(n){for(const e of n.Ra)await e(!1)}function vA(n,e){const t=We(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hy(t)?$y(t):Kl(t).O_()&&jy(t,e))}function zy(n,e){const t=We(n),r=Kl(t);t.Ia.delete(e),r.O_()&&wA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Pa(t)&&t.Va.set("Unknown"))}function jy(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kl(n).Z_(e)}function wA(n,e){n.da.$e(e),Kl(n).X_(e)}function $y(n){n.da=new ML({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Kl(n).start(),n.Va.ua()}function Hy(n){return Pa(n)&&!Kl(n).x_()&&n.Ia.size>0}function Pa(n){return We(n).Ea.size===0}function EA(n){n.da=void 0}async function Q2(n){n.Va.set("Online")}async function Y2(n){n.Ia.forEach(((e,t)=>{jy(n,e)}))}async function J2(n,e){EA(n),Hy(n)?(n.Va.ha(e),$y(n)):n.Va.set("Unknown")}async function X2(n,e,t){if(n.Va.set("Online"),e instanceof BR&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,l),i.Ia.delete(c),i.da.removeTarget(c))})(n,e)}catch(r){le(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uf(n,r)}else if(e instanceof Lh?n.da.Xe(e):e instanceof UR?n.da.st(e):n.da.tt(e),!t.isEqual(Le.min()))try{const r=await gA(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const c=a.da.Tt(l);return c.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=a.Ia.get(p);y&&a.Ia.set(p,y.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,p)=>{const y=a.Ia.get(h);if(!y)return;a.Ia.set(h,y.withResumeToken(un.EMPTY_BYTE_STRING,y.snapshotVersion)),wA(a,h);const g=new Es(y.target,h,p,y.sequenceNumber);jy(a,g)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){le(_a,"Failed to raise snapshot:",r),await uf(n,r)}}async function uf(n,e,t){if(!Po(e))throw e;n.Ea.add(1),await Xc(n),n.Va.set("Offline"),t||(t=()=>gA(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{le(_a,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $f(n)}))}function TA(n,e){return e().catch((t=>uf(n,t,e)))}async function Zc(n){const e=We(n),t=Io(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:oa;for(;Z2(e);)try{const i=await N2(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,eM(e,i)}catch(i){await uf(e,i)}IA(e)&&SA(e)}function Z2(n){return Pa(n)&&n.Ta.length<10}function eM(n,e){n.Ta.push(e);const t=Io(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function IA(n){return Pa(n)&&!Io(n).x_()&&n.Ta.length>0}function SA(n){Io(n).start()}async function tM(n){Io(n).ra()}async function nM(n){const e=Io(n);for(const t of n.Ta)e.ea(t.mutations)}async function rM(n,e,t){const r=n.Ta.shift(),i=Cy.from(r,e,t);await TA(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await Zc(n)}async function iM(n,e){e&&Io(n).Y_&&await(async function(r,i){if((function(l){return MR(l)&&l!==X.ABORTED})(i.code)){const a=r.Ta.shift();Io(r).B_(),await TA(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await Zc(r)}})(n,e),IA(n)&&SA(n)}async function dI(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),le(_a,"RemoteStore received new credentials");const r=Pa(t);t.Ea.add(3),await Xc(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $f(t)}async function sM(n,e){const t=We(n);e?(t.Ea.delete(2),await $f(t)):e||(t.Ea.add(2),await Xc(t),t.Va.set("Unknown"))}function Kl(n){return n.ma||(n.ma=(function(t,r,i){const a=We(t);return a.sa(),new j2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Q2.bind(null,n),Yo:Y2.bind(null,n),t_:J2.bind(null,n),J_:X2.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Hy(n)?$y(n):n.Va.set("Unknown")):(await n.ma.stop(),EA(n))}))),n.ma}function Io(n){return n.fa||(n.fa=(function(t,r,i){const a=We(t);return a.sa(),new $2(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:tM.bind(null,n),t_:iM.bind(null,n),ta:nM.bind(null,n),na:rM.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Zc(n)):(await n.fa.stop(),n.Ta.length>0&&(le(_a,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,c=new qy(e,t,l,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wy(n,e){if(sr("AsyncQueue",`${e}: ${n}`),Po(n))return new de(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||_e.comparator(t.key,r.key):(t,r)=>_e.comparator(t.key,r.key),this.keyedMap=Wu(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Rl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(){this.ga=new Mt(_e.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class zl{constructor(e,t,r,i,a,l,c,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new zl(e,t,Rl.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class aM{constructor(){this.queries=fI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=We(t),a=i.queries;i.queries=fI(),a.forEach(((l,c)=>{for(const h of c.ba)h.onError(r)}))})(this,new de(X.ABORTED,"Firestore shutting down"))}}function fI(){return new xs((n=>RR(n)),Of)}async function Ky(n,e){const t=We(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.Sa()&&e.Da()&&(r=2):(a=new oM,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const c=Wy(l,`Initialization of query '${fl(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Qy(t)}async function Gy(n,e){const t=We(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?i=e.Da()?0:1:!a.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function lM(n,e){const t=We(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const c of l.ba)c.Fa(i)&&(r=!0);l.wa=i}}r&&Qy(t)}function uM(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const a of i.ba)a.onError(t);r.queries.delete(e)}function Qy(n){n.Ca.forEach((e=>{e.next()}))}var Lg,pI;(pI=Lg||(Lg={})).Ma="default",pI.Cache="cache";class Yy{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e){this.key=e}}class AA{constructor(e){this.key=e}}class cM{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.eu=AR(e),this.tu=new Rl(this.eu)}get nu(){return this.Za}ru(e,t){const r=t?t.iu:new hI,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,c=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((y,g)=>{const E=i.get(y),S=Yc(this.query,g)?g:null,D=!!E&&this.mutatedKeys.has(E.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let O=!1;E&&S?E.data.isEqual(S.data)?D!==M&&(r.track({type:3,doc:S}),O=!0):this.su(E,S)||(r.track({type:2,doc:S}),O=!0,(h&&this.eu(S,h)>0||p&&this.eu(S,p)<0)&&(c=!0)):!E&&S?(r.track({type:0,doc:S}),O=!0):E&&!S&&(r.track({type:1,doc:E}),O=!0,(h||p)&&(c=!0)),O&&(S?(l=l.add(S),a=M?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),r.track({type:1,doc:y})}return{tu:l,iu:r,Ss:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,g)=>(function(S,D){const M=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:O})}};return M(S)-M(D)})(y.type,g.type)||this.eu(y.doc,g.doc))),this.ou(r),i=i??!1;const c=t&&!i?this._u():[],h=this.Ya.size===0&&this.current&&!i?1:0,p=h!==this.Xa;return this.Xa=h,l.length!==0||p?{snapshot:new zl(this.query,e.tu,a,l,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hI,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const t=[];return e.forEach((r=>{this.Ya.has(r)||t.push(new AA(r))})),this.Ya.forEach((r=>{e.has(r)||t.push(new RA(r))})),t}cu(e){this.Za=e.ks,this.Ya=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Jy="SyncEngine";class dM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class hM{constructor(e){this.key=e,this.hu=!1}}class fM{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new xs((c=>RR(c)),Of),this.Iu=new Map,this.Eu=new Set,this.Ru=new Mt(_e.comparator),this.Au=new Map,this.Vu=new Vy,this.du={},this.mu=new Map,this.fu=ya.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function pM(n,e,t=!0){const r=DA(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await PA(r,e,t,!0),i}async function mM(n,e){const t=DA(n);await PA(t,e,!0,!1)}async function PA(n,e,t,r){const i=await O2(n.localStore,ti(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let c;return r&&(c=await gM(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&vA(n.remoteStore,i),c}async function gM(n,e,t,r,i){n.pu=(g,E,S)=>(async function(M,O,J,G){let Z=O.view.ru(J);Z.Ss&&(Z=await oI(M.localStore,O.query,!1).then((({documents:I})=>O.view.ru(I,Z))));const ae=G&&G.targetChanges.get(O.targetId),se=G&&G.targetMismatches.get(O.targetId)!=null,fe=O.view.applyChanges(Z,M.isPrimaryClient,ae,se);return gI(M,O.targetId,fe.au),fe.snapshot})(n,g,E,S);const a=await oI(n.localStore,e,!0),l=new cM(e,a.ks),c=l.ru(a.documents),h=Jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),p=l.applyChanges(c,n.isPrimaryClient,h);gI(n,t,p.au);const y=new dM(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function yM(n,e,t){const r=We(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!Of(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Og(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zy(r.remoteStore,i.targetId),Mg(r,i.targetId)})).catch(Aa)):(Mg(r,i.targetId),await Og(r.localStore,i.targetId,!0))}async function _M(n,e){const t=We(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zy(t.remoteStore,r.targetId))}async function vM(n,e,t){const r=NA(n);try{const i=await(function(l,c){const h=We(l),p=wt.now(),y=c.reduce(((S,D)=>S.add(D.key)),Xe());let g,E;return h.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let D=Mr(),M=Xe();return h.xs.getEntries(S,y).next((O=>{D=O,D.forEach(((J,G)=>{G.isValidDocument()||(M=M.add(J))}))})).next((()=>h.localDocuments.getOverlayedDocuments(S,D))).next((O=>{g=O;const J=[];for(const G of c){const Z=NL(G,g.get(G.key).overlayedDocument);Z!=null&&J.push(new Ds(G.key,Z,gR(Z.value.mapValue),on.exists(!0)))}return h.mutationQueue.addMutationBatch(S,p,J,c)})).next((O=>{E=O;const J=O.applyToLocalDocumentSet(g,M);return h.documentOverlayCache.saveOverlays(S,O.batchId,J)}))})).then((()=>({batchId:E.batchId,changes:bR(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,c,h){let p=l.du[l.currentUser.toKey()];p||(p=new Mt(Qe)),p=p.insert(c,h),l.du[l.currentUser.toKey()]=p})(r,i.batchId,t),await ed(r,i.changes),await Zc(r.remoteStore)}catch(i){const a=Wy(i,"Failed to persist write");t.reject(a)}}async function bA(n,e){const t=We(n);try{const r=await x2(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Au.get(a);l&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?xe(l.hu,14607):i.removedDocuments.size>0&&(xe(l.hu,42227),l.hu=!1))})),await ed(t,r,e)}catch(r){await Aa(r)}}function mI(n,e,t){const r=We(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(l,c){const h=We(l);h.onlineState=c;let p=!1;h.queries.forEach(((y,g)=>{for(const E of g.ba)E.va(c)&&(p=!0)})),p&&Qy(h)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wM(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new Mt(_e.comparator);l=l.insert(a,Lt.newNoDocument(a,Le.min()));const c=Xe().add(a),h=new Ff(Le.min(),new Map,new Mt(Qe),l,c);await bA(r,h),r.Ru=r.Ru.remove(a),r.Au.delete(e),Xy(r)}else await Og(r.localStore,e,!1).then((()=>Mg(r,e,t))).catch(Aa)}async function EM(n,e){const t=We(n),r=e.batch.batchId;try{const i=await k2(t.localStore,e);kA(t,r,null),CA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ed(t,i)}catch(i){await Aa(i)}}async function TM(n,e,t){const r=We(n);try{const i=await(function(l,c){const h=We(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return h.mutationQueue.lookupMutationBatch(p,c).next((g=>(xe(g!==null,37113),y=g.keys(),h.mutationQueue.removeMutationBatch(p,g)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,y,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>h.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);kA(r,e,t),CA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ed(r,i)}catch(i){await Aa(i)}}function CA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function kA(n,e,t){const r=We(n);let i=r.du[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function Mg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((r=>{n.Vu.containsKey(r)||xA(n,r)}))}function xA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(zy(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Xy(n))}function gI(n,e,t){for(const r of t)r instanceof RA?(n.Vu.addReference(r.key,e),IM(n,r)):r instanceof AA?(le(Jy,"Document no longer in limbo: "+r.key),n.Vu.removeReference(r.key,e),n.Vu.containsKey(r.key)||xA(n,r.key)):Ae(19791,{wu:r})}function IM(n,e){const t=e.key,r=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(r)||(le(Jy,"New document in limbo: "+t),n.Eu.add(r),Xy(n))}function Xy(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(ft.fromString(e)),r=n.fu.next();n.Au.set(r,new hM(t)),n.Ru=n.Ru.insert(t,r),vA(n.remoteStore,new Es(ti(Qc(t.path)),r,"TargetPurposeLimboResolution",ei.ce))}}async function ed(n,e,t){const r=We(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,h)=>{l.push(r.pu(h,e,t).then((p=>{var y;if((p||t)&&r.isPrimaryClient){const g=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:y.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(p){i.push(p);const g=Fy.Es(h.targetId,p);a.push(g)}})))})),await Promise.all(l),r.Pu.J_(i),await(async function(h,p){const y=We(h);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>j.forEach(p,(E=>j.forEach(E.Ts,(S=>y.persistence.referenceDelegate.addReference(g,E.targetId,S))).next((()=>j.forEach(E.Is,(S=>y.persistence.referenceDelegate.removeReference(g,E.targetId,S)))))))))}catch(g){if(!Po(g))throw g;le(Uy,"Failed to update sequence numbers: "+g)}for(const g of p){const E=g.targetId;if(!g.fromCache){const S=y.vs.get(E),D=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(D);y.vs=y.vs.insert(E,M)}}})(r.localStore,a))}async function SM(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){le(Jy,"User change. New user:",e.toKey());const r=await mA(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((h=>{h.reject(new de(X.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ed(t,r.Ns)}}function RM(n,e){const t=We(n),r=t.Au.get(e);if(r&&r.hu)return Xe().add(r.key);{let i=Xe();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const c=t.Tu.get(l);i=i.unionWith(c.view.nu)}return i}}function DA(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wM.bind(null,e),e.Pu.J_=lM.bind(null,e.eventManager),e.Pu.yu=uM.bind(null,e.eventManager),e}function NA(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TM.bind(null,e),e}class kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return pA(this.persistence,new fA,e.initialUser,this.serializer)}Cu(e){return new Ly(zf.Vi,this.serializer)}Du(e){return new yA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kc.provider={build:()=>new kc};class AM extends kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){xe(this.persistence.referenceDelegate instanceof lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new lA(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new Ly((r=>lf.Vi(r,t)),this.serializer)}}class PM extends kc{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await NA(this.xu.syncEngine),await Zc(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return pA(this.persistence,new fA,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new lA(r,e.asyncQueue,t)}Mu(e,t){const r=new bV(t,this.persistence);return new PV(e.asyncQueue,r)}Cu(e){const t=A2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new My(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,z2(),Fh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new yA}}class cf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SM.bind(null,this.syncEngine),await sM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new aM})()}createDatastore(e){const t=jf(e.databaseInfo.databaseId),r=B2(e.databaseInfo);return W2(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,c){return new G2(r,i,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>mI(this.syncEngine,t,0)),(function(){return uI.v()?new uI:new L2})())}createSyncEngine(e,t){return(function(i,a,l,c,h,p,y){const g=new fM(i,a,l,c,h,p);return y&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=We(i);le(_a,"RemoteStore shutting down."),a.Ea.add(5),await Xc(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}cf.provider={build:()=>new cf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bM=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new de(X.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(i,a){const l=We(i),c={documents:a.map((g=>bc(l.serializer,g)))},h=await l.jo("BatchGetDocuments",l.serializer.databaseId,ft.emptyPath(),c,a.length),p=new Map;h.forEach((g=>{const E=HL(l.serializer,g);p.set(E.key.toString(),E)}));const y=[];return a.forEach((g=>{const E=p.get(g.toString());xe(!!E,55234,{key:g}),y.push(E)})),y})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const i=_e.fromPath(r);this.mutations.push(new Py(i,this.precondition(i)))})),await(async function(r,i){const a=We(r),l={writes:i.map((c=>Cc(a.serializer,c)))};await a.Wo("Commit",a.serializer.databaseId,ft.emptyPath(),l)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ae(50498,{Gu:e.constructor.name});t=Le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new de(X.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Le.min())?on.exists(!1):on.updateTime(t):on.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Le.min()))throw new de(X.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return on.updateTime(t)}return on.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.zu=r.maxAttempts,this.M_=new By(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_((async()=>{const e=new bM(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((i=>{this.Zu(i)}))))})).catch((r=>{this.Zu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Wc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Hu(),Promise.resolve())))):this.deferred.reject(e)}Xu(e){if((e==null?void 0:e.name)==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!MR(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So="FirestoreClient";class kM{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=i,this.user=On.UNAUTHENTICATED,this.clientId=my.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{le(So,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(le(So,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Wy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Hm(n,e){n.asyncQueue.verifyOperationInProgress(),le(So,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await mA(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function yI(n,e){n.asyncQueue.verifyOperationInProgress();const t=await xM(n);le(So,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>dI(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>dI(e.remoteStore,i))),n._onlineComponents=e}async function xM(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){le(So,"Using user provided OfflineComponentProvider");try{await Hm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;wo("Error using user provided cache. Falling back to memory cache: "+t),await Hm(n,new kc)}}else le(So,"Using default OfflineComponentProvider"),await Hm(n,new AM(void 0));return n._offlineComponents}async function e_(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(le(So,"Using user provided OnlineComponentProvider"),await yI(n,n._uninitializedComponentsProvider._online)):(le(So,"Using default OnlineComponentProvider"),await yI(n,new cf))),n._onlineComponents}function DM(n){return e_(n).then((e=>e.syncEngine))}function NM(n){return e_(n).then((e=>e.datastore))}async function df(n){const e=await e_(n),t=e.eventManager;return t.onListen=pM.bind(null,e.syncEngine),t.onUnlisten=yM.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_M.bind(null,e.syncEngine),t}function OM(n,e,t,r){const i=new Zy(r),a=new Yy(e,i,t);return n.asyncQueue.enqueueAndForget((async()=>Ky(await df(n),a))),()=>{i.Nu(),n.asyncQueue.enqueueAndForget((async()=>Gy(await df(n),a)))}}function VM(n,e,t={}){const r=new Ei;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,h,p){const y=new Zy({next:E=>{y.Nu(),l.enqueueAndForget((()=>Gy(a,g)));const S=E.docs.has(c);!S&&E.fromCache?p.reject(new de(X.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&E.fromCache&&h&&h.source==="server"?p.reject(new de(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(E)},error:E=>p.reject(E)}),g=new Yy(Qc(c.path),y,{includeMetadataChanges:!0,Ka:!0});return Ky(a,g)})(await df(n),n.asyncQueue,e,t,r))),r.promise}function LM(n,e,t={}){const r=new Ei;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,h,p){const y=new Zy({next:E=>{y.Nu(),l.enqueueAndForget((()=>Gy(a,g))),E.fromCache&&h.source==="server"?p.reject(new de(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),g=new Yy(c,y,{includeMetadataChanges:!0,Ka:!0});return Ky(a,g)})(await df(n),n.asyncQueue,e,t,r))),r.promise}function MM(n,e){const t=new Ei;return n.asyncQueue.enqueueAndForget((async()=>vM(await DM(n),e,t))),t.promise}function FM(n,e,t){const r=new Ei;return n.asyncQueue.enqueueAndForget((async()=>{const i=await NM(n);new CM(n.asyncQueue,i,t,e,r).ju()})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UM="ComponentProvider",_I=new Map;function BM(n,e,t,r,i){return new rL(n,e,t,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,OA(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firestore.googleapis.com",vI=!0;class wI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=VA,this.ssl=vI}else this.host=e.host,this.ssl=e.ssl??vI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<u2)throw new de(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new de(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hf{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new fV;switch(r.type){case"firstParty":return new yV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=_I.get(t);r&&(le(UM,"Removing Datastore"),_I.delete(t),r.terminate())})(this),Promise.resolve()}}function zM(n,e,t,r={}){var p;n=or(n,Hf);const i=Zi(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},c=`${e}:${t}`;i&&(vf(`https://${c}`),wf("Firestore",!0)),a.host!==VA&&a.host!==c&&wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:c,ssl:i,emulatorOptions:r};if(!vo(h,l)&&(n._setSettings(h),r.mockUserToken)){let y,g;if(typeof r.mockUserToken=="string")y=r.mockUserToken,g=On.MOCK_USER;else{y=B0(r.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new de(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new On(E)}n._authCredentials=new pV(new $S(y,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ns(this.firestore,e,this._query)}}class $t{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}toJSON(){return{type:$t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(qc(t,$t._jsonSchema))return new $t(e,r||null,new _e(ft.fromString(t.referencePath)))}}$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:an("string",$t._jsonSchemaVersion),referencePath:an("string")};class yo extends Ns{constructor(e,t,r){super(e,t,Qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new _e(e))}withConverter(e){return new yo(this.firestore,e,this._path)}}function P3(n,e,...t){if(n=lt(n),qS("collection","path",e),n instanceof Hf){const r=ft.fromString(e,...t);return cT(r),new yo(n,null,r)}{if(!(n instanceof $t||n instanceof yo))throw new de(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ft.fromString(e,...t));return cT(r),new yo(n.firestore,null,r)}}function LA(n,e,...t){if(n=lt(n),arguments.length===1&&(e=my.newId()),qS("doc","path",e),n instanceof Hf){const r=ft.fromString(e,...t);return uT(r),new $t(n,null,new _e(r))}{if(!(n instanceof $t||n instanceof yo))throw new de(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ft.fromString(e,...t));return uT(r),new $t(n.firestore,n instanceof yo?n.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="AsyncQueue";class TI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new By(this,"async_queue_retry"),this._c=()=>{const r=Fh();r&&le(EI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=Fh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Fh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ei;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;le(EI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,sr("INTERNAL UNHANDLED ERROR: ",II(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=qy.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Ae(47125,{Pc:II(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function II(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ji extends Hf{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new TI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new TI(e),this._firestoreClient=void 0,await e}}}function jM(n,e){const t=typeof n=="object"?n:Bc(),r=typeof n=="string"?n:ef,i=bs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=ey("firestore");a&&zM(i,...a)}return i}function td(n){if(n._terminated)throw new de(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||MA(n),n._firestoreClient}function MA(n){var r,i,a,l;const e=n._freezeSettings(),t=BM(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,(i=n._app)==null?void 0:i.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new kM(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}function $M(n,e){wo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return HM(n,cf.provider,{build:r=>new PM(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}function HM(n,e,t){if((n=or(n,Ji))._firestoreClient||n._terminated)throw new de(X.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new de(X.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},MA(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Lr(un.fromBase64String(e))}catch(t){throw new de(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Lr(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Lr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(qc(e,Lr._jsonSchema))return Lr.fromBase64String(e.bytes)}}Lr._jsonSchemaVersion="firestore/bytes/1.0",Lr._jsonSchema={type:an("string",Lr._jsonSchemaVersion),bytes:an("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(qc(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:an("string",Gi._jsonSchemaVersion),latitude:an("number"),longitude:an("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ti._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(qc(e,Ti._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ti(e.vectorValues);throw new de(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ti._jsonSchemaVersion="firestore/vectorValue/1.0",Ti._jsonSchema={type:an("string",Ti._jsonSchemaVersion),vectorValues:an("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=/^__.*__$/;class WM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wl(e,this.data,t,this.fieldTransforms)}}class FA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ds(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:n})}}class n_{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new n_({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return hf(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(UA(this.dataSource)&&qM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class KM{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jf(e)}createContext(e,t,r,i=!1){return new n_({dataSource:e,methodName:t,targetDoc:r,path:jt.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nd(n){const e=n._freezeSettings(),t=jf(n._databaseId);return new KM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function r_(n,e,t,r,i,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,i);i_("Data must be an object, but it was:",l,r);const c=jA(r,l);let h,p;if(a.merge)h=new Tr(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const g of a.mergeFields){const E=va(e,g,t);if(!l.contains(E))throw new de(X.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);qA(y,E)||y.push(E)}h=new Tr(y),p=l.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,p=l.fieldTransforms;return new WM(new Ln(c),h,p)}class Wf extends t_{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wf}}function BA(n,e,t,r){const i=n.createContext(1,e,t);i_("Data must be an object, but it was:",i,r);const a=[],l=Ln.empty();bo(r,((h,p)=>{const y=HA(e,h,t);p=lt(p);const g=i.childContextForFieldPath(y);if(p instanceof Wf)a.push(y);else{const E=rd(p,g);E!=null&&(a.push(y),l.set(y,E))}}));const c=new Tr(a);return new FA(l,c,i.fieldTransforms)}function zA(n,e,t,r,i,a){const l=n.createContext(1,e,t),c=[va(e,r,t)],h=[i];if(a.length%2!=0)throw new de(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)c.push(va(e,a[E])),h.push(a[E+1]);const p=[],y=Ln.empty();for(let E=c.length-1;E>=0;--E)if(!qA(p,c[E])){const S=c[E];let D=h[E];D=lt(D);const M=l.childContextForFieldPath(S);if(D instanceof Wf)p.push(S);else{const O=rd(D,M);O!=null&&(p.push(S),y.set(S,O))}}const g=new Tr(p);return new FA(y,g,l.fieldTransforms)}function GM(n,e,t,r=!1){return rd(t,n.createContext(r?4:3,e))}function rd(n,e){if($A(n=lt(n)))return i_("Unsupported field value:",e,n),jA(n,e);if(n instanceof t_)return(function(r,i){if(!UA(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const c of r){let h=rd(c,i.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=lt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=wt.fromDate(r);return{timestampValue:Bl(i.serializer,a)}}if(r instanceof wt){const a=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bl(i.serializer,a)}}if(r instanceof Gi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Lr)return{bytesValue:zR(i.serializer,r._byteString)};if(r instanceof $t){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Dy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ti)return(function(l,c){const h=l instanceof Ti?l.toArray():l;return{mapValue:{fields:{[Iy]:{stringValue:Sy},[Ol]:{arrayValue:{values:h.map((y=>{if(typeof y!="number")throw c.createError("VectorValues must only contain numeric values.");return Ay(c.serializer,y)}))}}}}}})(r,i);if(XR(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Pf(r)}`)})(n,e)}function jA(n,e){const t={};return aR(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bo(n,((r,i)=>{const a=rd(i,e.childContextForField(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function $A(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof Gi||n instanceof Lr||n instanceof $t||n instanceof t_||n instanceof Ti||XR(n))}function i_(n,e,t){if(!$A(t)||!WS(t)){const r=Pf(t);throw r==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+r)}}function va(n,e,t){if((e=lt(e))instanceof qf)return e._internalPath;if(typeof e=="string")return HA(n,e);throw hf("Field path arguments must be of type string or ",n,!1,void 0,t)}const QM=new RegExp("[~\\*/\\[\\]]");function HA(n,e,t){if(e.search(QM)>=0)throw hf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new qf(...e.split("."))._internalPath}catch{throw hf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function hf(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${r}`),l&&(h+=` in document ${i}`),h+=")"),new de(X.INVALID_ARGUMENT,c+n+h)}function qA(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{convertValue(e,t="none"){switch(Eo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return bo(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,i,a;const t=(a=(i=(r=e.fields)==null?void 0:r[Ol].arrayValue)==null?void 0:i.values)==null?void 0:a.map((l=>Vt(l.doubleValue)));return new Ti(t)}convertGeoPoint(e){return new Gi(Vt(e.latitude),Vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Df(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ec(e));default:return null}}convertTimestamp(e){const t=As(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ft.fromString(e);xe(JR(r),9688,{name:e});const i=new fa(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return i.isEqual(t)||sr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}const SI="@firebase/firestore",RI="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(va("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class YM extends ff{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class s_{}class o_ extends s_{}function b3(n,e,...t){let r=[];e instanceof s_&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((h=>h instanceof a_)).length,c=a.filter((h=>h instanceof Gf)).length;if(l>1||l>0&&c>0)throw new de(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Gf extends o_{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Gf(e,t,r)}_apply(e){const t=this._parse(e);return GA(e._query,t),new Ns(e.firestore,e.converter,Ag(e._query,t))}_parse(e){const t=nd(e.firestore);return(function(a,l,c,h,p,y,g){let E;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new de(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){bI(g,y);const D=[];for(const M of g)D.push(PI(h,a,M));E={arrayValue:{values:D}}}else E=PI(h,a,g)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||bI(g,y),E=GM(c,l,g,y==="in"||y==="not-in");return it.create(p,y,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function C3(n,e,t){const r=e,i=va("where",n);return Gf._create(i,r,t)}class a_ extends s_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new a_(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Et.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const c=a.getFlattenedFilters();for(const h of c)GA(l,h),l=Ag(l,h)})(e._query,t),new Ns(e.firestore,e.converter,Ag(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class l_ extends o_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new l_(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new de(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new de(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rc(a,l)})(e._query,this._field,this._direction);return new Ns(e.firestore,e.converter,_L(e._query,t))}}function k3(n,e="asc"){const t=e,r=va("orderBy",n);return l_._create(r,t)}class u_ extends o_{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new u_(e,t,r)}_apply(e){return new Ns(e.firestore,e.converter,rf(e._query,this._limit,this._limitType))}}function x3(n){return u_._create("limit",n,"F")}function PI(n,e,t){if(typeof(t=lt(t))=="string"){if(t==="")throw new de(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SR(e)&&t.indexOf("/")!==-1)throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ft.fromString(t));if(!_e.isDocumentKey(r))throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ic(n,new _e(r))}if(t instanceof $t)return Ic(n,t._key);throw new de(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pf(t)}.`)}function bI(n,e){if(!Array.isArray(n)||n.length===0)throw new de(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GA(n,e){const t=(function(i,a){for(const l of i)for(const c of l.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function c_(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class JM extends WA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Lr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,t)}}class vl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _o extends ff{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(va("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=_o._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}_o._jsonSchemaVersion="firestore/documentSnapshot/1.0",_o._jsonSchema={type:an("string",_o._jsonSchemaVersion),bundleSource:an("string","DocumentSnapshot"),bundleName:an("string"),bundle:an("string")};class Uh extends _o{data(e={}){return super.data(e)}}class la{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new vl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Uh(this._firestore,this._userDataWriter,r.key,r,new vl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((c=>{const h=new Uh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new vl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const h=new Uh(i._firestore,i._userDataWriter,c.doc.key,c.doc,new vl(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,y=-1;return c.type!==0&&(p=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),y=l.indexOf(c.doc.key)),{type:XM(c.type),doc:h,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=la._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=my.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:an("string",la._jsonSchemaVersion),bundleSource:an("string","QuerySnapshot"),bundleName:an("string"),bundle:an("string")};const ZM={maxAttempts:5};function Qu(n,e){if((n=lt(n)).firestore!==e)throw new de(X.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=nd(e)}get(e){const t=Qu(e,this._firestore),r=new JM(this._firestore);return this._transaction.lookup([t._key]).then((i=>{if(!i||i.length!==1)return Ae(24041);const a=i[0];if(a.isFoundDocument())return new ff(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new ff(this._firestore,r,t._key,null,t.converter);throw Ae(18433,{doc:a})}))}set(e,t,r){const i=Qu(e,this._firestore),a=c_(i.converter,t,r),l=r_(this._dataReader,"Transaction.set",i._key,a,i.converter!==null,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Qu(e,this._firestore);let l;return l=typeof(t=lt(t))=="string"||t instanceof qf?zA(this._dataReader,"Transaction.update",a._key,t,r,i):BA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Qu(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF extends eF{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qu(e,this._firestore),r=new Kf(this._firestore);return super.get(e).then((i=>new _o(this._firestore,r,t._key,i._document,new vl(!1,!1),t.converter)))}}function D3(n,e,t){n=or(n,Ji);const r={...ZM,...t};(function(l){if(l.maxAttempts<1)throw new de(X.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r);const i=td(n);return FM(i,(a=>e(new tF(n,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(n){n=or(n,$t);const e=or(n.firestore,Ji),t=td(e);return VM(t,n._key).then((r=>QA(e,n,r)))}function N3(n){n=or(n,Ns);const e=or(n.firestore,Ji),t=td(e),r=new Kf(e);return KA(n._query),LM(t,n._query).then((i=>new la(e,r,n,i)))}function rF(n,e,t){n=or(n,$t);const r=or(n.firestore,Ji),i=c_(n.converter,e,t),a=nd(r);return d_(r,[r_(a,"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,on.none())])}function O3(n,e,t,...r){n=or(n,$t);const i=or(n.firestore,Ji),a=nd(i);let l;return l=typeof(e=lt(e))=="string"||e instanceof qf?zA(a,"updateDoc",n._key,e,t,r):BA(a,"updateDoc",n._key,e),d_(i,[l.toMutation(n._key,on.exists(!0))])}function V3(n,e){const t=or(n.firestore,Ji),r=LA(n),i=c_(n.converter,e),a=nd(n.firestore);return d_(t,[r_(a,"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function iF(n,...e){var p,y,g;n=lt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||AI(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(AI(e[r])){const E=e[r];e[r]=(p=E.next)==null?void 0:p.bind(E),e[r+1]=(y=E.error)==null?void 0:y.bind(E),e[r+2]=(g=E.complete)==null?void 0:g.bind(E)}let a,l,c;if(n instanceof $t)l=or(n.firestore,Ji),c=Qc(n._key.path),a={next:E=>{e[r]&&e[r](QA(l,n,E))},error:e[r+1],complete:e[r+2]};else{const E=or(n,Ns);l=or(E.firestore,Ji),c=E._query;const S=new Kf(l);a={next:D=>{e[r]&&e[r](new la(l,S,E,D))},error:e[r+1],complete:e[r+2]},KA(n._query)}const h=td(l);return OM(h,c,i,a)}function d_(n,e){const t=td(n);return MM(t,e)}function QA(n,e,t){const r=t.docs.get(e._key),i=new Kf(n);return new _o(n,i,e._key,r,new vl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){hV(Ra),Ir(new lr("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),c=new Ji(new mV(r.getProvider("auth-internal")),new _V(l,r.getProvider("app-check-internal")),iL(l,i),l);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),In(SI,RI,e),In(SI,RI,"esm2020")})();const YA="@firebase/installations",h_="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=1e4,XA=`w:${h_}`,ZA="FIS_v2",sF="https://firebaseinstallations.googleapis.com/v1",oF=3600*1e3,aF="installations",lF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wa=new Ao(aF,lF,uF);function eP(n){return n instanceof $r&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP({projectId:n}){return`${sF}/projects/${n}/installations`}function nP(n){return{token:n.token,requestStatus:2,expiresIn:dF(n.expiresIn),creationTime:Date.now()}}async function rP(n,e){const r=(await e.json()).error;return wa.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function iP({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function cF(n,{refreshToken:e}){const t=iP(n);return t.append("Authorization",hF(e)),t}async function sP(n){const e=await n();return e.status>=500&&e.status<600?n():e}function dF(n){return Number(n.replace("s","000"))}function hF(n){return`${ZA} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fF({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=tP(n),i=iP(n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={fid:t,authVersion:ZA,appId:n.appId,sdkVersion:XA},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await sP(()=>fetch(r,c));if(h.ok){const p=await h.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:nP(p.authToken)}}else throw await rP("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oP(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=/^[cdef][\w-]{21}$/,Fg="";function gF(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=yF(n);return mF.test(t)?t:Fg}catch{return Fg}}function yF(n){return pF(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new Map;function lP(n,e){const t=Qf(n);uP(t,e),_F(t,e)}function uP(n,e){const t=aP.get(n);if(t)for(const r of t)r(e)}function _F(n,e){const t=vF();t&&t.postMessage({key:n,fid:e}),wF()}let sa=null;function vF(){return!sa&&"BroadcastChannel"in self&&(sa=new BroadcastChannel("[Firebase] FID Change"),sa.onmessage=n=>{uP(n.data.key,n.data.fid)}),sa}function wF(){aP.size===0&&sa&&(sa.close(),sa=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF="firebase-installations-database",TF=1,Ea="firebase-installations-store";let qm=null;function f_(){return qm||(qm=Tf(EF,TF,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Ea)}}})),qm}async function pf(n,e){const t=Qf(n),i=(await f_()).transaction(Ea,"readwrite"),a=i.objectStore(Ea),l=await a.get(t);return await a.put(e,t),await i.done,(!l||l.fid!==e.fid)&&lP(n,e.fid),e}async function cP(n){const e=Qf(n),r=(await f_()).transaction(Ea,"readwrite");await r.objectStore(Ea).delete(e),await r.done}async function Yf(n,e){const t=Qf(n),i=(await f_()).transaction(Ea,"readwrite"),a=i.objectStore(Ea),l=await a.get(t),c=e(l);return c===void 0?await a.delete(t):await a.put(c,t),await i.done,c&&(!l||l.fid!==c.fid)&&lP(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p_(n){let e;const t=await Yf(n.appConfig,r=>{const i=IF(r),a=SF(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===Fg?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function IF(n){const e=n||{fid:gF(),registrationStatus:0};return dP(e)}function SF(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(wa.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=RF(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:AF(n)}:{installationEntry:e}}async function RF(n,e){try{const t=await fF(n,e);return pf(n.appConfig,t)}catch(t){throw eP(t)&&t.customData.serverCode===409?await cP(n.appConfig):await pf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function AF(n){let e=await CI(n.appConfig);for(;e.registrationStatus===1;)await oP(100),e=await CI(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await p_(n);return r||t}return e}function CI(n){return Yf(n,e=>{if(!e)throw wa.create("installation-not-found");return dP(e)})}function dP(n){return PF(n)?{fid:n.fid,registrationStatus:0}:n}function PF(n){return n.registrationStatus===1&&n.registrationTime+JA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF({appConfig:n,heartbeatServiceProvider:e},t){const r=CF(n,t),i=cF(n,t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={installation:{sdkVersion:XA,appId:n.appId}},c={method:"POST",headers:i,body:JSON.stringify(l)},h=await sP(()=>fetch(r,c));if(h.ok){const p=await h.json();return nP(p)}else throw await rP("Generate Auth Token",h)}function CF(n,{fid:e}){return`${tP(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m_(n,e=!1){let t;const r=await Yf(n.appConfig,a=>{if(!hP(a))throw wa.create("not-registered");const l=a.authToken;if(!e&&DF(l))return a;if(l.requestStatus===1)return t=kF(n,e),a;{if(!navigator.onLine)throw wa.create("app-offline");const c=OF(a);return t=xF(n,c),c}});return t?await t:r.authToken}async function kF(n,e){let t=await kI(n.appConfig);for(;t.authToken.requestStatus===1;)await oP(100),t=await kI(n.appConfig);const r=t.authToken;return r.requestStatus===0?m_(n,e):r}function kI(n){return Yf(n,e=>{if(!hP(e))throw wa.create("not-registered");const t=e.authToken;return VF(t)?{...e,authToken:{requestStatus:0}}:e})}async function xF(n,e){try{const t=await bF(n,e),r={...e,authToken:t};return await pf(n.appConfig,r),t}catch(t){if(eP(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await cP(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await pf(n.appConfig,r)}throw t}}function hP(n){return n!==void 0&&n.registrationStatus===2}function DF(n){return n.requestStatus===2&&!NF(n)}function NF(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+oF}function OF(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function VF(n){return n.requestStatus===1&&n.requestTime+JA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LF(n){const e=n,{installationEntry:t,registrationPromise:r}=await p_(e);return r?r.catch(console.error):m_(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF(n,e=!1){const t=n;return await FF(t),(await m_(t,e)).token}async function FF(n){const{registrationPromise:e}=await p_(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UF(n){if(!n||!n.options)throw Wm("App Configuration");if(!n.name)throw Wm("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Wm(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Wm(n){return wa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP="installations",BF="installations-internal",zF=n=>{const e=n.getProvider("app").getImmediate(),t=UF(e),r=bs(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},jF=n=>{const e=n.getProvider("app").getImmediate(),t=bs(e,fP).getImmediate();return{getId:()=>LF(t),getToken:i=>MF(t,i)}};function $F(){Ir(new lr(fP,zF,"PUBLIC")),Ir(new lr(BF,jF,"PRIVATE"))}$F();In(YA,h_);In(YA,h_,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="analytics",HF="firebase_id",qF="origin",WF=60*1e3,KF="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",g_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Ef("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GF={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ur=new Ao("analytics","Analytics",GF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QF(n){if(!n.startsWith(g_)){const e=Ur.create("invalid-gtag-resource",{gtagURL:n});return ar.warn(e.message),""}return n}function pP(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function YF(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function JF(n,e){const t=YF("firebase-js-sdk-policy",{createScriptURL:QF}),r=document.createElement("script"),i=`${g_}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function XF(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function ZF(n,e,t,r,i,a){const l=r[i];try{if(l)await e[l];else{const h=(await pP(t)).find(p=>p.measurementId===i);h&&await e[h.appId]}}catch(c){ar.error(c)}n("config",i,a)}async function e4(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const c=await pP(t);for(const h of l){const p=c.find(g=>g.measurementId===h),y=p&&e[p.appId];if(y)a.push(y);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){ar.error(a)}}function t4(n,e,t,r){async function i(a,...l){try{if(a==="event"){const[c,h]=l;await e4(n,e,t,c,h)}else if(a==="config"){const[c,h]=l;await ZF(n,e,t,r,c,h)}else if(a==="consent"){const[c,h]=l;n("consent",c,h)}else if(a==="get"){const[c,h,p]=l;n("get",c,h,p)}else if(a==="set"){const[c]=l;n("set",c)}else n(a,...l)}catch(c){ar.error(c)}}return i}function n4(n,e,t,r,i){let a=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=t4(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function r4(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(g_)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i4=30,s4=1e3;class o4{constructor(e={},t=s4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const mP=new o4;function a4(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function l4(n){var l;const{appId:e,apiKey:t}=n,r={method:"GET",headers:a4(t)},i=KF.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let c="";try{const h=await a.json();(l=h.error)!=null&&l.message&&(c=h.error.message)}catch{}throw Ur.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function u4(n,e=mP,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Ur.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Ur.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new h4;return setTimeout(async()=>{c.abort()},WF),gP({appId:r,apiKey:i,measurementId:a},l,c,e)}async function gP(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=mP){var c;const{appId:a,measurementId:l}=n;try{await c4(r,e)}catch(h){if(l)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw h}try{const h=await l4(n);return i.deleteThrottleMetadata(a),h}catch(h){const p=h;if(!d4(p)){if(i.deleteThrottleMetadata(a),l)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${p==null?void 0:p.message}]`),{appId:a,measurementId:l};throw h}const y=Number((c=p==null?void 0:p.customData)==null?void 0:c.httpStatus)===503?bE(t,i.intervalMillis,i4):bE(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(a,g),ar.debug(`Calling attemptFetch again in ${y} millis`),gP(n,g,r,i)}}function c4(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ur.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function d4(n){if(!(n instanceof $r)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class h4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function f4(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,l={...r,send_to:a};n("event",t,l)}}async function p4(n,e,t,r){if(r&&r.global){const i={};for(const a of Object.keys(t))i[`user_properties.${a}`]=t[a];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m4(){if(ty())try{await q0()}catch(n){return ar.warn(Ur.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return ar.warn(Ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function g4(n,e,t,r,i,a,l){const c=u4(n);c.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>ar.error(E)),e.push(c);const h=m4().then(E=>{if(E)return r.getId()}),[p,y]=await Promise.all([c,h]);r4(a)||JF(a,p.measurementId),i("js",new Date);const g=(l==null?void 0:l.config)??{};return g[qF]="firebase",g.update=!0,y!=null&&(g[HF]=y),i("config",p.measurementId,g),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(e){this.app=e}_delete(){return delete Al[this.app.options.appId],Promise.resolve()}}let Al={},xI=[];const DI={};let Km="dataLayer",_4="gtag",NI,y_,OI=!1;function v4(){const n=[];if(j0()&&n.push("This is a browser extension environment."),ox()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ur.create("invalid-analytics-context",{errorInfo:e});ar.warn(t.message)}}function w4(n,e,t){v4();const r=n.options.appId;if(!r)throw Ur.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ur.create("no-api-key");if(Al[r]!=null)throw Ur.create("already-exists",{id:r});if(!OI){XF(Km);const{wrappedGtag:a,gtagCore:l}=n4(Al,xI,DI,Km,_4);y_=a,NI=l,OI=!0}return Al[r]=g4(n,xI,DI,e,NI,Km,t),new y4(n)}function E4(n=Bc()){n=lt(n);const e=bs(n,mf);return e.isInitialized()?e.getImmediate():T4(n)}function T4(n,e={}){const t=bs(n,mf);if(t.isInitialized()){const i=t.getImmediate();if(vo(e,t.getOptions()))return i;throw Ur.create("already-initialized")}return t.initialize({options:e})}function I4(n,e,t){n=lt(n),p4(y_,Al[n.app.options.appId],e,t).catch(r=>ar.error(r))}function S4(n,e,t,r){n=lt(n),f4(y_,Al[n.app.options.appId],e,t,r).catch(i=>ar.error(i))}const VI="@firebase/analytics",LI="0.10.19";function R4(){Ir(new lr(mf,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return w4(r,i,t)},"PUBLIC")),Ir(new lr("analytics-internal",n,"PRIVATE")),In(VI,LI),In(VI,LI,"esm2020");function n(e){try{const t=e.getProvider(mf).getImmediate();return{logEvent:(r,i,a)=>S4(t,r,i,a),setUserProperties:(r,i)=>I4(t,r,i)}}catch(t){throw Ur.create("interop-component-reg-failed",{reason:t})}}}R4();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP="firebasestorage.googleapis.com",_P="storageBucket",A4=120*1e3,P4=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends $r{constructor(e,t,r=0){super(Gm(e),`Firebase Storage: ${t} (${Gm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Gt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Gt||(Gt={}));function Gm(n){return"storage/"+n}function __(){const n="An unknown error occurred, please check the error payload for server response.";return new Qt(Gt.UNKNOWN,n)}function b4(n){return new Qt(Gt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function C4(n){return new Qt(Gt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function k4(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qt(Gt.UNAUTHENTICATED,n)}function x4(){return new Qt(Gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function D4(n){return new Qt(Gt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function N4(){return new Qt(Gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O4(){return new Qt(Gt.CANCELED,"User canceled the upload/download.")}function V4(n){return new Qt(Gt.INVALID_URL,"Invalid URL '"+n+"'.")}function L4(n){return new Qt(Gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function M4(){return new Qt(Gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+_P+"' property when initializing the app?")}function F4(){return new Qt(Gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function U4(){return new Qt(Gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function B4(n){return new Qt(Gt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ug(n){return new Qt(Gt.INVALID_ARGUMENT,n)}function vP(){return new Qt(Gt.APP_DELETED,"The Firebase app was deleted.")}function z4(n){return new Qt(Gt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lc(n,e){return new Qt(Gt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Bu(n){throw new Qt(Gt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Fr.makeFromUrl(e,t)}catch{return new Fr(e,"")}if(r.path==="")return r;throw L4(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(ae){ae.path.charAt(ae.path.length-1)==="/"&&(ae.path_=ae.path_.slice(0,-1))}const l="(/(.*))?$",c=new RegExp("^gs://"+i+l,"i"),h={bucket:1,path:3};function p(ae){ae.path_=decodeURIComponent(ae.path)}const y="v[A-Za-z0-9_]+",g=t.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",S=new RegExp(`^https?://${g}/${y}/b/${i}/o${E}`,"i"),D={bucket:1,path:3},M=t===yP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,O="([^?#]*)",J=new RegExp(`^https?://${M}/${i}/${O}`,"i"),Z=[{regex:c,indices:h,postModify:a},{regex:S,indices:D,postModify:p},{regex:J,indices:{bucket:1,path:2},postModify:p}];for(let ae=0;ae<Z.length;ae++){const se=Z[ae],fe=se.regex.exec(e);if(fe){const I=fe[se.indices.bucket];let R=fe[se.indices.path];R||(R=""),r=new Fr(I,R),se.postModify(r);break}}if(r==null)throw V4(e);return r}}class j4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(n,e,t){let r=1,i=null,a=null,l=!1,c=0;function h(){return c===2}let p=!1;function y(...O){p||(p=!0,e.apply(null,O))}function g(O){i=setTimeout(()=>{i=null,n(S,h())},O)}function E(){a&&clearTimeout(a)}function S(O,...J){if(p){E();return}if(O){E(),y.call(null,O,...J);return}if(h()||l){E(),y.call(null,O,...J);return}r<64&&(r*=2);let Z;c===1?(c=2,Z=0):Z=(r+Math.random())*1e3,g(Z)}let D=!1;function M(O){D||(D=!0,E(),!p&&(i!==null?(O||(c=2),clearTimeout(i),g(0)):O||(c=1)))}return g(0),a=setTimeout(()=>{l=!0,M(!0)},t),M}function H4(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q4(n){return n!==void 0}function W4(n){return typeof n=="object"&&!Array.isArray(n)}function v_(n){return typeof n=="string"||n instanceof String}function MI(n){return w_()&&n instanceof Blob}function w_(){return typeof Blob<"u"}function FI(n,e,t,r){if(r<e)throw Ug(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ug(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wP(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ua;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ua||(ua={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{constructor(e,t,r,i,a,l,c,h,p,y,g,E=!0,S=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=c,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=y,this.connectionFactory_=g,this.retry=E,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,M)=>{this.resolve_=D,this.reject_=M,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new yh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=c=>{const h=c.loaded,p=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const c=a.getErrorCode()===ua.NO_ERROR,h=a.getStatus();if(!c||K4(h,this.additionalRetryCodes_)&&this.retry){const y=a.getErrorCode()===ua.ABORT;r(!1,new yh(!1,null,y));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new yh(p,a))})},t=(r,i)=>{const a=this.resolve_,l=this.reject_,c=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(c,c.getResponse());q4(h)?a(h):a()}catch(h){l(h)}else if(c!==null){const h=__();h.serverResponse=c.getErrorText(),this.errorCallback_?l(this.errorCallback_(c,h)):l(h)}else if(i.canceled){const h=this.appDelete_?vP():O4();l(h)}else{const h=N4();l(h)}};this.canceled_?t(!1,new yh(!1,null,!0)):this.backoffId_=$4(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&H4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class yh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Q4(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Y4(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J4(n,e){e&&(n["X-Firebase-GMPID"]=e)}function X4(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function Z4(n,e,t,r,i,a,l=!0,c=!1){const h=wP(n.urlParams),p=n.url+h,y=Object.assign({},n.headers);return J4(y,e),Q4(y,t),Y4(y,a),X4(y,r),new G4(p,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tU(...n){const e=eU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(w_())return new Blob(n);throw new Qt(Gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rU(n){if(typeof atob>"u")throw B4("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qm{constructor(e,t){this.data=e,this.contentType=t||null}}function iU(n,e){switch(n){case Hi.RAW:return new Qm(EP(e));case Hi.BASE64:case Hi.BASE64URL:return new Qm(TP(n,e));case Hi.DATA_URL:return new Qm(oU(e),aU(e))}throw __()}function EP(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=n.charCodeAt(++t);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function sU(n){let e;try{e=decodeURIComponent(n)}catch{throw lc(Hi.DATA_URL,"Malformed data URL.")}return EP(e)}function TP(n,e){switch(n){case Hi.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw lc(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hi.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw lc(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=rU(e)}catch(i){throw i.message.includes("polyfill")?i:lc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class IP{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw lc(Hi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=lU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function oU(n){const e=new IP(n);return e.base64?TP(Hi.BASE64,e.rest):sU(e.rest)}function aU(n){return new IP(n).contentType}function lU(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){let r=0,i="";MI(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(MI(this.data_)){const r=this.data_,i=nU(r,e,t);return i===null?null:new co(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new co(r,!0)}}static getBlob(...e){if(w_()){const t=e.map(r=>r instanceof co?r.data_:r);return new co(tU.apply(null,t))}else{const t=e.map(l=>v_(l)?iU(Hi.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let c=0;c<l.length;c++)i[a++]=l[c]}),new co(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n){let e;try{e=JSON.parse(n)}catch{return null}return W4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function cU(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function RP(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(n,e){return e}class ir{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||dU}}let _h=null;function hU(n){return!v_(n)||n.length<2?n:RP(n)}function AP(){if(_h)return _h;const n=[];n.push(new ir("bucket")),n.push(new ir("generation")),n.push(new ir("metageneration")),n.push(new ir("name","fullPath",!0));function e(a,l){return hU(l)}const t=new ir("name");t.xform=e,n.push(t);function r(a,l){return l!==void 0?Number(l):l}const i=new ir("size");return i.xform=r,n.push(i),n.push(new ir("timeCreated")),n.push(new ir("updated")),n.push(new ir("md5Hash",null,!0)),n.push(new ir("cacheControl",null,!0)),n.push(new ir("contentDisposition",null,!0)),n.push(new ir("contentEncoding",null,!0)),n.push(new ir("contentLanguage",null,!0)),n.push(new ir("contentType",null,!0)),n.push(new ir("metadata","customMetadata",!0)),_h=n,_h}function fU(n,e){function t(){const r=n.bucket,i=n.fullPath,a=new Fr(r,i);return e._makeStorageReference(a)}Object.defineProperty(n,"ref",{get:t})}function pU(n,e,t){const r={};r.type="file";const i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return fU(r,n),r}function PP(n,e,t){const r=SP(e);return r===null?null:pU(n,r,t)}function mU(n,e,t,r){const i=SP(e);if(i===null||!v_(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const y=n.bucket,g=n.fullPath,E="/b/"+l(y)+"/o/"+l(g),S=E_(E,t,r),D=wP({alt:"media",token:p});return S+D})[0]}function gU(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}class bP{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n){if(!n)throw __()}function yU(n,e){function t(r,i){const a=PP(n,i,e);return CP(a!==null),a}return t}function _U(n,e){function t(r,i){const a=PP(n,i,e);return CP(a!==null),mU(a,i,n.host,n._protocol)}return t}function kP(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=x4():i=k4():t.getStatus()===402?i=C4(n.bucket):t.getStatus()===403?i=D4(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function vU(n){const e=kP(n);function t(r,i){let a=e(r,i);return r.getStatus()===404&&(a=b4(n.path)),a.serverResponse=i.serverResponse,a}return t}function wU(n,e,t){const r=e.fullServerUrl(),i=E_(r,n.host,n._protocol),a="GET",l=n.maxOperationRetryTime,c=new bP(i,a,_U(n,t),l);return c.errorHandler=vU(e),c}function EU(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function TU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=EU(null,e)),r}function IU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function c(){let Z="";for(let ae=0;ae<2;ae++)Z=Z+Math.random().toString().slice(2);return Z}const h=c();l["Content-Type"]="multipart/related; boundary="+h;const p=TU(e,r,i),y=gU(p,t),g="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+y+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+h+"--",S=co.getBlob(g,r,E);if(S===null)throw F4();const D={name:p.fullPath},M=E_(a,n.host,n._protocol),O="POST",J=n.maxUploadRetryTime,G=new bP(M,O,yU(n,t),J);return G.urlParams=D,G.headers=l,G.body=S.uploadData(),G.errorHandler=kP(e),G}class SU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,a){if(this.sent_)throw Bu("cannot .send() more than once");if(Zi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Bu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Bu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Bu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Bu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class RU extends SU{initXhr(){this.xhr_.responseType="text"}}function xP(){return new RU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,t){this._service=e,t instanceof Fr?this._location=t:this._location=Fr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ta(e,t)}get root(){const e=new Fr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return RP(this._location.path)}get storage(){return this._service}get parent(){const e=uU(this._location.path);if(e===null)return null;const t=new Fr(this._location.bucket,e);return new Ta(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw z4(e)}}function AU(n,e,t){n._throwIfRoot("uploadBytes");const r=IU(n.storage,n._location,AP(),new co(e,!0),t);return n.storage.makeRequestWithTokens(r,xP).then(i=>({metadata:i,ref:n}))}function PU(n){n._throwIfRoot("getDownloadURL");const e=wU(n.storage,n._location,AP());return n.storage.makeRequestWithTokens(e,xP).then(t=>{if(t===null)throw U4();return t})}function bU(n,e){const t=cU(n._location.path,e),r=new Fr(n._location.bucket,t);return new Ta(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(n){return/^[A-Za-z]+:\/\//.test(n)}function kU(n,e){return new Ta(n,e)}function DP(n,e){if(n instanceof T_){const t=n;if(t._bucket==null)throw M4();const r=new Ta(t,t._bucket);return e!=null?DP(r,e):r}else return e!==void 0?bU(n,e):n}function xU(n,e){if(e&&CU(e)){if(n instanceof T_)return kU(n,e);throw Ug("To use ref(service, url), the first argument must be a Storage instance.")}else return DP(n,e)}function UI(n,e){const t=e==null?void 0:e[_P];return t==null?null:Fr.makeFromBucketSpec(t,n)}function DU(n,e,t,r={}){n.host=`${e}:${t}`;const i=Zi(e);i&&(vf(`https://${n.host}/b`),wf("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:B0(a,n.app.options.projectId))}class T_{constructor(e,t,r,i,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=yP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=A4,this._maxUploadRetryTime=P4,this._requests=new Set,i!=null?this._bucket=Fr.makeFromBucketSpec(i,this._host):this._bucket=UI(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fr.makeFromBucketSpec(this._url,e):this._bucket=UI(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FI("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FI("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ta(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new j4(vP());{const l=Z4(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const BI="@firebase/storage",zI="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="storage";function L3(n,e,t){return n=lt(n),AU(n,e,t)}function M3(n){return n=lt(n),PU(n)}function F3(n,e){return n=lt(n),xU(n,e)}function NU(n=Bc(),e){n=lt(n);const r=bs(n,NP).getImmediate({identifier:e}),i=ey("storage");return i&&OU(r,...i),r}function OU(n,e,t,r={}){DU(n,e,t,r)}function VU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new T_(t,r,i,e,Ra)}function LU(){Ir(new lr(NP,VU,"PUBLIC").setMultipleInstances(!0)),In(BI,zI,""),In(BI,zI,"esm2020")}LU();const Yu={apiKey:"AIzaSyA2W9m7u415haZwLdIidqNMYbP3rJF_J2k",authDomain:"vosl12.firebaseapp.com",projectId:"vosl12",storageBucket:"vosl12.firebasestorage.app",messagingSenderId:"23089939460",appId:"1:23089939460:web:fc0efbea5db8290f6be151"},OP=!!(Yu.apiKey&&Yu.authDomain&&Yu.projectId&&Yu.appId),vh=OP;let jr;OP&&(jr=OE().length?OE()[0]:G0(Yu));const yl=jr?cV(jr):void 0,VP=jr?jM(jr):void 0,jI=jr?new _s:void 0;let MU;const U3=jr?NU(jr):void 0,B3=jr?WD(jr):void 0;if(jr){QN(yl,RS).catch(()=>{});try{typeof window<"u"&&(MU=E4(jr))}catch{}try{$M(VP).catch(()=>{})}catch{}}/*! Capacitor: https://capacitorjs.com/ - MIT License */const FU=n=>{const e=new Map;e.set("web",{name:"web"});const t=n.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(a,l)=>{t.platforms.set(a,l)},i=a=>{t.platforms.has(a)&&(t.currentPlatform=t.platforms.get(a))};return t.addPlatform=r,t.setPlatform=i,t},UU=n=>n.CapacitorPlatforms=FU(n),LP=UU(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});LP.addPlatform;LP.setPlatform;var jl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(jl||(jl={}));class Ym extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const BU=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},zU=n=>{var e,t,r,i,a;const l=n.CapacitorCustomPlatform||null,c=n.Capacitor||{},h=c.Plugins=c.Plugins||{},p=n.CapacitorPlatforms,y=()=>l!==null?l.name:BU(n),g=((e=p==null?void 0:p.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||y,E=()=>g()!=="web",S=((t=p==null?void 0:p.currentPlatform)===null||t===void 0?void 0:t.isNativePlatform)||E,D=I=>{const R=ae.get(I);return!!(R!=null&&R.platforms.has(g())||J(I))},M=((r=p==null?void 0:p.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||D,O=I=>{var R;return(R=c.PluginHeaders)===null||R===void 0?void 0:R.find(P=>P.name===I)},J=((i=p==null?void 0:p.currentPlatform)===null||i===void 0?void 0:i.getPluginHeader)||O,G=I=>n.console.error(I),Z=(I,R,P)=>Promise.reject(`${P} does not have an implementation of "${R}".`),ae=new Map,se=(I,R={})=>{const P=ae.get(I);if(P)return console.warn(`Capacitor plugin "${I}" already registered. Cannot register plugins twice.`),P.proxy;const V=g(),x=J(I);let F;const b=async()=>(!F&&V in R?F=typeof R[V]=="function"?F=await R[V]():F=R[V]:l!==null&&!F&&"web"in R&&(F=typeof R.web=="function"?F=await R.web():F=R.web),F),Me=(ne,N)=>{var K,he;if(x){const ve=x==null?void 0:x.methods.find(Ee=>N===Ee.name);if(ve)return ve.rtype==="promise"?Ee=>c.nativePromise(I,N.toString(),Ee):(Ee,we)=>c.nativeCallback(I,N.toString(),Ee,we);if(ne)return(K=ne[N])===null||K===void 0?void 0:K.bind(ne)}else{if(ne)return(he=ne[N])===null||he===void 0?void 0:he.bind(ne);throw new Ym(`"${I}" plugin is not implemented on ${V}`,jl.Unimplemented)}},He=ne=>{let N;const K=(...he)=>{const ve=b().then(Ee=>{const we=Me(Ee,ne);if(we){const Ke=we(...he);return N=Ke==null?void 0:Ke.remove,Ke}else throw new Ym(`"${I}.${ne}()" is not implemented on ${V}`,jl.Unimplemented)});return ne==="addListener"&&(ve.remove=async()=>N()),ve};return K.toString=()=>`${ne.toString()}() { [capacitor code] }`,Object.defineProperty(K,"name",{value:ne,writable:!1,configurable:!1}),K},ye=He("addListener"),Ne=He("removeListener"),ee=(ne,N)=>{const K=ye({eventName:ne},N),he=async()=>{const Ee=await K;Ne({eventName:ne,callbackId:Ee},N)},ve=new Promise(Ee=>K.then(()=>Ee({remove:he})));return ve.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await he()},ve},pe=new Proxy({},{get(ne,N){switch(N){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return x?ee:ye;case"removeListener":return Ne;default:return He(N)}}});return h[I]=pe,ae.set(I,{name:I,proxy:pe,platforms:new Set([...Object.keys(R),...x?[V]:[]])}),pe},fe=((a=p==null?void 0:p.currentPlatform)===null||a===void 0?void 0:a.registerPlugin)||se;return c.convertFileSrc||(c.convertFileSrc=I=>I),c.getPlatform=g,c.handleError=G,c.isNativePlatform=S,c.isPluginAvailable=M,c.pluginMethodNoop=Z,c.registerPlugin=fe,c.Exception=Ym,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c},jU=n=>n.Capacitor=zU(n),xc=jU(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),MP=xc.registerPlugin;xc.Plugins;class FP{constructor(e){this.listeners={},this.retainedEventArguments={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}i.forEach(a=>a(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new xc.Exception(e,jl.Unimplemented)}unavailable(e="not available"){return new xc.Exception(e,jl.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const $I=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),HI=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class $U extends FP{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=HI(i).trim(),a=HI(a).trim(),t[i]=a}),t}async setCookie(e){try{const t=$I(e.key),r=$I(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${a}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}MP("CapacitorCookies",{web:()=>new $U});const HU=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),qU=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,a,l)=>(i[a]=n[e[l]],i),{})},WU=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[a,l]=i;let c,h;return Array.isArray(l)?(h="",l.forEach(p=>{c=e?encodeURIComponent(p):p,h+=`${a}=${c}&`}),h.slice(0,-1)):(c=e?encodeURIComponent(l):l,h=`${a}=${c}`),`${r}&${h}`},"").substr(1):null,KU=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=qU(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[l,c]of Object.entries(n.data||{}))a.set(l,c);t.body=a.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const a=new FormData;if(n.data instanceof FormData)n.data.forEach((c,h)=>{a.append(h,c)});else for(const c of Object.keys(n.data))a.append(c,n.data[c]);t.body=a;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class GU extends FP{async request(e){const t=KU(e,e.webFetchExtra),r=WU(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,a=await fetch(i,t),l=a.headers.get("content-type")||"";let{responseType:c="text"}=a.ok?e:{};l.includes("application/json")&&(c="json");let h,p;switch(c){case"arraybuffer":case"blob":p=await a.blob(),h=await HU(p);break;case"json":h=await a.json();break;case"document":case"text":default:h=await a.text()}const y={};return a.headers.forEach((g,E)=>{y[E]=g}),{data:h,headers:y,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}MP("CapacitorHttp",{web:()=>new GU});const UP=z.createContext(void 0),QU=({children:n})=>{const[e,t]=z.useState(null);z.useEffect(()=>{if(!vh)return;let l=null;const c=XN(yl,async h=>{if(!h){if(t(null),l)try{l()}catch{}return}const p=LA(VP,"users",h.uid),y=await nF(p);let g="STUDENT",E=h.displayName||h.email||"User",S=h.photoURL||void 0;if(y.exists()){const D=y.data();g=D.role||"STUDENT",E=D.name||E,S=D.avatarUrl||S}else await rF(p,{email:h.email,name:E,role:g});if(t({id:h.uid,email:h.email||"",name:E,role:g,password:"",avatar:S}),l)try{l()}catch{}l=iF(p,D=>{const M=D.data();M&&t(O=>O&&{...O,name:M.name||O.name,role:M.role||O.role,avatar:M.avatarUrl||O.avatar})})});return()=>{if(l)try{l()}catch{}c&&c()}},[]);const r=async(l,c)=>{if(!vh)throw new Error("Firebase is not configured. Add env vars.");await KN(yl,l,c)},i=async()=>{if(!vh)throw new Error("Firebase is not configured. Add env vars.");xc.isNativePlatform()?await SO(yl,jI):await _O(yl,jI)},a=()=>{vh&&ZN(yl).catch(()=>{}),t(null)};return _i.jsx(UP.Provider,{value:{user:e,loginWithEmail:r,loginWithGoogle:i,logout:a,isAuthenticated:!!e},children:n})},z3=()=>{const n=z.useContext(UP);if(!n)throw new Error("useAuth must be used within AuthProvider");return n};var YU=(n,e,t,r,i,a,l,c)=>{let h=document.documentElement,p=["light","dark"];function y(S){(Array.isArray(n)?n:[n]).forEach(D=>{let M=D==="class",O=M&&a?i.map(J=>a[J]||J):i;M?(h.classList.remove(...O),h.classList.add(a&&a[S]?a[S]:S)):h.setAttribute(D,S)}),g(S)}function g(S){c&&p.includes(S)&&(h.style.colorScheme=S)}function E(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)y(r);else try{let S=localStorage.getItem(e)||t,D=l&&S==="system"?E():S;y(D)}catch{}},JU=z.createContext(void 0),XU={setTheme:n=>{},themes:[]},ZU=()=>{var n;return(n=z.useContext(JU))!=null?n:XU};z.memo(({forcedTheme:n,storageKey:e,attribute:t,enableSystem:r,enableColorScheme:i,defaultTheme:a,value:l,themes:c,nonce:h,scriptProps:p})=>{let y=JSON.stringify([t,e,a,n,c,l,r,i]).slice(1,-1);return z.createElement("script",{...p,suppressHydrationWarning:!0,nonce:typeof window>"u"?h:"",dangerouslySetInnerHTML:{__html:`(${YU.toString()})(${y})`}})});var e6=t0();const t6=e0(e6);function n6(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}const r6=n=>{switch(n){case"success":return o6;case"info":return l6;case"warning":return a6;case"error":return u6;default:return null}},i6=Array(12).fill(0),s6=({visible:n,className:e})=>ge.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":n},ge.createElement("div",{className:"sonner-spinner"},i6.map((t,r)=>ge.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),o6=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),a6=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),l6=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),u6=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ge.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),c6=ge.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ge.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ge.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),d6=()=>{const[n,e]=ge.useState(document.hidden);return ge.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),n};let Bg=1;class h6{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:r,...i}=e,a=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Bg++,l=this.toasts.find(h=>h.id===a),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),l?this.toasts=this.toasts.map(h=>h.id===a?(this.publish({...h,...e,id:a,title:r}),{...h,...e,id:a,dismissible:c,title:r}):h):this.addToast({title:r,...i,dismissible:c,id:a}),a},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(r=>r({id:t.id,dismiss:!0}))}),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let r;t.loading!==void 0&&(r=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const i=Promise.resolve(e instanceof Function?e():e);let a=r!==void 0,l;const c=i.then(async p=>{if(l=["resolve",p],ge.isValidElement(p))a=!1,this.create({id:r,type:"default",message:p});else if(p6(p)&&!p.ok){a=!1;const g=typeof t.error=="function"?await t.error(`HTTP error! status: ${p.status}`):t.error,E=typeof t.description=="function"?await t.description(`HTTP error! status: ${p.status}`):t.description,D=typeof g=="object"&&!ge.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:E,...D})}else if(p instanceof Error){a=!1;const g=typeof t.error=="function"?await t.error(p):t.error,E=typeof t.description=="function"?await t.description(p):t.description,D=typeof g=="object"&&!ge.isValidElement(g)?g:{message:g};this.create({id:r,type:"error",description:E,...D})}else if(t.success!==void 0){a=!1;const g=typeof t.success=="function"?await t.success(p):t.success,E=typeof t.description=="function"?await t.description(p):t.description,D=typeof g=="object"&&!ge.isValidElement(g)?g:{message:g};this.create({id:r,type:"success",description:E,...D})}}).catch(async p=>{if(l=["reject",p],t.error!==void 0){a=!1;const y=typeof t.error=="function"?await t.error(p):t.error,g=typeof t.description=="function"?await t.description(p):t.description,S=typeof y=="object"&&!ge.isValidElement(y)?y:{message:y};this.create({id:r,type:"error",description:g,...S})}}).finally(()=>{a&&(this.dismiss(r),r=void 0),t.finally==null||t.finally.call(t)}),h=()=>new Promise((p,y)=>c.then(()=>l[0]==="reject"?y(l[1]):p(l[1])).catch(y));return typeof r!="string"&&typeof r!="number"?{unwrap:h}:Object.assign(r,{unwrap:h})},this.custom=(e,t)=>{const r=(t==null?void 0:t.id)||Bg++;return this.create({jsx:e(r),id:r,...t}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const wr=new h6,f6=(n,e)=>{const t=(e==null?void 0:e.id)||Bg++;return wr.addToast({title:n,...e,id:t}),t},p6=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",m6=f6,g6=()=>wr.toasts,y6=()=>wr.getActiveToasts(),j3=Object.assign(m6,{success:wr.success,info:wr.info,warning:wr.warning,error:wr.error,custom:wr.custom,message:wr.message,promise:wr.promise,dismiss:wr.dismiss,loading:wr.loading},{getHistory:g6,getToasts:y6});n6("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function wh(n){return n.label!==void 0}const _6=3,v6="24px",w6="16px",qI=4e3,E6=356,T6=14,I6=45,S6=200;function Bi(...n){return n.filter(Boolean).join(" ")}function R6(n){const[e,t]=n.split("-"),r=[];return e&&r.push(e),t&&r.push(t),r}const A6=n=>{var e,t,r,i,a,l,c,h,p;const{invert:y,toast:g,unstyled:E,interacting:S,setHeights:D,visibleToasts:M,heights:O,index:J,toasts:G,expanded:Z,removeToast:ae,defaultRichColors:se,closeButton:fe,style:I,cancelButtonStyle:R,actionButtonStyle:P,className:V="",descriptionClassName:x="",duration:F,position:b,gap:Me,expandByDefault:He,classNames:ye,icons:Ne,closeButtonAriaLabel:ee="Close toast"}=n,[pe,ne]=ge.useState(null),[N,K]=ge.useState(null),[he,ve]=ge.useState(!1),[Ee,we]=ge.useState(!1),[Ke,je]=ge.useState(!1),[st,Ft]=ge.useState(!1),[Ii,At]=ge.useState(!1),[Rn,Sr]=ge.useState(0),[Os,An]=ge.useState(0),Yn=ge.useRef(g.duration||F||qI),Si=ge.useRef(null),ut=ge.useRef(null),Pt=J===0,Jn=J+1<=M,Yt=g.type,ur=g.dismissible!==!1,cr=g.className||"",Mn=g.descriptionClassName||"",Rr=ge.useMemo(()=>O.findIndex(Fe=>Fe.toastId===g.id)||0,[O,g.id]),Hr=ge.useMemo(()=>{var Fe;return(Fe=g.closeButton)!=null?Fe:fe},[g.closeButton,fe]),Jt=ge.useMemo(()=>g.duration||F||qI,[g.duration,F]),mn=ge.useRef(0),Pn=ge.useRef(0),Ar=ge.useRef(0),Xn=ge.useRef(null),[qr,gn]=b.split("-"),si=ge.useMemo(()=>O.reduce((Fe,_t,Dt)=>Dt>=Rr?Fe:Fe+_t.height,0),[O,Rr]),bn=d6(),oi=g.invert||y,dr=Yt==="loading";Pn.current=ge.useMemo(()=>Rr*Me+si,[Rr,si]),ge.useEffect(()=>{Yn.current=Jt},[Jt]),ge.useEffect(()=>{ve(!0)},[]),ge.useEffect(()=>{const Fe=ut.current;if(Fe){const _t=Fe.getBoundingClientRect().height;return An(_t),D(Dt=>[{toastId:g.id,height:_t,position:g.position},...Dt]),()=>D(Dt=>Dt.filter(Ut=>Ut.toastId!==g.id))}},[D,g.id]),ge.useLayoutEffect(()=>{if(!he)return;const Fe=ut.current,_t=Fe.style.height;Fe.style.height="auto";const Dt=Fe.getBoundingClientRect().height;Fe.style.height=_t,An(Dt),D(Ut=>Ut.find(bt=>bt.toastId===g.id)?Ut.map(bt=>bt.toastId===g.id?{...bt,height:Dt}:bt):[{toastId:g.id,height:Dt,position:g.position},...Ut])},[he,g.title,g.description,D,g.id]);const yn=ge.useCallback(()=>{we(!0),Sr(Pn.current),D(Fe=>Fe.filter(_t=>_t.toastId!==g.id)),setTimeout(()=>{ae(g)},S6)},[g,ae,D,Pn]);ge.useEffect(()=>{if(g.promise&&Yt==="loading"||g.duration===1/0||g.type==="loading")return;let Fe;return Z||S||bn?(()=>{if(Ar.current<mn.current){const Ut=new Date().getTime()-mn.current;Yn.current=Yn.current-Ut}Ar.current=new Date().getTime()})():(()=>{Yn.current!==1/0&&(mn.current=new Date().getTime(),Fe=setTimeout(()=>{g.onAutoClose==null||g.onAutoClose.call(g,g),yn()},Yn.current))})(),()=>clearTimeout(Fe)},[Z,S,g,Yt,bn,yn]),ge.useEffect(()=>{g.delete&&yn()},[yn,g.delete]);function Fn(){var Fe;if(Ne!=null&&Ne.loading){var _t;return ge.createElement("div",{className:Bi(ye==null?void 0:ye.loader,g==null||(_t=g.classNames)==null?void 0:_t.loader,"sonner-loader"),"data-visible":Yt==="loading"},Ne.loading)}return ge.createElement(s6,{className:Bi(ye==null?void 0:ye.loader,g==null||(Fe=g.classNames)==null?void 0:Fe.loader),visible:Yt==="loading"})}const hr=g.icon||(Ne==null?void 0:Ne[Yt])||r6(Yt);var yt,Ri;return ge.createElement("li",{tabIndex:0,ref:ut,className:Bi(V,cr,ye==null?void 0:ye.toast,g==null||(e=g.classNames)==null?void 0:e.toast,ye==null?void 0:ye.default,ye==null?void 0:ye[Yt],g==null||(t=g.classNames)==null?void 0:t[Yt]),"data-sonner-toast":"","data-rich-colors":(yt=g.richColors)!=null?yt:se,"data-styled":!(g.jsx||g.unstyled||E),"data-mounted":he,"data-promise":!!g.promise,"data-swiped":Ii,"data-removed":Ee,"data-visible":Jn,"data-y-position":qr,"data-x-position":gn,"data-index":J,"data-front":Pt,"data-swiping":Ke,"data-dismissible":ur,"data-type":Yt,"data-invert":oi,"data-swipe-out":st,"data-swipe-direction":N,"data-expanded":!!(Z||He&&he),style:{"--index":J,"--toasts-before":J,"--z-index":G.length-J,"--offset":`${Ee?Rn:Pn.current}px`,"--initial-height":He?"auto":`${Os}px`,...I,...g.style},onDragEnd:()=>{je(!1),ne(null),Xn.current=null},onPointerDown:Fe=>{dr||!ur||(Si.current=new Date,Sr(Pn.current),Fe.target.setPointerCapture(Fe.pointerId),Fe.target.tagName!=="BUTTON"&&(je(!0),Xn.current={x:Fe.clientX,y:Fe.clientY}))},onPointerUp:()=>{var Fe,_t,Dt;if(st||!ur)return;Xn.current=null;const Ut=Number(((Fe=ut.current)==null?void 0:Fe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),en=Number(((_t=ut.current)==null?void 0:_t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),bt=new Date().getTime()-((Dt=Si.current)==null?void 0:Dt.getTime()),Ht=pe==="x"?Ut:en,Zn=Math.abs(Ht)/bt;if(Math.abs(Ht)>=I6||Zn>.11){Sr(Pn.current),g.onDismiss==null||g.onDismiss.call(g,g),K(pe==="x"?Ut>0?"right":"left":en>0?"down":"up"),yn(),Ft(!0);return}else{var k,U;(k=ut.current)==null||k.style.setProperty("--swipe-amount-x","0px"),(U=ut.current)==null||U.style.setProperty("--swipe-amount-y","0px")}At(!1),je(!1),ne(null)},onPointerMove:Fe=>{var _t,Dt,Ut;if(!Xn.current||!ur||((_t=window.getSelection())==null?void 0:_t.toString().length)>0)return;const bt=Fe.clientY-Xn.current.y,Ht=Fe.clientX-Xn.current.x;var Zn;const k=(Zn=n.swipeDirections)!=null?Zn:R6(b);!pe&&(Math.abs(Ht)>1||Math.abs(bt)>1)&&ne(Math.abs(Ht)>Math.abs(bt)?"x":"y");let U={x:0,y:0};const q=te=>1/(1.5+Math.abs(te)/20);if(pe==="y"){if(k.includes("top")||k.includes("bottom"))if(k.includes("top")&&bt<0||k.includes("bottom")&&bt>0)U.y=bt;else{const te=bt*q(bt);U.y=Math.abs(te)<Math.abs(bt)?te:bt}}else if(pe==="x"&&(k.includes("left")||k.includes("right")))if(k.includes("left")&&Ht<0||k.includes("right")&&Ht>0)U.x=Ht;else{const te=Ht*q(Ht);U.x=Math.abs(te)<Math.abs(Ht)?te:Ht}(Math.abs(U.x)>0||Math.abs(U.y)>0)&&At(!0),(Dt=ut.current)==null||Dt.style.setProperty("--swipe-amount-x",`${U.x}px`),(Ut=ut.current)==null||Ut.style.setProperty("--swipe-amount-y",`${U.y}px`)}},Hr&&!g.jsx&&Yt!=="loading"?ge.createElement("button",{"aria-label":ee,"data-disabled":dr,"data-close-button":!0,onClick:dr||!ur?()=>{}:()=>{yn(),g.onDismiss==null||g.onDismiss.call(g,g)},className:Bi(ye==null?void 0:ye.closeButton,g==null||(r=g.classNames)==null?void 0:r.closeButton)},(Ri=Ne==null?void 0:Ne.close)!=null?Ri:c6):null,(Yt||g.icon||g.promise)&&g.icon!==null&&((Ne==null?void 0:Ne[Yt])!==null||g.icon)?ge.createElement("div",{"data-icon":"",className:Bi(ye==null?void 0:ye.icon,g==null||(i=g.classNames)==null?void 0:i.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Fn():null,g.type!=="loading"?hr:null):null,ge.createElement("div",{"data-content":"",className:Bi(ye==null?void 0:ye.content,g==null||(a=g.classNames)==null?void 0:a.content)},ge.createElement("div",{"data-title":"",className:Bi(ye==null?void 0:ye.title,g==null||(l=g.classNames)==null?void 0:l.title)},g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title),g.description?ge.createElement("div",{"data-description":"",className:Bi(x,Mn,ye==null?void 0:ye.description,g==null||(c=g.classNames)==null?void 0:c.description)},typeof g.description=="function"?g.description():g.description):null),ge.isValidElement(g.cancel)?g.cancel:g.cancel&&wh(g.cancel)?ge.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||R,onClick:Fe=>{wh(g.cancel)&&ur&&(g.cancel.onClick==null||g.cancel.onClick.call(g.cancel,Fe),yn())},className:Bi(ye==null?void 0:ye.cancelButton,g==null||(h=g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,ge.isValidElement(g.action)?g.action:g.action&&wh(g.action)?ge.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||P,onClick:Fe=>{wh(g.action)&&(g.action.onClick==null||g.action.onClick.call(g.action,Fe),!Fe.defaultPrevented&&yn())},className:Bi(ye==null?void 0:ye.actionButton,g==null||(p=g.classNames)==null?void 0:p.actionButton)},g.action.label):null)};function WI(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function P6(n,e){const t={};return[n,e].forEach((r,i)=>{const a=i===1,l=a?"--mobile-offset":"--offset",c=a?w6:v6;function h(p){["top","right","bottom","left"].forEach(y=>{t[`${l}-${y}`]=typeof p=="number"?`${p}px`:p})}typeof r=="number"||typeof r=="string"?h(r):typeof r=="object"?["top","right","bottom","left"].forEach(p=>{r[p]===void 0?t[`${l}-${p}`]=c:t[`${l}-${p}`]=typeof r[p]=="number"?`${r[p]}px`:r[p]}):h(c)}),t}const b6=ge.forwardRef(function(e,t){const{invert:r,position:i="bottom-right",hotkey:a=["altKey","KeyT"],expand:l,closeButton:c,className:h,offset:p,mobileOffset:y,theme:g="light",richColors:E,duration:S,style:D,visibleToasts:M=_6,toastOptions:O,dir:J=WI(),gap:G=T6,icons:Z,containerAriaLabel:ae="Notifications"}=e,[se,fe]=ge.useState([]),I=ge.useMemo(()=>Array.from(new Set([i].concat(se.filter(N=>N.position).map(N=>N.position)))),[se,i]),[R,P]=ge.useState([]),[V,x]=ge.useState(!1),[F,b]=ge.useState(!1),[Me,He]=ge.useState(g!=="system"?g:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ye=ge.useRef(null),Ne=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=ge.useRef(null),pe=ge.useRef(!1),ne=ge.useCallback(N=>{fe(K=>{var he;return(he=K.find(ve=>ve.id===N.id))!=null&&he.delete||wr.dismiss(N.id),K.filter(({id:ve})=>ve!==N.id)})},[]);return ge.useEffect(()=>wr.subscribe(N=>{if(N.dismiss){requestAnimationFrame(()=>{fe(K=>K.map(he=>he.id===N.id?{...he,delete:!0}:he))});return}setTimeout(()=>{t6.flushSync(()=>{fe(K=>{const he=K.findIndex(ve=>ve.id===N.id);return he!==-1?[...K.slice(0,he),{...K[he],...N},...K.slice(he+1)]:[N,...K]})})})}),[se]),ge.useEffect(()=>{if(g!=="system"){He(g);return}if(g==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?He("dark"):He("light")),typeof window>"u")return;const N=window.matchMedia("(prefers-color-scheme: dark)");try{N.addEventListener("change",({matches:K})=>{He(K?"dark":"light")})}catch{N.addListener(({matches:he})=>{try{He(he?"dark":"light")}catch(ve){console.error(ve)}})}},[g]),ge.useEffect(()=>{se.length<=1&&x(!1)},[se]),ge.useEffect(()=>{const N=K=>{var he;if(a.every(we=>K[we]||K.code===we)){var Ee;x(!0),(Ee=ye.current)==null||Ee.focus()}K.code==="Escape"&&(document.activeElement===ye.current||(he=ye.current)!=null&&he.contains(document.activeElement))&&x(!1)};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[a]),ge.useEffect(()=>{if(ye.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,pe.current=!1)}},[ye.current]),ge.createElement("section",{ref:t,"aria-label":`${ae} ${Ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},I.map((N,K)=>{var he;const[ve,Ee]=N.split("-");return se.length?ge.createElement("ol",{key:N,dir:J==="auto"?WI():J,tabIndex:-1,ref:ye,className:h,"data-sonner-toaster":!0,"data-sonner-theme":Me,"data-y-position":ve,"data-lifted":V&&se.length>1&&!l,"data-x-position":Ee,style:{"--front-toast-height":`${((he=R[0])==null?void 0:he.height)||0}px`,"--width":`${E6}px`,"--gap":`${G}px`,...D,...P6(p,y)},onBlur:we=>{pe.current&&!we.currentTarget.contains(we.relatedTarget)&&(pe.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||pe.current||(pe.current=!0,ee.current=we.relatedTarget)},onMouseEnter:()=>x(!0),onMouseMove:()=>x(!0),onMouseLeave:()=>{F||x(!1)},onDragEnd:()=>x(!1),onPointerDown:we=>{we.target instanceof HTMLElement&&we.target.dataset.dismissible==="false"||b(!0)},onPointerUp:()=>b(!1)},se.filter(we=>!we.position&&K===0||we.position===N).map((we,Ke)=>{var je,st;return ge.createElement(A6,{key:we.id,icons:Z,index:Ke,toast:we,defaultRichColors:E,duration:(je=O==null?void 0:O.duration)!=null?je:S,className:O==null?void 0:O.className,descriptionClassName:O==null?void 0:O.descriptionClassName,invert:r,visibleToasts:M,closeButton:(st=O==null?void 0:O.closeButton)!=null?st:c,interacting:F,position:N,style:O==null?void 0:O.style,unstyled:O==null?void 0:O.unstyled,classNames:O==null?void 0:O.classNames,cancelButtonStyle:O==null?void 0:O.cancelButtonStyle,actionButtonStyle:O==null?void 0:O.actionButtonStyle,closeButtonAriaLabel:O==null?void 0:O.closeButtonAriaLabel,removeToast:ne,toasts:se.filter(Ft=>Ft.position==we.position),heights:R.filter(Ft=>Ft.position==we.position),setHeights:P,expandByDefault:l,gap:G,expanded:V,swipeDirections:e.swipeDirections})})):null}))}),C6=({...n})=>{const{theme:e="system"}=ZU();return _i.jsx(b6,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...n})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="/firebase-messaging-sw.js",x6="/firebase-cloud-messaging-push-scope",BP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",D6="https://fcmregistrations.googleapis.com/v1",zP="google.c.a.c_id",N6="google.c.a.c_l",O6="google.c.a.ts",V6="google.c.a.e",KI=1e4;var GI;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(GI||(GI={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Dc;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Dc||(Dc={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function L6(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="fcm_token_details_db",M6=5,QI="fcm_token_object_Store";async function F6(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(Jm))return null;let e=null;return(await Tf(Jm,M6,{upgrade:async(r,i,a,l)=>{if(i<2||!r.objectStoreNames.contains(QI))return;const c=l.objectStore(QI),h=await c.index("fcmSenderId").get(n);if(await c.clear(),!!h){if(i===2){const p=h;if(!p.auth||!p.p256dh||!p.endpoint)return;e={token:p.fcmToken,createTime:p.createTime??Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:ys(p.vapidKey)}}}else if(i===3){const p=h;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:ys(p.auth),p256dh:ys(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:ys(p.vapidKey)}}}else if(i===4){const p=h;e={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:ys(p.auth),p256dh:ys(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:ys(p.vapidKey)}}}}}})).close(),await Nm(Jm),await Nm("fcm_vapid_details_db"),await Nm("undefined"),U6(e)?e:null}function U6(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B6="firebase-messaging-database",z6=1,Nc="firebase-messaging-store";let Xm=null;function jP(){return Xm||(Xm=Tf(B6,z6,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Nc)}}})),Xm}async function j6(n){const e=$P(n),r=await(await jP()).transaction(Nc).objectStore(Nc).get(e);if(r)return r;{const i=await F6(n.appConfig.senderId);if(i)return await I_(n,i),i}}async function I_(n,e){const t=$P(n),i=(await jP()).transaction(Nc,"readwrite");return await i.objectStore(Nc).put(e,t),await i.done,e}function $P({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Br=new Ao("messaging","Messaging",$6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(n,e){const t=await R_(n),r=HP(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let a;try{a=await(await fetch(S_(n.appConfig),i)).json()}catch(l){throw Br.create("token-subscribe-failed",{errorInfo:l==null?void 0:l.toString()})}if(a.error){const l=a.error.message;throw Br.create("token-subscribe-failed",{errorInfo:l})}if(!a.token)throw Br.create("token-subscribe-no-token");return a.token}async function q6(n,e){const t=await R_(n),r=HP(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${S_(n.appConfig)}/${e.token}`,i)).json()}catch(l){throw Br.create("token-update-failed",{errorInfo:l==null?void 0:l.toString()})}if(a.error){const l=a.error.message;throw Br.create("token-update-failed",{errorInfo:l})}if(!a.token)throw Br.create("token-update-no-token");return a.token}async function W6(n,e){const r={method:"DELETE",headers:await R_(n)};try{const a=await(await fetch(`${S_(n.appConfig)}/${e}`,r)).json();if(a.error){const l=a.error.message;throw Br.create("token-unsubscribe-failed",{errorInfo:l})}}catch(i){throw Br.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function S_({projectId:n}){return`${D6}/projects/${n}/registrations`}async function R_({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function HP({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==BP&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6=10080*60*1e3;async function G6(n){const e=await Y6(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ys(e.getKey("auth")),p256dh:ys(e.getKey("p256dh"))},r=await j6(n.firebaseDependencies);if(r){if(J6(r.subscriptionOptions,t))return Date.now()>=r.createTime+K6?Q6(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await W6(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return YI(n.firebaseDependencies,t)}else return YI(n.firebaseDependencies,t)}async function Q6(n,e){try{const t=await q6(n.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await I_(n.firebaseDependencies,r),t}catch(t){throw t}}async function YI(n,e){const r={token:await H6(n,e),createTime:Date.now(),subscriptionOptions:e};return await I_(n,r),r.token}async function Y6(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:L6(e)})}function J6(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,a=e.p256dh===n.p256dh;return t&&r&&i&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return X6(e,n),Z6(e,n),e3(e,n),e}function X6(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const a=e.notification.icon;a&&(n.notification.icon=a)}function Z6(n,e){e.data&&(n.data=e.data)}function e3(n,e){var i,a,l,c;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const t=((a=e.fcmOptions)==null?void 0:a.link)??((l=e.notification)==null?void 0:l.click_action);t&&(n.fcmOptions.link=t);const r=(c=e.fcmOptions)==null?void 0:c.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(n){return typeof n=="object"&&!!n&&zP in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(n){if(!n||!n.options)throw Zm("App Configuration Object");if(!n.name)throw Zm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw Zm(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Zm(n){return Br.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=n3(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i3(n){try{n.swRegistration=await navigator.serviceWorker.register(k6,{scope:x6}),n.swRegistration.update().catch(()=>{}),await s3(n.swRegistration)}catch(e){throw Br.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function s3(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${KI} ms`)),KI),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=a=>{var l;((l=a.target)==null?void 0:l.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o3(n,e){if(!e&&!n.swRegistration&&await i3(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Br.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a3(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=BP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l3(n,e){if(!navigator)throw Br.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Br.create("permission-blocked");return await a3(n,e==null?void 0:e.vapidKey),await o3(n,e==null?void 0:e.serviceWorkerRegistration),G6(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u3(n,e,t){const r=c3(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[zP],message_name:t[N6],message_time:t[O6],message_device_time:Math.floor(Date.now()/1e3)})}function c3(n){switch(n){case Dc.NOTIFICATION_CLICKED:return"notification_open";case Dc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d3(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Dc.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(JI(t)):n.onMessageHandler.next(JI(t)));const r=t.data;t3(r)&&r[V6]==="1"&&await u3(n,t.messageType,r)}const XI="@firebase/messaging",ZI="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=n=>{const e=new r3(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>d3(e,t)),e},f3=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>l3(e,r)}};function p3(){Ir(new lr("messaging",h3,"PUBLIC")),Ir(new lr("messaging-internal",f3,"PRIVATE")),In(XI,ZI),In(XI,ZI,"esm2020")}p3();const m3=[{id:"l1",userId:"2",name:"Dr. Sarah Johnson",subject:"Mathematics",price:45,bio:"PhD in Mathematics with 10+ years of teaching experience. Specialized in Calculus and Linear Algebra.",rating:4.8,totalReviews:124,avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150",availability:["Mon","Wed","Fri"]},{id:"l2",userId:"6",name:"Prof. Michael Chen",subject:"Physics",price:50,bio:"Expert in Quantum Physics and Mechanics. Published researcher and passionate educator.",rating:4.9,totalReviews:98,avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150",availability:["Tue","Thu","Sat"]},{id:"l3",userId:"7",name:"Dr. Emily Davis",subject:"Chemistry",price:40,bio:"Organic Chemistry specialist with hands-on lab experience. Making chemistry fun and easy!",rating:4.7,totalReviews:156,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150",availability:["Mon","Tue","Thu"]},{id:"l4",userId:"8",name:"James Wilson",subject:"Computer Science",price:55,bio:"Full-stack developer and CS educator. Specializing in Python, JavaScript, and Data Structures.",rating:4.9,totalReviews:203,avatar:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=150",availability:["Mon","Wed","Fri","Sat"]},{id:"l5",userId:"9",name:"Dr. Maria Garcia",subject:"Biology",price:42,bio:"Molecular Biology PhD. Passionate about genetics and cell biology. Patient and thorough teaching style.",rating:4.6,totalReviews:87,avatar:"https://images.unsplash.com/photo-1573497019940-1c28c88b4f3e?w=150",availability:["Tue","Wed","Fri"]},{id:"l6",userId:"10",name:"David Brown",subject:"English Literature",price:38,bio:"MA in English Literature. Specializing in Shakespeare, Poetry, and Essay Writing.",rating:4.8,totalReviews:142,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150",availability:["Mon","Tue","Thu","Sat"]}],g3=()=>["09:00 AM","10:00 AM","11:00 AM","01:00 PM","02:00 PM","03:00 PM","04:00 PM"].map((e,t)=>({id:`slot-${t}`,time:e,available:Math.random()>.3})),$3=m3.flatMap(n=>{const e=[];for(let t=0;t<14;t++){const r=new Date;r.setDate(r.getDate()+t),e.push({id:`avail-${n.id}-${t}`,lecturerId:n.id,date:r.toISOString().split("T")[0],timeSlots:g3()})}return e}),H3=n=>{switch(n){case"STUDENT":return"/student/dashboard";case"LECTURER":return"/lecturer/dashboard";case"ADMIN":return"/admin/dashboard";case"SUPER_ADMIN":return"/super-admin/dashboard";case"DEVELOPER":return"/developer/dashboard";default:return"/login"}},qP=async()=>{},q3=async()=>{await qP()};function y3(){return z.useEffect(()=>{qP()},[]),_i.jsxs(QU,{children:[_i.jsxs("div",{className:"min-h-screen flex flex-col",children:[_i.jsx("div",{className:"flex-1",children:_i.jsx(WC,{router:qk})}),_i.jsx("footer",{className:"text-center text-gray-500 text-xs py-3",children:"Developed by esystemlk"})]}),_i.jsx(C6,{})]})}ob.createRoot(document.getElementById("root")).render(_i.jsx(y3,{}));export{V3 as A,_3 as B,e0 as C,q3 as D,N3 as E,vh as F,m3 as G,C3 as H,$3 as I,x3 as J,E3 as K,D3 as L,O3 as M,B3 as N,t6 as R,AC as a,v3 as b,e6 as c,T3 as d,yl as e,S3 as f,H3 as g,rF as h,LA as i,_i as j,VP as k,nF as l,F3 as m,U3 as n,L3 as o,M3 as p,ge as q,z as r,I3 as s,j3 as t,z3 as u,ab as v,b3 as w,k3 as x,P3 as y,iF as z};
