function A(t){const o=new Date(`${t.date}T${t.time}`),E=new Date(o.getTime()+3600*1e3),a=i=>i.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",l=`${t.id}@smartlabs`,c=`Class with ${t.lecturerName} - ${t.subject}`,e=`Booking ${t.id}
Student: ${t.studentName}
Lecturer: ${t.lecturerName}
Subject: ${t.subject}`,n=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//SMARTLABS//Booking//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH","BEGIN:VEVENT",`UID:${l}`,`DTSTAMP:${a(new Date)}`,`DTSTART:${a(o)}`,`DTEND:${a(E)}`,`SUMMARY:${c}`,`DESCRIPTION:${e}`,"END:VEVENT","END:VCALENDAR"].join(`\r
`);return new Blob([n],{type:"text/calendar;charset=utf-8"})}async function p(t){const a=(await(await fetch(t)).text()).split(/\r?\n/),l=[];let c=!1,e=null,n=null;const i=u=>{const s=(u.split(":").pop()||u).replace(/[^0-9TZ]/g,"");if(s.length===8){const d=s.substring(0,4),m=s.substring(4,6),I=s.substring(6,8);return new Date(`${d}-${m}-${I}T00:00:00Z`)}const $=s.substring(0,4),D=s.substring(4,6),T=s.substring(6,8),N=s.substring(9,11),f=s.substring(11,13),S=s.substring(13,15)||"00";return new Date(`${$}-${D}-${T}T${N}:${f}:${S}Z`)};for(const u of a){const r=u.trim();r==="BEGIN:VEVENT"?(c=!0,e=null,n=null):r==="END:VEVENT"?(c&&e&&n&&l.push({start:e,end:n}),c=!1,e=null,n=null):c&&(r.startsWith("DTSTART")?e=i(r):r.startsWith("DTEND")&&(n=i(r)))}return l}export{A as b,p as f};
