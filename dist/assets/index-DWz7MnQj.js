import{q as S,j as N,r as c,v as J}from"./index-BpwiqXsp.js";import{a as j,e as h,c as F,u as Q,d as X}from"./index-2VhTRSM0.js";import{u as x,S as U}from"./card-DYsbf8uQ.js";import{P as G}from"./index-BX3OAG78.js";function Z(e){const t=e+"CollectionProvider",[o,n]=j(t),[d,p]=o(t,{collectionRef:{current:null},itemMap:new Map}),E=i=>{const{scope:s,children:l}=i,m=S.useRef(null),a=S.useRef(new Map).current;return N.jsx(d,{scope:s,itemMap:a,collectionRef:m,children:l})};E.displayName=t;const C=e+"CollectionSlot",u=S.forwardRef((i,s)=>{const{scope:l,children:m}=i,a=p(C,l),f=x(s,a.collectionRef);return N.jsx(U,{ref:f,children:m})});u.displayName=C;const r=e+"CollectionItemSlot",I="data-radix-collection-item",R=S.forwardRef((i,s)=>{const{scope:l,children:m,...a}=i,f=S.useRef(null),T=x(s,f),b=p(r,l);return S.useEffect(()=>(b.itemMap.set(f,{ref:f,...a}),()=>void b.itemMap.delete(f))),N.jsx(U,{[I]:"",ref:T,children:m})});R.displayName=r;function g(i){const s=p(e+"CollectionConsumer",i);return S.useCallback(()=>{const m=s.collectionRef.current;if(!m)return[];const a=Array.from(m.querySelectorAll(`[${I}]`));return Array.from(s.itemMap.values()).sort((b,w)=>a.indexOf(b.ref.current)-a.indexOf(w.ref.current))},[s.collectionRef,s.itemMap])}return[{Provider:E,Slot:u,ItemSlot:R},g,n]}var ee=J.useId||(()=>{}),te=0;function ne(e){const[t,o]=c.useState(ee());return h(()=>{o(n=>n??String(te++))},[e]),e||(t?`radix-${t}`:"")}var oe=c.createContext(void 0);function re(e){const t=c.useContext(oe);return e||t||"ltr"}var P="rovingFocusGroup.onEntryFocus",se={bubbles:!1,cancelable:!0},O="RovingFocusGroup",[_,k,ce]=Z(O),[ie,Te]=j(O,[ce]),[ae,ue]=ie(O),K=c.forwardRef((e,t)=>N.jsx(_.Provider,{scope:e.__scopeRovingFocusGroup,children:N.jsx(_.Slot,{scope:e.__scopeRovingFocusGroup,children:N.jsx(le,{...e,ref:t})})}));K.displayName=O;var le=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:d=!1,dir:p,currentTabStopId:E,defaultCurrentTabStopId:C,onCurrentTabStopIdChange:u,onEntryFocus:r,preventScrollOnEntryFocus:I=!1,...R}=e,g=c.useRef(null),i=x(t,g),s=re(p),[l=null,m]=Q({prop:E,defaultProp:C,onChange:u}),[a,f]=c.useState(!1),T=X(r),b=k(o),w=c.useRef(!1),[Y,D]=c.useState(0);return c.useEffect(()=>{const v=g.current;if(v)return v.addEventListener(P,T),()=>v.removeEventListener(P,T)},[T]),N.jsx(ae,{scope:o,orientation:n,dir:s,loop:d,currentTabStopId:l,onItemFocus:c.useCallback(v=>m(v),[m]),onItemShiftTab:c.useCallback(()=>f(!0),[]),onFocusableItemAdd:c.useCallback(()=>D(v=>v+1),[]),onFocusableItemRemove:c.useCallback(()=>D(v=>v-1),[]),children:N.jsx(G.div,{tabIndex:a||Y===0?-1:0,"data-orientation":n,...R,ref:i,style:{outline:"none",...e.style},onMouseDown:F(e.onMouseDown,()=>{w.current=!0}),onFocus:F(e.onFocus,v=>{const $=!w.current;if(v.target===v.currentTarget&&$&&!a){const L=new CustomEvent(P,se);if(v.currentTarget.dispatchEvent(L),!L.defaultPrevented){const y=b().filter(A=>A.focusable),q=y.find(A=>A.active),H=y.find(A=>A.id===l),z=[q,H,...y].filter(Boolean).map(A=>A.ref.current);V(z,I)}}w.current=!1}),onBlur:F(e.onBlur,()=>f(!1))})})}),W="RovingFocusGroupItem",B=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:d=!1,tabStopId:p,...E}=e,C=ne(),u=p||C,r=ue(W,o),I=r.currentTabStopId===u,R=k(o),{onFocusableItemAdd:g,onFocusableItemRemove:i}=r;return c.useEffect(()=>{if(n)return g(),()=>i()},[n,g,i]),N.jsx(_.ItemSlot,{scope:o,id:u,focusable:n,active:d,children:N.jsx(G.span,{tabIndex:I?0:-1,"data-orientation":r.orientation,...E,ref:t,onMouseDown:F(e.onMouseDown,s=>{n?r.onItemFocus(u):s.preventDefault()}),onFocus:F(e.onFocus,()=>r.onItemFocus(u)),onKeyDown:F(e.onKeyDown,s=>{if(s.key==="Tab"&&s.shiftKey){r.onItemShiftTab();return}if(s.target!==s.currentTarget)return;const l=me(s,r.orientation,r.dir);if(l!==void 0){if(s.metaKey||s.ctrlKey||s.altKey||s.shiftKey)return;s.preventDefault();let a=R().filter(f=>f.focusable).map(f=>f.ref.current);if(l==="last")a.reverse();else if(l==="prev"||l==="next"){l==="prev"&&a.reverse();const f=a.indexOf(s.currentTarget);a=r.loop?pe(a,f+1):a.slice(f+1)}setTimeout(()=>V(a))}})})})});B.displayName=W;var fe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function de(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function me(e,t,o){const n=de(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return fe[n]}function V(e,t=!1){const o=document.activeElement;for(const n of e)if(n===o||(n.focus({preventScroll:t}),document.activeElement!==o))return}function pe(e,t){return e.map((o,n)=>e[(t+n)%e.length])}var be=K,Fe=B;function ve(e,t){return c.useReducer((o,n)=>t[o][n]??o,e)}var Ie=e=>{const{present:t,children:o}=e,n=Re(t),d=typeof o=="function"?o({present:n.isPresent}):c.Children.only(o),p=x(n.ref,ge(d));return typeof o=="function"||n.isPresent?c.cloneElement(d,{ref:p}):null};Ie.displayName="Presence";function Re(e){const[t,o]=c.useState(),n=c.useRef({}),d=c.useRef(e),p=c.useRef("none"),E=e?"mounted":"unmounted",[C,u]=ve(E,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const r=M(n.current);p.current=C==="mounted"?r:"none"},[C]),h(()=>{const r=n.current,I=d.current;if(I!==e){const g=p.current,i=M(r);e?u("MOUNT"):i==="none"||(r==null?void 0:r.display)==="none"?u("UNMOUNT"):u(I&&g!==i?"ANIMATION_OUT":"UNMOUNT"),d.current=e}},[e,u]),h(()=>{if(t){let r;const I=t.ownerDocument.defaultView??window,R=i=>{const l=M(n.current).includes(i.animationName);if(i.target===t&&l&&(u("ANIMATION_END"),!d.current)){const m=t.style.animationFillMode;t.style.animationFillMode="forwards",r=I.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=m)})}},g=i=>{i.target===t&&(p.current=M(n.current))};return t.addEventListener("animationstart",g),t.addEventListener("animationcancel",R),t.addEventListener("animationend",R),()=>{I.clearTimeout(r),t.removeEventListener("animationstart",g),t.removeEventListener("animationcancel",R),t.removeEventListener("animationend",R)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(C),ref:c.useCallback(r=>{r&&(n.current=getComputedStyle(r)),o(r)},[])}}function M(e){return(e==null?void 0:e.animationName)||"none"}function ge(e){var n,d;let t=(n=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:n.get,o=t&&"isReactWarning"in t&&t.isReactWarning;return o?e.ref:(t=(d=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:d.get,o=t&&"isReactWarning"in t&&t.isReactWarning,o?e.props.ref:e.props.ref||e.ref)}export{Fe as I,Ie as P,be as R,re as a,Te as b,Z as c,ne as u};
