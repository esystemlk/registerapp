import{u as S,a as E,r as c,j as e}from"./index-BpwiqXsp.js";import{l as B,d as I}from"./db-B2ZkU-j2.js";import{C as i,d,B as m,a as p,b as N}from"./card-DYsbf8uQ.js";import{B as L}from"./badge-CY3m3KkQ.js";import{H as R}from"./HeaderBar-DEc0Xlyh.js";import{C as T}from"./calendar-Bxj2ymvc.js";import{C as O}from"./clock-Df2R-iJr.js";import{U as y}from"./users-6ZoiafKq.js";import{S as U}from"./settings-HEQhktYv.js";import"./createLucideIcon-DNKxwa87.js";function Q(){const{user:t,logout:A}=S(),h=E(),[l,j]=c.useState(new Date);c.useEffect(()=>{(!t||!["LECTURER","ADMIN","SUPER_ADMIN","DEVELOPER"].includes(t.role))&&h("/login")},[t,h]);const[r,D]=c.useState(void 0);c.useEffect(()=>{B().then(s=>{const n=s.find(a=>a.userId===(t==null?void 0:t.id));D(n)})},[t==null?void 0:t.id]);const[x,b]=c.useState([]);c.useEffect(()=>{const s=r==null?void 0:r.id;s&&I(s).then(b)},[r==null?void 0:r.id]);const g=x.filter(s=>{const n=new Date(s.date),a=new Date;return n.toDateString()===a.toDateString()&&s.status==="CONFIRMED"}),F=x.filter(s=>new Date(s.date)>new Date&&s.status==="CONFIRMED"),C=(s=>{const n=s.getFullYear(),a=s.getMonth(),f=new Date(n,a,1),k=new Date(n,a+1,0).getDate(),M=f.getDay(),u=[];for(let o=0;o<M;o++)u.push(null);for(let o=1;o<=k;o++)u.push(o);return u})(l),w=l.toLocaleString("default",{month:"long",year:"numeric"}),v=s=>{if(!s)return!1;const n=new Date(l.getFullYear(),l.getMonth(),s);return x.some(a=>new Date(a.date).toDateString()===n.toDateString()&&a.status==="CONFIRMED")};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f8f9fa"},children:[e.jsx(R,{title:"Lecturer Portal",color:"#0066FF"}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-1",style:{color:"#0066FF"},children:["Welcome, ",t==null?void 0:t.name,"!"]}),e.jsx("p",{className:"text-gray-600",children:"Manage your classes and availability"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsx(i,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(T,{className:"w-6 h-6 mx-auto mb-2",style:{color:"#0066FF"}}),e.jsx("p",{className:"text-2xl font-bold",children:g.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Today"})]})}),e.jsx(i,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(O,{className:"w-6 h-6 mx-auto mb-2",style:{color:"#FFD700"}}),e.jsx("p",{className:"text-2xl font-bold",children:F.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Upcoming"})]})}),e.jsx(i,{children:e.jsxs(d,{className:"p-4 text-center",children:[e.jsx(y,{className:"w-6 h-6 mx-auto mb-2",style:{color:"#10b981"}}),e.jsx("p",{className:"text-2xl font-bold",children:x.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Total"})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs(m,{onClick:()=>h("/lecturer/availability"),className:"h-20 flex flex-col gap-2 text-white",style:{backgroundColor:"#0066FF"},children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("span",{children:"Set Availability"})]}),e.jsxs(m,{variant:"outline",className:"h-20 flex flex-col gap-2",style:{borderColor:"#FFD700",color:"#0066FF"},children:[e.jsx(y,{className:"w-6 h-6"}),e.jsx("span",{children:"My Students"})]})]}),e.jsxs(i,{className:"mb-6",children:[e.jsxs(p,{children:[e.jsxs(N,{className:"flex items-center justify-between",children:[e.jsx("span",{style:{color:"#0066FF"},children:"Calendar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{const s=new Date(l);s.setMonth(s.getMonth()-1),j(s)},children:"←"}),e.jsx(m,{variant:"outline",size:"sm",onClick:()=>{const s=new Date(l);s.setMonth(s.getMonth()+1),j(s)},children:"→"})]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:w})]}),e.jsxs(d,{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(s=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-2",children:s},s))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:C.map((s,n)=>{const a=v(s);return e.jsx("div",{className:`aspect-square flex items-center justify-center text-sm rounded ${s?a?"font-semibold text-white":"text-gray-700":""}`,style:a?{backgroundColor:"#0066FF"}:s?{backgroundColor:"#f9fafb"}:{},children:s},n)})})]})]}),e.jsxs(i,{children:[e.jsx(p,{children:e.jsx(N,{style:{color:"#0066FF"},children:"Today's Classes"})}),e.jsx(d,{children:g.length>0?e.jsx("div",{className:"space-y-3",children:g.map(s=>e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold",children:s.studentName}),e.jsx(L,{style:{backgroundColor:"#10b981",color:"white"},children:s.time})]}),e.jsx("p",{className:"text-sm text-gray-600",children:s.subject})]},s.id))}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No classes scheduled for today"})})]})]})]})}export{Q as default};
